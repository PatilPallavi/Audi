/*!
* @license (c) 2017 Das BÃ¼ro am Draht GmbH
* @releaseVersion:16.8.3.6
*/
define("core/signal",["eventemitter"],function(e){"use strict";var t={},n={__:t};return t.defaultConfig={wildcard:!0,newListener:!1,maxListeners:0},e.prototype.one=e.prototype.once,e.prototype.trigger=e.prototype.emit,t.defaultEmitter=new e(t.defaultConfig),t.defaultEmitter.trigger=function(){t.defaultEmitter.emit.apply(this,arguments)},t.emitters={"default":t.defaultEmitter},n.getEmitter=function(n){return"undefined"==typeof n?t.emitters["default"]:(t.emitters[n]=t.emitters[n]||new e(t.defaultConfig),t.emitters[n])},n}),define("events",[],function(){"use strict";return{VERSION_LOAD_COMPLETE:"version.load.complete",APP_READY:"app.ready",APP_INITIALIZED:"app.initialized",AVE_AVAILABLE:"ave.available",AVE_STREAM_READY:"ave.stream.ready",CONFIG_RESET:"configuration.reset",CONFIG_UPDATE:"configuration.update",CONFIG_START:"configuration.start",CONFIG_PARSED:"configuration.parsed",CONFIG_ITEM_CLICKED:"configuration.item-clicked",DOM_UPDATED:"dom.updated",TRIGGER_DOM_UPDATE:"trigger.dom.update",CONFIG_ADOPT:"configuration.adopt-new",CONFIG_PDF:"configuration.pdf",CONFIG_SEND:"configuration.send",CONFIG_SAVED:"configuration.saved",CONFIG_CONFLICT_OPEN:"configuration.conflict-open",CONFIG_NON_CONFLICTING:"configuration.non-conflicting",CONFIG_CHANGEREQUEST_START:"configuration.change-request-start",CONFIG_CHANGEREQUEST_END:"configuration.change-request-end",CONFIG_CONFLICT_CHECK:"configuration.conflict-check",CONFLICT_CLOSE:"conflict.resolve",TRANSFER_CLOSE:"transfer.cancel",FORM_FINISHED:"form.finished",FORM_LOADED:"form.loaded",HASH_CHANGE:"hash.change",FORM_ERROR:"form.error",LAYER_OPEN:"layer.open",LAYER_CLOSE:"layer.close",LAYER_INSERTED:"layer.inserted",LAYER_LOADED:"layer.loaded",LAYER_STATIC_OPEN:"layer.static.open",LAYER_BEFORE_CLOSE_ALL:"layer.before.closeall",LAYER_BEFORE_CLOSE:"layer.before.close",LAYER_CLOSED:"layer.closed",EQUIPMENT_SEARCH_LAYER_LOADED:"equipmentSearchlayer.loaded",EQUIPMENT_SEARCH_LAYER_RESIZED:"equipmentSearchlayer.resized",RENDERINGLAYER_LOADED:"renderinglayer.loaded",RENDERINGLAYER_RESIZED:"renderinglayer.resized",STARTLAYER_OPEN:"startlayer.open",STARTLAYER_CLOSE:"startlayer.close",TRANSFERLAYER_CLOSED:"transferlayer.closed",SEARCH_OPEN:"search.nemo.open",SEARCH_CLOSE:"search.nemo.close",SEARCH_LOAD_AUDICODE:"search.load.audicode",MENUFLYOUT_OPEN:"menuflyout.open",MENUFLYOUT_CLOSE:"menuflyout.close",PAGE_NAV:"page.nav",PAGE_OPEN:"page.open",PAGE_LEAVE:"page.leave",PAGE_READY:"page.ready",PAGE_INSERTED:"page.inserted",PAGE_LOADED:"page.loaded",PAGE_ANIMATION_START:"page.animation.start",PAGE_ANIMATION_COMPLETE:"page.animation.complete",MEDIAGALLERY_CATEGORY_CHANGED:"mediagallery.category.changed",MEDIAGALLERY_ITEM_CHANGED:"mediagallery.item.changed",MEDIAGALLERY_RESIZED:"mediagallery.resized",MEDIAGALLERY_SLIDED:"mediagallery.slided",UPDATE_VIEW_STATE:"stage.updateViewState",STAGE_RENDERIMAGE_UPDATED:"stage.renderimage.updated",EXTERNAL_EDITOR:"configuration.external.nemo.configurator",ERROR:"nemo.error",NOTIFICATION:"nemo.notification",MYAUDI_LOGIN:"myaudi.login",MYAUDI_LOGOUT:"myaudi.logout",CONTENT_RESIZE:"content.resize",AUDICODE_DELETED:"audicode.deleted",AUDICODE_SUCCESS:"audicode.success",AUDICODE_FAILED:"audicode.failed",TEASER_ACTIVATED:"teaserActivated",TEASER_ALL_ACTIVATED:"allTeasersActivated",RESET_POSTERVIEW:"mss.reset.posterview",STOCKCAR_UPDATE:"stck.update",SC_UPDATE_VIEW:"sc:update:view",SC_UPDATE_VIEW_COUNTS:"sc:update:view:counts",SC_RESET_RESULT_COUNT:"sc:reset:result:counts",SC_UPDATE_VIEW_RANGE_FILTER:"sc:update:view:range:filter",SC_UPDATE_VIEW_FAVORITES:"sc:update:view:favorites",SC_DELETE_VIEW_FAVORITE:"sc:delete:view:favorite",SC_DELETE_OUTDATET_FAVORITE:"sc:delete:outdatet:favorite",SC_RESET_VIEW:"sc:reset:view",SC_UPDATE_LOCATION_VIEW:"sc:update:location:view",SC_ERROR_GPS:"sc:error:gps",SC_UPDATE_VEHICLES:"sc:increment:vehicles",SC_UPDATE_LOCATION_MODEL:"sc:update:location:model",SC_UPDATE_LOCATION_FILTER:"sc:update:location:filter",SC_COMPARE_UPDATE:"sc:compare:update",SC_VERSION_LOADED:"sc:version:loaded"}}),define("configurator/ajax",["es6-promise"],function(e){"use strict";window.i18n=window.i18n||{};var t={},n={__:t};t.oDefaults={xhrTimeout:2e3,options:{withCredentials:!0,requestMethod:"GET",contentType:"json"},defaultHeaders:{"X-Requested-With":"XMLHttpRequest",contentType:"application/x-www-form-urlencoded",accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}}},t.isIE9OrBelow=function(){return/MSIE\s/.test(navigator.userAgent)&&parseFloat(navigator.appVersion.split("MSIE")[1])<10};var a=JSON?JSON.parse:jQuery.parseJSON;return t.getRequest=function(e,a,i){return e?new Promise(function(r,o){var s,l,c,u,d,m=jQuery.extend(!0,{},t.oDefaults.options),g=!1,f=!1,p=null;if(i&&(m=jQuery.extend(!0,m,i)),g="POST"===m.requestMethod.toUpperCase(),g||(s=t.serializeGetParams(e,a)),s=s||e,f=n.isCrossDomainRequest(s),l=f===!0?t.createCORSRequest(m.requestMethod,s):t.createPlainRequest(m.requestMethod,s),null===l)return void o(new Error(window.i18n["error.message.XHR_TIMEOUT"]||"No CrossDomain-XHR (CORS) available!!!"));g&&(p=t.serializeData(a)),t.setHeaders(l,m,p&&p.length||0),t.setCredentials(l,m),t.hasOnLoadEvent(l)?(l.onload=function(){clearTimeout(c),c=null,200===l.status&&l.responseText||t.isIE9OrBelow()&&l.responseText&&!l.status?r(l.responseText):(u=l.statusText,l.aborted!==!0||u||(u=window.i18n["error.message.XHR_REQUEST_ABORTED"]||"Request aborted"),o(new Error(u)))},l.ontimeout=function(){l.abort(),l.aborted=!0,o(new Error((window.i18n["error.message.XHR_TIMEOUT"]||"XHR Timeout Error after ")+t.oDefaults.xhrTimeout+" ms"))}):(l.onreadystatechange=function(){l.aborted!==!0&&4===l.readyState&&(200===l.status?r(l.responseText):(u=l.statusText,o(new Error(u))))},l.ontimeout=function(){l.abort(),l.onreadystatechange=function(){},l.onerror&&l.onerror()}),l.onerror=function(){o(new Error("Network Error"))};var d=0;t.isXDomainRequest(l)?(d=200,setTimeout(function(){l.send(p||null)},d)):l.send(p||null),c=setTimeout(l.ontimeout,t.oDefaults.xhrTimeout+d)}):Promise.reject(new TypeError("AJAX: URL param is missing"))},t.hasOnLoadEvent=function(e){return e.constructor===XMLHttpRequest||null===e.onload&&t.isIE9OrBelow()?!0:!1},t.isXDomainRequest=function(e){return"undefined"!=typeof XDomainRequest&&e.constructor&&e.constructor===XDomainRequest?!0:!1},t.isTrueObject=function(e){return"object"!=typeof e||e.length?!1:!0},t.isArray=function(e){return"object"==typeof e&&void 0!==e.length?!0:!1},t.serializeData=function(e){var n,a,i,r,o=[];if(void 0===e||null===e)return null;if("object"==typeof e){if(t.isArray(e)){if(e[0]&&t.isTrueObject(e[0])){for(r=e.length-1;r>=0;r--)e[r].name&&void 0!==e[r].value&&(a=e[r].name,i=e[r].value,o.unshift(encodeURIComponent(a)+"="+encodeURIComponent(i)));return o=o.join("&").replace(/%20/g,"+"),o.length?o:null}return null}if(t.isTrueObject(e))for(n in e)e.hasOwnProperty(n)&&o.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return o=o.join("&").replace(/%20/g,"+"),o.length?o:null}return"string"==typeof e?e:null},t.serializeGetParams=function(e,n){var a;return n&&(a=t.serializeData(n))?(a=e.indexOf("?")>0?"&"+a:"?"+a,a=e+a):e},t.setHeaders=function(e,n,a){var i,r={};r.Accept=r.Accept||t.oDefaults.defaultHeaders.accept[n.contentType]||t.oDefaults.defaultHeaders.accept["*"],r["Content-type"]=t.oDefaults.defaultHeaders.contentType,a>0&&(r["Content-type"]="application/x-www-form-urlencoded");try{for(i in r)r.hasOwnProperty(i)&&"setRequestHeader"in e&&e.setRequestHeader(i,r[i])}catch(o){console.error("AJAX setRequestHeader failed:"+o)}},t.setCredentials=function(e,t){"undefined"!=typeof t.withCredentials&&"undefined"!=typeof e.withCredentials&&(e.withCredentials=!!t.withCredentials)},t.createPlainRequest=function(e,n){var a=new XMLHttpRequest;return a.open(e,n),a.timeout=t.oDefaults.xhrTimeout,a},t.createCORSRequest=function(e,n){var a=new XMLHttpRequest;return"withCredentials"in a?(a.open(e,n,!0),a.timeout=t.oDefaults.xhrTimeout):"undefined"!=typeof XDomainRequest?(a=new XDomainRequest,a.open(e,n),a.onprogress=function(){},a.timeout=t.oDefaults.xhrTimeout):a=null,a},n.getJSON=function(e,n,i){return t.getRequest(e,n,i).then(function(e){return"string"==typeof e?a(e):e})["catch"](function(t){throw console.info("getJSON failed for","'"+e+"'","Error: ",t.message?t.message:t),t})},n.getContent=function(e,n,a){return t.getRequest(e,n,a)},n.isCrossDomainRequest=function(e){if(!e||e.indexOf("http")<0)return!1;var t=window.location.origin||window.location.protocol+"//"+window.location.hostname;return e.indexOf(t)<0},n.getJSONP=function(e){return new Promise(function(n,a){var i,r,o,s=t.oDefaults.xhrTimeout,l="jsonp_callback",c=window.setTimeout(function(){window[l]=function(){},a("JSONP Error")},s);window[l]=function(e){window.clearTimeout(c),n(e)},e.indexOf(l)<0&&(r=e.indexOf("?")<0?"?":"&",i=e+r+"callback="+l),o=document.createElement("script"),o.type="text/javascript",o.async=!0,o.src=i||e,document.getElementsByTagName("head")[0].appendChild(o)})},n}),define("router-state",[],function(){"use strict";var e=function(e,t){this.pathname=e||"",this.hash=t||"",this.changes=[],this.init()};return e.URL_PARAM_SEPARATOR="&",e.URL_PAGE_SEPARATOR="~_~",e.VERSION="0.2.1",e.prototype.init=function(e,t){var n;t&&(this.hash=t),this.hashObjects=this.parseHash(this.hash),this.attrs={};for(n in this.hashObjects)"page"===n?this.hashObjects.page!==this.pathname&&this.changes.push([n,this.hashObjects[n],1]):n.match(/^data/g)?this.attrs[n]=this.hashObjects[n]:this.changes.push([n,this.hashObjects[n],1])},e.prototype.update=function(e){var t,n,a=this.hashObjects;this.hash=e,this.hashObjects=this.parseHash(e),this.changes=[],this.currentAttrs=this.attrs||{},this.attrs={};for(n in this.hashObjects)n.match(/^data/g)?this.attrs[n]=this.hashObjects[n]:this.hashObjects[n]!==a[n]&&this.changes.push([n,this.hashObjects[n],1]);for(t in a)this.hashObjects[t]||"page"===t||this.changes.push([t,a[t],0]);!this.hashObjects.page&&a.page&&(this.hashObjects.page=this.pathname,this.changes.push(["page",this.pathname,1]))},e.prototype.parseHash=function(t){var n,a,i,r,o={};t=t||"",t.match(/^#/)&&(t=t.substring(1));var s,l,c;if(t){n=t.split(e.URL_PAGE_SEPARATOR),i=n.length;var u,r=/\+/g,d=/([^&=]+)=?([^&]*)/g,m=function(e){return decodeURIComponent(e.replace(r," "))};for(a=0;l=n[a],i>a;a++)for(;null!==(u=d.exec(l));)s=m(u[1]),c=m(u[2]),o[s]=c}return o},e.prototype.getChanges=function(){var e=this.changes;return this.changes=[],e},e.prototype.getAttrs=function(){var e=this.attrs||{};return e},e.prototype.getCurrentAttrs=function(){var e=this.currentAttrs||{};return e},e}),define("router",["jquery","router-state","events","core/signal"],function(e,t,n,a){"use strict";var i={},r={__:i},o=!1,s=!1;return r.history_available=function(){return!(!window.history||!history.pushState)}(),i.registered=[],i.newHashString=function(e,n,a,r,o){var s,l,c,u,d={};if(r=r||"open",o=o||{},!n)return e;d=i.state.parseHash(e),"close"===r?void 0!==d[n]&&delete d[n]:d[n]=a,s=[];for(c in d)if(d[c]){if("close"===r&&c.match(/data-/))continue;l=d[c],l&&s.push(c+"="+l)}for(u in o)o[u]&&s.push("data-"+u+"="+o[u]);var m;return m=new RegExp(t.URL_PAGE_SEPARATOR).test(e)?s.join(t.URL_PAGE_SEPARATOR):s.join(t.URL_PARAM_SEPARATOR)},i.getChannelAttributes=function(e,t){var n,a,i,r={},o=e.attributes.length;for(i=o-1;i>-1;i--)a=e.attributes[i].nodeName,a.match(/^data/)&&a.match(t)&&(n=a.replace(/^data-/,""),r[n]=e.attributes[i].nodeValue);return r},i.publishChanges=function(e,t,a){var r,o,s,l,c,u,d;for(u=0,d=e.length;d>u;u++)r=e[u],"page"===r[0]?(s=0===r[2]?location.pathname:r[1],i.eventBus.emit(n.PAGE_OPEN,{pathname:s})):(o=0===r[2]?".close":".open",l={},l[r[0]]=r[1],c=r[0]+o,i.eventBus.emit(c,[l,t,a]))},i.hashIsEmpty=function(e){var t="";return e&&(t=e),0===t.length},i.hashHasRegex=function(e,t){return t.test(e)},i.hasInvalidHashParam=function(e){var t=/\/\//gi,n=!1;return e&&(e.indexOf("=")>0&&(e=e.split("=")[1]),n=i.hashIsEmpty(e),n=n===!0?!0:i.hashHasRegex(e,t)),n},i.tryHashUpdate=function(e){s=!1,i.eventBus.emit(n.PAGE_LEAVE),s||(e?(o=!1,location.hash=e):(o=document.body.scrollTop,location.hash=""))},i.createState=function(e,n){return n=n||"",e=e||"",new t(e,n)},i.initialize=function(){if(i.eventBus=a.getEmitter(),i.hasInvalidHashParam(location.hash))return console.error("invalid hash param",location.hash),i.eventBus.emit(n.ERROR),location.hash=location.hash.split("#")[0],!1;i.state=i.createState(location.pathname,location.hash);var e=function(){i.publishChanges(i.state.getChanges(),i.state.getAttrs(),i.state.getCurrentAttrs())};window.setTimeout(e,100);var t=window.location.pathname.split("/");t.pop(),t.push(" "),t.join("/"),SETUPS.set("nemo.core.router.pathBase",t.join("/").split(" ")[0]),window.onhashchange=function(){return i.hasInvalidHashParam(location.hash)?(console.error("invalid hash param",location.hash),i.eventBus.emit(n.ERROR),location.hash=location.hash.split("#")[0],!1):(o&&(document.body.scrollTop=o,console.log("scrollTop is "+o)),i.eventBus.emit(n.HASH_CHANGE,location.hash),i.state.update(location.hash),void i.publishChanges(i.state.getChanges(),i.state.getAttrs(),i.state.getCurrentAttrs()))}},i.reset=function(){i.state=this.createState(location.pathname,""),i.registered=[]},i.addUrlSelector=function(e,t){var n=e.lastIndexOf(".html"),a=e.substring(0,n)+"."+t+e.substring(n);return a},i.getPreviousPageData=function(e){return{pathName:e.pathname,hashIdentifier:e.hash&&e.hash.indexOf("page=")>=0?"page":"",hashShort:e.hash&&e.hash.indexOf("page=")>=0?e.hash.split("page=")[1]:"",hash:e.hash,url:e.pathname+e.hash}},r.register=function(t,n,a){var r,o;a=a||"open",i.registered.push([t,n,a]),console.info("ROUTER.register++++ selector: "+t+", keyName: "+n+", action: "+a),i.legacyEventBus=e("body"),i.legacyEventBus.on("click",t,function(t){var s,l,c=e(this);return s="A"===t.target.tagName?e(t.target):e(t.target).closest("a"),0!==e("body.nm-layer-iframelayer").length&&(console.log("IframelayerFallback-Mode"),s.hasClass("nm-layerLink"))?(l=e(s).attr("href"),l.indexOf(".iframelayer.")<0&&(l=i.addUrlSelector(l,"iframelayer"),e(s).attr("href",l)),!0):s.hasClass("js-link-extern")?!0:0!==e("body.nm-layer-fallback").length?(console.log("Fallback-Mode"),!0):(t.preventDefault(),e(t.target).hasClass("j-stop-propagation")&&t.stopPropagation(),r=c.attr("href")?c.attr("href"):c.attr("data-href"),o=i.getChannelAttributes(c[0],n),"undefined"==typeof r&&(r=e(t.target).parents("a").attr("href")),i.previousPage=i.getPreviousPageData(window.location),void i.tryHashUpdate(i.newHashString(location.hash,n,r,a,o)))})},r.open=function(e,t){i.tryHashUpdate(i.newHashString(location.hash,e,t,"open"))},r.close=function(e,t){i.tryHashUpdate(i.newHashString(location.hash,e,t,"close"))},r.getPreviousPage=function(){return i.previousPage?i.previousPage:null},r.getState=function(){return i.state},r.getRegistered=function(){return i.registered},r.initializePromise=function(e){return new Promise(function(t){i.eventBus=e,i.initialize(),t("router.js")})},r}),define("configurator/dpu-model",["jquery","events","configurator/ajax"],function(e,t,n){"use strict";var a={},i=!1,r={__:a};return a.oDefaults={actionsLookup:{itemAdd:"set",removeItem:"remove",itemRemove:"remove"}},a.configurationStartType="default",a.configurationContinued=!1,a.dataInitialized=!1,a.storage={configuration:null,conflicts:null,transfers:null,items:null,defaultPrString:null,header:null,families:null,searchstopwords:null,modelsInfo:null},a.sendResetRequest=function(){var e=r.getDpuUrl()+"configuration",t={context:r.getContext(),ids:a.getDefaultPrString()};return a.isDebugMode()&&(t.dpu_extra="messages"),n.getJSON(e,t).then(a.checkDPUresponseStatus)},r.changeRatePriceMode=function(e){return new Promise(function(t,i){var o,s,l,c,u,d;return u=r.getHeader(),s=u&&u.mode?u.mode:"price",s===e?(i(new TypeError("Rate/Price mode did not change")),null):(l=r.getContext(),d=r.getPrString(),e="rate"===e?"rate":"price",c=r.getSubsessionID()?"subsession="+r.getSubsessionID()+"&":"",o=r.getDpuUrl()+"configuration?"+c+"context="+l+"&ids="+d+"&mode="+e,void n.getJSON(o).then(a.checkDPUresponseStatus).then(function(e){var n=a.setConfigurationRaw(e);n=!0,t(n)},function(e){i(new TypeError("Error switching priceRateMode: "+e.message))}))})},a.sendChangeRequest=function(e){var t=r.getDpuUrl()+"configuration",i=a.generateRequestData(e);return n.getJSON(t,i).then(a.checkDPUresponseStatus)},a.generateRequestData=function(e){var t,n,i={};i.context=r.getContext(),i.ids=r.getPrString(),t=a.oDefaults.actionsLookup[e.action]||"missing_action";var o=e.id;return e.count&&(o+="*"+e.count),i[t]=o,n=r.getSubsessionID(),n&&(i.subsession=n),a.isDebugMode()&&(i.dpu_extra="messages"),i},a.isDebugMode=function(){var e=document.querySelector("html"),t="nm-state-is-debug";return new RegExp("(^| )"+t+"( |$)","gi").test(e.className)},r.getVersion=function(){var e=r.getHeader();return e&&e.version?e.version:null},r.getStaticVersion=function(){var e=SETUPS.get("nemo.staticversion");return e?e:null},r.isInitialized=function(){return a.dataInitialized},r.getMemcacheVersion=function(){var e="",t=r.getDpuHeader();if(t){t.version&&(e=t.version),t.taggedVersion?e=t.taggedVersion:t.marketVersion&&(e=t.marketVersion);var n=!!t.taggedVersion&&!!t.marketVersion;n&&t.manualRevision&&parseInt(t.manualRevision,10)>0&&(e+="."+t.manualRevision)}var a=r.getStaticVersion(),i=SETUPS.get("nemo.build.time");return i&&a&&i!==a&&(e+="."+a),e&&0===e.toString().indexOf(".")&&(e=e.substring(1)),e},r.getContext=function(){var e=r.getHeader();return e&&e.context?e.context:null},r.getSubsessionID=function(){var e=r.getHeader();return e&&e.subsession?e.subsession:null},r.setSubsessionID=function(e){a.storage.header.subsession=e},r.getPrString=function(){var e=r.getConfiguration();return e&&e.prstring?e.prstring:null},a.getDefaultPrString=function(){return a.storage.defaultPrString||null},a.setDefaultPrString=function(e){a.storage.defaultPrString=e||null},r.handleConfigurationResponse=function(e){var t=a.setConfigurationRaw(e);return t},r.adoptConfiguration=function(e){return new Promise(function(t,n){var i=a.setConfigurationRaw(e);t(i)})},a.setPrice=function(e){e&&e.configuration&&e.configuration.prices&&e.configuration.prices.rotr&&(a.storage.configuration.rotrprice=e.configuration.prices.rotr)},a.setConfigurationRaw=function(e){var t=!0,n=r.getPrString();if(a.setHeader(e),a.setConfiguration(e),a.setPrice(e),a.setItems(e),a.setFamilies(e),a.storage.searchstopwords=e.searchstopwords||a.storage.searchstopwords||null,a.setConflictsAndTransfers(e),!e.configuration)return!1;if(!a.getDefaultPrString()){var i=SETUPS.get("nemo.default.prstring")||e.configuration.prstring;a.setDefaultPrString(i)}return n&&n===r.getPrString()&&(t=!1),t},a.setFamilies=function(t){t&&t.families&&(a.storage.families=e.extend(!0,a.storage.families,t.families))},r.getFamilies=function(){return a.storage.families||null},a.setConflictsAndTransfers=function(e){a.storage.conflicts=e.conflicts||null,a.storage.transfers=e.transfers||null},a.setConfiguration=function(t){a.storage.configuration=e.extend(!1,a.storage.configuration,t.configuration)},a.setHeader=function(t){if(t&&t.header){var n=a.storage&&a.storage.header&&a.storage.header.version?{version:a.storage.header.version}:{};a.storage.header=e.extend(!0,a.storage.header,t.header,n)}},a.setItems=function(t){var n,i;if("full"===t.itemsUpdateMode&&t.items)for(n in a.storage.items)a.storage.items.hasOwnProperty(n)&&a.storage.items[n].status&&(a.storage.items[n].status="00000");else{console.log("DPU_MODEL.setItems::incrmental updateâ¦");for(i in t.items)t.items[i].packageDescription||(t.items[i].packageDescription="")}for(i in t.items)t.items[i].subname?t.items[i].subname="("+t.items[i].subname+")":t.items[i].subname="";a.storage.items=e.extend(!0,a.storage.items,t.items);for(n in a.storage.items)a.storage.items.hasOwnProperty(n)&&("11001"===a.storage.items[n].status||"10011"===a.storage.items[n].status)&&(a.storage.items[n].price=window.i18n?window.i18n.standard||"***Serie***":"***Serie***")},a.sendVersionRequest=function(){var e=r.getDpuUrl()+"version",t=r.getCarline();return t?n.getJSON(e,{context:r.getContext(),carline:t}).then(a.checkDPUresponseStatus):Promise.reject(new TypeError("no carline defined for version request"))},a.handleVersionResponse=function(e){a.storage.header=e.header,a.eventBus.emit(t.VERSION_LOAD_COMPLETE)},a.sendCarinfoRequest=function(){var e=a.getCarinfoUrl();return n.getJSON(e).then(a.checkDPUresponseStatus)},a.handleCarinfoResponse=function(e){console.log("handleCarinfoResponse",e,r.isConfigurationStarted()),r.isConfigurationStarted()?(a.setFamilies(e),a.updateItemsFromCarinfo(e.items)):r.handleConfigurationResponse(e)},a.sendModelsinfoRequest=function(){var e=a.getModelsinfoUrl();return n.getJSON(e).then(a.checkDPUresponseStatus)},a.handleModelsinfoResponse=function(e){console.log("handleModelsinfoResponse",e,r.isConfigurationStarted()),a.setModelsInfo(e.models)},a.setModelsInfo=function(e){a.storage.modelsInfo=e||null},r.getModelsInfo=function(e){if(e){var t=a.storage.modelsInfo,n=t?t[e]:null;return n||null}return a.storage.modelsInfo||null},a.updateItemsFromCarinfo=function(t){var n=e.extend(!0,{},r.getItems());return t?(a.storage.items=t,void(a.storage.items=e.extend(!0,a.storage.items,n))):(console.log("Carinfo Items missing!"),!1)},a.handleAjaxError=function(e){console.error("Error",e)},a.getCarinfoUrl=function(){var e=SETUPS.get("nemo.url.carinfo");return e?e=e.split(".json").join("."+r.getMemcacheVersion()+".json"):null},a.getModelsinfoUrl=function(){var e=SETUPS.get("nemo.url.modelsinfo");return e?e=e.split(".json").join("."+r.getMemcacheVersion()+".json"):null},a.setLoginState=function(e){var t=r.getHeader();t&&(t["logged-in"]=e)},r.sendCarstoreRequest=function(t,i){if(i&&""!==i&&void 0!==i||(i={}),i.slot&&""!==i.slot&&void 0!==i.slot||(i.slot=null),!t||""===t)return Promise.reject(new TypeError("No 'actionStr' given!"));var o=r.getDpuUrl()+"carstore",s={action:t,context:r.getContext(),subsession:r.getSubsessionID()};return s=e.extend(s,i),n.getJSON(o,s).then(a.checkDPUresponseStatus)},a.getFilteredPrNumbersFromCurrentConfig=function(e){var t,n,a,i,o,s=r.getPrString().split("|"),l=[];for(t=0,a=s.length,i=e.length;a>t;t++){for(o=!0,n=0;i>n;n++)s[t].indexOf(e[n])>-1&&(o=!1);o===!0&&l.push(s[t])}return l},r.sendRenderServiceRequest=function(e,t,i,o){var s=r.getDpuUrl()+"stateless-render-service",l=a.getFilteredPrNumbersFromCurrentConfig(e),c={context:r.getContext(),ids:l.join("|"),"render-prnrs":t,"render-views":i,"render-sizes":o,subsession:r.getSubsessionID()};return n.getJSON(s,c).then(a.checkDPUresponseStatus)},r.sendCarstoreHistoryRequest=function(t){t&&""!==t&&void 0!==t||(t={}),t.slot&&""!==t.slot&&void 0!==t.slot||(t.slot=null);var a=r.getDpuUrl()+"history",i={context:r.getContext(),subsession:r.getSubsessionID()};return i=e.extend(i,t),n.getJSON(a,i)},r.setLogin=function(e,t){return new Promise(function(n,i){"boolean"==typeof e&&t?(r.setSubsessionID(t),a.setLoginState(e),n(e)):(a.setLoginState(!1),i(new TypeError("login failure")))})},r.requestConfigurationChange=function(e){return new Promise(function(t,n){var i=a.sendChangeRequest(e);i.then(function(e){t(r.handleConfigurationResponse(e))},function(e){n(e)})})},r.requestConfigurationReset=function(){return new Promise(function(e,t){var n=a.sendResetRequest();n.then(function(t){e(r.handleConfigurationResponse(t))},function(e){t(e)})})},r.setItemSelectionMethod=function(e,t){var n=r.getItems();n&&n[e]&&(t?n[e].selectionMethod=t:n[e].selectionMethod=null)},r.requestTransferOrConflictResolve=function(e){return new Promise(function(t,i){var o=n.getJSON(e).then(a.checkDPUresponseStatus);o.then(function(e){t(r.handleConfigurationResponse(e))},function(e){i(e)})})},r.loadConfigurationByAudiCode=function(e){"undefined"!=typeof e&&(e=e.toUpperCase());var t=r.getDpuUrl()+"audicode";return n.getJSON(t,{context:r.getContext(),audicode:e}).then(a.checkDPUresponseStatus)},r.generateAudiCode=function(t){t&&""!==t&&void 0!==t||(t={});var i=r.getDpuUrl()+"audicode",o={context:r.getContext(),subsession:r.getSubsessionID(),ids:r.getPrString()};return o=e.extend(o,t),n.getJSON(i,o).then(a.checkDPUresponseStatus)},r.loadConfigurationByPrString=function(e,t){var i=r.getDpuUrl()+"configuration",o={context:r.getContext(),ids:e};return t&&(o.subsession=t),n.getJSON(i,o).then(a.checkDPUresponseStatus)},r.getHeader=function(){return a.storage.header||null},r.getSearchStopWords=function(){return a.storage.searchstopwords||null},r.transferCompleted=function(){a.storage.transfers=null},r.fireDataInitializationChain=function(){return a.dataInitialized=!1,a.sendVersionRequest().then(a.handleVersionResponse).then(a.getSignedLink).then(a.sendCarinfoRequest).then(a.handleCarinfoResponse).then(a.sendModelsinfoRequest).then(a.handleModelsinfoResponse).then(function(){a.dataInitialized=!0})},a.initialize=function(){i||(i=!0,a.clearConfigurationData({prstring:SETUPS.get("nemo.default.prstring"),header:SETUPS.get("nemo.default.header"),configuration:SETUPS.get("nemo.default.configuration"),items:SETUPS.get("nemo.minimal.carinfoitems")||{}}))},r.getConflicts=function(){return a.storage.conflicts||null},r.getDpuHeader=function(){return a.storage.header||null},r.getTransfers=function(){return a.storage.transfers||null},r.getRecommendations=function(){return a.storage.configuration.recommendations||[]},r.getConfiguration=function(){return a.storage.configuration||null},r.getItems=function(){return a.storage.items||null},r.getCarline=function(){var e=null,t=r.getConfiguration();return e=t&&t.carline?t.carline:SETUPS.get("nemo.default.carline")||null},r.getDpuUrl=function(){return SETUPS.get("nemo.url.dpu")||null},r.isConfigurationStarted=function(){return a.configurationStartType&&"default"!==a.configurationStartType},r.getFamilies=function(){return a.storage.families||null},r.hasCustomConfiguration=function(){return r.isConfigurationStarted()&&a.getDefaultPrString()!==r.getPrString()},r.isContinuedConfiguration=function(){return a.configurationContinued},a.getSignedLink=function(){var e=SETUPS.get("nemo.url.preview");if(e){var t=n.getJSON(e).then(a.checkDPUresponseStatus);return t.then(function(e){a.handleSignedLinkResponse(e)}).then(void 0,function(e){console.warn("loading signedPreviewUrl failed: "+e.message)})}return Promise.resolve("no signedPreviewUrl available")},a.handleSignedLinkResponse=function(e){console.log("Signed Link loaded",e),a.setConfigurationRaw(e)},r.switchCarline=function(e,t,n){if(t&&e){SETUPS.set("nemo.default.carline",e),SETUPS.set("nemo.url.carinfo",t),SETUPS.set("nemo.url.modelsinfo",n);var i=r.getContext(),o={configuration:{carline:e},header:{context:i}};return a.clearConfigurationData(o),r.fireDataInitializationChain()}return Promise.reject("switchCarline: missing params for initialization!")},a.clearConfigurationData=function(e){if(a.configurationContinued=!1,a.configurationStartType="default",a.clearStorage(),e&&e)for(var t in e)a.storage[t]=e[t]},a.clearStorage=function(){a.storage={configuration:null,conflicts:null,transfers:null,items:null,defaultPrString:null,header:null,families:null,searchstopwords:null}},r.setConfigurationStartType=function(e){return"default"===r.getConfigurationStartType()&&"configuration-change"===e?(a.configurationContinued=!1,a.configurationStartType=e,void a.eventBus.emit(t.CONFIG_START,a.configurationStartType)):void("configuration-change"!==e?(a.configurationStartType=e,a.configurationContinued=!1,a.eventBus.emit(t.CONFIG_START,a.configurationStartType)):a.configurationContinued=!0)},a.checkDPUresponseStatus=function(e){var t,n,a;if(e.header&&e.header.statuscode){if(n=Math.floor(e.header.statuscode/100),a=!!e.audicode&&!!e.audicode.message,!a&&300===e.header.statuscode)throw t=new Error,e.header.error&&e.header.error.id&&(t.id=e.header.error.id),t.name="custom-dpu-error",t.statuscode=300,t.message=e.header.statusmessage?e.header.statusmessage:"unknow statusmessage",t.errormessages=e.header.errormessages?e.header.errormessages:[],t;if(3===n||5===n)throw t=new Error,t.message=e.header.statusmessage?e.header.statusmessage:"Configuration Error (statuscode:"+e.header.statuscode+")",a&&(console.error("Audicode Error (statuscode:"+(e.audicode.statuscode||"???")+","+(e.audicode.message||"unknown")+")"),t.message=e.audicode.message?e.audicode.message:"Audicode Error:"+e.audicode.statuscode),e.header.error&&e.header.error.id&&(t.id=e.header.error.id),t}return e},r.getConfigurationStartType=function(){return a.configurationStartType},r.resetToDefaultSetupParams=function(){var e={prstring:SETUPS.get("nemo.default.prstring"),header:SETUPS.get("nemo.default.header"),configuration:SETUPS.get("nemo.default.configuration")};a.clearConfigurationData(e)},r.initializePromise=function(e){return new Promise(function(t){a.eventBus=e,a.initialize(),t("configurator/dpu-model.js")})},r}),define("utils/utils",["jquery"],function(e){"use strict";return function(){var t=arguments,n=function(){return(65536*(1+Math.random())|0).toString(16).substring(1)};return{guid:function(){return n()+n()+"-"+n()+"-"+n()+"-"+n()+"-"+n()+n()+n()},ready:function(n){return e(t[0]).ready(n)},delegate:function(n,a,i){return e(t[0]).delegate(n,a,i)},undelegate:function(n,a){return e(t[0]).undelegate(n,a)},each:function(n){return e(t[0]).each(n)},data:function(e){var n,a,i=[],r="string"==typeof t[0]?document.querySelector(t[0]):t[0];if(r)for(i=r.attributes,n=0,a=i.length;a>n;n++)if(i[n].nodeName==="data-"+e)return i[n].nodeValue;return""},objectHasNestedKeys:function(e,t){var n,a,i=0;if("string"!=typeof t)return!1;for(n=t.split("."),a=n.length,i=0;a>i;i++){if(!e.hasOwnProperty(n[i]))return!1;e=e[n[i]]}return!0},getModuleFromString:function(e,t){var n,a,i,r=e.split(".");for(t=t||nemo,n=t,i=r.length,a=0;i>a;a++)n=n[r[a]];return n!==t&&n?n:null},isElementOutsideOfElementWithSelector:function(e,t){return e.is(t)?!1:e.parents(t).length>0?!1:!0},isInViewport:function(e){var t=e.getBoundingClientRect(),n=document.documentElement;return t.top>=0&&t.left>=0&&t.bottom<=(window.innerHeight||n.clientHeight)&&t.right<=(window.innerWidth||n.clientWidth)},length:function(){return e(t[0]).length}()}}}),define("module/state",["jquery"],function(e){"use strict";var t={},n={__:t},a={debug:!1,module:!1},i={};return n.triggerModeChange=function(t,n){var i=n;return"true"===i&&(i=!0),"false"===i&&(i=!1),i!==!0&&i!==!1?!1:"undefined"==typeof a[t]?!1:(a[t]=i,i===!0?e("html").addClass("nm-state-is-"+t):e("html").removeClass("nm-state-is-"+t),localStorage.setItem("nm_states",JSON.stringify(a)),!0)},n.getStateOfModeFor=function(e){return a[e]||!1},t.initialize=function(){var t;try{t=JSON.parse(localStorage.getItem("nm_states")),e.each(a,function(e){"undefined"!=typeof i[e]&&n.triggerModeChange(e,t[e])})}catch(r){console.warn(r)}},n.initializePromise=function(e){return new Promise(function(n){t.eventBus=e,t.initialize(),n("module/state.js")})},n}),define("configurator/dpu-api",["jquery","configurator/dpu-model","utils/utils","module/state"],function(e,t,n,a){"use strict";var i={},r={__:i};return i.stored={},r.getSpecialFamilies=function(){var e=SETUPS.get("nemo.families"),t=r.getFamilies();if(!e&&t){e={};for(var n in t)t[n].showstandard&&"true"===t[n].showstandard&&(e[n]=t[n])}return e?e:null},r.getFamilies=function(){return t.getFamilies()},r.sendRenderServiceRequest=function(e,n,a,i){return t.sendRenderServiceRequest(e,n,a,i)},r.search=function(e,t){var n=r.searchItems(e,t);return n.length>0?i.groupByFamily(n):[]},i.groupByFamily=function(t){var n,a={search:[]},i=r.getFamilies(),o={},s=r.getCarlineName(),l=t||{};return e.each(l,function(e,t){if(void 0===t.family)return console.log("Found item without family: ",t),!0;var r=i[t.family];if(r){if(!r.name)return console.log("Found family without family.name: ",r),!0;r.group=r.group||r.name||r.id,
o[r.group]||(o[r.group]=1,n={key:r.group,value:{carlineName:s,family:r,items:[]}},a.search.push(n)),n.value.items.push(t)}}),a.search},i.groupByExtColorKey=function(t){var n,a,i=r.getFamilies(),o=["extcolors.uni","extcolors.metallic","extcolors.pearl","extcolors.exclusive","extcolors.o","extcolors.m","extcolors.p"],s=[],l=[],c=r.getCarlineName(),u=t||{};for(e.each(u,function(e,t){if(void 0===t.family)return console.log("Found item without family: ",t),!0;if(a=i[t.family]){if(!a.name)return console.log("Found family without family.name: ",a),!0;a.group=a.group||a.id||a.name,a.group=a.group.trim(),-1===o.indexOf(a.group)?console.log("Found unknown family group: ",a.group):(s[a.group]||(s[a.group]={key:a.group,value:{carlineName:c,family:a,items:[]}}),s[a.group].value.items.push(t))}}),n=0;n<o.length;n++)s[o[n]]&&l.push(s[o[n]]);return l},r.getRenderUrl=function(){return SETUPS.get("nemo.url.mediaservice")||null},r.getSelectedItems=function(){var e=r.getItems()||{},t=r.getSpecialFamilies(),n={},a=0;for(var i in e)e[i].status&&"1"===e[i].status.charAt(3)&&("0"===e[i].status.charAt(4)&&(n[i]=e[i],a++),"1"===e[i].status.charAt(4)&&e[i].family&&t[e[i].family]&&(n[i]=e[i],a++));return a>0?n:null},r.getSelectedTrimline=function(){var e,t=r.getSelectedItems(),n=[];if(t)for(n=Object.keys(t),e=n.length;e--;)if(n[e].indexOf("trimline_")>-1)return n[e];return null},r.getSelectedItemsArray=function(){var t={};return e.each(r.getItems(),function(e,n){n.selectionMethod&&(t[n.selectionMethod]=t[n.selectionMethod]||[],t[n.selectionMethod].push(n))}),t},r.getCarline=function(){return t.getCarline()},r.getCarlineName=function(){var e=r.getConfiguration();return e&&e.carlineName?e.carlineName:null},r.getEngine=function(){var e=r.getConfiguration();return e&&e.model?e.model:null},r.getTechdata=function(){var e=r.getConfiguration();return e&&e.techdata?e.techdata:null},r.getExtColor=function(){for(var e=r.getConfiguratedItems(),t=0,n=e.length;n>t;t++)if(4===e[t].length)return e[t];return null},r.getModelYear=function(){var e=r.getConfiguration();return e&&e.modelyear?e.modelyear:null},r.getPriceRateMode=function(){var e=t.getHeader();return e&&e.mode?e.mode:"price"},r.getPrString=function(){return t.getPrString()},r.getConfigurationStartType=function(){return t.getConfigurationStartType()},r.isContinuedConfiguration=function(){return t.isContinuedConfiguration()},r.getContentVersion=function(){var e=t.getHeader(),n=e&&e.version?e.version:null;return n},r.getMarketVersion=function(){var e=t.getHeader(),n=e&&e.marketVersion?e.marketVersion:null;return n},r.isLoggedIn=function(){var e=t.getHeader()&&t.getHeader()["logged-in"]===!0;return!!e},r.setLogin=function(e,n){return t.setLogin(e,n)},r.getSearchStopWords=function(){return t.getSearchStopWords()},r.getConflicts=function(){return t.getConflicts()},r.getConflictTriggers=function(){var e=null,t=r.getConflicts();return t&&t.triggers&&t.triggers.length&&(e=t.triggers),e},r.getTransfers=function(){var e=t.getTransfers();return e&&e.deleted&&e.deleted.length?e:null},r.getConfiguration=function(){return t.getConfiguration()},r.getVersion=function(){return t.getVersion()},r.getMemcacheVersion=function(){return t.getMemcacheVersion()},r.getDpuUrl=function(){return t.getDpuUrl()},r.getContext=function(){return t.getContext()},r.getSubsessionID=function(){return t.getSubsessionID()},r.getMotorcode=function(){var e=r.getConfiguration();return e&&e.model?e.model:null},r.getConfigurationAssets=function(){var e=r.getConfiguration();return e&&e.assets?e.assets:null},r.getExtColors=function(){var e=i.getItemsByFamily("extcolors");return e?i.groupByExtColorKey(e):null},r.getDocrootUrl=function(){var e=window.location.protocol+"//"+window.location.host+(SETUPS.get("nemo.url.static")||"");return"/"===e.charAt(e.length-1)&&(e=e.slice(0,-1)),e},r.isConfigurable=function(){return!!SETUPS.get("nemo.url.carinfo")},r.isInPreviewMode=function(){return!!SETUPS.get("nemo.url.preview")},r.getPageTree=function(){return SETUPS.get("pagetree")},r.getGsaSearchUrl=function(){return SETUPS.get("gsaSearchLink")||null},r.searchNavigation=function(t,n){var a=[],r=[],o=t.toLowerCase();switch(n){case"model":r=i.getModelNavigationStorage();break;case"siteMap":r=i.getSiteNavigationStorage();break;case"footer":r=i.getFooterNavigationStorage();break;default:r=[]}return e.each(r,function(e,t){return t.search?void(-1!==t.search.indexOf(o)&&t.url&&a.push(t)):!0}),a},r.getItems=function(){return t.getItems()||null},r.isConfigurationStarted=function(){return t.isConfigurationStarted()},r.hasCustomConfiguration=function(){return t.hasCustomConfiguration()},r.isInCurrentConfiguration=function(e){var t=r.getConfiguratedItems();return t.indexOf(e)>-1},r.getConfiguratedItems=function(){var e=r.getConfiguration(),t=e&&!!e.items&&void 0!==e.items.length;return t?e.items:[]},r.getEnergyEfficiency=function(){var e=r.getConfiguration();return e&&e.eec?e.eec:null},r.getPrices=function(){var e=r.getConfiguration();return e&&e.prices?e.prices:null},r.getItem=function(e){var t=r.getItems();return t&&t[e]?t[e]:null},r.getItemsByStatus=function(t){var n=r.getItems(),a=null;return t&&n&&("function"!=typeof t.compile&&(t=new RegExp(t)),e.each(n,function(e,n){n.status&&t.test(n.status)&&(a=a||{},a[e]=n)})),a},i.getItemsByFamily=function(t){var n=r.getItems(),a=null;return t&&n&&("function"!=typeof t.compile&&(t=new RegExp(t)),e.each(n,function(e,n){n.family&&t.test(n.family)&&(a=a||{},a[e]=n)})),a},r.getItemsByFamily=i.getItemsByFamily,r.getConfigurationCarPriceRate=function(){var e=r.getConfiguration();return e&&e.rate?e.rate:null},r.getNwbLink=function(){var e=r.getConfiguration();return e&&e.nwbLink?e.nwbLink:null},r.getVtpRequestUrl=function(){return SETUPS.get("nemo.vtp.request.url")},r.getVtpEntryUrl=function(){return SETUPS.get("nemo.vtp.entry.url")},r.getDOMStatusCode=function(e){var t=e?e.get(0).className:"";return-1===t.indexOf("nm-j-configurator-status_")?null:t.split("nm-j-configurator-status_")[1].split(" ")[0]},r.supportsLocalStorage=function(){if(null!==window.navigator.userAgent.toLowerCase().match(/adobeair/i))return!0;try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch(e){return e.code===window.DOMException.QUOTA_EXCEEDED_ERR&&0===localStorage.length?!0:!1}},r.getConfigurationFamilies=function(){var e=r.getConfiguration();return e&&e.families?e.families:null},r.getRecommendations=function(){var e=r.getConfiguration();return e&&e.recommendations?e.recommendations:[]},r.getDynamicRecommendations=function(){var e=r.getConfiguration();return e&&e.empfehlungenPoC&&e.empfehlungenPoC.recommendations?e.empfehlungenPoC.recommendations:[]},i.getSiteNavigationStorage=function(){var e=SETUPS.get("siteNavigation");return e?e:[]},i.getModelNavigationStorage=function(){var e=SETUPS.get("modelNavigation");return e?e:[]},r.searchItems=function(t,n){var i,o=!!window.mss||a.getStateOfModeFor("debug")||!1,s=r.getItems()||{},l=[],c=r.getFamilies();return t=t.toLowerCase(),t=t.replace(/^\w\s/," ").replace(/\s\w$/," ").replace(/\s\w\s/," ").trim(),e.each(s,function(e,a){if(!a.search||"string"!=typeof a.search)return!0;if(i=a.search,o&&a.mbvId&&(i+=" | "+a.mbvId.toLowerCase()),-1!==i.indexOf(t)){if(n&&("00000"===a.status||"10000"===a.status))return!0;if(void 0===a.family)return!0;var r=c[a.family];if(!r||!r.name)return!0;l.push(a)}}),l},r.isInitialized=function(){return t.isInitialized()},r.getCarlineUrl=function(e){var t=SETUPS.get("nemo.carlineID2Url")||{},n=t[e];return!n&&(t=SETUPS.get("mssc.carlinemapping")||{})?(n=t[e],n?n.posterViewUrl:void 0):n?n.baseurl:void 0},r.getCurrentCarlineUrl=function(){var e=r.getCarline();return r.getCarlineUrl(e)},r.getConfigurationId=function(){return i.configurationID=i.configurationID||n().guid(),i.configurationID},r.getModelsInfo=function(e){return t.getModelsInfo(e)},r.getCurrentModelInfo=function(){var e=r.getEngine();return e?r.getModelsInfo(e):null},r.getAveString=function(){var e=r.getConfiguration();return e&&e.ave?e.ave:null},r.getSCSmatchingAttributes=function(){var e=r.getSCSAttributes();return e&&e.attrs?e.attrs:[]},r.getSCSAttributes=function(){var e=r.getConfiguration();return e&&e["stock-car-attrs"]?e["stock-car-attrs"]:null},r.getErrorMessage=function(e){var t,n;return t=e||"DEFAULT",n=window.i18n["error.message."+t],n=n?n:"!unknown error!"},r.getAltImagePath=function(e,t){var n,a,i;if(n=r.getCarline(),!n||!e||!t)return!1;var o=n.substring(0,1);return(0===n.indexOf("rs")||0===n.indexOf("s"))&&(o="a"),0===n.indexOf("tt")&&(o="r"),"selection-compare"!==e?(i=".jpg",a=o+"-"+t.split(".")[0]+"-"+e+i):(i=".png",a=o+"-"+e+i),a="undefined"!=typeof mss?r.getDocrootUrl()+"/cms4i-nemo-mss/fallback-renderings/"+a:r.getDocrootUrl()+"/cms4i-nemo/fallback-renderings/"+a},i.getFooterNavigationStorage=function(){var e=SETUPS.get("footerNavigation");return e?e:[]},r}),define("core/layer/element",["jquery"],function(e){"use strict";var t,n;return t={},n={__:t},t.BASE_CLASS="nm-layer-wrapper",t.loadedScripts=[],n.create=function(n){var a,i;return a=document.createElement("div"),a.className=t.BASE_CLASS,t.globalEval(n),e(a).html(n),i=a.firstChild,i.className&&i.className.split(" ").indexOf(t.BASE_CLASS)>-1?i:a},n.update=function(n,a){return t.globalEval(a),e(n).html(a),!0},t.globalEval=function(n){n=e.trim(n);var a=e(n),i=a.find("script");if(i.length){var r=i.text().indexOf("use strict")>-1;window.asyncLoadingJS=!1,t.evalScripts(i,r)}},t.evalScripts=function(n,a){for(var i,r=eval;n.length;){var o=n.splice(0,1),s=o[0];if(s.getAttribute("src"))window.asyncLoadingJS?(console.warn("defered eval of js. WARNING: if the loaded script calls it's own callback we need to reset window.asyncLoadingJS there to continue loading"),setTimeout(function(){n.splice(0,0,s),t.evalScripts(n,a)},100)):t.loadedScripts.indexOf(s.getAttribute("src"))<0&&(t.loadedScripts.push(s.getAttribute("src")),window.asyncLoadingJS=!0,e.ajax({url:s.getAttribute("src"),async:!0,type:"GET",dataType:"script",success:function(e,t){window.asyncLoadingJS=!1}}));else if(a){i=document.createElement("script"),i.text=s.text;var l=document.head||document.getElementsByTagName("head")[0];l.appendChild(i).parentNode.removeChild(i)}else r(s)}},n}),define("utils/dom",["dom-delegate","doT"],function(e,t){"use strict";var n={},a={__:n};n.eventDelegates={},n.TRANSITION_TIMEOUT=1e3,n.isValidDOMElement=function(e){return"object"==typeof HTMLElement?e instanceof HTMLElement:e&&"object"==typeof e&&null!==e&&1===e.nodeType&&"string"==typeof e.nodeName},n.getDummyElement=function(){return document.createElement("_")},a.selectorMatches=function(e,t){var n=Element.prototype,a=n.matches||n.webkitMatchesSelector||n.mozMatchesSelector||n.msMatchesSelector||function(e){return-1!==[].indexOf.call(document.querySelectorAll(e),this)};return a.call(e,t)},a.isHidden=function(e){return null===e.offsetParent},a.handleDocumentReady=function(e){var t=/MSIE\s/.test(navigator.userAgent)&&parseFloat(navigator.appVersion.split("MSIE")[1])<10,n="loading";t&&(n="interactive"),document.readyState!==n?e():document.addEventListener?document.addEventListener("DOMContentLoaded",e):document.attachEvent("onreadystatechange",function(){"loading"!==document.readyState&&e()})},a.getEventDelegate=function(t){var a=document.querySelector(t);return!n.eventDelegates[t]&&a&&(n.eventDelegates[t]=new e(a)),n.eventDelegates[t]},a.renderTemplate=function(e,n){var a="";try{a=t.template(e)(n)}catch(i){console.warn("renderTemplate Error:",i)}return a},a.isElementOutsideOfElementWithSelector=function(e,t){var n;if(a.selectorMatches(e,t))return!1;for(n=e;!a.selectorMatches(n,t)&&n.parentNode!==document;)n=n.parentNode;return a.selectorMatches(n,t)?!1:!0};var i,r;return a.scrollTo=function(e,t){function n(){setTimeout(function(){window.pageYOffset>Math.round(e)?(i=window.requestAnimationFrame(n),d+=1,s=u-u*Math.cos(d*c),o=l-s,(e>o||5>=o)&&(o=e),window.scrollTo(0,o)):cancelAnimationFrame(i)},15)}function a(){setTimeout(function(){var t=document.documentElement&&document.documentElement.scrollTop||document.body.scrollTop,n=document.documentElement&&document.documentElement.scrollHeight||document.body.scrollHeight,i=t+window.innerHeight>=n;Math.round(e)>window.pageYOffset&&!i?(r=window.requestAnimationFrame(a),d+=1,s=u-u*Math.cos(d*c),o=l+s,o>e&&(o=e),window.scrollTo(0,o)):cancelAnimationFrame(r)},15)}if(0>e)return console.error("scrollTo --> scrollYFinal is smaller than 0 - wrong value - must be > 0"),!1;i&&(cancelAnimationFrame(i),i=void 0),r&&(cancelAnimationFrame(r),r=void 0);var o,s,l=window.pageYOffset,c=Math.PI/(t/15),u=l/2,d=0;e<window.pageYOffset?i=window.requestAnimationFrame(n):(1>=l&&(l=10),u=e/2,r=window.requestAnimationFrame(a))},a.getOffset=function(e,t){var n,i,r,o,s=a.getElement(e,t);if(a.isElement(s))return s.getClientRects().length?(r=s.getBoundingClientRect(),r.width||r.height?(o=s.ownerDocument,i=window,n=o.documentElement,{top:r.top+i.pageYOffset-n.clientTop,left:r.left+i.pageXOffset-n.clientLeft}):r):{top:0,left:0}},a.appendHtmlString=function(e,t){var n,a;if(e&&t)for(n=document.createElement("div"),n.innerHTML=t,a=n.childNodes;a.length>0;)e.appendChild(a[0])},a.getDataAttribute=function(e,t){var n,a=null;a={},n=e.getAttribute("data-"+t)||e.getAttribute(t);try{return a=JSON.parse(n)}catch(i){return n&&n.indexOf("{")<0&&n.indexOf("[")<0?(console.warn("data attribute is no JSON",n),n):(console.error("could not parse data attribute JSON",n),null)}},a.closest=function(e,t){var n,a,i;if(i=e,"function"==typeof e.closest)return e.closest(t);for(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(e){return"function"==typeof document.body[e]?(n=e,!0):!1});i;){if(a=i.parentElement,a&&a[n](t))return a;i=a}return null},n.transitionEvent=function(){var e,t=document.createElement("fakeelement"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in n)if(void 0!==t.style[e])return n[e]}(),a.handleTransition=function(e,t){return new Promise(function(a,i){e&&e.addEventListener||i("missing params"),e.addEventListener(n.transitionEvent,function r(){e.removeEventListener(n.transitionEvent,r),t&&e.classList.remove(t),a(e)}),t&&e.classList.add(t),setTimeout(function(){i("animation timeout")},n.TRANSITION_TIMEOUT)})},a.getElement=function(e,t){var a=t||document;return a.querySelector(e)||n.getDummyElement()},a.selectorIsInLayerContext=function(e){var t=".nm-layer-opened .nm-layer "+e;return!!document.querySelector(t)},a.isElement=function(e){var t="string"==typeof e?document.querySelector(e):e;return!!t&&"_"!==t.tagName&&n.isValidDOMElement(t)},a.getElementsArray=function(e,t){var n=t||document;return[].slice.call(n.querySelectorAll(e))},a.initialize=function(){return Promise.resolve("dom-item.js")},a.initializePromise=a.initialize,a}),define("core/layer/animation",["jquery"],function(e){"use strict";var t={},n={__:t};return t.LAYER_SELECTOR=".nm-layer",t.VISIBLE_CLASS_NAME="nm-layer-visible",t.BODY_LAYER_OPENED_CLASS="nm-layer-opened",t.SHADER_VISIBLE_CLASS_NAME="nm-layer-shader-visible",t.scrollPosition=0,n.showShader=function(){return new Promise(function(a){document.querySelector("body").classList.contains("nm-is-ios")&&(t.scrollPosition=e("body").scrollTop()),e("body").addClass(t.BODY_LAYER_OPENED_CLASS),t.wait(20).then(function(){t.shader||n.initialize(),t.shader&&t.shader.show().addClass(t.SHADER_VISIBLE_CLASS_NAME)}).then(function(){t.wait(280).then(a)})})},t.wait=function(e){return new Promise(function(t){setTimeout(t,e)})},n.hideShader=function(){return new Promise(function(n){t.shader.removeClass(t.SHADER_VISIBLE_CLASS_NAME).hide(),e("body").removeClass(t.BODY_LAYER_OPENED_CLASS),document.querySelector("body").classList.contains("nm-is-ios")&&(e("body").scrollTop(t.scrollPosition),t.scrollPosition=0),n(t.shader)})},t.findCurrentLayerOfType=function(n){var a=e([t.LAYER_SELECTOR,"[data-layer-type='"+n+"']"].join("")).closest(".nm-layer-wrapper");return a.length?a:null},n.open=function(a,i){var r,o;return a&&i?(r=e(document.body.appendChild(a)),o=1===e(t.LAYER_SELECTOR).length?n.showShader().then(function(){return t.openLayer(r,i)}):t.openLayer(r,i)):o=Promise.reject(new TypeError("'element'")),o},t.openLayer=function(n,a){return new Promise(function(i){i(a),t.wait(20).then(function(){n.find(t.LAYER_SELECTOR).addClass(t.VISIBLE_CLASS_NAME).attr("data-layer-type",a.type)}),t.wait(530).then(function(){e("body").addClass("nm-"+a.type+"-layer-opened")})})},n.close=function(n,a){var i,r;return n&&a?(i=e(n),i.find(t.LAYER_SELECTOR).removeClass(t.VISIBLE_CLASS_NAME).removeAttr("data-layer-type"),r=t.wait(500).then(function(){return i?(i.remove(),e("body").removeClass("nm-"+a.type+"-layer-opened"),Promise.resolve(a)):Promise.reject("element to be removed is missing!!!")})):r=Promise.reject(new TypeError("'element'")),r},n.toggleShader=function(){t.isShaderNotNeeded()?n.hideShader():console.log("Shader remains visible")},t.isShaderNotNeeded=function(){return 0===t.getVisibleLayers().length},t.isLastVisibleLayer=function(){return 1===t.getVisibleLayers().length},t.getVisibleLayers=function(){return e(t.LAYER_SELECTOR).filter(function(){return $(this).hasClass(t.VISIBLE_CLASS_NAME)})},n.replace=function(n,a){var i,r,o,s;return s=n&&a?new Promise(function(s,l){i=a.type,r=t.findCurrentLayerOfType(i),r?(r.removeClass(t.VISIBLE_CLASS_NAME),o=e(document.body.appendChild(n)),t.wait(500).then(function(){o.find(t.LAYER_SELECTOR).addClass(t.VISIBLE_CLASS_NAME).attr("data-layer-type",a.type)}),e("body").addClass("nm-"+a.type+"-layer-opened"),t.wait(530).then(function(){r.remove(),s(a)})):l(new TypeError("noLayer of type "+a.type))}):Promise.reject(new TypeError("'element'"))},n.initialize=function(){0===e(".nm-layer-shader").length&&(t.shader=e('<div class="nm-layer-shader"></div>').appendTo("body").hide())},n.initializePromise=function(e){return new Promise(function(a){t.eventBus=e,n.initialize(),a("core/layer/animation.js")})},n}),define("core/layer/api",["core/layer/element","utils/dom","core/layer/animation","events"],function(e,t,n,a){"use strict";var i,r;return i={},r={__:i},i.layers={},i.Layer=function(t,n,a){return this.type=t,this.html=n,this.element=e.create(n),this.onCloseRequest=a,this},i.Layer.prototype.close=function(){return i.closeLayer(this)},i.Layer.prototype.update=function(t){this.element=e.create(t),this.html=t},i.Layer.prototype.getElement=function(){return this.element},i.Layer.prototype.remove=function(){delete i.layers[this.type],this.element=null,this.onCloseRequest=null,this.html=null,this.type=null},i.hasActiveLayer=function(e){return!!i.layers[e]},i.nrOfLayers=function(){var e,t=0;for(e in i.layers)i.layers.hasOwnProperty(e)&&t++;return t},i.initialize=function(){t.getEventDelegate("body").off("click",".nm-layer-wrapper",r.wrapperClickHandler),t.getEventDelegate("body").on("click",".nm-layer-wrapper",r.wrapperClickHandler)},r.open=function(e,t,n){var a;return e?t?i.hasActiveLayer(e)?"cms"!==e&&"conflict-layer"!==e||!i.hasActiveLayer(e)?Promise.reject(new Error("Duplicate layer type. "+e)):(a=new i.Layer(e,t,n),i.updateLayer(a,t)):n&&"function"!=typeof n?Promise.reject(new Error("onCloseRequest has to be a function.")):(a=new i.Layer(e,t,n),i.layers[e]=a,i.openLayer(a)):Promise.reject(new Error("html not set.")):Promise.reject(new Error("type not set."))},r.requestCloseall=function(){var e;for(e in i.layers)i.layers.hasOwnProperty(e)&&i.requestCloseLayer(e)},i.requestCloseLayer=function(e){var t=i.layers[e];"function"==typeof t.onCloseRequest?t.onCloseRequest():i.closeLayer(t)},i.openLayer=function(e){var t,r;return r=e,t=n.open(e.element,e),t.then(function(e){return i.dispatchEvent(a.LAYER_LOADED,{element:e.element}),e})["catch"](function(e){throw i.closeLayer(r),console.error("core/layer/animation:layerOpen: animation rejected.",e),e})},i.dispatchEvent=function(e,t){i.eventBus.emit(e,t)},i.closeLayer=function(e){var t=n.close(e.element,e);return t.then(function(e){e.remove()},function(e){throw console.log("core/layer/animation:layerClose: animation rejected.",e),e})["catch"](function(e){console.error(e)}).then(n.toggleShader).then(function(){i.dispatchEvent(a.LAYER_CLOSED,{element:e.element})})},i.updateLayer=function(e,t){var r;return e.update(t),r=n.replace(e.getElement(),e),r.then(function(e){return i.dispatchEvent(a.LAYER_LOADED,{element:e.getElement()}),e})["catch"](function(e){throw console.log("core/layer/animation:layerUpdate: animation rejected."),e})},r.wrapperClickHandler=function(e){i.nrOfLayers()>0&&i.isShaderClicked(e)&&r.requestCloseall()},i.isShaderClicked=function(e){return t.isElementOutsideOfElementWithSelector(e.target,".nm-layer-inner")&&e.target.classList.contains("nm-layer-wrapper")},r.initializePromise=function(e){return new Promise(function(t){i.eventBus=e,i.initialize(),t("core/layer/api.js")})},r}),define("core/template",["doT"],function(e){"use strict";var t={},n={__:t};return n.render=function(t,n){return e.template(t)(n)},n}),define("text",["module"],function(e){"use strict";var t,n,a,i,r,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],s=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,l=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,c="undefined"!=typeof location&&location.href,u=c&&location.protocol&&location.protocol.replace(/\:/,""),d=c&&location.hostname,m=c&&(location.port||void 0),g={},f=e.config&&e.config()||{};return t={version:"2.0.10",strip:function(e){if(e){e=e.replace(s,"");var t=e.match(l);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:f.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;3>t;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(a){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,a,i=!1,r=e.indexOf("."),o=0===e.indexOf("./")||0===e.indexOf("../");return-1!==r&&(!o||r>1)?(t=e.substring(0,r),n=e.substring(r+1,e.length)):t=e,a=n||t,r=a.indexOf("!"),-1!==r&&(i="strip"===a.substring(r+1),a=a.substring(0,r),n?n=a:t=a),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,a,i){var r,o,s,l=t.xdRegExp.exec(e);return l?(r=l[2],o=l[3],o=o.split(":"),s=o[1],o=o[0],!(r&&r!==n||o&&o.toLowerCase()!==a.toLowerCase()||(s||o)&&s!==i)):!0},finishLoad:function(e,n,a,i){a=n?t.strip(a):a,f.isBuild&&(g[e]=a),i(a)},load:function(e,n,a,i){if(i.isBuild&&!i.inlineText)return void a();f.isBuild=i.isBuild;var r=t.parseName(e),o=r.moduleName+(r.ext?"."+r.ext:""),s=n.toUrl(o),l=f.useXhr||t.useXhr;return 0===s.indexOf("empty:")?void a():void(!c||l(s,u,d,m)?t.get(s,function(n){t.finishLoad(e,r.strip,n,a)},function(e){a.error&&a.error(e)}):n([o],function(e){t.finishLoad(r.moduleName+"."+r.ext,r.strip,e,a)}))},write:function(e,n,a,i){if(g.hasOwnProperty(n)){var r=t.jsEscape(g[n]);a.asModule(e+"!"+n,"define(function () { return '"+r+"';});\n")}},writeFile:function(e,n,a,i,r){var o=t.parseName(n),s=o.ext?"."+o.ext:"",l=o.moduleName+s,c=a.toUrl(o.moduleName+s)+".js";t.load(l,a,function(n){var a=function(e){return i(c,e)};a.asModule=function(e,t){return i.asModule(e,c,t)},t.write(e,l,a,r)},r)}},"node"===f.env||!f.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(n=require.nodeRequire("fs"),t.get=function(e,t,a){try{var i=n.readFileSync(e,"utf8");0===i.indexOf("\ufeff")&&(i=i.substring(1)),t(i)}catch(r){a(r)}}):"xhr"===f.env||!f.env&&t.createXhr()?t.get=function(e,n,a,i){var r,o=t.createXhr();if(o.open("GET",e,!0),i)for(r in i)i.hasOwnProperty(r)&&o.setRequestHeader(r.toLowerCase(),i[r]);f.onXhr&&f.onXhr(o,e),o.onreadystatechange=function(t){var i,r;4===o.readyState&&(i=o.status,i>399&&600>i?(r=new Error(e+" HTTP status: "+i),r.xhr=o,a(r)):n(o.responseText),f.onXhrComplete&&f.onXhrComplete(o,e))},o.send(null)}:"rhino"===f.env||!f.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var n,a,i="utf-8",r=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),s=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(r),i)),l="";try{for(n=new java.lang.StringBuffer,a=s.readLine(),a&&a.length()&&65279===a.charAt(0)&&(a=a.substring(1)),null!==a&&n.append(a);null!==(a=s.readLine());)n.append(o),n.append(a);l=String(n.toString())}finally{s.close()}t(l)}:("xpconnect"===f.env||!f.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(a=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),r="@mozilla.org/windows-registry-key;1"in a,t.get=function(e,t){var n,o,s,l={};r&&(e=e.replace(/\//g,"\\")),s=new FileUtils.File(e);try{n=a["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(s,1,0,!1),o=a["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),l),o.close(),n.close(),t(l.value)}catch(c){throw new Error((s&&s.path||"")+": "+c)}}),t}),define("text!templates/transfer-layer.tpl",[],function(){return'<div class="nm-layer-wrapper nm-layer-wrapper-dialogue nm-layer-wrapper-transfer">\n	<div class="nm-layer nm-layer-transfer nm-layer-transfer-default">\n		<div class="nm-layer-inner">\n			<div class="nm-layer-conflict-content clearfix">\n				<div class="nm-3col cearfix">\n					<div class="">\n						<h2 class="nm-el-hdl nm-el-hdl-02 nm-at-hdl-b">\n							{{=window.i18n[\'transfer-layer.configuration-transfer\']}}\n						</h2>\n						{{? 0 !== it.deleted.length}}\n						<strong class="nm-el-pg nm-el-pg-01">\n							{{=window.i18n[\'transfer-layer.configuration-transfer-warning\']}}:\n						</strong>\n						<ul class="nm-options-list nm-transfer-trigger nm-j-configurator-no-update">\n							{{~it.deleted :value:index}}\n							<li class="nm-check-list-item nm-j-configurator-item">\n								<div class="nm-options-cell-additional">\n									/*\n									<div class="nm-list-item-additional clearfix">\n										<div class="nm-price nm-el-pg nm-el-pg-04">\n											{{=value.price}}\n										</div>\n									</div>\n									*/\n									<span class="nm-list-item-text nm-el-pg nm-el-pg-04">\n										{{=value.name}}\n									</span>\n								</div>\n							</li>\n							{{~}}\n						</ul>\n						{{?}}\n					</div>\n					<ul class="nm-button-list clearfix">\n						/*<li>\n							<a class="nm-b7 nm-j-configurator-delegate-transfer-click" data-transfer="cancel"\n							href="{{=it.urls.cancel}}">{{=window.i18n[\'transfer-layer.label.cancel\']}}</a>\n						</li>*/\n						<li>\n							<div class="nm-btn-continue">\n								<a class="nm-j-configurator-delegate-transfer-click nm-el-btn nm-el-btn-01 nm-el-btn-ast" data-transfer="submit">{{=window.i18n[\'proceed-label\']}}</a>\n							</div>\n						</li>\n					</ul>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n'}),define("configurator/transfer",["jquery","configurator/dpu-api","events","core/layer/api","core/template","text!templates/transfer-layer.tpl"],function(e,t,n,a,i,r){"use strict";var o={},s={__:o};return o.oDefaults={sSelectorDelegateTransferClick:".nm-layer-transfer .nm-j-configurator-delegate-transfer-click"},o.transfer=null,o.layerInstance=null,o.layerIsOpening=!1,o.layerIsClosing=!1,o.addEvents=function(){o.legacyEventBus.on("click.nemo.configuration.transfer",o.oDefaults.sSelectorDelegateTransferClick,o.handleTransferResolveClick)},o.mergeData=function(n){for(var a,i={deleted:[],transferred:[],standard:[]},r=n.deleted,o=r.length;o--;)a={id:r[o].id},e.extend(!0,a,t.getItem(r[o].id)),i.deleted.push(a);for(i.deleted.reverse(),r=n.transferred,o=r.length;o--;)a={},e.extend(!0,a,t.getItem(r[o].id)),i.transferred.push(a);for(i.transferred.reverse(),r=n.standard,o=r.length;o--;)a={},e.extend(!0,a,t.getItem(r[o].id)),i.standard.push(a);return i.standard.reverse(),i.urls=n.urls,i},o.openLayer=function(e,t,n){if(o.layerIsClosing)return void setTimeout(function(){o.openLayer(e,t,n)},510);o.layerIsOpening=!0;var i=a.open(e,t,n);return i.then(function(e){return o.layerIsOpening=!1,Promise.resolve(e)},function(e){return o.layerIsOpening=!1,Promise.reject(e)})},o.closeLayer=function(){if(o.layerIsClosing=!0,null===o.layerInstance&&o.layerIsOpening)return void setTimeout(o.closeLayer,510);console.log("CLOSING LAYER!",o.layerInstance);var e=o.layerInstance.close();e.then(function(){o.layerInstance=null,o.layerIsClosing=!1,o.onLayerClose()},function(e){o.layerIsClosing=!1})},o.onLayerClose=function(){o.transfer=null},o.handleTransferResolveClick=function(t){var a,i,r;t?(o.cancelEvent(t),a=e(t.target),i=a.attr("href"),i&&(i=SETUPS.get("nemo.url.dpu")+i)):(r=e([o.oDefaults.sSelectorDelegateTransferClick,"[data-transfer='cancel']"].join("")).attr("href"),i=SETUPS.get("nemo.url.dpu")+r),o.eventBus.trigger(n.TRANSFER_CLOSE,{url:i}),o.closeLayer()},o.cancelEvent=function(e){e&&"function"==typeof e.preventDefault&&e.preventDefault()},o.handleTransferClose=function(){o.layerName&&(console.log(n.LAYER_BEFORE_CLOSE_ALL+"::transfer"),o.handleTransferResolveClick())},s.handleTransfer=function(t){var n=o.mergeData(t),a="transfer-layer",s=r||e("#nm-id-"+a+"-tpl").html(),l=i.render(s,n),c=o.openLayer(a,l,o.handleTransferResolveClick);c.then(function(e){o.layerInstance=e},function(e){console.log("TRANSFER Layer open failed",e.message)})},o.initialize=function(){o.addEvents()},s.initializePromise=function(t){return new Promise(function(n){o.eventBus=t,o.legacyEventBus=e("body"),o.initialize(),n("configurator/transfer.js")})},s}),define("text!templates/conflict-layer.tpl",[],function(){return'{{##def.options_tiles:\n<ul class="nm-options-list nm-options-tiles">\n	<li>\n		<span class="nm-el-pg nm-el-pg-03 nm-at-pg-b">{{=p.header}}</span>\n\n		<div class="nm-tile-block">\n\n			<ul class="nm-tile-list clearfix">\n\n			{{~ p.items :value:i }}\n					<li class="nm-j-configurator-item nm-j-configurator-no-update nm-j-configurator-status_{{=value.status}} nm-j-configurator-type_{{=value.type}} nm-conflict-type-{{=value.type}} clearfix"\n				data-configurator-id="{{=value.id}}" data-mbvid="{{=value.id}}">\n						{{? !!value.image }}\n						<div class="nm-tile-element-image">\n							<a class="nm-j-configurator-delegate-click" href="#"><img src="{{=value.image}}" /></a>\n						</div>\n						{{?}}\n\n						<div class="nm-tile-element-info">\n							<span class="nm-list-item-text nm-el-pg nm-el-pg-03">{{=value.name}}</span>\n							<div class="nm-price nm-el-pg nm-el-pg-03 nm-at-pg-b">\n								{{=value.price}}\n							</div>\n						</div>\n					</li>\n			{{~}}\n			</ul>\n\n		</div>\n\n	</li>\n</ul>\n#}}\n\n\n{{##def.options_list:\n<!-- Default options list -->\n\n<ul class="nm-options-list">\n	{{~ p.items :value:i }}\n	<li class="nm-check-list-item nm-j-configurator-item nm-j-configurator-no-update nm-j-configurator-status_{{=value.status}} nm-j-configurator-type_{{=value.type}} nm-conflict-type-{{=value.type}} clearfix"\n	data-configurator-id="{{=value.id}}" data-mbvid="{{=value.id}}">\n\n		<div class="nm-options-list-cell-cb clearfix">\n			<a class="nm-checkbox-3 nm-j-configurator-delegate-click" data-tracking-link=\'{"events":"event73"}\'\n			href="#"></a>\n		</div>\n\n		<div class="nm-options-cell-additional">\n			{{? value.image }}\n			<div class="nm-list-item-additional">\n				<div class="nm-list-item-image">\n					<img src="{{=value.image}}" alt="{{=value.image.name}}" />\n				</div>\n			</div>\n			{{?}}\n\n			<span class="nm-list-item-text nm-el-pg nm-el-pg-03">\n				{{? value.type === "add" }}\n				<span class="nm-conflict-add-text nm-at-pg-b">\n					{{=window.i18n[\'conflict-layer.add-item\']}}\n				</span>\n				{{??}}\n				<span class="nm-conflict-remove-text nm-at-pg-b">\n					{{=window.i18n[\'conflict-layer.remove-item\']}}\n				</span>\n				{{?}} {{=value.name}}\n			</span>\n		</div>\n\n		{{? typeof value.priceValue !== \'undefined\' && value.priceValue\n			< 0 }} <div class="nm-price nm-el-pg nm-el-pg-03 nm-at-pg-b nm-at-pg-indicator">\n		{{??}}\n		<div class="nm-price nm-el-pg nm-el-pg-03 nm-at-pg-b">\n			{{?}} {{=value.price}}\n		</div>\n	</li>\n	{{~}}\n</ul>\n#}}\n\n\n<div class="nm-layer-wrapper nm-layer-wrapper-dialogue nm-layer-wrapper-conflict">\n	<div class="nm-layer nm-layer-conflict nm-layer-conflict-default">\n		<div class="nm-layer-inner">\n			<div class="nm-layer-conflict-content clearfix">\n				<div class="nm-3col cearfix">\n					<div class="nm-module nm-md-conflict-layer" data-module="conflict-layer">\n						<h2 class="nm-el-hdl nm-el-hdl-02 nm-at-hdl-b">\n							{{=window.i18n[\'conflict-layer.selection-conflict\']}}\n						</h2>\n						{{? 0 !== it.triggers.length}}\n						<span class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">\n						{{=window.i18n[\'conflict-layer.your-selection\']}}\n						</span>\n						<ul class="nm-options-list nm-conflict-trigger">\n							{{~it.triggers :value:index}}\n							<li class="nm-check-list-item nm-j-configurator-item nm-j-configurator-no-update nm-j-configurator-status_{{=value.status}} nm-j-configurator-type_{{=value.type}} nm-conflict-type-{{=value.type}} clearfix"\n							data-configurator-id="{{=value.id}}" data-mbvid="{{=value.id}}">\n								<a class="nm-checkbox-1 nm-j-configurator-delegate-click" href="#"></a>\n								<div class="nm-options-cell-additional">\n									<span class="nm-list-item-text nm-el-pg nm-el-pg-03">\n										{{=value.name}}\n									</span>\n								</div>\n								{{? typeof value.priceValue !== \'undefined\' && value.priceValue\n								< 0 }} <div class="nm-price nm-el-pg nm-el-pg-03 nm-at-pg-b nm-at-pg-indicator">\n									{{??}}\n									<div class="nm-price nm-el-pg nm-el-pg-03 nm-at-pg-b">\n										{{?}} {{=value.price}}\n									</div>\n							</li>\n							{{~}}\n						</ul>\n						{{?}} {{? 0 !== it.solutions[0].length}}\n						<span class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">\n							{{=window.i18n[\'conflict-layer.mandatory-customizations\']}}:\n						</span>\n						{{~ it.solutions :p }}\n						{{? !!p.id}}\n						<div class="nm-conflict-solution" data-solution-id="{{=p.id}}">\n\n							{{?!!p.sameTypeItems}}\n								{{#def.options_tiles}}\n							{{??}}\n								{{#def.options_list}}\n								{{? 1 < p.items.length}} <a href="" class="nm-j-conflict-options-show nm-el-lbl nm-el-lbl-01" data-tracking-link=\'{"events":"event76"}\'>\n									<span class="nm-conflict-alternative-text-show">\n										{{=window.i18n[\'conflict-layer.show-alternatives\']}}\n									</span>\n									<span class="nm-conflict-alternative-text-hide">\n										{{=window.i18n[\'conflict-layer.hide-alternatives\']}}\n									</span>\n									</a>\n								{{?}}\n							{{?}}\n\n\n\n						</div>\n						{{?}}\n						{{~}} {{?}}\n						<p class="nm-el-pg nm-el-pg-03 nm-at-pg-b nm-conflict-layer-total-price">\n							{{=window.i18n[\'conflict-layer.overall-cutomizations\']}}: {{?\n							typeof it.totalPriceValue !== \'undefined\' && it.totalPriceValue\n							< 0 }} <span class="nm-el-pg nm-el-pg-03 nm-at-pg-b nm-at-pg-indicator">\n								{{??}}\n								<span class="nm-el-pg nm-el-pg-03 nm-at-pg-b">\n									{{?}} {{=it.totalPrice}}\n								</span>\n						</p>\n						<ul class="nm-button-list clearfix">\n							{{? !!it.urls.cancel }}\n							<li>\n								<a class="nm-j-configurator-delegate-conflict-click nm-el-btn nm-el-btn-01 nm-at-btn-inv" data-conflict="cancel"\n								/*data-tracking-link=\'{"events":"event74"}\'*/ href="{{=it.urls.cancel}}">{{=window.i18n[\'abort-label\']}}</a>\n							</li>\n							{{?}} {{? !!it.urls.submit }}\n							<li>\n								<a class="nm-j-configurator-delegate-conflict-click nm-el-btn nm-el-btn-02" data-conflict="submit"\n								/*data-tracking-link=\'{"events":"event75"}\'*/ href="{{=it.urls.submit}}">{{=window.i18n[\'conflict-layer.label.submit\']}}</a>\n							</li>\n							{{?}}\n						</ul>\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n';
}),define("configurator/conflict",["jquery","configurator/dpu-api","events","core/layer/api","core/template","text!templates/conflict-layer.tpl"],function(e,t,n,a,i,r){"use strict";var o={},s={__:o};return o.previousSelectedSolution=null,o.layerInstance=null,o.currentCancelLink="",o.oDefaults={sSelectorConflictLayer:".nm-layer-conflict",sSelectorConfigLayerOpen:"nm-config-layer-open",sSelectorDelegateConflictClick:".nm-j-configurator-delegate-conflict-click",sSelectorOptionsShow:".nm-j-conflict-options-show",sSelectorConflictSolution:".nm-conflict-solution",sSelectorDelegateClick:".nm-layer-wrapper-conflict .nm-j-configurator-delegate-click",sClassConflictSolutionShow:"nm-conflict-solution-show"},o.groupingWhitelist=["extcolor","upholstery"],o.addEvents=function(){o.legacyEventBus.on("click.nemo.configurator",o.oDefaults.sSelectorDelegateConflictClick,o.handleConflictResolveClick),o.legacyEventBus.on("click.alternative-options",o.oDefaults.sSelectorOptionsShow,o.toggleAlternativeOptions),o.legacyEventBus.on("click.solution.store",o.oDefaults.sSelectorDelegateClick,o.handleConflictItemClick)},o.handleConflictItemClick=function(t){var n,a,i,r;return o.cancelEvent(t),n=e(this),a=n.closest("div[data-solution-id]"),i=a.data("solution-id"),(r=o.isSelectedItem(n.closest(".nm-j-configurator-item")))?(console.log('ITEM "'+n.closest(".nm-j-configurator-item").attr("[nm-j-configurator-id]")+'" is already part of the configuration',n,a,i),!1):(o.previousSelectedSolution=i,void console.log("ITEM was clicked",n,a,i,o.previousSelectedSolution))},o.isSelectedItem=function(e){var t,n=e.get(0).className;return-1===n.indexOf("nm-j-configurator-status_")?!1:(t=n.split("nm-j-configurator-status_")[1].split(" ")[0],5===t.length&&"1"===t[3])},o.toggleAlternativeOptions=function(){var t=e(this),n=t.closest(".nm-conflict-solution");return n.toggleClass(o.oDefaults.sClassConflictSolutionShow),!1},o.detectGroups=function(e,t,n){var a,i,r,s,l,c;if(l=e.items.length,e.sameTypeItems=!1,2>l)return e;for(a=l-1;a>=0;a--){if(i=n[e.items[a].id],!i)return e;if(r=t[i.family],!r)return e;if(c=r.name,l-1>a&&(s!==r.type||o.groupingWhitelist.indexOf(r.type)<0))return e;s=r.type}return e.sameTypeItems=!0,e.header=c,e},o.mergeData=function(t,n,a){var i,r,s,l,c,u,d,m,g,f,p=t,v=[];for(p.replacedByTriggers&&p.replacedByTriggers.length&&p.solutions.unshift(p.replacedByTriggers),e.each(p.solutions,function(t,i){g={},g.items=[],g.ids=[],c=[],e.each(i,function(t,i){u=a[i.id],u?(u.name&&delete i.name,d=e.extend(!0,{},u,i)):d=i,d.family&&n[d.family]&&(d.family=n[d.family]),i.effItems&&e.each(i.effItems,function(t,i){u=a[i.id],u.name&&delete i.name,r=e.extend(!0,{},u,i),r.family&&n[r.family]&&(r.family=n[r.family]),r.items=[r],c.push(r)}),g.ids.push(d.id),g.items.push(d)}),g.id=g.ids.join(""),v.push(g),c.length>0&&(v=v.concat(c))}),p.solutions=v,s=p.solutions.length-1;s>=0;s--)p.solutions[s]=o.detectGroups(p.solutions[s],n,a);for(f=[],l=p.solutions[0].items.length;l--;)i=p.solutions[0].items[l],i.family&&i.family.id&&i.family.id.indexOf("synthetic.audi_exclusive")>-1?(f.push(i),p.solutions[0].items[l].exclusive=!0):p.solutions[0].items[l].exclusive=!1;return f.reverse(),p.solutions[0].exclusives=f,m=[],c=[],e.each(p.triggers,function(t,i){u=a[i.id],u?(u.name?delete i.name:i.name="#"+u.name,d=e.extend(!0,{},u,i)):d=i,d.family&&n[d.family]&&(d.family=n[d.family]),m.push(d),i.effItems&&e.each(i.effItems,function(t,n){u=a[n.id],u.name&&delete n.name,r=e.extend(!0,{},u,n),r.items=[r],c.push(r)})}),c.length>0&&(p.solutions=c.concat(p.solutions)),p.triggers=m,p},o.openLayer=function(t,n,i){var r;return new Promise(function(s,l){r=a.open(t,n,i),r.then(function(t){o.layerInstance=t,o.openSelectedSolutionAlternatives(),o.currentCancelLink=e([o.oDefaults.sSelectorDelegateConflictClick,"[data-conflict='cancel']"].join("")).attr("href"),s(o.layerInstance)},function(e){l(e)})})},o.closeLayer=function(){var e;return e=o.layerInstance.close(),e.then(function(){o.layerInstance=null,o.onLayerClose()},function(e){throw new TypeError("Error closing conflict Layer: "+e.message)})},o.onLayerClose=function(){e("body").removeClass(o.oDefaults.sSelectorConfigLayerOpen),o.conflict=null},o.handleConflictResolveClick=function(t){var a,i,r,s="cancel";t?(o.cancelEvent(t),a=e(t.target),i=SETUPS.get("nemo.url.dpu")+a.attr("href"),a.data("conflict")&&(s=a.data("conflict"))):(r=e([o.oDefaults.sSelectorDelegateConflictClick,"[data-conflict='cancel']"].join("")).attr("href"),s="cancel",i=r?SETUPS.get("nemo.url.dpu")+r:SETUPS.get("nemo.url.dpu")+o.currentCancelLink),o.eventBus.emit(n.CONFLICT_CLOSE,{url:i,action:s}),o.closeLayer()},o.openSelectedSolutionAlternatives=function(){var t;o.previousSelectedSolution&&(t=e("[data-solution-id='"+o.previousSelectedSolution+"']"),o.previousSelectedSolution||(o.previousSelectedSolution=void 0),t.addClass(o.oDefaults.sClassConflictSolutionShow))},o.cancelEvent=function(e){e&&"function"==typeof e.preventDefault&&e.preventDefault()},o.initialize=function(){o.addEvents()},s.handleConflict=function(n){return new Promise(function(a,s){var l=o.mergeData(n,t.getSpecialFamilies()||{},t.getItems()),c="conflict-layer",u=r||e("#nm-id-"+c+"-tpl").html(),d=i.render(u,l),m=o.openLayer(c,d,o.handleConflictResolveClick);m.then(a,s)})},s.initializePromise=function(t){return new Promise(function(n){o.eventBus=t,o.legacyEventBus=e("body"),o.initialize(),n("configurator/conflict.js")})},s}),define("text!templates/configurationstart-implicit-layer.tpl",[],function(){return'<div class="nm-layer-wrapper nm-layer-wrapper-dialogue">\n	<div class="nm-layer nm-layer-dialogue">\n		<div class="nm-layer-inner">\n			<div class="nm-layer-dialogue-content clearfix">\n				<div class="nm-3col clearfix">\n					<div class="nm-module nm-start-layer nm-md-configurationstart-implicit-layer">\n						<h2 class="nm-el-hdl nm-el-hdl-02 nm-at-hdl-b">\n							{{=window.i18n[\'configurationstart-layer-info\']}}\n						</h2>\n						<strong class="nm-el-pg nm-el-pg-01">\n							{{= window.i18n[\'configurationstart-layer-edit\']}}\n						</strong>\n						<div class="nm-btn-continue">\n							<a href="#" class="nm-configurationstart-layer-close nm-el-btn nm-el-btn-01 nm-el-btn-ast" style="float:right;">{{=window.i18n[\'proceed-label\']}}</a>\n						</div>\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n'}),define("text!templates/configurationstart-loaded-layer.tpl",[],function(){return'<div class="nm-layer-wrapper nm-layer-wrapper-dialogue">\n	<div class="nm-layer nm-layer-dialogue">\n		<div class="nm-layer-inner">\n			<div class="nm-layer-dialogue-content clearfix">\n				<div class="nm-3col clearfix">\n					<div class="nm-module nm-start-layer nm-simpleform nm-configurationstart-loaded-layer clearfix">\n						<h2 class="nm-el-hdl nm-el-hdl-02 nm-at-hdl-b">\n							{{=window.i18n[\'configurationloaded-layer-info\']}}\n						</h2>\n						<p class="nm-el-pg nm-el-pg-01">\n							{{=	window.i18n[\'configurationloaded-layer-edit\']}}\n						</p>\n						<img src="{{=it.ms_url}}{{=it.configuration.assets.exterior_front[\'carstore.new\']}}"\n						class="nm-unscaled-image nm-alpha" />\n						<div class="nm-start-information-overview">\n							<div class="nm-start-inforamation-content">\n								<span class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">\n									{{=it.configuration.carlineName}}\n								</span>\n								<span class="nm-engine nm-el-pg nm-el-pg-03">\n									{{=it.configuration.description}}\n								</span>\n								<ul class="nm-car-price clearfix">\n									<li class="nm-car-price-total nm-el-hdl nm-el-hdl-04 nm-at-hdl-b clearfix">\n										/*<span class="nm-car-price-total-key">\n											{{=window.i18n[\'totalprice-label\']}}\n										</span>*/\n										<span class="nm-car-price-total-value">\n											\n											{{? typeof(it.configuration.prices.rotr) !== \'undefined\' && parseInt(it.configuration.prices.rotr, 10) > 0 }}\n												{{=it.configuration.prices.rotr}}\n											{{??}}\n												{{=it.configuration.price}}\n											{{?}}\n										</span>\n									</li>\n								</ul>\n							</div>\n							<div class="nm-btn-continue">\n								<a href="#" class="nm-configurationstart-layer-close nm-el-btn nm-el-btn-01 nm-el-btn-ast">{{=window.i18n[\'proceed-label\']}}</a>\n							</div>\n						</div>	\n					</div>\n				</div>\n			</div>\n		</div>\n	</div>\n</div>\n'}),define("module/startlayer",["jquery","events","core/layer/api","core/template","text!templates/configurationstart-implicit-layer.tpl","text!templates/configurationstart-loaded-layer.tpl"],function(e,t,n,a,i,r){"use strict";var o={},s={__:o};return o.instance=!1,o.enabled=!0,o.source=!1,o.oDefaults={sCloseLayerButtonSelector:".nm-configurationstart-layer-close"},o.addEvents=function(){o.legacyEventBus.on("click.layer.configstart.close",o.oDefaults.sCloseLayerButtonSelector,o.closeStartLayer)},o.removeEvents=function(){o.legacyEventBus.off("click.layer.configstart.close",o.oDefaults.sCloseLayerButtonSelector,o.closeStartLayer)},o.trackLoadConfigEvent=function(){return o.enabled?new Promise(function(e){var t=setInterval(function(){if(o.layerProcessed){if(clearInterval(t),!o.layerActive)return console.log("reject"),Promise.reject();console.log("resolve: ",o.source),e("carstore"===o.source?{source:"myAudi"}:"audicode-input"===o.source?{source:"audicode"}:{source:o.source})}},50)}):Promise.reject()},o.openStartLayer=function(t){return o.enabled?new Promise(function(s,l){t=t;var c,u,d="configurationstart-implicit";t?(d="configurationstart-loaded",u=r):(d="configurationstart-implicit",u=i),c=a.render(u,t||{}),setTimeout(function(){var a=n.open(d,c,o.closeStartLayer);a.then(function(n){o.layerProcessed=!0,o.layerActive=!1,t&&(o.source=t.start_type,o.layerActive=!0),o.instance=n,o.addEvents(),e("body").addClass("nm-config-layer-open"),s(o.instance)},function(e){o.layerProcessed=!0,o.layerActive=!1,l(e)})},600)}):(o.layerProcessed=!0,o.layerActive=!1,Promise.reject(new Error("Start layers not supported.")))},o.closeStartLayer=function(n){o.cancelEvent(n),o.instance&&"function"==typeof o.instance.close&&o.instance.close(),o.eventBus.emit(t.STARTLAYER_CLOSE),o.instance=null,o.removeEvents(),e("body").removeClass("nm-config-layer-open")},o.cancelEvent=function(e){e&&"function"==typeof e.preventDefault&&e.preventDefault()},o.initialize=function(e){o.instance||(o.addEvents(),o.instance=!0,o.layerProcessed=!1,o.layerActive=!0)},s.handleStartLayer=function(e){return o.openStartLayer(e)},s.unHandleStartLayer=function(){o.layerProcessed=!0,o.layerActive=!1},s.setEnabled=function(e){o.enabled=e},s.initializePromise=function(t){return new Promise(function(n){o.eventBus=t,o.legacyEventBus=e("body"),o.initialize(),n("module/startlayer.js")})},s}),define("core/cache",[],function(){"use strict";var e={sType:"sessionStorage"},t=function(t){return t=t||{},"object"!=typeof t||t.type||(t.type=e.sType),{sType:"string"==typeof t?t:t.type,failsafeSet:!!t.failsafeSet}},n=function(e,n,a){var i=t(a).sType,r=JSON.parse(window[i].getItem(e));return r?r[n]:null},a=function(e,n,i,r){var o=t(r),s=o.sType;try{var l=window[s].getItem(e);return l=null===l?{}:JSON.parse(l),l[n]=i,l=JSON.stringify(l),window[s].setItem(e,l),!0}catch(c){return o.failsafeSet?(o.failsafeSet=!1,a(e,n,i,o)):!1}},i=function(e,n){var a=t(n).sType;window[a].removeItem(e)},r=function(e,n){var a=t(n).sType,i=JSON.parse(window[a].getItem(e)),r=0;if(Object.keys&&i)r=Object.keys(i).length;else for(var o in i)i.hasOwnProperty(o)&&(r+=1);return r};return{getItem:function(e,t,a){return t=encodeURIComponent(t),n(e,t,a)},setItem:function(e,t,n,i){return t=encodeURIComponent(t),a(e,t,n,i)},removeItem:function(e,t,n){t=encodeURIComponent(t),a(e,t,null,n)},clear:function(e,t){i(e,t)},length:function(e,t){return r(e,t)}}}),define("module/carline-mapping",["core/cache","configurator/dpu-api","configurator/dpu-controller","events"],function(e,t,n,a){"use strict";var i={},r={__:i};return i.oDefaults={},i.globalEventBus=null,r.getPreviousWindowConfig=function(){var n,a=null,i=t.getCarline(),r=window&&window.name&&null!==window.name?window.name:e.getItem("use_trampoline","data","localStorage");if(r)try{n=JSON.parse(r),n&&n.prstring&&n.subsession&&n.carline===i&&(a=n)}catch(o){console.log("we are not comming from a page were we set the window.name"),a=null}return e.getItem("use_trampoline","data","localStorage")&&e.removeItem("use_trampoline","data","localStorage"),a},r.getConfigurationRequestParam=function(){var e=null,t=i.getUrlVar("audicode"),n=i.getUrlVar("pr");return t&&(e={},e.audicode=t),n&&(e={},e.prstring=n),e},r.useTrampoline=function(t,n,a){var r=t.configuration.prstring,o=t.configuration.carline,s=i.getCarlineUrl(o);s&&(window.name='{"subsession":"'+n+'","carline":"'+o+'","prstring":"'+r+'","entryType":"'+a+'"}',e.setItem("carline_mapping",n,JSON.stringify(t),"localStorage"),e.setItem("use_trampoline","data",'{"subsession":"'+n+'","carline":"'+o+'","prstring":"'+r+'","entryType":"'+a+'"}',"localStorage"),setTimeout(function(){window.location.href=s},150))},i.getCarlineUrl=function(e){return t.getCarlineUrl(e)},r.hasPreviousWindowConfiguration=function(){var e=r.getPreviousWindowConfig();return!!e},r.isMatchingConfiguration=function(e){var n,a,r,o,s,l,c;return n=!1,r=!!e,o=null,a=t.getCarline(),r&&e.configuration&&e.configuration.carline&&(o=e.configuration.carline),r&&e.configuration&&e.configuration.carline&&(o=e.configuration.carline),s=null,r&&e.configuration&&e.configuration.prstring&&(s=e.configuration.prstring),l=!1,c=i.getCarlineUrl(o),c&&(l=!0),o&&a!==o&&l&&(n=!1),o&&a===o&&(n=!0),console.log("isMatchingConfiguration: "+n+"  audiCodeCorrespondingPrstring: "+s),n},i.getUrlVars=function(e){var t,n,a,i,r={};for(n=e.slice(e.indexOf("?")+1).split("#")[0].split("&"),a=0,i=n.length;i>a;a++)t=n[a].split("="),r[t[0]]=t[1];return r},i.getUrlVar=function(e,t){var n=t||window.location.href;return i.getUrlVars(n)[e]||null},r.initialize=function(e){return new Promise(function(t){i.globalEventBus=e,t("carline-mapping.js")})},r.initializePromise=r.initialize,r}),define("configurator/user-configurations",["jquery","configurator/dpu-api","events"],function(e,t,n){"use strict";var a={},i={__:a};return a.STORAGE=window.sessionStorage||null,a.entryPrefix="__nemo__",a.handleConfigurationUpdates=function(){var e={prString:t.getPrString(),carlineID:t.getCarline()},n=a.writeEntry(e);n.then(function(e){console.log("userÂ´s configuration storageID: "+e.stored)},function(e){console.warn("Error storing userÂ´s configuration: "+e.message)})},a.writeEntry=function(e){return new Promise(function(t,n){var i;i=a.uuid(),e||n(new TypeError("writeEntry: missing param 'entry_'")),e=JSON.stringify(e),a.STORAGE||n(new TypeError("sessionStorage is not available")),a.STORAGE.setItem(i,e),t({stored:i})})},a.uuid=function(){return a.entryPrefix+t.getVersion()},a.addEvents=function(){a.eventBus.on(n.CONFIG_UPDATE,a.handleConfigurationUpdates)},a.readEntryFromStorage=function(){return new Promise(function(e,t){var n;a.STORAGE||t(new TypeError("Browserstorage is not available"));try{n=a.STORAGE.getItem(a.uuid()),n=JSON.parse(n),e(n)}catch(i){t(new TypeError("Error reading userÂ´s configuration: "+i.message))}})},a.initialize=function(){return t.isInPreviewMode()||!t.isConfigurable()?void console.log("preview-mode"):void a.addEvents()},i.getPreviousUserConfigurationPrString=function(){var e=a.readEntryFromStorage();return e.then(function(e){return e&&e.carlineID&&e.prString&&e.carlineID===t.getCarline()&&e.prString!==t.getPrString()?Promise.resolve(e.prString):Promise.reject(new TypeError("no valid user configuration available"))},function(){return Promise.reject(new TypeError("error reading user configuration from storage"))})},a.debugEntries=function(){var e,t=[],n=new RegExp(a.entryPrefix);for(e in a.STORAGE)n.test(e)&&t.push(e);return t},i.initializePromise=function(e){return new Promise(function(t){a.eventBus=e,a.initialize(),t("module/user-configurations.js")})},i}),define("configurator/dpu-controller",["jquery","events","configurator/dpu-api","configurator/dpu-model","core/layer/api","configurator/transfer","configurator/conflict","module/startlayer","module/carline-mapping","configurator/user-configurations"],function(e,t,n,a,i,r,o,s,l,c){"use strict";var u={},d=!1,m={__:u};return u.dataInitialized=!1,u.initMaxTries=20,u.oDefaults={sSelectorDelegateClick:".nm-j-configurator-delegate-click",sSelectorDelegateChangeCount:".nm-quantity",sSelectorChangeSelect:".nm-md-bicolor-chooser-interior",sSelectorDelegateNewClick:".nm-configuration-new",sSelectorPrintBtn:".nm-configuration-print",sSelectorLoadAudiCode:".nm-j-load-audicode",sSelectorLoadPrString:".nm-j-load-prstring"},u.startLayerActivated=!1,u.openedLayer=null,u.configurationContinued=!1,u.addEvents=function(){u.legacyEventBus.on("click.configuration.item",u.oDefaults.sSelectorDelegateClick,{triggerAction:"click"},u.handleConfigurationItemChanges),u.legacyEventBus.on("change.configuration.count",u.oDefaults.sSelectorDelegateChangeCount,{triggerAction:"changeCount"},u.handleConfigurationItemChanges),u.legacyEventBus.on("change.configuration.select",u.oDefaults.sSelectorChangeSelect,{triggerAction:"dropDown"},u.handleConfigurationItemChanges),u.legacyEventBus.on("click.configuration.new",u.oDefaults.sSelectorDelegateNewClick,u.handleNewConfigurationClick),u.addModeSwitchEventAfterReset(),u.eventBus.on(t.CONFLICT_CLOSE,u.handleConflictClose),u.eventBus.on(t.TRANSFER_CLOSE,u.handleTransferClose),u.eventBus.on(t.STARTLAYER_CLOSE,u.handleStartlayerClose),u.legacyEventBus.on("click.nemo.configurator.print",u.oDefaults.sSelectorPrintBtn,u.callPrint),u.eventBus.on(t.FORM_FINISHED,u.receiveAudicodeForm),u.legacyEventBus.on("click.nemo.loadbyaudicode",u.oDefaults.sSelectorLoadAudiCode,u.receiveAudicodeLink),u.legacyEventBus.on("click.nemo.loadbyprstring",u.oDefaults.sSelectorLoadPrString,u.receivePrstringLink)},u.callPrint=function(a){u.eventBus.emit(t.CONFIG_PDF);var i=SETUPS.get("nemo.core.configurator.dpu.oAjaxRESTConfigurationURIPrint"),r=e(this),o=n.getContext(),s=n.getSubsessionID()?"&subsession="+n.getSubsessionID():"",l=n.getPrString();return i=i+"?context="+o+s+"&ids="+l,r.attr({href:i,target:"_blank"}),!0},u.isSelectedRadioButton=function(e){var t=e.closest(".nm-j-configurator-item");return t.is(".nm-j-configurator-status_11010, .nm-j-configurator-status_100110")&&!t.is(".nm-md-bicolor-chooser-el-options")&&e.hasClass("nm-checkbox-3")?!0:!1},u.isPreselectedConflictItem=function(e){var t,a,i;return n.getConflicts()?(t=e.closest(".nm-j-configurator-item"),i=t.get(0).className,-1===i.indexOf("nm-j-configurator-status_")?!1:(a=i.split("nm-j-configurator-status_")[1].split(" ")[0],5===a.length&&"1"===a[3])):!1},u.handleConfigurationItemChanges=function(a){u.cancelEvent(a);var i=e(a.target);if(u.isSelectedRadioButton(i)||u.isPreselectedConflictItem(i))return!1;var r,o=i.closest(".nm-j-configurator-item"),s=o.attr("data-configurator-id"),l=(!!o.attr("data-configurator-group"),o.find(u.oDefaults.sSelectorDelegateChangeCount).val()),c=a.data.triggerAction||"no-GUI-action-defined",d=n.isInCurrentConfiguration(s);switch(c){case"changeCount":if(!d)return!1;r="itemAdd";break;case"click":if(u.isSelectableItem(o)===!1)return;r=d?"itemRemove":"itemAdd";break;case"dropDown":o=e(this),s=o.val(),d=n.isInCurrentConfiguration(s),r=d?"itemRemove":"itemAdd";break;default:return}var m={id:s,count:l,action:r},g=e.extend(!0,m,{triggerAction:c,$element:o});u.eventBus.emit(t.CONFIG_CHANGEREQUEST_START,g),u.triggerChangeRequest(m)},u.receiveAudicodeForm=function(e){if(u.cancelEvent(this),e.id&&e.id.indexOf("audicode")>-1){u.lockPrString(n.getPrString());var a=Promise.resolve(e.response);a.then(function(e){var t=u.detectConfigurationChanges(n.getPrString());if(t)throw new TypeError("receiveAudicodeForm:configuration changed while processing, loaded configuration was rejected");m.handleExternalConfiguration(e,{startType:"audicode-input"})}).then(void 0,function(e){u.eventBus.emit(t.ERROR,[window.i18n["standard-audicode-error"],e.message])})}},u.receiveAudicodeLink=function(t){u.cancelEvent(t),u.lockPrString(n.getPrString());var a=e(this),i=a.attr("data-audicode"),r=m.loadConfigurationByAudiCode(i);r.then(function(e){var t=u.detectConfigurationChanges(n.getPrString());if(t)throw new TypeError("receiveAudicodeLink:configuration changed while processing, loaded chonfiguration was rejected");m.handleExternalConfiguration(e,{startType:"audicode-link"})}).then(void 0,function(e){console.warn(e)})},m.generateAudiCode=function(e){return a.generateAudiCode(e)},u.receivePrstringLink=function(t){u.cancelEvent(t),u.lockPrString(n.getPrString());var a=e(this),i=a.attr("data-prstring"),r=m.loadConfigurationByPrString(i);r.then(function(e){var t=u.detectConfigurationChanges(n.getPrString());if(t)throw new TypeError("receivePrstringLink: configuration changed while processing, loaded chonfiguration was rejected");m.handleExternalConfiguration(e,{startType:"prstring-link"})}).then(void 0,function(e){console.warn(e)})},u.lockPrString=function(e){u.lockedPrString=e},u.detectConfigurationChanges=function(e){return u.lockedPrString!==e},m.handleExternalConfiguration=function(e,t){var i;if(!e||e&&e.audicode&&e.audicode.success===!1||e&&e.errorMessage){var r;throw r=e&&e.audicode&&e.audicode.message?e.audicode.message:e&&e.errorMessage?e.errorMessage:e&&e.header&&e.header.errormessages?e.header.errormessages.join(","):"unknown_error",new TypeError(r)}if(!t.startType)return i=a.adoptConfiguration(e),i.then(function(e){u.handleConfigurationUpdate(e)})["catch"](function(e){u.configurationUpdateErrors(e)});if(u.startLayerActivated=!0,"user-configuration"===t.startType&&(u.startLayerActivated=!1),l.isMatchingConfiguration(e))return i=a.adoptConfiguration(e),i.then(function(e){u.setConfigurationStartType(t.startType),u.handleConfigurationUpdate(e)})["catch"](function(e){u.configurationUpdateErrors(e)});var o=n.getSubsessionID();return e.subsession&&(o=e.subsession),e.header&&e.header.subsession&&(o=e.header.subsession),new Promise(function(){l.useTrampoline(e,o,t.startType),i=Promise.reject("using trampoline page")})["catch"](function(e){console.err("Trampoline failed",e)})},u.setConfigurationStartType=function(e){a.setConfigurationStartType(e)},u.handleConfigurationUpdate=function(e){u.eventBus.emit(t.CONFIG_UPDATE),u.checkLayerQueue()},u.checkLayerQueue=function(e){var t,a;a=n.getTransfers(),t=n.getConflicts();var i=!a&&!t,s=n.getConfigurationStartType();if(u.startLayerActivated&&i&&!n.isContinuedConfiguration()&&"default"!==s&&"configuration-change"!==s){if(u.startLayerActivated=!1,"configuration-reset"===s)return u.handleStartLayerDemand(),!1;var l={configuration:n.getConfiguration(),assets:n.getConfigurationAssets(),ms_url:n.getRenderUrl(),start_type:s};return u.handleStartLayerDemand(l),!1}return u.unHandleStartLayerDemand(),a&&n.isContinuedConfiguration()?(r.handleTransfer(a),!1):t?(o.handleConflict(t),!1):!0},u.handleStartLayerDemand=function(e){var t=s.handleStartLayer(e);t.then(function(){},function(e){})},u.unHandleStartLayerDemand=function(){s.unHandleStartLayer()},u.handleConflictClose=function(e){var t=new Date,n=a.requestTransferOrConflictResolve(e.url);n.then(u.handleConfigurationUpdate)["catch"](u.configurationUpdateErrors).then(function(){u.onAjaxCompleted(t)})},u.handleTransferClose=function(e){if(a.transferCompleted(),e&&e.url){var t=new Date,n=a.requestTransferOrConflictResolve(e.url);n.then(u.handleConfigurationUpdate)["catch"](u.configurationUpdateErrors).then(function(){u.onAjaxCompleted(t)})}else u.checkLayerQueue()},u.handleStartlayerClose=function(){u.checkLayerQueue()},m.addToConfiguration=function(e){var n={action:"itemAdd",count:null,id:e},a={};return u.eventBus.emit(t.CONFIG_CHANGEREQUEST_START,a),u.triggerChangeRequest(n)},m.removeFromConfiguration=function(e){var n={action:"itemRemove",count:null,id:e},a={};return u.eventBus.emit(t.CONFIG_CHANGEREQUEST_START,a),u.triggerChangeRequest(n)},u.triggerChangeRequest=function(e){var t=new Date,n=a.requestConfigurationChange(e);return n.then(function(t){u.updateItemSelectionMethod(e,"active"),u.setConfigurationStartType("configuration-change"),u.handleConfigurationUpdate(t)})["catch"](u.configurationUpdateErrors).then(function(){u.onAjaxCompleted(t)})},u.updateItemSelectionMethod=function(e,t){var n,i;n=e.id,i=e.action,"itemAdd"===i?a.setItemSelectionMethod(n,t):a.setItemSelectionMethod(n,"")},u.updatePreselectedItems=function(){var t=n.getItems();e.each(t,function(e,t){t.status&&5===t.status.length&&"1"===t.status.substr(3,1)&&a.setItemSelectionMethod(e,"pre")})},u.configurationUpdateErrors=function(e){var a,i=window.i18n[e.name]||window.i18n["standard-configuration-error"];console.error("Configuration Error",e),a=e.id?n.getErrorMessage(e.id):null,a?u.eventBus.emit(t.ERROR,a):e.statuscode&&300===e.statuscode?u.eventBus.emit(t.ERROR,e.message||i):u.eventBus.emit(t.ERROR,[i,e.message])},u.isSelectableItem=function(e){var t=n.getDOMStatusCode(e),a=t.split(""),i=window.mss||null;return e.hasClass("nm-j-configurator-item-forceselectable")?!0:"0"===a[0]?!1:"0"===a[1]?!1:"1"===a[4]&&"1"===a[3]&&i?!1:"1"===a[2]?!0:!0},u.cancelEvent=function(e){e&&"function"==typeof e.preventDefault&&e.preventDefault()},u.handleNewConfigurationClick=function(e){var t;u.cancelEvent(e),t=a.requestConfigurationReset(),t.then(function(e){u.startLayerActivated=!0,a.setConfigurationStartType("configuration-reset"),u.handleConfigurationUpdate(e)}).then(void 0,u.configurationErrors).then(u.onAjaxCompleted)},u.configurationErrors=function(e){},u.addModeSwitchEventAfterReset=function(){var t,n,i=e("nm-price-rate-switch");i&&(i.checked=!1),u.legacyEventBus.on("change","#nm-price-rate-switch",function(e){t=e.target.checked===!0?"rate":"price",n=a.changeRatePriceMode(t),n.then(u.handleConfigurationUpdate).then(void 0,u.configurationErrors).then(u.onAjaxCompleted)})},u.onAjaxCompleted=function(e){u.eventBus.emit(t.CONFIG_CHANGEREQUEST_END)},u.initialize=function(){var e,i,r;if(!d){if(u.addEvents(),d=!0,e=l.getPreviousWindowConfig(),i=l.getConfigurationRequestParam(),r=c.getPreviousUserConfigurationPrString(),i&&(i.audicode&&m.loadConfigurationByAudiCode(i.audicode).then(function(e){m.handleExternalConfiguration(e,{startType:"teaser-audicode"})}).then(void 0,function(e){u.eventBus.emit(t.ERROR,[window.i18n["standard-configuration-error"],e.message])}),i.prstring&&m.loadConfigurationByPrString(i.prstring).then(function(e){m.handleExternalConfiguration(e,{startType:"teaser-prstring"})}).then(void 0,function(e){u.eventBus.emit(t.ERROR,[window.i18n["standard-configuration-error"],e.message])})),e){if(e.carline!==n.getCarline())return l.useTrampoline(e,e.subsession,e.entryType),null;m.loadConfigurationByPrString(e.prstring,e.subsession).then(function(t){m.handleExternalConfiguration(t,{startType:e.entryType})},function(e){u.eventBus.emit(t.ERROR,[window.i18n["standard-configuration-error"],e.message])})}e||i||r.then(function(e){m.loadConfigurationByPrString(e).then(function(e){m.handleExternalConfiguration(e,{startType:"user-configuration"})},function(e){console.warn(e.message)})})["catch"](function(e){console.warn(e.message)});var o=new Date;u.dataInitialized=!1;var s=a.fireDataInitializationChain();s.then(function(){u.updatePreselectedItems(),console.info("fireDataInitializationChain completed after "+((new Date).getTime()-o.getTime())+" ms")},function(e){console.warn("fireDataInitializationChain failed after "+((new Date).getTime()-o.getTime())+" ms:"+e.message)})}},m.loadConfigurationByPrString=function(e,t){return a.loadConfigurationByPrString(e,t)},m.loadConfigurationFromTeaser=function(e,a){var i,r=n.getSubsessionID();return e.prstring?(i=m.loadConfigurationByPrString(e.prstring,r),i.then(function(e){m.handleExternalConfiguration(e,{startType:a})})["catch"](function(e){u.eventBus.emit(t.ERROR,[window.i18n["standard-configuration-error"],e.message])})):e.audicode?(i=m.loadConfigurationByAudiCode(e.audicode),i.then(function(e){m.handleExternalConfiguration(e,{startType:a})})["catch"](function(e){u.eventBus.emit(t.ERROR,[window.i18n["standard-configuration-error"],e.message])})):i=Promise.reject("No valid config option found")},m.loadConfigurationByAudiCode=function(e){return a.loadConfigurationByAudiCode(e)},m.listCarstoreItems=function(){return a.sendCarstoreRequest("list",null)},m.switchCarline=function(e,n,i,r){var o=a.switchCarline(e,n,i);return o.then(function(){r?a.adoptConfiguration(r).then(function(e){u.handleConfigurationUpdate(e)})["catch"](function(e){u.configurationUpdateErrors(e)}):(u.eventBus.emit(t.CONFIG_RESET),a.setConfigurationStartType("switched-carline"))})},m.loadCarstoreItem=function(e){var t=a.sendCarstoreRequest("load",{slot:e});return t.then(function(e){m.handleExternalConfiguration(e,{startType:"carstore"})})},m.deleteCarstoreItem=function(e){return a.sendCarstoreRequest("delete",{slot:e})},m.setSubsessionID=function(e){a.setSubsessionID(e)},m.resetToDefaultSetupParams=function(){a.resetToDefaultSetupParams()},m.initializePromise=function(t){return new Promise(function(n){u.eventBus=t,u.legacyEventBus=e("body"),u.initialize(),n("configurator/dpu-controller.js")})},m}),define("module/dsh/data",["configurator/ajax"],function(e){"use strict";var t,n;return n={},t={__:n},n.autoCompleteService,n.data,n.config,n.getUrl=function(e){var t;return t=n.config.DealerSearchBaseURL+n.config.DealerSearchMarketAppParameter+"/",t+e},n.getCachedUrl=function(){return n.config.DealerSearchURLforFetchingAllDealers},t.getAllPartners=function(){return new Promise(function(e,t){n.data?e(n.data):jQuery.ajax({url:n.getCachedUrl()}).done(function(a){if("object"==typeof a)n.data=a,e(n.data);else try{n.data=JSON.parse(a),e(n.data)}catch(i){t(i)}}).fail(function(e,t,n){console.log("dsh api call failed:",n)})})},n.getClientId=function(){return"b95656b9c4"},t.searchPartnersByCity=function(e){return new Promise(function(t,a){jQuery.ajax({url:n.getUrl("city?q="+encodeURIComponent(e)+"&clientId="+n.getClientId())}).done(function(e){if("object"==typeof e)e.partners=n.sortPartnersByDistance(e.partners),t(e);else try{e=JSON.parse(e),t(e)}catch(i){a(i)}})})},n.sortPartnersByDistance=function(e){return e.sort(function(e,t){return t.distance-e.distance})},t.getCityNameSuggestions=function(e,t){var a,i;return i=["(cities)"],a=!isNaN(Number(e)),a&&(i=[]),n.autoCompleteService||(n.autoCompleteService=new google.maps.places.AutocompleteService),new Promise(function(r,o){n.autoCompleteService.getPlacePredictions({input:e,componentRestrictions:{country:t},types:i},function(e,t){var n;if("OK"===t){var i,s;for(i=[],s=e.length-1;s>=0;s--)n=e[s].terms[0].value,a&&(n=e[s].terms[0].value+" "+e[s].terms[1].value),i.unshift(n);r(i)}else o(new Error("Could not retrieve address suggestions: "+t))})})},t.getDealerSuggestions=function(e){var t,a,i,r,o,s;return t=n.data,a=[],s=function(t,n){var a,i;return a=t.name.toLowerCase().indexOf(e.toLowerCase()),i=n.name.toLowerCase().indexOf(e.toLowerCase()),a!==i?a-i:t.name<=n.name.toLowerCase},new Promise(function(n,l){if(t){for(i=t.partners.length-1;i>=0;i--)r=t.partners[i],o=r.name.toLowerCase().indexOf(e.toLowerCase()),-1!==o&&a.push(r);n(a.sort(s).slice(0,5))}else l(new Error("no data available"))})},t.getItemByKvpsId=function(e){var t,a;if(!n.data)return void 0;for(t=n.data.partners,a=t.length-1;a>=0;a--)if(t[a].kvpsid===e)return t[a]},t.setConfig=function(e){n.config=e},t}),define("text!templates/dsh-mapstyles-default.json",[],function(){return'[{"featureType":"transit.line","elementType":"geometry.fill","stylers":[{"saturation":-79}]},{"featureType":"administrative.province","elementType":"all","stylers":[{"visibility":"simplified"}]},{"featureType":"administrative.country","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"administrative.locality","elementType":"all","stylers":[{"visibility":"off"}]},{"featureType":"administrative.land_parcel","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"landscape.man_made","elementType":"all","stylers":[{"visibility":"simplified"}]},{"featureType":"landscape.natural","elementType":"all","stylers":[{"visibility":"on"},{"saturation":-100},{"lightness":20}]},{"featureType":"water","elementType":"all","stylers":[{"visibility":"on"},{"color":"#c6e2fa"}]},{"featureType":"poi.business","elementType":"all","stylers":[{"saturation":-100}]},{"featureType":"poi.government","elementType":"all","stylers":[{"saturation":-100}]},{"featureType":"poi.medical","elementType":"all","stylers":[{"saturation":-100}]},{"featureType":"poi.park","elementType":"all","stylers":[{"visibility":"on"},{"saturation":-100},{"lightness":50}]},{"featureType":"poi.place_of_worship","elementType":"all","stylers":[{"saturation":-100}]},{"featureType":"poi.school","elementType":"all","stylers":[{"saturation":-100}]},{"featureType":"poi.sports_complex","elementType":"all","stylers":[{"saturation":-100}]},{"featureType":"road.highway","elementType":"geometry","stylers":[{"visibility":"on"},{"saturation":-100}]},{"featureType":"road.highway","elementType":"labels","stylers":[{"visibility":"simplified"},{"saturation":-50}]},{"featureType":"road.arterial","elementType":"labels","stylers":[{"visibility":"on"},{"color":"#333333"},{"weight":0.1}]},{"featureType":"road.local","elementType":"geometry","stylers":[{"visibility":"simplified"}]},{"featureType":"administrative.country","elementType":"labels","stylers":[{"visibility":"on"},{"lightness":20}]},{"featureType":"poi.attraction","elementType":"labels","stylers":[{"visibility":"off"}]},{"featureType":"poi.attraction","elementType":"geometry","stylers":[{"saturation":-100}]},{"featureType":"landscape.natural.terrain","elementType":"all","stylers":[{"visibility":"off"},{"lightness":91}]},{"featureType":"poi.park","elementType":"labels","stylers":[{"visibility":"off"}]},{"featureType":"poi.school","elementType":"labels","stylers":[{"visibility":"on"}]},{"featureType":"poi.sports_complex","elementType":"labels","stylers":[{"visibility":"on"}]},{"featureType":"transit.line","elementType":"all","stylers":[{"visibility":"off"}]},{"featureType":"administrative.locality","elementType":"labels.text","stylers":[{"visibility":"on"}]}]\n';
}),define("text!templates/dsh-mapstyles-toplevel.json",[],function(){return'[{"featureType":"transit.line","elementType":"geometry.fill","stylers":[{"saturation":-79}]},{"featureType":"administrative.province","elementType":"all","stylers":[{"visibility":"simplified"}]},{"featureType":"administrative.country","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"administrative.locality","elementType":"all","stylers":[{"visibility":"off"}]},{"featureType":"administrative.neighborhood","elementType":"all","stylers":[{"visibility":"simplified"}]},{"featureType":"administrative.land_parcel","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"landscape.man_made","elementType":"all","stylers":[{"visibility":"simplified"}]},{"featureType":"landscape.natural","elementType":"all","stylers":[{"visibility":"on"},{"saturation":-100},{"lightness":20}]},{"featureType":"water","elementType":"all","stylers":[{"visibility":"on"},{"color":"#c6e2fa"}]},{"featureType":"poi.business","elementType":"all","stylers":[{"saturation":-100}]},{"featureType":"poi.government","elementType":"all","stylers":[{"saturation":-100}]},{"featureType":"poi.medical","elementType":"all","stylers":[{"saturation":-100}]},{"featureType":"poi.park","elementType":"all","stylers":[{"visibility":"on"},{"saturation":-100},{"lightness":50}]},{"featureType":"poi.place_of_worship","elementType":"all","stylers":[{"saturation":-100}]},{"featureType":"poi.school","elementType":"all","stylers":[{"saturation":-100}]},{"featureType":"poi.sports_complex","elementType":"all","stylers":[{"saturation":-100}]},{"featureType":"road.highway","elementType":"geometry","stylers":[{"visibility":"on"},{"saturation":-100}]},{"featureType":"road.highway","elementType":"labels","stylers":[{"visibility":"simplified"},{"saturation":-50}]},{"featureType":"road.arterial","elementType":"labels","stylers":[{"visibility":"on"},{"hue":"#ffff00"},{"gamma":9.99}]},{"featureType":"road.local","elementType":"geometry","stylers":[{"visibility":"simplified"}]},{"featureType":"administrative.country","elementType":"labels","stylers":[{"visibility":"on"},{"lightness":20}]},{"featureType":"poi.attraction","elementType":"labels","stylers":[{"visibility":"off"}]},{"featureType":"poi.attraction","elementType":"geometry","stylers":[{"saturation":-100}]},{"featureType":"landscape.natural.terrain","elementType":"all","stylers":[{"visibility":"off"},{"lightness":91}]},{"featureType":"poi.park","elementType":"labels","stylers":[{"visibility":"off"}]},{"featureType":"poi.school","elementType":"labels","stylers":[{"visibility":"on"}]},{"featureType":"poi.sports_complex","elementType":"labels","stylers":[{"visibility":"on"}]},{"featureType":"transit.line","elementType":"all","stylers":[{"visibility":"off"}]},{"featureType":"road","elementType":"all","stylers":[{"visibility":"off"}]},{"featureType":"poi","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"poi","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"landscape","elementType":"all","stylers":[{"visibility":"on"}]},{"featureType":"administrative.province","elementType":"geometry.stroke","stylers":[{"visibility":"on"},{"invert_lightness":true},{"weight":1.51},{"saturation":-100},{"lightness":-100},{"gamma":1.99}]},{"featureType":"landscape.natural.terrain","elementType":"all","stylers":[{"visibility":"off"},{"color":"#000000"}]},{"featureType":"landscape.natural.landcover","elementType":"all","stylers":[{"visibility":"on"},{"color":"#dfdfdf"}]},{"featureType":"administrative.province","elementType":"all","stylers":[{"visibility":"on"},{"color":"#bdbdbd"},{"weight":1.24}]},{"featureType":"poi","elementType":"all","stylers":[{"visibility":"off"}]},{"featureType":"landscape","elementType":"geometry.fill","stylers":[{"color":"#dfdfdf"}]}]\n'}),define("text!templates/dsh-data-uris.json",[],function(){return'{\n	"pin": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxMjk5OThEQTQwMjA2ODExOTk0QzhGQTU2ODQ1Rjg0QiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0NzNEMzlFRTMxRjAxMUU0QTY3NDg0MTVCMURDNDI4QSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0NzNEMzlFRDMxRjAxMUU0QTY3NDg0MTVCMURDNDI4QSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjEyOTk5OERBNDAyMDY4MTE5OTRDOEZBNTY4NDVGODRCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjEyOTk5OERBNDAyMDY4MTE5OTRDOEZBNTY4NDVGODRCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+A48hrwAAAMVJREFUeNpi/P//P8NQAEwMQwQMGYeyIHPOMpoEAKl+IFYYLA40/n+GEcWhUEeuHwpR3z9U0qjCaGYadeioQ0cdOurQUYeOOnTUoaMOHXXoqENHHTrq0FGHjmiHHhgKDv0AxIUwDguJmi9ADaA1ANkz0fj/mQfkOLQRqLEBXfAsowlFLgKaSZQ6Yh2aCDRwwWDPTAPuSEIhCkqLjkBHXhjMxdOgciQuh14YbI7EFvUwR35gGGSAaSg4EgQYR6dvRqpDAQIMAIe1NQM36mVkAAAAAElFTkSuQmCC",\n	"pin_inactive": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxMjk5OThEQTQwMjA2ODExOTk0QzhGQTU2ODQ1Rjg0QiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2RDM2REMwNzMxRjAxMUU0QTY3NDg0MTVCMURDNDI4QSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2RDM2REMwNjMxRjAxMUU0QTY3NDg0MTVCMURDNDI4QSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjEyOTk5OERBNDAyMDY4MTE5OTRDOEZBNTY4NDVGODRCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjEyOTk5OERBNDAyMDY4MTE5OTRDOEZBNTY4NDVGODRCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+qQgpqQAAAMRJREFUeNpi/P//P8NQAEwMQwQMGYeyIHP6p84MAFFArDBYHFiYnc6I4lCoI9cPhajvHyppVGE0M406dNShow4ddeioQ0cdOurQUYeOOnTUoaMOHXXoqENHtEMPDAWHfgDiQhiHhUTNF6AG0BqA7JlYmJ3+gByHNgI1NqAL9k+dSZGLgGYSpY5YhyYCDVww2DPTgDuSUIiC0qIj0JEXBnPxNKgcicuhFwabI7FFPcyRHxgGGWAaCo4EAcbR6ZuR6lCAAAMA6J4vKwWOtO8AAAAASUVORK5CYII=",\n	"clusterMarker": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxMjk5OThEQTQwMjA2ODExOTk0QzhGQTU2ODQ1Rjg0QiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo0NzNEMzlFRTMxRjAxMUU0QTY3NDg0MTVCMURDNDI4QSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo0NzNEMzlFRDMxRjAxMUU0QTY3NDg0MTVCMURDNDI4QSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjEyOTk5OERBNDAyMDY4MTE5OTRDOEZBNTY4NDVGODRCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjEyOTk5OERBNDAyMDY4MTE5OTRDOEZBNTY4NDVGODRCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+A48hrwAAAMVJREFUeNpi/P//P8NQAEwMQwQMGYeyIHPOMpoEAKl+IFYYLA40/n+GEcWhUEeuHwpR3z9U0qjCaGYadeioQ0cdOurQUYeOOnTUoaMOHXXoqENHHTrq0FGHjmiHHhgKDv0AxIUwDguJmi9ADaA1ANkz0fj/mQfkOLQRqLEBXfAsowlFLgKaSZQ6Yh2aCDRwwWDPTAPuSEIhCkqLjkBHXhjMxdOgciQuh14YbI7EFvUwR35gGGSAaSg4EgQYR6dvRqpDAQIMAIe1NQM36mVkAAAAAElFTkSuQmCC",\n	"clusterMarkerInactive": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAqElEQVRYhe3SwQnCQBCF4VeCJViCpViCpeQmiNmBTHS2m5SwJViCJegtICYbEXR2yfvhHRc+hgUYA8563YfebqGPj1I2g/SHLUJLu2QG6o8ilFBCCSWUUEIJJZTQ0kYooYSuCqo2lA/VeD/JZfctNAW14ddruyhHse0b8hNoq9ZMPvx3WWRnB2/fWBVIYAI695m9qwIJvEBTsUhghKZGZONtyVYFkq2xJxD2se7YIytOAAAAAElFTkSuQmCC",\n	"pin_audi_active": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzYzQkU3RTYzMUVGMTFFNEE2NzQ4NDE1QjFEQzQyOEEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzYzQkU3RTczMUVGMTFFNEE2NzQ4NDE1QjFEQzQyOEEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozNjNCRTdFNDMxRUYxMUU0QTY3NDg0MTVCMURDNDI4QSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozNjNCRTdFNTMxRUYxMUU0QTY3NDg0MTVCMURDNDI4QSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/Pk/GWtYAAAOfSURBVHja7FdpSFRhFL2zuOZC5thoGVpmthiSYRmC9SMQgqxooWwPrECIbIUkMwr6k2ZJUWHaD4tCMI1IikxDFE1Dss0wtQU1zWV03B2nd67NMOPeqPiEufB4b87c+d75zr33vDcSrVZL0yEkZqKTSbRYsnKTcIoTDg+xEPTXFklwlg8gmSZWRaUG13FiLr0hUY/pQpTMRM1EzURND/lYkmYELCW3mMNkG7CM5E4O1Jb/nuoSHlNfRxe5HNtJdkF+JJFJSZ1bQvW3UqlP3U4ukbvJPngFaTV9elzb3UOzI8M4v7exhdoLP1B19G1qK/w49ieTYPhDPktdIrbT3GsnqSH5Kame5ZKmUUUOIWuYoNTGigmrMnKYkOOGIM4nmYzq4h9yPjbguDGYFEe3Emk09Ds2hVoy80jmaEf261cz/utEHOeP6ck0VNj6eTPJqr3nqfFBph7XqNSsDBSFui0vCxiHYtgAzq1Zb/nQhSJ8M2+gKfUVtRd/Zqw54w1vxiv9Kq8zkrIjKuqZcokklhZUse2MEb4gPZaV7aqsZhW/rNrH+MLn16n7Ry1p1B1k67+Yvq4NZ9w7+w6XGSrKlc70LTTSaD2PpGi+T2VY1LCKjjhMuFlz2uvBPevvw0pAHeSgvIwHLmeVgNsF+vYrIXyHngSOQ4cbBtZCjsnDhF2ivINwG2vqrW8ibUcnE0GeVsjDmXGh9Cizbg3kDMQNA62EPJOJdn6qGFLVrrIqVg9lRKl1m+kq/8k4PiMHgWvkcL7gGDp8oKt0ln03nSgGyP3GaapPeEQ9tQ16HJMOHCo1PXqhx+EMylN7qK+7lxoSnxjhrucOskvUXkk2JqCYSYqIHVQdddN0wwcJTOOivCS2JEOlpZZysvJyp5asIj0Ov5Q5OZLlHAW15rzT45h+y3lK/k6dX6rH4bM+Bfepo7ScNzMuH0V/ucYcIeXZ/dxj6CcL5SxWG9fO4Vv4DI+EOn8S0/l3zodC2dQRmHYoLLWzJaddIVwJqIvPNZfvUc3Fu/39O4KPjkpUFyCHyYSxQwH0IwJK2fh68YYYFywLYeXpRtZL5vM1cPSpDud8YXhQAcOWmhCiU/2fyfz2ZCZqJjq+yJ4ORJuF4/h/veEbRMm/BSY7cJ94wZqqTCEaI/zwwkBQ8N/x+uTE/WcS4oCwYLLYh2nKSY6mKHpxnUCyRMz2JCqSwxEtERvJoUqvI9lMIgvpdCBp9D4q9jATnej4K8AATs/YM6OF9IgAAAAASUVORK5CYII=",\n	"pin_audi_inactive": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzYzQkU3RTIzMUVGMTFFNEE2NzQ4NDE1QjFEQzQyOEEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzYzQkU3RTMzMUVGMTFFNEE2NzQ4NDE1QjFEQzQyOEEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozNjNCRTdFMDMxRUYxMUU0QTY3NDg0MTVCMURDNDI4QSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozNjNCRTdFMTMxRUYxMUU0QTY3NDg0MTVCMURDNDI4QSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PqM6PQ4AAAO+SURBVHja7FnLblJRFF1cqNBX1D6AolZ0qFIewRqNRqupUWO0qcbXzJEDR/0D/YLGgQNn/oFxYGKiMTqwCrSUllJB6EPb2tIHUNFCsVDP3goBa1ulGiGyEsK565y777p777MuD9ny8jKKARKKBEUjVJF90Hn3Xhu9iZe+UAR23LwhyxH6XeSDYih9Z7H0qL60mUpCS0L/N8NfDVqNGgebrdCq1VCplJicCsLlHsDSUhJmowHbGrSQyWSYmJxC/4AHX74swWJqwnZdA+izRJpPJlPM0/p4fBFT09N4Ze/GVHB640JNhn04duQQPG98eOJ5IS4Qh35nI1pbjkKhULBge7cTKSFol+BPHm+BJMng7HPjtaMHkriB3bt24nTrCaRSy4LvR9drO5RKJRp3bMOVC2148fIVesX6vIXW19WyyMdPn8H7NpDhFxMJWIxNIqNLnN13Y+PMp5JJwRtE5pIYG5/gVxqGPXv4BvyBYQRnZpgbGhnFyOh7nDtziuOsldk1e9RqNiEwPJIjkkBt4PX74XC6YG4yZPhmqwUDg170DQzCajHl8L39bp47sN+SE2v0/RjHyo7z20I16joWupKv50z4h4Z5TP1JaNBqOEvEN2g0zNEc9eSw4GlOp9WuiEexaE3epZckOW+YFSfJFYjFYlx6EiKXy3kslyTERA9T6anMBJqjNQsxwadSmZvKRkK0kiSX8hcaCoehrl+Z1XAkwtmrjFYgGv3EIgmR+Y/M03EoHGGOxrRGJ3hyDDr3Z64SjsznL9T71o+WI4fR5/bg88JChqedTnwsHoMvMJThB70+0ddGtiHPG2+G9wi+2Wpml3D0uHKuUV6ugtGwF102R/496vMPYTIYxGVhIfrGHRl+LhQWJZWwZfPmnJ1NfqkStlNVWYnxiQ8ZntZUV1XzHO3uNMhnr15sx+xciO0v74ySWT989Jh3edvZ09x7ZE2VFRXsBDQmfnExwWspO7SzCZfaz7OpE5TKTcyXlZXh2qV20d9xkV05H9uEB9u6e7Del8x1DZ8CUFmo/DqxM+mYMhCZ/9ZTDmcv6mpqxOaRBD+H+Y9R5u09TtRs3crj2VCI+5TQZbOjrraW138QFchuqQ0/QgkUkGznR5CAtIhskOC06F/hS5+eSkJLQv8unheDUHrWdvy2PaWfnt8D/G3Qde503Lwxmo/Q2+LEWz+SnXfvbfS3pT9q+NdFwPuFvpn+ucj1Mkq92CJEugrZngpK5GpCXYUm8melT4uMoMAgFYNI/jZb+vvmfxX6VYABAOaF0bhDDlhrAAAAAElFTkSuQmCC",\n	"pin_service_active": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzFBNzlBQzkzMUI1MTFFNEE2NzQ4NDE1QjFEQzQyOEEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6MzFBNzlBQ0EzMUI1MTFFNEE2NzQ4NDE1QjFEQzQyOEEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozMUE3OUFDNzMxQjUxMUU0QTY3NDg0MTVCMURDNDI4QSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozMUE3OUFDODMxQjUxMUU0QTY3NDg0MTVCMURDNDI4QSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PpkXCoEAAAOESURBVHja7JZtSJNRFIDPnMx004WaNksd+ZF9mWn0gYL1I4ryhz8iKoIKUosiFH9FiQuJQhI1ilSoJpFYCRlpn0ITLDLURhlBCn6mbrG1qdMcjnXP3d7XzaY27cWtduBy733vvec+7znnnnt5ZrMZ3EG8wE3EbUC9bTutvM3ppComReoqgEnmFp4dqBXykTu4vthdYlTqOUwe0GkikIaBX0KsU4r5S/3Bf0cSbWONOjgFxQ1XK8phzYcqpzbDH4t9XU7bWAcfS+MWNDT7EAgiJWDsGYQwWeYUhKKCtTLTxh+Jqi2ifYksi9Ux0tgGE92D3IGiNUOyD4Omsg4GZBUQdDSNupG6NTWR1tS11nZ4SS4F1sifgLF7gNWD4z5SCXegaE2+WEQBpXfy6TdbSzn6MV2tgoJi4ewKdWRN3eNGUJdUsYdCkp8JKpEfmPSjIJXL7NaMKlroOM7z3Rj7V0F5zDOPXKHm6aDoxjHlVzDpRqbcSCCYeEN34hjOZebhGuwz30cUrewa23Bw9q6fEdTVHiVznnrvIDGI9yaDcNuGBW2IOjiJUXpwLpyAZaf2g7FfZYnBJiX0587v7RJdX4pe4wZUlLoJtNUvfoNbWZQDopQEMPapoDfrEvjEREBwRjoIIpaDsXeI1h27TtO5q2oKQXX1Lhjef6Z99ExYwUngB4hAfa0ahp+/hYjy8yAID53VELO6fiCvDHzjozFOIObVDbpJyJkDIN6XQjfhi4V0E+/AABDvSQZ1cRUMXakE37VR1NVYRNvjwfDuEwi3rLNcDkSPRl4HXUfyKDyuRz2oD/WiF522KG6AlsE4XVF4llpi/GMnTU1+iXG0bez6RudieOifvqHtnowCmqZQhi7ftrcMSW3ae8+m3hHEkqZhiz59fROMtX1xHjTyVh51o0lvoJb5frMGtPdfQuDB3ST1iIgl/FlQW0FgBlR9/YHd2HBDM8Q1V8J4e6dlnFgysuwc/Wn03o+HDc7lUZonSewtiQmn7Z8dfTDR0ctmAuHW9SwU9nEuesB2LQqzBsOAsTiTAQzN7TCp0bP7TGqH7XT8m3nU88L3gC6OKNwBVEdKzh/lUQeitCrgWnCfUnLiu+cDepEslE3/uJCHhjX9LPxRYiPHiUK5qx+mRYecy6IYizsJpNKV05NLQc4EqnQ1SEeuZyB14GLi5Q6Qds88z13/v4H+EmAAaw5t4zY527UAAAAASUVORK5CYII=",\n	"pin_service_inactive": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAACu0lEQVRYhe3U72raUBgG8FzCLmGXsEvZJexS+m0w1gj1X8BgkCoR8+EUHRmVUCm0VKQuc1KDIaloUMk2KgYL1S/PPp1DrNppR4xdfeGQGHOSX57zJhy3r31x3Odo4j0fS3b4mIBdGSuQ4cP+Ct21JJ+Aho/aQ3cOKmZyOM4rG90gnkqjQIrgYwIKpAgxkwsWGk+lMfY8ANjoZgVSBADwMQEAcFW7DhZ6VbsGAIw9DzdGG3xMwHFegdMfsJTpvpjJwbrtwOkP4PQHDOr0BzjVKsFB46k0HqZT3BhtnGoVAECBFFladGnpvnXbwdjzcKpVcGO0t5coTdNfTn+wEur0B/j2/cd2l56mad12WIoUfvLlKx6mU4w9j/Wv//+fv36zB9sKtECKiKfSCy+JmMlBzORQIEUc55W58+hvuvXPCfRlCnusDU2IEkhJhayQf7ohKanBQS+rNUwm9xi6Loaui7reeDaU9msg0G7PWYqr6w0MXRemZSMhSpAVgmbLQLfnsC0917RsyArB0HXBxwTICkG352DoulDLGhKiBNOyVwaxFpReFAC6PQeyQnB2foG70QhqWUO358C0bJCSisnkHqSkQsrKbJ8e9yc6m82gljVIWRlSVoZp2ej2HKhlDXejES6rtee/TAlRYknRNOt6A3W9gbPzC5CSyhKj/Ujb5ez8Yg76uAWGrsuuW9cbC728FpTiTMvGZHKPy2qNJdZsGTAteymUAvzHKJAue7NloNkyoJY1zGYz1PUGW7WNoVJWZksoZeWFLwF9etqnj+f65/iTonMTojR3n2Vflv/vOxr22ENfJzSarOw+NCqMPkXi754L1floshL0ODwSIh8jybcLyHWgh9HkwdKJ264nkUfJD2H7WL0IJMctga5q5rDrRSA5bg6q7yyS4xhUP4hE3oRtebJeBHJfr7H+AFCUSWwQjL5rAAAAAElFTkSuQmCC",\n	"pin_partner_active": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxMjk5OThEQTQwMjA2ODExOTk0QzhGQTU2ODQ1Rjg0QiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2RDM2REMwNzMxRjAxMUU0QTY3NDg0MTVCMURDNDI4QSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2RDM2REMwNjMxRjAxMUU0QTY3NDg0MTVCMURDNDI4QSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjEyOTk5OERBNDAyMDY4MTE5OTRDOEZBNTY4NDVGODRCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjEyOTk5OERBNDAyMDY4MTE5OTRDOEZBNTY4NDVGODRCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+qQgpqQAAAMRJREFUeNpi/P//P8NQAEwMQwQMGYeyIHP6p84MAFFArDBYHFiYnc6I4lCoI9cPhajvHyppVGE0M406dNShow4ddeioQ0cdOurQUYeOOnTUoaMOHXXoqENHtEMPDAWHfgDiQhiHhUTNF6AG0BqA7JlYmJ3+gByHNgI1NqAL9k+dSZGLgGYSpY5YhyYCDVww2DPTgDuSUIiC0qIj0JEXBnPxNKgcicuhFwabI7FFPcyRHxgGGWAaCo4EAcbR6ZuR6lCAAAMA6J4vKwWOtO8AAAAASUVORK5CYII=",\n	"pin_partner_inactive": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACoAAAAqCAYAAADFw8lbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA2ZpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxMjk5OThEQTQwMjA2ODExOTk0QzhGQTU2ODQ1Rjg0QiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDo2RDM2REMwNzMxRjAxMUU0QTY3NDg0MTVCMURDNDI4QSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2RDM2REMwNjMxRjAxMUU0QTY3NDg0MTVCMURDNDI4QSIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IE1hY2ludG9zaCI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjEyOTk5OERBNDAyMDY4MTE5OTRDOEZBNTY4NDVGODRCIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjEyOTk5OERBNDAyMDY4MTE5OTRDOEZBNTY4NDVGODRCIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+qQgpqQAAAMRJREFUeNpi/P//P8NQAEwMQwQMGYeyIHP6p84MAFFArDBYHFiYnc6I4lCoI9cPhajvHyppVGE0M406dNShow4ddeioQ0cdOurQUYeOOnTUoaMOHXXoqENHtEMPDAWHfgDiQhiHhUTNF6AG0BqA7JlYmJ3+gByHNgI1NqAL9k+dSZGLgGYSpY5YhyYCDVww2DPTgDuSUIiC0qIj0JEXBnPxNKgcicuhFwabI7FFPcyRHxgGGWAaCo4EAcbR6ZuR6lCAAAMA6J4vKwWOtO8AAAAASUVORK5CYII=",\n	"location": "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAPCAYAAADtc08vAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MzYzQkU3RUEzMUVGMTFFNEE2NzQ4NDE1QjFEQzQyOEEiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6NEJBNjA4MTgzMUVGMTFFNEE2NzQ4NDE1QjFEQzQyOEEiPiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDozNjNCRTdFODMxRUYxMUU0QTY3NDg0MTVCMURDNDI4QSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDozNjNCRTdFOTMxRUYxMUU0QTY3NDg0MTVCMURDNDI4QSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PnsPubcAAAEbSURBVHjaYmTADiyBOBCIzYCYB4jvA/FxIF4AxO8Y8AB+IJ4DxP9x4FdQg7ECaSB+gkczMp6GzYDtRGqG4UxkzQnoCqKiov4fOHDg//nz5//Pnz//v5ycHLoBb6FeBoPDyJJFRUX/0cHbt2//S0tLoxsSC9LMhizIycn5/9u3b/+xgTlz5qAbMJkJSIgi+0VLS4sBaAjWUNbV1UUXkgAZ8B1Z5P79+wx///7FasCjR4/QhV7DGFeRnTZ58mQM5//8+fM/0AXoXsiBGVCNHg4tLS3/P3z4ANYMigl7e3t0zT+haYcBFpCXSEwHXej+MQDib0RqPgy1FAOoA/FJPBr/AHELLs0wwAwNnL1A/Bmq8R4QLwJiY3TFAAEGAE7g3+YISVmBAAAAAElFTkSuQmCC"\n}\n'}),define("module/dsh/map",["markerclusterer","text!templates/dsh-mapstyles-default.json","text!templates/dsh-mapstyles-toplevel.json","text!templates/dsh-data-uris.json"],function(e,t,n,a){"use strict";var i,r;return i={},r={__:i},i.dataURIs=JSON.parse(a),i.clusterStyles=[{url:i.dataURIs.clusterMarker,height:42,width:42,anchor:[8,0],textColor:"#ffffff",textSize:12},{url:i.dataURIs.clusterMarker,height:42,width:42,anchor:[8,0],textColor:"#ffffff",textSize:12},{url:i.dataURIs.clusterMarker,height:42,width:42,anchor:[8,0],textColor:"#ffffff",textSize:12},{url:i.dataURIs.clusterMarker,height:42,width:42,anchor:[8,0],textColor:"#ffffff",textSize:12}],i.clusterStylesInactive=[{url:i.dataURIs.clusterMarkerInactive,height:42,width:42,anchor:[8,0],textColor:"#ffffff",textSize:12},{url:i.dataURIs.clusterMarkerInactive,height:42,width:42,anchor:[8,0],textColor:"#ffffff",textSize:12},{url:i.dataURIs.clusterMarkerInactive,height:42,width:42,anchor:[8,0],textColor:"#ffffff",textSize:12},{url:i.dataURIs.clusterMarkerInactive,height:42,width:42,anchor:[8,0],textColor:"#ffffff",textSize:12}],i.topLevelMapStyle=JSON.parse(n),i.defaultMapStyle=JSON.parse(t),i.mapTypeControl=!1,i.panControl=!1,i.streetViewControl=!1,i.zoomControl=!1,i.map,i.markerCluster,r.createCluster=function(e,t){return i.markerCluster=new MarkerClusterer(i.map,t,{gridSize:75,maxZoom:8,styles:i.clusterStyles,averageCenter:!0}),i.markerCluster},r.updateCluster=function(e){i.markerCluster.clearMarkers(),i.markerCluster.addMarkers(e,!1)},r.highlightMarkers=function(e,t){var n,a,r,o;for(n=t?i.clusterStylesInactive:i.clusterStyles,a=e.length;a--;)r=e[a],o=t?r.data.inactiveIconKey:r.data.activeIconKey,r.data.kvpsid===t&&(o=r.data.activeIconKey),r.setIcon({url:i.dataURIs[o],origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,42)});i.markerCluster.setStyles(n),i.markerCluster.resetViewport(),i.markerCluster.redraw()},r.highlightCluster=function(e){var t=i.markerCluster.clusters_[e];t.clusterIcon_.remove(),t.clusterIcon_=new ClusterIcon(t,i.clusterStylesInactive,i.markerCluster.getGridSize()),t.updateIcon()},r.getMarkerIcon=function(e,t){var n;return n=t?"_inactive":"",i.itemIsSales(e)?i.dataURIs["pin_audi_active"+n]:i.dataURIs["pin_service_active"+n]},r.renderMap=function(e){var t,n;return i.defaultStyledMap=new google.maps.StyledMapType(i.defaultMapStyle,{name:"Default Style"}),i.topLevelStyledMap=new google.maps.StyledMapType(i.topLevelMapStyle,{name:"Top Level Style"}),n=e.defaultMapCenter.split(","),t={center:new google.maps.LatLng(n[0],n[1]),zoom:e.defaultZoomLevel,mapTypeId:google.maps.MapTypeId.ROADMAP,styles:i.topLevelMapStyle,panControl:i.panControl,mapTypeControl:i.mapTypeControl,streetViewControl:i.streetViewControl,zoomControl:i.zoomControl},i.map=new google.maps.Map(document.querySelector(".dsh-map"),t),i.map.mapTypes.set("default",i.defaultStyledMap),i.map.mapTypes.set("topLevel",i.topLevelStyledMap),i.map},r.addListener=function(e,t){return google.maps.event.addListener(i.map,e,t)},r.removeListener=function(e){google.maps.event.removeListener(e)},r.topLevelMapStyle=i.topLevelMapStyle,r.defaultMapStyle=i.defaultMapStyle,r.getMap=function(){return i.map},r}),define("core/logging",[],function(){"use strict";var e,t;return t={},e={__:t},t.defaultLoggers=[],t.defaultLoggersLevel=4,t.localStorageKey="v7_logging",t.loggers={},t.debug=function(){1===this.level&&this._log.apply(this,arguments)},t.info=function(){2===this.level&&this._log.apply(this,arguments)},t.warning=function(){this.level<=3&&this._log.apply(this,arguments)},t.error=function(){this._log.apply(this,arguments)},t.noop=function(){},t.Logger=function(t){return this.name=t,this.level=e.logLevels.ERROR,this},t.Logger.prototype.debug=t.noop,t.Logger.prototype.info=t.noop,t.Logger.prototype.warning=t.noop,t.Logger.prototype.error=t.noop,t.Logger.prototype._log=function(){var e,t;if(e=[],window.console)try{for(t=arguments.length-1;t>=0;t--)e.unshift(arguments[t]);e.unshift("["+this.name+"]"),console.log.apply(console,e)}catch(n){console.warn(n)}},t.initialize=function(){var e;try{localStorage&&localStorage[t.localStorageKey]&&(e=JSON.parse(localStorage[t.localStorageKey]),e.loggers&&(t.defaultLoggers=e.loggers),e.logLevel&&(t.defaultLoggersLevel=e.logLevel))}catch(n){console.warn(n)}},e.logLevels={DEBUG:1,INFO:2,WARNING:3,ERROR:4},e.createLogger=function(n){var a;for(t.loggers[n]||(t.loggers[n]=new t.Logger(n)),a=t.defaultLoggers.length-1;a>=0;a--)if(t.defaultLoggers[a]===n){e.activate(n),t.loggers[n].level=t.defaultLoggersLevel;break}return t.loggers[n]},e.activate=function(e){var n=t.loggers[e];n?(n.debug=t.debug,n.info=t.info,n.warning=t.warning,n.error=t.error):t.defaultLoggers.push(e)},e.deactivate=function(e){var n;for(n in t.loggers)t.loggers[n].debug=t.noop,t.loggers[n].info=t.noop,t.loggers[n].warning=t.noop,t.loggers[n].error=t.noop},e.persist=function(e,n){var a;try{a={loggers:e},n&&(a.logLevel=n),localStorage[t.localStorageKey]=JSON.stringify(a)}catch(i){console.warn(i)}},e.unpersist=function(){try{localStorage[t.localStorageKey]=""}catch(e){console.warn(e)}},t.initialize(),e}),define("text!templates/dsh-container.tpl",[],function(){return'<div class="dsh-container">\n\n	<header class="dsh-header">\n\n		{{var headline = window.i18n[\'dsh.header.dealersearch\'];}}\n		{{?it.dshConfig.DealerSearchSpecificHeadline}}\n		{{headline = it.dshConfig.DealerSearchSpecificHeadline;}}\n		{{?}}\n		<h1 class="nm-el-hdl nm-el-hdl-02 nm-at-hdl-b">{{=headline}}</h1>\n\n		<div class="clearfix dsh-search-wrapper">\n			<div class="nm-input dsh-input">\n				<label class="dsh-search-label" for="dsh-search">{{=window.i18n[\'dsh.label.search\']}}</label>\n				<input type="text" class="dsh-search" id="dsh-search" placeholder="{{=window.i18n[\'dsh.label.search.placeholder\']}}"/>\n				<a href="#" class="dsh-btn-gps" title="Geolocate me">Geolocation</a>\n			</div>\n\n			<div class="dsh-filter-container">\n				{{?it.dshConfig.DealerSearchEnableETronSearch !== \'off\'}}\n				<div class="nm-checkbox dsh-filter">\n					<input type="checkbox" class="dsh-filter-tron" name="dsh-filter-tron" id="dsh-filter-tron" />\n					<label for="dsh-filter-tron" class="nm-el-lbl nm-el-lbl-02">{{=window.i18n[\'dsh.label.audi.etron.partner\']}}</label>\n				</div>\n				{{?}}\n				{{?it.dshConfig.DealerSearchEnableR8Search !== \'off\'}}\n				<div class="nm-checkbox dsh-filter">\n					<input type="checkbox" class="dsh-filter-r8" name="dsh-filter-r8" id="dsh-filter-r8" />\n					<label for="dsh-filter-r8" class="nm-el-lbl nm-el-lbl-02">{{=window.i18n[\'dsh.label.audi.r8.partner\']}}</label>\n				</div>\n				{{?}}\n				{{?it.dshConfig.DealerSearchEnableUsedCarsSearch !== \'off\'}}\n				<div class="nm-checkbox dsh-filter">\n					<input type="checkbox" class="dsh-filter-usedcars" name="dsh-filter-usedcars" id="dsh-filter-usedcars" />\n					<label for="dsh-filter-usedcars" class="nm-el-lbl nm-el-lbl-02">{{=window.i18n[\'dsh.label.audi.usedcars.partner\']}}</label>\n				</div>\n				{{?}}\n			</div>\n			{{?(it.dshConfig.DealerSearchEnableAskMode && it.dshConfig.DealerSearchEnableAskMode === \'on\')}}\n			<input type="text" class="dsh-input dsh-search-bnr" id="dsh-search-bnr" placeholder="BNR-Nr."/>\n			{{?}}\n\n			<div class="clearfix dsh-search-container">\n				<div class="dsh-search-suggestions clearfix">\n					<div class="dsh-city-suggestions"></div>\n					<div class="dsh-partner-suggestions"></div>					\n				</div>\n				<p class="dsh-no-suggestions nm-el-hdl nm-el-hdl-05 nm-hidden">{{=window.i18n[\'dsh.search.noresult\']}}</p>\n				<a x-cq-linkchecker="valid" href="#" class="nm-close nm-image-replace">schlieÃen</a>\n\n			</div>\n		</div>\n\n	</header>\n\n	<main class="dsh-main">\n		<div class="dsh-result-details">\n			\n			<div class="dsh-results-wrap">\n				<select class="dsh-results-toggle">\n				</select>\n				<div class="dsh-results"></div>\n			</div>\n\n			<div class="dsh-partner-details"></div>\n\n		</div>\n\n		<div class="dsh-map"></div>\n\n		<nav class="dsh-map-controls">\n			<button id="dsh-zoom-in" title="Zoom in"><span class="zoom-in">+</span></button>\n			<button id="dsh-zoom-out" title="Zoom out"><span class="zoom-out">â</span></button>\n		</nav>\n	</main>\n</div>\n'}),define("text!templates/dsh-partner-list.tpl",[],function(){return'{{~it :dealer:index}}\n	{{var displayString = dealer.name + \', \' + dealer.address.zipCode + \' \' + dealer.address.city;}}\n	<a href="#" data-dsh-kvpsid="{{=dealer.kvpsid}}" class="chain-list-item nm-el-lk nm-el-lk-01 nm-el-lk-ast">{{=displayString}}</a><br />\n{{~}}\n'}),define("text!templates/dsh-resultlist-item.tpl",[],function(){return'<div class="dsh-resultlist-item" data-dsh-kvpsid="{{=it.kvpsid}}" data-dsh-services="{{=it.servicesAsString}}">\n    <span class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">{{=it.name}}</span>\n    <div class="dsh-result-meta clearfix">\n       {{var dealer = window.i18n["dsh.icon.dealer"] || "Dealer";}}\n        {{var service = window.i18n["dsh.icon.service"] || "Service";}}\n        {{?!!it.dealer}}<span class="dsh-result-type dsh-icon-dealer">{{=dealer}}</span>{{?}} {{?!!it.service}}<span class="dsh-result-type dsh-icon-service">{{=service}}</span>{{?}}\n\n        {{?!!it.distanceAsString}}\n        <span class="dsh-result-direction nm-el-lbl nm-el-lbl-01">{{=it.distanceAsString}}</span>\n        {{?}}\n    </div>\n\n	{{?!!it.address.display}}\n    <p class="nm-el-lbl nm-el-lbl-01">{{=it.address.display[0]}}<br/>\n    {{=it.address.display[1]}}</p>\n	{{?}}\n\n	{{?!!it.contactDetails.phone.display}}\n    {{var phone = window.i18n["dsh.label.phone"] || "Telefon";}}\n    <p class="nm-el-lbl nm-el-lbl-01">{{=phone}}: {{=it.contactDetails.phone.display}}<p>\n	{{?}}\n\n    {{?it.dshConfig.DealerSearchEnableAskMode === \'on\'}}\n\n    {{var kvpsid = window.i18n["dsh.details.label.dealer.ask.kvpsid"] || "Betriebsnummer";}}\n    {{var regionNumber = window.i18n["dsh.details.label.dealer.ask.regionNumber"] || "Regionsnummer";}}\n    {{var distributionCenter = window.i18n["dsh.details.label.dealer.ask.distributionCenter"] || "VZ-Nummer";}}\n    {{var contractStatusGvo = window.i18n["dsh.details.label.dealer.ask.contractStatusGvo"] || "Vertragsstatus";}}\n\n        <p class="nm-el-lbl nm-el-lbl-01 dsh-ask-mode-values">\n        {{?!!it.kvpsid}}\n            {{=kvpsid}}: {{=it.kvpsid}}<br/>\n        {{?}}\n        {{?!!it.address.regionNumber}}\n            {{=regionNumber}}: {{=it.address.regionNumber}}<br/>\n        {{?}}\n        {{?!!it.address.distributionCenter}}\n            {{=distributionCenter}}: {{=it.address.distributionCenter}}<br/>\n        {{?}}\n        {{?!!it.contractStatusGvo}}\n            {{=contractStatusGvo}}: {{=it.contractStatusGvo}}\n        {{?}}\n        </p>\n    {{?}}\n\n    <!-- TODO: check for existing links -->\n    <p class="dsh-dealer-links">\n\n		{{?it.dshConfig.DealerSearchShowRouteplannerLink === \'on\'}}\n			{{var calcRoute = window.i18n["dsh.details.label.dealer.calculate.route"] || "Route berechnen";}}\n			<span><a href="{{=it.directionsLink}}" class="nm-el-lk nm-el-lk-01 nm-at-lk-b nm-el-lk-icn nm-at-lk-highlight nm-icon-routing" target="_blank"><span class="dsh-tooltip">{{=calcRoute}}</span></a></span>\n		{{?}}\n\n        {{?!!it.url}}\n		{{var website = window.i18n["dsh.details.label.dealer.website"] || "Website";}}\n        <span><a href="{{=it.url}}" class="nm-el-lk nm-el-lk-01 nm-at-lk-b nm-el-lk-icn nm-at-lk-highlight nm-icon-url" target="_blank"><span class="dsh-tooltip">{{=website}}</span></a></span>\n        {{?}}\n\n        {{?!!it.contactDetails.email}}\n        {{var enquiry = window.i18n["dsh.icon.dealer.enquiry"] || "H&auml;ndleranfrage";}}\n		{{var subject = window.i18n["dsh.details.label.dealer.email.subject"] || "";}}\n        <span><a href="mailto:{{=it.contactDetails.email}}?subject={{=subject.replace(/ /g, \'%20\')}}" class="nm-el-lk nm-el-lk-01 nm-at-lk-b nm-el-lk-icn nm-at-lk-highlight nm-icon-enquiry"><span class="dsh-tooltip">{{=enquiry}}</span></a></span>\n        {{?}}\n\n        <!-- TODO: check if link to test drive exists -->\n        {{?it.dshConfig.DealerSearchShowTestDriveLink !== \'off\'}}\n            {{var testdrive = window.i18n["dsh.icon.dealer.testdrive"] || "Probefahrt anfragen";}}\n            <span><a href="#" class="nm-el-lk nm-el-lk-01 nm-at-lk-b nm-el-lk-icn nm-at-lk-highlight nm-icon-testdrive" title="{{=testdrive}}"><span class="dsh-tooltip">{{=testdrive}}</span></a></span>\n        {{?}}\n    </p>\n    <hr/>\n</div>\n';
}),define("text!templates/dsh-partner-details.tpl",[],function(){return'<article>\n\n    <div class="dsh-detail-header clearfix">\n        <div class="nm-button-close nm-b-icon nm-icon-close">\n            {{var close = window.i18n["mssc.ui.common.icon.close"] || "X";}}\n            <span>{{=close}}</span>\n        </div>\n    	<h2 class="nm-el-hdl nm-el-hdl-03 nm-at-hdl-b">{{=it.name}}</h2>\n    </div>\n\n    <div class="dsh-detail-main">\n\n        <ul class="dsh-detail-info">\n			{{?!!it.address.display}}\n			<li class="dsh-partner-services-detail">\n                            {{var dealer = window.i18n["dsh.details.label.dealer"] || "Audi Partner (Verkauf)";}}\n                            {{var service = window.i18n["dsh.details.label.service"] || "Audi Partner (Service)";}}\n                            {{var etron = window.i18n["dsh.details.label.etron"] || "Audi e-tron Partner";}}\n                            {{var r8 = window.i18n["dsh.details.label.r8"] || "Audi Sport";}}\n                            {{var plus = window.i18n["dsh.details.label.plus"] || "Audi :plus Partner";}}\n                            {{?!!it.dealer}}<p class="dsh-result-type dsh-icon-dealer nm-el-lbl nm-el-lbl-01">{{=dealer}}</p>{{?}}\n                            {{?!!it.service}}<p class="dsh-result-type dsh-icon-service nm-el-lbl nm-el-lbl-01">{{=service}}</p>{{?}}\n                            {{?!!it.eTron}}<p class="nm-el-lbl nm-el-lbl-01">{{=etron}}</p>{{?}}\n                            {{?!!it.r8}}<p class="nm-el-lbl nm-el-lbl-01">{{=r8}}</p>{{?}}\n                            {{?!!it.plus}}<p class="nm-el-lbl nm-el-lbl-01">{{=plus}}</p>{{?}}\n			</li>\n            <li>\n                <p class="nm-el-lbl nm-el-lbl-01">{{=it.address.display[0]}}<br/>\n                {{=it.address.display[1]}}</p>\n            </li>\n			{{?}}\n\n            <li>\n                {{var phone = window.i18n["dsh.label.phone"] || "Telefon";}}\n                {{var fax = window.i18n["dsh.label.fax"] || "Telefax";}}\n				{{?!!it.contactDetails.phone.display || it.contactDetails.fax.display}}\n                <p class="nm-el-lbl nm-el-lbl-01">\n					{{?!!it.contactDetails.phone.display}}\n						{{=phone}}: {{=it.contactDetails.phone.display}}<br/>\n					{{?}}\n					{{?!!it.contactDetails.fax.display}}\n						{{=fax}}: {{=it.contactDetails.fax.display}}\n					{{?}}\n                </p>\n				{{?}}\n            </li>\n\n            {{?it.dshConfig.DealerSearchEnableAskMode === \'on\'}}\n\n            {{var kvpsid = window.i18n["dsh.details.label.dealer.ask.kvpsid"] || "Betriebsnummer";}}\n            {{var regionNumber = window.i18n["dsh.details.label.dealer.ask.regionNumber"] || "Regionsnummer";}}\n            {{var distributionCenter = window.i18n["dsh.details.label.dealer.ask.distributionCenter"] || "VZ-Nummer";}}\n            {{var contractStatusGvo = window.i18n["dsh.details.label.dealer.ask.contractStatusGvo"] || "Vertragsstatus";}}\n\n            <li>\n                <p class="nm-el-lbl nm-el-lbl-01 dsh-ask-mode-values">\n                {{?!!it.kvpsid}}\n                    {{=kvpsid}}: {{=it.kvpsid}}<br/>\n                {{?}}\n                {{?!!it.address.regionNumber}}\n                    {{=regionNumber}}: {{=it.address.regionNumber}}<br/>\n                {{?}}\n                {{?!!it.address.distributionCenter}}\n                    {{=distributionCenter}}: {{=it.address.distributionCenter}}<br/>\n                {{?}}\n                {{?!!it.contractStatusGvo}}\n                    {{=contractStatusGvo}}: {{=it.contractStatusGvo}}\n                {{?}}\n                </p>\n            </li>\n            {{?}}\n    	</ul>\n\n        <p class="dsh-dealer-links">\n\n			{{?it.dshConfig.DealerSearchShowRouteplannerLink === \'on\'}}\n				{{var calcRoute = window.i18n["dsh.details.label.dealer.calculate.route"] || "Route berechnen";}}\n				<span><a href="{{=it.directionsLink}}" class="nm-el-lk nm-el-lk-04 nm-el-lk-icn nm-at-lk-variant nm-icon-routing" target="blank">{{=calcRoute}}</a></span>\n            {{?}}\n\n            {{?!!it.url}}\n            {{var website = window.i18n["dsh.details.label.dealer.website"] || "Website";}}\n            <span><a href="{{=it.url}}" class="nm-el-lk nm-el-lk-04 nm-el-lk-icn nm-at-lk-variant nm-icon-url" target="_blank">{{=website}}</a></span>\n            {{?}}\n\n            {{?!!it.contactDetails.email}}\n            {{var enquiry = window.i18n["dsh.details.label.dealer.email"] || "E-Mail";}}\n			{{var subject = window.i18n["dsh.details.label.dealer.email.subject"] || "";}}\n            <span><a href="mailto:{{=it.contactDetails.email}}?subject={{=subject.replace(/ /g, \'%20\')}}" class="nm-el-lk nm-el-lk-04 nm-el-lk-icn nm-at-lk-variant nm-icon-enquiry">{{=enquiry}}</a></span>\n            {{?}}\n\n			{{?it.dshConfig.DealerSearchShowTestDriveLink !== \'off\'}}\n				{{var testdrive = window.i18n["dsh.details.label.dealer.testdrive"] || "Probefahrt anfragen";}}\n				<span><a href="#" class="nm-el-lk nm-el-lk-04 nm-el-lk-icn nm-at-lk-variant nm-icon-testdrive">{{=testdrive}}</a></span>\n            {{?}}\n\n			{{?it.dshConfig.DealerSearchShowPrintLink !== \'off\'}}\n				{{var print = window.i18n["dsh.details.label.print"] || "Drucken";}}\n				<span><a href="#" class="nm-el-lk nm-el-lk-04 nm-el-lk-icn nm-at-lk-variant nm-icon-print">{{=print}}</a></span>\n            {{?}}\n\n            {{?it.dshConfig.DealerSearchShowVcfLink !== \'off\'}}\n                {{?!!it.vcardURL}}\n				    {{var vcard = window.i18n["dsh.details.label.dealer.vcard"] || "Download vCard";}}\n                    {{?!!it.dshConfig.DealerSearchBaseURL}}\n           			{{ var urlParser = document.createElement("a");}}\n           			{{ urlParser.href = it.dshConfig.DealerSearchBaseURL}}\n                    {{ var baseUrl = ((it.dshConfig.DealerSearchBaseURL).substr(0,(it.dshConfig.DealerSearchBaseURL).indexOf("://") + 3) + urlParser.hostname);  }}\n				    <span><a href="{{=baseUrl}}{{=it.vcardURL}}" class="nm-el-lk nm-el-lk-04 nm-el-lk-icn nm-at-lk-variant nm-icon-vcard">{{=vcard}}</a></span>\n                    {{?}}\n                {{?}}\n            {{?}}\n\n        </p>\n\n        <div class="dsh-tab-section clearfix">\n            <ul class="dsh-tabs">\n                {{var location = window.i18n["dsh.details.label.dealer.location"] || "Standort";}}\n                {{?(!!it.notes && it.notes.openingHoursHTML) || !!it.chainList}}\n                <li class="nm-el-lbl nm-el-lbl-03 active-item" data-tab="">{{=location}}</li>\n                {{?}}\n                <li class="nm-el-lbl nm-el-lbl-03 active" data-tab="dsh-location">{{=location}}</li>\n                {{?!!it.notes && it.notes.openingHoursHTML}}\n				{{var openinghours = window.i18n["dsh.details.label.dealer.openinghours"] || "&Ouml;ffnungszeiten";}}\n                <li class="nm-el-lbl nm-el-lbl-03" data-tab="dsh-opening-hours">{{=openinghours}}</li>\n                {{?}}\n                {{?!!it.chainList}}\n                {{var chainList = window.i18n["dsh.details.label.dealer.chainlist"] || "Weitere Standorte";}}\n                <li class="nm-el-lbl nm-el-lbl-03" data-tab="dsh-chain-list">{{=chainList}}</li>\n                {{?}}\n            </ul>\n\n            <div class="dsh-panels">\n                <div class="dsh-panel active" data-panel="dsh-location">\n					<div class="dsh-partner-map"></div>\n                </div>\n                {{?!!it.notes && it.notes.openingHoursHTML}}\n                <div class="dsh-panel dsh-opening-hours nm-el-lbl nm-el-lbl-01" data-panel="dsh-opening-hours">\n                    {{=it.notes.openingHoursHTML}}\n                </div>\n                {{?}}\n                {{?!!it.chainList}}\n 				<div class="dsh-panel dsh-chain-list nm-el-lbl nm-el-lbl-01" data-panel="dsh-chain-list">\n					<div class="dsh-chain-list"></div>\n                </div>\n                {{?}}\n            </div>\n        </div>\n\n    </div>\n</article>\n'}),define("module/dsh/api",["module/dsh/data","module/dsh/map","core/logging","core/template","configurator/ajax","markerclusterer","text!templates/dsh-container.tpl","text!templates/dsh-partner-list.tpl","text!templates/dsh-resultlist-item.tpl","text!templates/dsh-partner-details.tpl","text!templates/dsh-data-uris.json","jquery"],function(e,t,n,a,i,r,o,s,l,c,u){"use strict";var d,m;return m={},d={__:m},m.MARKET_COMMA_DECIMAL={"audi-deu":!0},m.updateLock=!1,m.updateReleaseCallback,m.defaultZoomLevel=6,m.defaultMapCenter="51.318928,9.49601",m.r8FilterActive=!1,m.tronFilterActive=!1,m.usedCarsFilterActive=!1,m.dealerData,m.dshContainer,m.detailsVisible=!1,m.markers=[],m.centerMarker,m.resultlistEl,m.dataURIs=JSON.parse(u),m.defaultStyledMap,m.topLevelStyledMap,m.defaultCountryCode="de",m.partnerDetailsSelector=".dsh-main .dsh-partner-details",m.config={},m.listScrollLocker=!1,m.markersWithinCurrentBounds,m.currentCenter,m.currentBounds,m.updateListener,m.mapLoadedListener,m.readConfig=function(e,t){var n,a,i;m.config||(m.config={});try{n=JSON.parse(e),m.config.MapsDirectionsBaseUrl="https://maps.google.com/maps/dir";for(a in n)n.hasOwnProperty(a)&&(m.config[a]=n[a]);m.config.distanceUnit=t,i=m.config.DealerSearchDefaultZoomlevel||m.defaultZoomLevel,m.defaultZoomLevel=Number(i),jQuery(document).width()<750&&(m.defaultZoomLevel-=1),m.defaultMapCenter=m.config.DealerSearchDefaultMapCenter||m.defaultMapCenter,m.config.localeLang=m.config.DealerSearchLocaleLanguage||"en"}catch(r){console.log("DSH: Could not read config",r)}},m.lock_and_release=function(e){m.updateLock=!0,setTimeout(function(){m.updateLock=!1,"function"==typeof m.updateReleaseCallback&&(m.updateReleaseCallback(),m.updateReleaseCallback=!1)},e)},m.sortMarkers=function(e){var t,n,a,i;for(n=[],a=[],i=[],t=e.length-1;t>=0;t--)e[t].data.distance?n.push(e[t]):a.push(e[t]);for(n.sort(function(e,t){return t.data.distance-e.data.distance}),a.sort(function(e,t){return t.data.name>e.data.name}),t=n.length-1;t>=0;t--)i.push(n[t]);for(t=a.length-1;t>=0;t--)i.push(a[t]);return i},m.filterService=function(e,t){var n,a=[];for(n=e.length-1;n>=0;n--)e[n].data.services&&e[n].data.services.toString().match(t)&&a.unshift(e[n]);return a},m.createDistanceString=function(e){var t,n,a,i;return n={kilometers:"km",miles:"miles"},m.config.distanceUnit?(a=n[m.config.distanceUnit]||n.kilometers,e.address.distance?i=e.address.distance[m.config.distanceUnit]:(i=e.distance,a=n.kilometers)):(a=n.kilometers,i=e.distance),i&&"NaN"!==i&&(t=Number(i),t=t>10?String(t.toFixed(0)):String(t.toFixed(1)),m.MARKET_COMMA_DECIMAL[m.config.DealerSearchMarketAppParameter]===!0&&(t=String(t).replace(".",",")),e.distanceAsString=t+" "+a),e},m.updateResultList=function(e){var n,i,r,o,s,c,u;r=[],c=t.getMap(),setTimeout(function(){if(c.zoom<8)m.resultlistEl.html(""),m.removeClassName("dsh-results-active");else if(e){for(m.resultlistEl.html(""),n=e.length-1;n>=0;n--)s=m.enhanceDealerData(e[n]),s=m.createDistanceString(s),i=a.render(l,s),jQuery(i).prependTo(m.resultlistEl);u=m.dshContainer.className,e.length>0?m.setClassName("dsh-results-active"):m.removeClassName("dsh-results-active")}else{for(o=m.currentBounds,n=m.markers.length-1;n>=0;n--)o.contains(m.markers[n].getPosition())&&r.unshift(m.markers[n]);for(r=m.sortMarkers(r),m.markersWithinCurrentBounds=r,m.r8FilterActive&&(r=m.filterService(r,"r8")),m.tronFilterActive&&(r=m.filterService(r,"tron")),m.usedCarsFilterActive&&(r=m.filterService(r,"usedcars")),m.resultlistEl.html(""),n=r.length-1;n>=0;n--)s=m.enhanceDealerData(r[n].data),s=m.createDistanceString(s),i=a.render(l,s),jQuery(i).prependTo(m.resultlistEl);m.addMarkerHighlightEvents(r),r.length>0?m.setClassName("dsh-results-active"):(m.removeClassName("dsh-results-active"),google.maps.event.trigger(c,"resize"))}},200)},m.addMarkerHighlightEvents=function(e){var n=!0;window.SETUPS&&(n="off"!==SETUPS.get("feature.dsh.marker-hover")),n&&(m.resultlistEl.find(".dsh-resultlist-item").off("mouseenter"),m.resultlistEl.find(".dsh-resultlist-item").on("mouseenter",function(n){t.highlightMarkers(e,jQuery(n.target).closest(".dsh-resultlist-item").attr("data-dsh-kvpsid"))}),m.resultlistEl.off("mouseleave").on("mouseleave",function(n){t.highlightMarkers(e)}))},m.itemIsSales=function(e){var t;if(!e.services)return!1;for(t=e.services.length-1;t>=0;t--)if("sales"===e.services[t])return!0;return!1},m.itemIsService=function(e){var t;if(!e.services)return!1;for(t=e.services.length-1;t>=0;t--)if("service"===e.services[t])return!0;return!1},m.itemIsR8=function(e){var t;if(!e.services)return!1;for(t=e.services.length-1;t>=0;t--)if(e.services[t].indexOf("r8")>-1)return!0;return!1},m.itemIsETron=function(e){var t;if(!e.services)return!1;for(t=e.services.length-1;t>=0;t--)if(e.services[t].indexOf("tron")>-1)return!0;return!1},m.itemIsPlus=function(e){var t;if(!e.services)return!1;for(t=e.services.length-1;t>=0;t--)if(e.services[t].indexOf("usedcars")>-1)return!0;return!1},m.getMarkerIcon=function(e){return m.itemIsSales(e)?(e.activeIconKey="pin_audi_active",e.inactiveIconKey="pin_audi_inactive"):(e.activeIconKey="pin_service_active",e.inactiveIconKey="pin_service_inactive"),m.itemIsSales(e)?m.dataURIs.pin_audi_active:m.dataURIs.pin_service_active},m.initMarkers=function(){var n,a,i;e.getAllPartners().then(function(e){for(m.dealerData=e,m.markers=[],n=m.dealerData.partners.length-1;n>=0;n--)a=new google.maps.LatLng(m.dealerData.partners[n].address.latitude,m.dealerData.partners[n].address.longitude),i=new google.maps.Marker({position:a,zIndex:10,icon:{url:m.getMarkerIcon(m.dealerData.partners[n]),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,42)}}),i.dshIndex=n,i.kvpsid=m.dealerData.partners[n].kvpsid,i.data=m.dealerData.partners[n],m.addMarkerListener(i),m.markers.unshift(i);m.markerCluster=t.createCluster(t.getMap(),m.markers)},function(e){console.log(e)})},m.createMarkers=function(e,t){for(var n,a,i,r,o,s,l,c,u,d,g,f,p,v=[],h=e.length-1;h>-1;h--)d=e[h],n=d.address,a=n.latitude,i=n.longitude,r=new google.maps.LatLng(a,i),s=s?Math.max(s,i):i,l=l?Math.min(l,i):i,c=c?Math.max(c,a):a,u=u?Math.min(u,a):a,o=new google.maps.Marker({position:r,icon:{url:m.getMarkerIcon(d),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,42)}}),o.setMap(t),o.dshIndex=d.dshIndex,o.kvpsid=d.kvpsid,o.data=d,v.push(o);return g=new google.maps.LatLng(c,s),f=new google.maps.LatLng(u,l),p=new google.maps.LatLngBounds(f,g),{markers:v,bounds:p}},m.renderPartnersOnMap=function(e,t){var n,a,i;n=m.createMarkers(e,t),a=n.bounds,i=a.getCenter(),t.setCenter(i)},m.updateMarkers=function(e){var n,a,i,r,o,s,l,c,u;for(m.markers=[],s=[],n=e.length-1;n>=0;n--)e.length&&2===e[n].length?(a=e[n][0],o=e[n][1]):(a=e[n],o=n),s.push(a),i=new google.maps.LatLng(a.address.latitude,a.address.longitude),r=new google.maps.Marker({position:i,icon:{url:m.getMarkerIcon(a),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,42)},clickable:!m.detailsVisible}),r.dshIndex=o,r.kvpsid=a.kvpsid,r.distance=a.distance,r.data=a,m.addMarkerListener(r),m.markers.unshift(r);t.updateCluster(m.markers),m.updateResultList(),l=document.querySelector(".dsh-filter-r8"),c=document.querySelector(".dsh-filter-tron"),u=document.querySelector(".dsh-filter-usedcars"),l.checked?d.handleR8Filter({target:l}):c.checked?d.handleTronFilter({target:c}):u.checked&&d.handleUsedCarsFilter({target:u})},m.addMarkerListener=function(e){google.maps.event.addListener(e,"click",function(){d.handleMarkerClick(e)}),google.maps.event.addListener(e,"mouseover",function(){d.handleMarkerMouseover(e)}),google.maps.event.addListener(e,"mouseout",function(){d.handleMarkerMouseout(e)})},m.addUIEvents=function(){jQuery("body").on("click",".dsh-filter-r8",d.handleR8Filter),jQuery("body").on("click",".dsh-filter-tron",d.handleTronFilter),jQuery("body").on("click",".dsh-filter-usedcars",d.handleUsedCarsFilter),jQuery("body").on("keyup",".dsh-search",d.handleSearchKeyUp),jQuery("body").on("click",".dsh-partner-details .nm-button-close",d.handleDetailsClose),jQuery("body").on("click",".dsh-resultlist-item",d.handleResultListItemClick),jQuery("body").on("click","#dsh-zoom-in",d.handleZoomIn),jQuery("body").on("click","#dsh-zoom-out",d.handleZoomOut),jQuery("body").on("click",".dsh-city-suggestions a",d.handleCitySuggestionClick),jQuery("body").on("click",".dsh-partner-suggestions a",d.handlePartnerSuggestionClick),jQuery("body").on("change",".dsh-results-toggle",d.handleResultListFilterChange),jQuery("body").on("click",".dsh-tabs li",d.handleDetailsTabClick),jQuery("body").on("click",".dsh-search-container .nm-close",d.handleSearchCloseClick),jQuery("body").on("click",".dsh-btn-gps",d.handleGPSButtonClick),void 0!==m.config.DealerSearchEnableAskMode&&"on"===m.config.DealerSearchEnableAskMode&&jQuery("body").on("keyup",".dsh-search-bnr",d.handleSearchBnrKeyUp)},m.setClassName=function(e){var n=m.dshContainer.className;(0===n.length||-1===n.indexOf(e))&&(m.dshContainer.className=n+" "+e),"dsh-results-active"===e&&jQuery(document).width()<750?t.getMap().setOptions({draggable:!1}):t.getMap().setOptions({draggable:!m.detailsVisible})},m.removeClassName=function(e){var n=m.dshContainer.className,a=new RegExp(e,"g");m.dshContainer.className=n.replace(a,""),t.getMap().setOptions({draggable:!0})},d.handleResultListMouseOver=function(e){console.log(e.target)},d.handleResultListMouseOut=function(e){},m.getI18NKey=function(e){return window&&window.i18n?window.i18n[e]:void 0},m.addResultListFilter=function(e){var t,n,a,i,r,o,s;if(s="Alle Audi Partner",window.i18n&&window.i18n["dsh.results.dropdown.all"]&&(s=window.i18n["dsh.results.dropdown.all"]),n=e.querySelector(".dsh-results-toggle"),n.innerHTML="",a=document.createElement("option"),a.value="all",a.innerHTML=m.getI18NKey("dsh.results.dropdown.all")||s,n.appendChild(a),m.config.DealerSearchDropdownFilter)for(t=m.config.DealerSearchDropdownFilter.split(","),r=0,o=t.length;o>r;r++)i=t[r].trim(),a=document.createElement("option"),a.value=i,a.innerHTML=m.getI18NKey("dsh.results.dropdown."+i)||i+" Partner",n.appendChild(a)},d.handleZoomIn=function(e){var n=t.getMap();n&&(n.setZoom(n.zoom+1),d.handleCenterChange())},d.handleZoomOut=function(e){var n,a=t.getMap();a&&(n=a.zoom-1,a.setZoom(n),d.handleCenterChange())},d.handleResize=function(){var e=t.getMap();e&&(google.maps.event.trigger(e,"resize"),e.setCenter(m.currentCenter))},d.saveCenter=function(){var e=t.getMap();e&&(m.currentCenter=e.getCenter(),m.currentBounds=e.getBounds())},d.handleZoomChange=function(){var e=t.getMap();e.zoom>m.defaultZoomLevel?e.setMapTypeId("default"):e.setMapTypeId("topLevel")},d.handleCenterChange=function(){m.updateLock!==!0?(m.updateResultList(),m.lock_and_release(1e3)):m.updateReleaseCallback=d.handleCenterChange},d.handleMarkerClick=function(e){d.showDetails(e.data)},d.handleMarkerMouseover=function(e){var t,n,a;a=500,n=document.querySelector(".dsh-results"),n&&(m.listScrollLocker||(m.listScrollLocker=!0,setTimeout(function(){m.listScrollLocker=!1},a),t=document.querySelector('div[data-dsh-kvpsid="'+e.kvpsid+'"]'),t&&(jQuery(n).animate({scrollTop:t.offsetTop},a),jQuery(".dsh-resultlist-item").removeClass("is-active"),jQuery(t).addClass("is-active"))))},d.handleMarkerMouseout=function(e){0===document.querySelectorAll(".dsh-details-active").length&&jQuery(".dsh-resultlist-item").removeClass("is-active")},d.handleDetailsClose=function(e){d.hideDetails()},d.handleSearchCloseClick=function(e){e.preventDefault(),e.stopImmediatePropagation(),jQuery(".dsh-partner-suggestions").html(""),jQuery(".dsh-city-suggestions").html(""),jQuery(".dsh-search").val(""),m.removeClassName("dsh-search-active")},d.handleResultListFilterChange=function(e){var n,a,i,r,o,s,l,c,u,d,g,f={},p=[];if(n=e.target.value,a=document.querySelectorAll(".dsh-resultlist-item"),"all"===n){for(i=0,r=a.length-1;r>i;i++)u=a[i],jQuery(u).removeClass("is-hidden");t.updateCluster(m.markersWithinCurrentBounds)}else{for(i=0,r=a.length;r>i;i++){for(u=a[i],l=u.getAttribute("data-dsh-services").split(","),c=!1,o=0,s=l.length;s>o;o++)l[o].trim()===n&&(c=!0);c?(jQuery(u).removeClass("is-hidden"),d=u.getAttribute("data-dsh-kvpsid"),d&&(f[d]=d)):jQuery(u).addClass("is-hidden"),c=!1}for(r=m.markersWithinCurrentBounds.length;r--;)g=m.markersWithinCurrentBounds[r],f[g.data.kvpsid]&&p.push(g);t.updateCluster(p)}},d.handleResultListItemClick=function(t){var n,a;n=jQuery(t.target).closest(".dsh-resultlist-item").attr("data-dsh-kvpsid"),a=e.getItemByKvpsId(n),d.showDetails(a)},d.handleDetailsTabClick=function(e){if(0!==jQuery(".dsh-tabs .active-item").length){var t,n,a,i;if(a=jQuery(".dsh-tabs"),jQuery(e.target).hasClass("active"))return void(a.hasClass("is-open")?a.removeClass("is-open"):a.addClass("is-open"));a.removeClass("is-open"),t=jQuery(".dsh-panels > div"),n=jQuery(".dsh-tabs li"),jQuery(e.target).hasClass("active-item")||(n.removeClass("active"),jQuery(e.target).addClass("active"),jQuery(e.target).siblings(".active-item").text(jQuery(e.target).text()),t.removeClass("active"),i=jQuery(e.target).attr("data-tab"),jQuery(".dsh-panel[data-panel='"+i+"']").addClass("active"))}},d.showDetails=function(e){var n,i,r,o;e=m.enhanceDealerData(e),m.addChainAssociation(e),r=document.querySelector('.dsh-resultlist-item[data-dsh-kvpsid="'+e.kvpsid+'"]'),jQuery(".dsh-resultlist-item").removeClass("is-active"),jQuery(r).addClass("is-active"),o=e.dshConfig.DealerSearchBaseURL,o&&0!==o.indexOf("http")&&(e.dshConfig.DealerSearchBaseURL=location.protocol+o),m.partnerDetailsContainer||(m.partnerDetailsContainer=document.querySelector(m.partnerDetailsSelector)),jQuery(m.partnerDetailsContainer).attr("data-dsh-kvpsid",e.kvpsid),i=m.dshContainer.className,0===i.length||-1===i.indexOf("dsh-details-active")?(m.setClassName("dsh-details-active"),n=a.render(c,e),m.partnerDetailsContainer.innerHTML=n,jQuery(document).width()<750&&window.scrollTo(0,jQuery(".dsh-partner-details").offset().top)):(m.removeClassName("dsh-details-active"),m.partnerDetailsContainer.innerHTML="",setTimeout(function(){m.setClassName("dsh-details-active"),n=a.render(c,e),m.partnerDetailsContainer.innerHTML=n},400)),m.detailsVisible=!0;for(var s=m.markers.length-1;s>-1;s--)m.markers[s].setClickable(!1);t.getMap().setOptions({draggable:!1}),setTimeout(function(){var t,n,a,i;t=m.partnerDetailsContainer.querySelector(".dsh-partner-map"),n=m.partnerDetailsContainer.querySelector(".dsh-chain-list"),a=m.partnerDetailsContainer.querySelector(".dsh-panels"),i=m.getDetailsPanelHeight(),a.style.height=i,m.addPartnerMap(t,e),m.addChainList(n,e)},800)},m.enhanceDealerData=function(e){return e.directionsLink=m.config.MapsDirectionsBaseUrl+"/''/"+encodeURIComponent(e.name)+","+encodeURIComponent(e.address.display[0])+","+encodeURIComponent(e.address.display[1])+"/@"+e.address.latitude+","+e.address.longitude+",15z",m.itemIsSales(e)&&(e.dealer=!0),m.itemIsService(e)&&(e.service=!0),m.itemIsR8(e)&&(e.r8=!0),m.itemIsETron(e)&&(e.eTron=!0),m.itemIsPlus(e)&&(e.plus=!0),e.servicesAsString="",e.services&&(e.servicesAsString=e.services.join(",")),e.dshConfig=m.config,e},m.createDetailsPanelMap=function(e){var n={zoom:16,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,panControl:!1,streetViewControl:!1,zoomControl:!1,styles:t.defaultMapStyle,zoomControlOptions:{style:google.maps.ZoomControlStyle.SMALL,position:google.maps.ControlPosition.TOP_RIGHT}},a=new google.maps.Map(e,n);return a},m.addPartnerMap=function(e,t){var n;n=m.createDetailsPanelMap(e),m.renderPartnersOnMap([t],n)},m.handleChainListItemClick=function(e){var t,n,a,i,r,o;for(e.preventDefault(),n=e.target,i=n.getAttribute("data-dsh-kvpsid"),r=m.dealerData.partners,o=!1,a=r.length-1;!o&&a>-1;a--)t=r[a],o=t.kvpsid===i;o&&(d.hideDetails(),d.showDetails(t))},m.addChainList=function(e,t){if(t&&t.chainList&&e){var n,i,r,o;for(n=a.render(s,t.chainList),e.innerHTML=n,o=e.querySelectorAll(".chain-list-item"),r=o.length-1;r>-1;r--)i=o[r],i.addEventListener("click",m.handleChainListItemClick)}},m.getDetailsPanelHeight=function(){var e,t,n,a,i;return t=jQuery(".dsh-partner-details").height(),n=jQuery(".dsh-detail-header").height(),a=jQuery(".dsh-detail-info").height(),i=jQuery(".dsh-dealer-links").height(),e=t-n-a-i-210,e+"px"},m.addChainAssociation=function(e){if(!e.chainList){var t,n,a,i,r,o,s;if(a=e.chainName){for(t=[],s=m.dealerData.partners,r=s.length-1;r>-1;r--)i=s[r],i.chainName===a&&t.push(i);for(r=t.length-1;r>-1;r--){for(n=[],o=t.length-1;o>-1;o--)r!==o&&n.push(t[o]);n.length>0&&(t[r].chainList=n)}}}},d.hideDetails=function(){var e,n;m.partnerDetailsContainer||(m.partnerDetailsContainer=document.querySelector(m.partnerDetailsSelector)),m.removeClassName("dsh-details-active"),m.partnerDetailsContainer.innerHTML="",n=jQuery(m.partnerDetailsContainer).attr("data-dsh-kvpsid"),e=document.querySelector('.dsh-resultlist-item[data-dsh-kvpsid="'+n+'"]'),jQuery(e).removeClass("is-active"),m.detailsVisible=!1;for(var a=m.markers.length-1;a>-1;a--)m.markers[a].setClickable(!0);t.getMap().setOptions({draggable:!0})},d.handleSearchKeyUp=function(t){var n,a,i,r,o,s,l,c,u,d;return u=m.getI18NKey("dsh.label.search.cities")||"StÃ¤dte",d=m.getI18NKey("dsh.label.search.partners")||"Partner",c=!1,n=t.target.value,13===t.keyCode?(m.searchAddress(n),jQuery(".dsh-search-container .dsh-city-suggestions").html(""),jQuery(".dsh-search-container .dsh-partner-suggestions").html(""),jQuery(".dsh-no-suggestions").toggleClass("nm-hidden",!0),m.removeClassName("dsh-results-active"),void m.removeClassName("dsh-search-active")):(s=jQuery(".dsh-header"),o=jQuery(".dsh-partner-suggestions"),r=jQuery(".dsh-city-suggestions"),o.html(""),void(n.length>=3?(e.getCityNameSuggestions(n,m.config.DealerSearchLocaleCountry).then(function(e){var t;for(r.html(""),t=e.length-1;t>=0;t--)r.prepend('<a href="#" data-search="'+e[t]+'" class="nm-el-lk nm-el-lk-01 nm-el-lk-ast">'+e[t]+"</a><br />");r.prepend('<div class="nm-el-hdl nm-el-hdl-05 nm-at-hdl-b dsh-hl-suggestion">'+u+"</div>"),0!==e.length||c?(jQuery(".dsh-no-suggestions").toggleClass("nm-hidden",!0),jQuery(".dsh-hl-suggestion").toggleClass("nm-hidden",!1)):(jQuery(".dsh-no-suggestions").toggleClass("nm-hidden",!1),jQuery(".dsh-hl-suggestion").toggleClass("nm-hidden",!0))},function(e){c?r.prepend('<div class="nm-el-hdl nm-el-hdl-05 nm-at-hdl-b dsh-hl-suggestion">'+u+"</div>"):(jQuery(".dsh-no-suggestions").toggleClass("nm-hidden",!1),jQuery(".dsh-hl-suggestion").toggleClass("nm-hidden",!0)),r.html("")}),e.getDealerSuggestions(n).then(function(e){for(e.length>0?(c=!0,jQuery(".dsh-no-suggestions").toggleClass("nm-hidden",!0),jQuery(".dsh-hl-suggestion").toggleClass("nm-hidden",!1)):c=!1,a=e.length-1;a>=0;a--)i=e[a],l=i.name.replace(new RegExp("("+n+")","gi"),'<span class="dsh-search-highlight">$1</span>')+", "+i.address.zipCode+" "+i.address.city,o.prepend('<a href="#" data-dsh-kvpsid="'+i.kvpsid+'" class="nm-el-lk nm-el-lk-01 nm-el-lk-ast">'+l+"</a><br />");e.length>0&&o.prepend('<div class="nm-el-hdl nm-el-hdl-05 nm-at-hdl-b dsh-hl-suggestion">'+d+"</div>")},function(e){o.html(""),o.prepend('<div class="nm-el-hdl nm-el-hdl-05 nm-at-hdl-b dsh-hl-suggestion">'+d+"</div>"),c=!1}),m.setClassName("dsh-search-active")):(r.html(""),m.removeClassName("dsh-search-active"),m.removeClassName("dsh-results-active"),jQuery(".dsh-no-suggestions").addClass("nm-hidden"))))},d.handleSearchBnrKeyUp=function(e){var t,n,a;return t=e.target.value,13===e.keyCode?(m.searchPartnerByBnr(t),jQuery(".dsh-search-container .dsh-city-suggestions").html(""),jQuery(".dsh-search-container .dsh-partner-suggestions").html(""),jQuery(".dsh-no-suggestions").toggleClass("nm-hidden",!0),m.removeClassName("dsh-results-active"),void m.removeClassName("dsh-search-active")):(a=jQuery(".dsh-partner-suggestions"),n=jQuery(".dsh-city-suggestions"),a.html(""),void(t.length>=5?m.searchPartnerByBnr(t):(n.html(""),m.removeClassName("dsh-search-active"),m.removeClassName("dsh-results-active"))))},d.handleR8Filter=function(e){var n,a,i,r,o;if(r=[],o=[],i=!!e.target.checked,jQuery(".dsh-filter input").each(function(){var e=jQuery(this);e.hasClass("dsh-filter-r8")||e.attr("checked",!1)}),i)for(m.r8FilterActive=!0,n=m.markers.length-1;n>=0;n--)a=m.markers[n].data,a.services&&a.services.toString().match(/r8/)?(m.markers[n].setVisible(!0),r.push(a),o.push(m.markers[n])):m.markers[n].setVisible(!1);else for(m.r8FilterActive=!1,n=m.markers.length-1;n>=0;n--)m.markers[n].setVisible(!0),r.push(m.markers[n].data),o.push(m.markers[n]);t.updateCluster(o),m.updateResultList()},d.handleTronFilter=function(e){var n,a,i,r,o;if(r=[],o=[],i=!!e.target.checked,jQuery(".dsh-filter input").each(function(){var e=jQuery(this);e.hasClass("dsh-filter-tron")||e.attr("checked",!1)}),i)for(m.tronFilterActive=!0,n=m.markers.length-1;n>=0;n--)a=m.markers[n].data,a.services&&a.services.toString().match(/tron/)?(m.markers[n].setVisible(!0),r.push(a),o.push(m.markers[n])):m.markers[n].setVisible(!1);else for(m.tronFilterActive=!1,n=m.markers.length-1;n>=0;n--)m.markers[n].setVisible(!0),r.push(m.markers[n].data),o.push(m.markers[n]);t.updateCluster(o),m.updateResultList()},d.handleUsedCarsFilter=function(e){var n,a,i,r,o;if(r=[],o=[],i=!!e.target.checked,jQuery(".dsh-filter input").each(function(){var e=jQuery(this);e.hasClass("dsh-filter-usedcars")||e.attr("checked",!1)}),i)for(m.usedCarsFilterActive=!0,n=m.markers.length-1;n>=0;n--)a=m.markers[n].data,a.services&&a.services.toString().match(/usedcars/)?(m.markers[n].setVisible(!0),r.push(a),o.push(m.markers[n])):m.markers[n].setVisible(!1);else for(m.usedCarsFilterActive=!1,n=m.markers.length-1;n>=0;n--)m.markers[n].setVisible(!0),r.push(m.markers[n].data),o.push(m.markers[n]);t.updateCluster(o),m.updateResultList()},d.handleCitySuggestionClick=function(e){var t;e&&e.preventDefault&&e.preventDefault(),jQuery(".dsh-search-container .dsh-city-suggestions").html(""),jQuery(".dsh-search-container .dsh-partner-suggestions").html(""),m.removeClassName("dsh-search-active"),t=jQuery(e.target).attr("data-search"),jQuery(".dsh-search").val(t),m.searchAddress(t)},m.searchPartnerByBnr=function(e){void 0!==e?m.setupDetail(e):d.hideDetails()},m.searchAddress=function(n){var a;e.searchPartnersByCity(n).then(function(e){var n,i;for(n=[],i=e.partners.length-1;i>=0;i--)n.unshift([e.partners[i],i]);a=new google.maps.LatLng(e.meta.search.latitude,e.meta.search.longitude),m.updateMarkerData(n),setTimeout(function(){t.getMap().setCenter(a),t.getMap().setZoom(m.getSearchResultZoom()),m.setCenterMarker(a)},200)},function(e){console.log(e)})},m.getSearchResultZoom=function(){return jQuery(document).width()<750?9:10},m.setupDetail=function(n){var a=e.getItemByKvpsId(n);void 0!==a?(jQuery(".dsh-search").val(""),jQuery(".dsh-search-container .dsh-city-suggestions").html(""),jQuery(".dsh-search-container .dsh-partner-suggestions").html(""),m.removeClassName("dsh-search-active"),d.showDetails(a),t.getMap().setCenter(new google.maps.LatLng(a.address.latitude,a.address.longitude)),t.getMap().setZoom(m.getSearchResultZoom()),e.getAllPartners().then(function(e){m.updateMarkers(e.partners),m.updateResultList()})):d.hideDetails()},m.updateMarkerData=function(e){var t,n,a,i,r;for(n=[],a={},i={},t=e.length-1;t>=0;t--)r=e[t][0],n.push(r.kvpsid),a[r.kvpsid]=r.distance,r.address&&r.address.distance&&(i[r.kvpsid]=r.address.distance);for(n=n.toString(),t=m.markers.length-1;t>=0;t--)-1!==n.indexOf(m.markers[t].data.kvpsid)&&(m.markers[t].data.distance=a[m.markers[t].data.kvpsid],m.markers[t].data.address.distance=i[m.markers[t].data.kvpsid])},m.setCenterMarker=function(e){m.centerMarker&&m.centerMarker.setMap(null),m.centerMarker=new google.maps.Marker({position:e,icon:m.dataURIs.location,zIndex:1,map:t.getMap()})},d.handlePartnerSuggestionClick=function(e){var t;e&&e.preventDefault&&e.preventDefault(),t=jQuery(e.target).attr("data-dsh-kvpsid"),m.setupDetail(t)},m.getCityName=function(e){var t,n;for(t=e.length-1;t>=0;t--)for(n=e[t].types.length;n>=0;n--)if("locality"===e[t].types[n])return e[t].long_name},m.findAddressEntry=function(e){var t,n,a,i;
for(t=0,n=e.length;n>t;t++)for(a=e[t].types.length-1;a>=0;a--){if("street_address"===e[t].types[a])return i=m.getCityName(e[t].address_components);"locality"===e[t].types[a]&&(i=m.getCityName(e[t].address_components))}return i},d.handleGPSButtonClick=function(e){var t,n;navigator.geolocation&&(t=new google.maps.Geocoder,navigator.geolocation.getCurrentPosition(function(e){var a;e.coords&&(a=new google.maps.LatLng(e.coords.latitude,e.coords.longitude),t.geocode({latLng:a},function(e,t){t===google.maps.GeocoderStatus.OK&&(n=m.findAddressEntry(e),jQuery(".dsh-search").val(n),m.searchAddress(n))}))},function(e){console.log(e)}))},d.initialize=function(n){0!==n.length&&(m.containerEl=jQuery(n),m.dshContainer=document.getElementById("dsh"),m.readConfig(m.containerEl.attr("data-dsh-config"),m.containerEl.attr("data-dsh-distance-unit")),e.setConfig(m.config),m.containerEl.html(a.render(o,{title:"DSH",dshConfig:m.config})),m.resultlistEl=m.containerEl.find(".dsh-results"),m.resultlistToggleEl=m.containerEl.find(".dsh-results-toggle"),t.renderMap({defaultMapCenter:m.defaultMapCenter,defaultZoomLevel:m.defaultZoomLevel}),m.updateListener=t.addListener("bounds_changed",d.handleCenterChange),m.mapLoadedListener=t.addListener("tilesloaded",d.handleCenterChange),t.addListener("zoom_changed",d.handleZoomChange),t.addListener("idle",d.saveCenter),google.maps.event.addDomListener(window,"resize",d.handleResize),google.maps.event.addDomListener(window,"scroll",function(){t.removeListener(m.updateListener),t.removeListener(m.mapLoadedListener),setTimeout(function(){m.updateListener=t.addListener("bounds_changed",d.handleCenterChange),m.mapLoadedListener=t.addListener("tilesloaded",d.handleCenterChange)},100)}),m.initMarkers(),m.addResultListFilter(n),m.addUIEvents())},d}),define("core/static-content",[],function(){"use strict";var e={},t={__:e};return e.registeredPatterns={},e.JS_LAYER_REGEX=/(jslayer:)(\w|\.|-|_)+(,)?/gi,t.getContent=function(t){return e.getLayerContent(t)},t.isStaticContentRequest=function(t){return e.isStaticLayerRequest(t)},e.isStaticLayerRequest=function(t){return!!t.match(e.JS_LAYER_REGEX)},e.parseParams=function(t){var n,a={};return n=(t||"").replace(e.JS_LAYER_REGEX,""),n.split(",").forEach(function(e){var t=e.split("=");a[t[0]]=t[1]}),a},e.parsePattern=function(t){var n=(t||"").match(e.JS_LAYER_REGEX);return n?n[0].split(",")[0]:null},e.getLayerContent=function(n){var a,i,r=e.parseParams(n);return i=e.parsePattern(n),a=t.isRegisterPattern(i)?e.registeredPatterns[i](r):Promise.reject("pattern "+i+" id not registered!!")},t.registerStaticRequest=function(t,n){e.registeredPatterns[t]=n},t.isRegisterPattern=function(t){return!!e.registeredPatterns[t]&&"function"==typeof e.registeredPatterns[t]},t.initializePromise=function(e){return new Promise(function(e){e("core/static-content.js")})},t}),define("sc/utils/common",[],function(){"use strict";var e,t;return e={},t={__:e},e.polling={defaultIntervalTime:50},t.extend=function(e){var n,a,i,r=e||{};for(n=1;n<arguments.length;n++)if(a=arguments[n])for(i in a)a.hasOwnProperty(i)&&("object"==typeof a[i]?t.extend(r[i],a[i]):r[i]=a[i]);return r},e.run=function(e,t,n,a,i){var r,o,s;o=0,s=e(),s?a(s):r=setInterval(function(){s=e(),s?(clearInterval(r),a(s)):o>t&&(clearInterval(r),i(new Error)),o+=n},n)},t.wait=function(t,n,a){var i=a||e.polling.defaultIntervalTime;return new Promise(function(a,r){e.run(t,n,i,a,r)})},t.convertNumberFormat=function(e){var t,n,a,i,r=parseFloat(e);for(r=r.toFixed(2)+"",r=r.replace(".",","),t=r.split(","),n=t[0],a=t.length>1?","+t[1]:"",i=/(\d+)(\d{3})/;i.test(n);)n=n.replace(i,"$1.$2");return r=n+a},t.cloneObject=function(e){var n,a;if(null===e||"object"!=typeof e)return e;n=e.constructor();for(a in e)e.hasOwnProperty(a)&&(n[a]=t.cloneObject(e[a]));return n},e.serializeFormInput=function(e,t){var n=t;switch(e.type){case"text":case"hidden":case"password":case"button":case"reset":case"submit":n.push(e.name+"="+encodeURIComponent(e.value));break;case"checkbox":case"radio":e.checked&&n.push(e.name+"="+encodeURIComponent(e.value));break;case"file":}return n},t.serializeForm=function(e){var t,n,a=[];if(e&&"FORM"===e.nodeName){for(t=e.elements.length-1;t>=0;t-=1)if(""!==e.elements[t].name)switch(e.elements[t].nodeName){case"INPUT":switch(e.elements[t].type){case"text":case"hidden":case"password":case"button":case"reset":case"submit":a.push(e.elements[t].name+"="+encodeURIComponent(e.elements[t].value));break;case"checkbox":case"radio":e.elements[t].checked&&a.push(e.elements[t].name+"="+encodeURIComponent(e.elements[t].value));break;case"file":}break;case"TEXTAREA":a.push(e.elements[t].name+"="+encodeURIComponent(e.elements[t].value));break;case"SELECT":switch(e.elements[t].type){case"select-one":a.push(e.elements[t].name+"="+encodeURIComponent(e.elements[t].value));break;case"select-multiple":for(n=e.elements[t].options.length-1;n>=0;n-=1)e.elements[t].options[n].selected&&a.push(e.elements[t].name+"="+encodeURIComponent(e.elements[t].options[n].value))}break;case"BUTTON":switch(e.elements[t].type){case"reset":case"submit":case"button":a.push(e.elements[t].name+"="+encodeURIComponent(e.elements[t].value))}}return a.join("&")}},t}),define("sc/module/sc-model",["utils/dom","events","core/signal","configurator/ajax","sc/utils/common"],function(e,t,n,a,i){"use strict";var r={},o={__:r};return r.oDefaults={sessionStorageFilterKey:"sc_lastfilters"},r.scEventBus=n.getEmitter("stockcar"),r.RESULTS=null,r.VERSION=null,r.VERSION_PROMISE=null,r.VEHICLES=[],r.INCREMENTAL_OFFSET=12,r.isRangeFilter=function(e){return e.operand.toLowerCase().indexOf("min")>-1||e.operand.toLowerCase().indexOf("max")>-1},r.prepareActiveFilters=function(e){var t,n,a,i,s;t=[],s=e&&e.length?r.mergeFilterChanges(e,o.getActiveFilterGroups()):o.getActiveFilterGroups();for(n in s)s.hasOwnProperty(n)&&s[n]&&s[n].operand&&s[n].values&&(a=s[n],i=r.createFilterGroupEntry(a,n),t.push(i));return t},r.createFilterGroupEntry=function(e,t){var n,a;switch(a=e.operand.toLowerCase()){case"geo":n=r.createLocationFilterGroupItem(t,e.values);break;case"minmax":n=r.createRangeFilterGroupItem(t,e.operand,e.values);break;default:n=r.createBasicFilterGroupItem(t,e.operand,e.values)}return n},r.mergeFilterChanges=function(e,t){var n,a,o,s;for(a=e.length,n=i.cloneObject(t);a--;)o=e[a],n[o.group]=n[o.group]||{values:[],operand:o.operation.toLowerCase(),id:o.group},s=n[o.group],n[o.group]=r.isRangeFilter(s)?r.updateRangeGroupEntry(s,o):r.updateGroupEntry(s,o),void 0==n[o.group]&&delete n[o.group];return n},r.updateGroupEntry=function(e,t){var n;if(e.operand=e.operand.toLowerCase(),e.values=e.values||[],n=e.values.indexOf(t.id),t.state){if("geo"===e.operand)return null;if(-1!==n&&e.values.splice(n,1),0===e.values.length)return null}else-1===n&&(""===e.operand&&(e.operand=t.operation.toLowerCase()),"geo"===e.operand?e.values=t.values:e.values.push(t.id));return e},r.updateRangeGroupEntry=function(e,t){return t&&e&&!t.state?(e.values=t.id||[],e.operand=t.operation.toLowerCase(),e.values=t.id,e):null},r.createBasicFilterGroupItem=function(e,t,n){var a;return a=e+":"+t+":"+n.join(",")},r.createLocationFilterGroupItem=function(e,t){var n;return n=e+":geo:"+t.join(",")},r.createRangeFilterGroupItem=function(e,t,n){var a,i,r;switch(r=t.toLowerCase()){case"min":i=n[0];break;case"max":i=n[0];break;case"minmax":i=n.join(",");break;default:return null}return a=e+":"+r+":"+i},r.getParamString=function(e,t,n,a){var i,r,s,l,c=[];return r=n||0,s=a||o.getResultPageSize(),i=e||[],i.length&&c.push("filter="+i.join(";")),c.push("from="+r),c.push("size="+s),SETUPS.get("stockcar.scs.d_match")&&c.push("d_match="+SETUPS.get("stockcar.scs.d_match")),l=t||o.getSortParam(),c.push("sort="+l),c.join("&")},o.entryWithFiltersArray=function(e){var t=r.getParamString(e);return r.sendSCSRequest(t,!1).then(r.clearFiltersFromStorage)},o.entryWithFilterAgentString=function(e){var t,n=[e];return n.push("from=0"),n.push("size="+o.getResultPageSize()),SETUPS.get("stockcar.scs.d_match")&&n.push("d_match="+SETUPS.get("stockcar.scs.d_match")),n.push("sort="+o.getSortParam()),t=n.join("&"),r.sendSCSRequest(t,!1).then(r.clearFiltersFromStorage)},r.sendSCSRequest=function(e,n){var i,s=o.getRequestUrl();return o.getSVDVersion().then(function(t){return console.info("sc-filter-model --> svdVersion_: ",t),i=e+"&svd="+r.VERSION,a.getJSON(s,i,{withCredentials:!1}).then(function(e){return r.onSCSResultReceived(e,n)},function(e){console.error("sc-filter-model --> failed: ",e)})})["catch"](function(e){return console.error('sc-filter-model --> error: "'+t.SC_UPDATE_VIEW+'"',e),e})},r.onSCSResultReceived=function(e,n){var a=e.vehicleBasic;return r.RESULTS=e,n?(r.VEHICLES=r.VEHICLES||[],r.VEHICLES=r.VEHICLES.concat(a),r.scEventBus.emit(t.SC_UPDATE_VEHICLES,{newCars:a}),r.VEHICLES):(r.VEHICLES=a,void(e.header.errorCode&&e.header.errorMessage?console.error("errorCode: "+e.header.errorCode+", errorMessage:  "+e.header.errorMessage):n||r.scEventBus.emit(t.SC_UPDATE_VIEW,{location:o.getLocation()})))},o.getLocation=function(){var e,t,n=o.getActiveFilterGroups();return e={},n&&n.dealer&&"geo"===n.dealer.operand.toLowerCase()?(t=n.dealer,e.lat=t.values[0],e.lng=t.values[1],e.distance=t.values[2],e.distanceUnit=t.values[3],e.address=t.values[4],e):null},o.getFilterGroups=function(){var e=r.RESULTS&&r.RESULTS.groups?r.RESULTS.groups:{};return e},o.getRangeFilterGroups=function(){var e=o.getFilterGroups();return e=e&&e.ranges&&e.ranges.members?e.ranges.members:{}},o.getVehicles=function(){return r.VEHICLES||[]},o.getVehicleById=function(e){var t;return r.VEHICLES.forEach(function(n){n.id===e&&(t=n)}),t||null},o.getDataPattern=function(e){var t,n=e?e.split("."):"",a=location.hash.indexOf("vehicleid")>=1?location.hash.split("vehicleid=")[1]:"";return new Promise(function(i,r){n&&a?(t=o.getVehicleById(a),n.forEach(function(e){t=t[e],Array.isArray(t)&&0===e.indexOf("typedPrices")&&t.forEach(function(e){"retail"===e.type&&(t=e)})}),t?i(t):r(new TypeError("load "+e+" failed"))):r(new TypeError("no pattern available"))})},o.getActiveFilterGroups=function(){var e;return e=r.RESULTS&&r.RESULTS.activeFilters?r.RESULTS.activeFilters:{}},o.isActiveFilter=function(e){var t,n,a=o.getActiveFilterGroups();for(t in a)if(a.hasOwnProperty(t)&&(n=a[t].values||[],n.indexOf(e)>-1))return!0;return!1},o.isActiveFilterGroup=function(e){var t=o.getActiveFilterGroups(),n=e;return!!t[n]},o.getSortParam=function(){var e=o.getHeader();return e&&e.sort?e.sort:SETUPS.get("stockcar.scs.sort.param")},o.getHeader=function(){return r.RESULTS&&r.RESULTS.header?r.RESULTS.header:null},o.getResultPageStart=function(){var e=o.getHeader();return e&&e.from?parseInt(e.from,10):0},o.getResultPageSize=function(){var e=o.getHeader();return e&&e.size?parseInt(e.size,10):r.INCREMENTAL_OFFSET},o.getCarlines=function(){var e=o.getFilterGroups(),t=e&&e.carlines?e.carlines:{};return t},o.getVehicleBasics=function(){var e=r.RESULTS&&r.RESULTS.vehicleBasic?r.RESULTS.vehicleBasic:[];return e},o.getResultsCount=function(){var e=r.RESULTS&&r.RESULTS.totalCount?r.RESULTS.totalCount:0;return e},o.getResultSorting=function(){var e=o.getResultHeader();return e&&e.sort?e.sort:null},o.getResultHeader=function(){return r.RESULTS&&r.RESULTS.header?r.RESULTS.header:null},o.getFilterOptions=function(){return r.RESULTS&&r.RESULTS.filterOptions?r.RESULTS.filterOptions:null},o.getSVDVersion=function(){return r.VERSION_PROMISE||(r.VERSION?r.VERSION_PROMISE=Promise.resolve(r.VERSION):r.VERSION_PROMISE=r.fetchVersion()),r.VERSION_PROMISE},r.fetchVersion=function(){var e=o.getVersionUrl();return a.getJSON(e,null,{withCredentials:!1}).then(function(e){if(r.VERSION=e&&e.header&&e.header.dataVersion?e.header.dataVersion:null,!r.VERSION)throw new TypeError("could not load svd-version");return r.scEventBus.emit(t.VERSION_LOAD_COMPLETE,r.VERSION),r.VERSION})["catch"](function(e){console.error("SVD Version error. Using stockcar.static.svd ",e),r.VERSION=SETUPS.get("stockcar.static.svd")||""}).then(function(){return r.VERSION})},o.update=function(e){var t,n;return t=r.prepareActiveFilters(e),n=r.getParamString(t),r.sendSCSRequest(n).then(function(){r.saveFiltersToSession(n)})},o.updateLocationFilter=function(e){var t;e&&(t=r.generateLocationFilterItem(e),o.update([t]))},r.generateLocationFilterItem=function(e){var t={group:"dealer",operation:"geo",values:[e.lat,e.lng,e.distance,e.distanceUnit,e.address.replace(/,/g,"|")]};return t},o.removeFilters=function(e){var t,n;return e.length?(r.removeFilters(e),t=r.prepareActiveFilters(null),n=r.getParamString(t),r.sendSCSRequest(n).then(function(){r.saveFiltersToSession(n)})):Promise.reject("no filters defined")},o.resetAllFilters=function(){var e,t;return r.RESULTS.activeFilters=[],e=r.prepareActiveFilters(null),t=r.getParamString(e),r.sendSCSRequest(t).then(function(){r.saveFiltersToSession(t)})},r.getFiltersGroupId=function(e){var t=e;return t.match(/\.(min|max)$/i)?t=t.replace(/\.(min|max)$/i,""):t.split(".").shift()},r.removeFilters=function(e){var n,a,i,s,l=o.getActiveFilterGroups();e.forEach(function(e){i=r.getFiltersGroupId(e),o.isActiveFilterGroup(i)&&(e.match(/\.(min|max)$/i)?(a=e.indexOf(".max")>0,s=a&&2===l[i].values.length?1:0,l[i].values.splice(s,1),l[i].values.length?(n=l[i].operand.toLowerCase(),"minmax"===n&&a&&(l[i].operand="min"),"minmax"!==n||a||(l[i].operand="max")):delete l[i]):(s=l[i].values.indexOf(e),s>-1&&(l[i].values.splice(s,1),l[i].values.length||delete l[i]),"dealer"===i&&(delete l[i],"dealer.silent"!==e&&r.scEventBus.emit(t.SC_RESET_VIEW))))})},o.getVersionUrl=function(){var e=r.getUrlSetup();return e.baseUrl+"version/"+e.versionId+e.market},o.getRequestUrl=function(){var e=r.getUrlSetup();return e.baseUrl+"search/"+e.versionId+"filter/"+e.market},o.getMediaUrl=function(){var e=r.getUrlSetup();return e.baseUrl+"vehicles/"+e.versionId+"media/"+e.market},o.getMatchUrl=function(){var e=r.getUrlSetup();return e.baseUrl+"search/"+e.versionId+"match/"+e.market},o.getCompareUrl=function(){var e=r.getUrlSetup();return e.baseCompareUrl+e.versionCompareId+"compare"},r.getUrlSetup=function(){return{baseUrl:SETUPS.get("stockcar.scs.base.url")?SETUPS.get("stockcar.scs.base.url"):"",market:SETUPS.get("stockcar.scs.market.path")?SETUPS.get("stockcar.scs.market.path"):"",versionId:SETUPS.get("stockcar.scs.version")?SETUPS.get("stockcar.scs.version")+"/":"",baseCompareUrl:SETUPS.get("stockcar.cmp.base.url")?SETUPS.get("stockcar.cmp.base.url"):"",versionCompareId:SETUPS.get("stockcar.cmp.version")?SETUPS.get("stockcar.cmp.version")+"/":""}},o.loadNextResultItems=function(){var e,t,n,a,i;return e=o.getResultPageStart()+r.INCREMENTAL_OFFSET,t=r.INCREMENTAL_OFFSET,a=o.getSortParam(),i=r.prepareActiveFilters(null),n=r.getParamString(i,a,e,t),r.sendSCSRequest(n,!0)},o.changeResultSorting=function(e){var t=r.getParamString(r.prepareActiveFilters(null),e);return r.sendSCSRequest(t,!1)},o.getVehicleMediaData=function(e){var t=o.getMediaUrl();return t&&e?(t+="/"+e,o.getSVDVersion().then(function(e){return a.getJSON(t,{svd:e},{withCredentials:!1})}).then(function(e){return e&&e.mediaResults?e.mediaResults:{}})):Promise.reject(new Error("could not load getVehicleMediaData"))},o.getMediaData=function(e,t){var n=o.getMediaUrl();return n&&e?(n+="/"+e+"/"+t,o.getSVDVersion().then(function(e){return a.getJSON(n,{svd:e},{withCredentials:!1})}).then(function(e){if(e&&e.media)return e.media;throw new Error("could not load MediaData '"+t+"'")})):Promise.reject(new Error("could not load getVehicleMediaData"))},o.getMatchingData=function(e){var n,i=o.getMatchUrl();return i&&e?o.getSVDVersion().then(function(t){n=e+"&svd="+r.VERSION,a.getJSON(i,n,{withCredentials:!1}).then(function(e){r.onMatchingResultReceived(e)},function(e){console.error("sc-matching --> failed: ",e)})})["catch"](function(e){return console.error('sc-matching --> error: "'+t.SC_UPDATE_VIEW+'"',e),e}):Promise.reject(new Error("could not load getMatchingData"))},o.isDetailsPage=function(t){var n=t.indexOf("sc_detail")>-1||t.indexOf("sc_detail_fav")>-1,a=e.isElement(".sc-result-items")||e.isElement(".sc-favorite-items")||e.isElement(".sc-detail-module")||e.isElement(".sc-compare-view-component");return!!t&&n&&a},r.clearFiltersFromStorage=function(){var e=r.getSessionStorage();e&&e.removeItem(r.oDefaults.sessionStorageFilterKey)},o.getFiltersFromSession=function(){var e=r.getSessionStorage();return e&&"function"==typeof e.getItem&&e.getItem(r.oDefaults.sessionStorageFilterKey)?e.getItem(r.oDefaults.sessionStorageFilterKey):null},r.getSessionStorage=function(){return window.sessionStorage||null},r.saveFiltersToSession=function(e){var t,n=r.getSessionStorage();n&&(t=r.extractFilterParams(e),t&&n.setItem(r.oDefaults.sessionStorageFilterKey,t))},r.extractFilterParams=function(e){var t,n;return t=null,n=e.match(/(filter=)(\w|:|,|;|\.|-|_)+(&)?/gi),n&&n.length&&(t=n[0],t=t.replace(/&$/,"")),t},o.isResultsPage=function(){var t,n,a,i=!1,r=window.location.href;return r&&r.indexOf("results")>-1&&(t=e.getElement(".sc-results-view"),e.isElement(t)&&(n=t.parentNode,a=n.children[0],a===t&&(i=!0))),i},o.initialize=function(e){return new Promise(function(n){r.globalEventBus=e,r.globalEventBus.once(t.APP_INITIALIZED,function(){o.getSVDVersion().then(function(e){r.scEventBus.emit(t.SC_VERSION_LOADED,e)})}),n("sc-model.js")})},o.initializePromise=o.initialize,o}),define("sc/module/sc-model-location",["events","core/signal"],function(e,t){"use strict";var n={},a={__:n};return n.oDefaults={},n.scEventBus=null,n.LOCATION={},n.autoCompleteService=null,n.config={},n.defaultMapCenter="51.318928,9.49601",a.writeLocationConfig=function(e,t){var a,i;try{a=JSON.parse(e),n.config.MapsDirectionsBaseUrl="https://maps.google.com/maps/dir";for(i in a)a.hasOwnProperty(i)&&(n.config[i]=a[i]);return n.config.distanceUnit=t,n.defaultMapCenter=n.config.DefaultMapCenter||n.defaultMapCenter,n.config.localeLang=n.config.LocaleLanguage||"en",n.LOCATION.distanceUnit=n.config.distanceUnit,n.config}catch(r){return console.error("LOCATION MAP: Could not read config",r),null}},a.updateLocation=function(t,a){var i;for(i in t)t.hasOwnProperty(i)&&(n.LOCATION[i]=t[i]);a||n.scEventBus.emit(e.SC_UPDATE_LOCATION_VIEW)},a.getCityNameSuggestions=function(e){var t,a,i,r,o;if(a=["(cities)"],t=!isNaN(Number(e)),t&&(a=[]),!n.autoCompleteService)try{n.autoCompleteService=new google.maps.places.AutocompleteService}catch(s){console.error("getCityNameSuggestions --> e: ",s)}return new Promise(function(s,l){n.autoCompleteService.getPlacePredictions({input:e,componentRestrictions:{country:n.config.LocaleCountry},types:a},function(e,n){if("OK"===n){for(i=[],r=e.length-1;r>=0;r--)o={},o.city=e[r].terms[0].value,o.place_id=e[r].place_id,t&&(o.city=e[r].terms[0].value+" "+e[r].terms[1].value),i.unshift(o);s(i)}else l(new Error("Could not retrieve address suggestions: "+n))})})},a.setLocation=function(e){var t;console.log("setLocation",e),t=e.address?Promise.resolve():n.getAdressFromLatLng(e.lat,e.lng),t.then(function(t){e.finalValue=!0,e.address=t.address,e.place_id=t.place_id||e.place_id,a.updateLocation(e)})},a.getLocation=function(){return n.LOCATION},a.flushLocation=function(){n.LOCATION={distance:"20",distanceUnit:"kilometers",finalValue:!1}},a.getLocationConfig=function(){return n.config},a.initialize=function(e){return new Promise(function(a){n.globalEventBus=e,n.scEventBus=t.getEmitter("stockcar"),a("sc-model-location.js")})},a.initializePromise=a.initialize,a}),define("sc/module/sc-model-compare",["events","core/signal","sc/module/sc-model","configurator/ajax"],function(e,t,n,a){"use strict";var i={},r={__:i};return i.scEventBus=null,i.COMPARE_VEHICLES=[],i.COMPARE_RESULT=null,i.AUDICODES=null,i.lastAudicodes=null,r.loadCompareResults=function(){var e,t,r;return e=n.getCompareUrl(),i.AUDICODES!==i.lastAudicodes?(r=i.AUDICODES?i.AUDICODES:"",(t="audicodes="+r)?(console.log("sc-model-compare --> load"),a.getJSON(e,t,{withCredentials:!1}).then(function(e){return i.COMPARE_RESULT=e,i.lastAudicodes=i.AUDICODES,i.COMPARE_RESULT},function(e){console.error("sc-model-compare --> failed: ",e)})):Promise.reject()):Promise.resolve(i.COMPARE_RESULT)},r.loadVehiclesfromSCS=function(e){var t,i,o=n.getRequestUrl(),s=r.getCompareCars(),l=[];return i=e||SETUPS.get("stockcar.scs.sort.param"),l.push("filter=vehicle:or:"+s.join(",")),l.push("sort="+i),n.getSVDVersion().then(function(e){return l.push("svd="+e),t=l.join("&"),a.getJSON(o,t,{withCredentials:!1}).then(function(e){return e.vehicleBasic},function(e){console.error("sc-model-favorites --> failed: ",e)})})["catch"](function(e){return console.error("sc-model-favorites --> error: "+e),e})},r.saveAudicodes=function(e){i.AUDICODES=e},r.updateCompareItems=function(t){var a=n.getVehicleById(t),r=!1;i.COMPARE_VEHICLES.forEach(function(e,n){e.id===t&&(i.removeItemFromCompareList(n),r=!0)}),r||i.addToCompareList(a),i.scEventBus.emit(e.SC_UPDATE_VIEW)},i.addToCompareList=function(e){i.COMPARE_VEHICLES.push(e)},i.removeItemFromCompareList=function(e){i.COMPARE_VEHICLES.splice(e,1)},r.getCompareCars=function(){return i.COMPARE_VEHICLES},r.getCompareIds=function(){var e=[];return i.COMPARE_VEHICLES.forEach(function(t){e.push(t.id)}),e},r.clearCompareVehicles=function(){i.COMPARE_VEHICLES=[]},r.compareVehiclesCount=function(){return i.COMPARE_VEHICLES.length},r.initialize=function(e){return new Promise(function(n){i.globalEventBus=e,i.scEventBus=t.getEmitter("stockcar"),n("sc-model-compare.js")})},r.initializePromise=r.initialize,r}),define("sc/module/sc-api",["sc/module/sc-model","sc/module/sc-model-location","sc/module/sc-model-compare","router"],function(e,t,n,a){"use strict";var i={},r={__:i};return i.oDefaults={},r.update=function(t){var n=t;return t&&!Array.isArray(t)&&(n=[t]),n=n||[],e.update(n)},r.updateLocationFilter=function(t){return e.updateLocationFilter(t)},r.getFilterGroups=function(){return e.getFilterGroups()||{}},r.getRangeFilterGroups=function(){return e.getRangeFilterGroups()||{}},r.getActiveFilters=function(){return e.getActiveFilterGroups()||[]},r.getCarlines=function(){return e.getCarlines()||[]},r.getResults=function(){return e.getVehicleBasics()||[]},r.getResultsCount=function(){return e.getResultsCount()},r.getSVDVersion=function(){return e.getSVDVersion()},r.getLocation=function(){return t.getLocation()||{}},r.isStockcarContext=function(){return"true"===SETUPS.get("stockcar.context")||SETUPS.get("stockcar.context")===!0},r.setLocation=function(e){t.setLocation(e)},r.getVehicles=function(){return e.getVehicles()},r.getCompareItems=function(){return n.getCompareCars()},r.getCompareIds=function(){return n.getCompareIds()},r.compareVehiclesCount=function(){return n.compareVehiclesCount()},r.clearCompareVehicles=function(){return n.clearCompareVehicles()},r.entryWithFiltersArray=function(t){return e.entryWithFiltersArray(t)},r.entryWithFilterAgentString=function(t){return e.entryWithFilterAgentString(t)},r.addCompareStatus=function(e){var t=r.getCompareIds();return e.forEach(function(e){e.compare=t.indexOf(e.id)>-1}),e},r.getMatchingItems=function(t){return e.getMatchingData(t)},r.getVehicleById=function(t){var n=e.getVehicleById(t);return n},r.loadNextVehicles=function(){return e.loadNextResultItems()},r.changeResultSorting=function(t){return e.changeResultSorting(t)},r.getResultSorting=function(){return e.getResultSorting()},r.writeLocationConfig=function(e,n){return t.writeLocationConfig(e,n)},r.getFilterOptions=function(){return e.getFilterOptions()},r.removeFilters=function(t){var n=t;return t&&!Array.isArray(t)&&(n=[t]),n=n||[],e.removeFilters(n)},r.resetAllFilters=function(){return r.clearCompareVehicles(),e.resetAllFilters()},r.isDetailsPage=function(t){return e.isDetailsPage(t)},r.isResultsPage=function(){return e.isResultsPage()},r.getVehicleMediaData=function(t){return e.getVehicleMediaData(t)},r.getMediaData=function(t,n){return e.getMediaData(t,n)},r.getVersionUrl=function(){return e.getVersionUrl()},r.getRequestUrl=function(){return e.getRequestUrl()},r.getMediaUrl=function(){return e.getMediaUrl()},r.getMatchUrl=function(){return e.getMatchUrl()},r.getCompareUrl=function(){return e.getCompareUrl()},r.getFiltersFromSession=function(){return e.getFiltersFromSession()},r.getPreviousPage=function(){return a.getPreviousPage()},r.getDataPattern=function(t){return e.getDataPattern(t)},r.saveCompareAudicodes=function(e){return n.saveAudicodes(e)},r.compareVehiclesCount=function(){return n.compareVehiclesCount()},r.getCompareCarsFromSCS=function(){return n.loadVehiclesfromSCS()},r.initialize=function(e){return new Promise(function(t){i.globalEventBus=e,t("sc-api.js")})},r.initializePromise=r.initialize,r}),define("core/content",["core/cache","core/static-content","configurator/dpu-api","configurator/ajax","sc/module/sc-api"],function(e,t,n,a,i){"use strict";var r={},o={__:r};return r.oIndex={},r.iCounterXhr=0,r.aCacheURI=[],r.iParallelXHRMax=3,r.sMarkerXHR=".headless",r.updateIndex=function(e,t){var n=encodeURIComponent(e);t?r.oIndex[n]=!0:(r.oIndex[n]=!1,delete r.oIndex[n])},o.isCached=function(e){var t=encodeURIComponent(e);return!!r.oIndex[t]},o.setContent=function(t,n,a){var i=e.setItem("core.controller.content",t,n,{failsafeSet:a});i||o.flush(),r.updateIndex(t,i)},o.getContent=function(n,a){var i;return t.isStaticContentRequest(n)?t.getContent(n):(i=e.getItem("core.controller.content",n,a),o.isCached(n)&&i?Promise.resolve(e.getItem("core.controller.content",n,a)):r.loadRemoteContent(n,a))},o.fillCache=function(e){var t=0;for(t;t<e.length;t++)o.isCached(e[t])||r.aCacheURI.push({sKey:e[t]});r.processCacheURIs()},r.processCacheURIs=function(){var e;0!==r.aCacheURI.length&&(r.iCounterXhr<r.iParallelXHRMax&&(e=r.aCacheURI.shift(),r.loadRemoteContent(e.sKey,!0)),r.aCacheURI.length>0&&window.setTimeout(r.processCacheURIs,50))},r.rewriteUrl=function(e){var t,a="."+e.split("#")[0].split("?")[0].split(".").pop(),o="";return n.isConfigurable()?(o=r.getMemcacheVersion(),t=Promise.resolve(o)):SETUPS.get("stockcar.context")?t=i.isDetailsPage(e)?Promise.resolve(""):i.getSVDVersion().then(function(e){return o=r.getScsVersion(e)}):(o="."+SETUPS.get("nemo.staticversion"),t=Promise.resolve(o)),t.then(function(t){return e.split(a).join(t+r.sMarkerXHR+a)})["catch"](function(t){return console.warn(t),e})},r.getMemcacheVersion=function(){var e=n.getMemcacheVersion();return""!==e&&(e="."+e),e},r.getScsVersion=function(e){var t=e,n=SETUPS.get("nemo.staticversion"),a=SETUPS.get("nemo.build.time");return a&&n&&a!==n&&(t+="."+n),t&&0===t.toString().indexOf(".")&&(t=t.substring(1)),"."+t},r.loadRemoteContent=function(e,t){var i=n.getVersion();return!n.isConfigurable()||i||o.isCached(e)?r.rewriteUrl(e).then(function(e){return r.iCounterXhr+=1,a.getContent(e)}).then(function(n){return window.ADRUM&&window.ADRUM.command&&n.indexOf("component_error")>-1&&window.ADRUM.command("addUserData","component-error","true"),t&&o.setContent(e,n),r.iCounterXhr-=1,n})["catch"](function(e){return console.warn("loadRemoteContent failed",e),r.iCounterXhr-=1,null}):(r.aCacheURI.push({sKey:e}),Promise.resolve())},o.flush=function(t){var n,a,i,o=t||[],s=[];if(r.aCacheURI=[],0===o.length)r.oIndex={},e.clear("core.controller.content","sessionStorage");else{for(n in r.oIndex)r.oIndex.hasOwnProperty(n)&&(i=decodeURIComponent(n),r.oIndex[n]&&-1===o.indexOf(i)&&s.push(i));for(a in s)s.hasOwnProperty(a)&&(e.removeItem("core.controller.content",s[a]),r.updateIndex(s[a],!1))}},r.initialize=function(){o.flush()},o.debug=function(){return{cacheLenght:r.aCacheURI.length,cacheItems:r.aCacheURI}},o.initializePromise=function(e){return new Promise(function(t){r.eventBus=e,r.initialize(),t("core/content.js")})},o}),define("configurator/loading-indicator",["jquery","events"],function(e,t){"use strict";var n={},a={__:n};return n.oDefaults={sSelectorItemLoading:".nm-j-configurator-item-loading",sItemLoadingClass:"nm-j-configurator-item-loading"},n.showLoadingIndicator=function(e){var t=e.$element;t&&t.length&&t.addClass(n.oDefaults.sItemLoadingClass)},n.hideLoadingIndicator=function(){var t=e(n.oDefaults.sSelectorItemLoading);t.removeClass(n.oDefaults.sItemLoadingClass)},n.addEvents=function(){n.eventBus.on(t.CONFIG_CHANGEREQUEST_START,n.showLoadingIndicator),n.eventBus.on(t.CONFIG_CHANGEREQUEST_END,n.hideLoadingIndicator)},n.initialize=function(){n.addEvents()},a.initializePromise=function(e){return new Promise(function(t){n.eventBus=e,n.initialize(),t("configuration/loading-indicator.js")})},a}),define("configurator/dom-state",["jquery","configurator/dpu-api","events"],function(e,t,n){"use strict";var a={},i={__:a};return a.$stage=null,a.oDefaults={},a.initialize=function(){a.oDefaults={sStageID:"#nm-id-stage",sSelectorCarPriceRate:".nm-car-price-rate",sSelectorRenderImage:".nm-j-configurator-renderimage",sSelectorConfigurationSummary:".nm-j-configuration-summary",sSelectorQuantityPicker:".nm-quantity",sSelectorSnippetText:".nm-j-configurator-text-",sSelectorSnippetTextEec:".nm-j-configurator-text-eec-",selectorModelText:".js-configurator-model-text-",selectorModelImage:".js-configurator-model-image",selectorEecImage:".nm-j-configurator-image-eec"},a.$stage=e(a.oDefaults.sStageID),t.isConfigurable()&&a.addEvents(),document.cookie.indexOf("myAudi=")>-1&&e("body").addClass("nm-logged-in")},a.addEvents=function(){a.eventBus.on(n.UPDATE_VIEW_STATE,a.handleViewStateUpdates),a.eventBus.on(n.CONFIG_UPDATE,a.updateAllDomItems),a.eventBus.on(n.PAGE_LOADED,a.handlePageLoaded),a.eventBus.on(n.LAYER_LOADED,a.updateAllDomItems),a.eventBus.on(n.TRIGGER_DOM_UPDATE,a.handleConflictAndTransferResolves),a.eventBus.on(n.CONFIG_SEND,a.hideRenderImages)},a.removeEvents=function(){a.eventBus.off(n.UPDATE_VIEW_STATE,a.handleViewStateUpdates),a.eventBus.off(n.CONFIG_UPDATE,a.updateAllDomItems),a.eventBus.off(n.PAGE_LOADED,a.handlePageLoaded),a.eventBus.off(n.LAYER_LOADED,a.updateAllDomItems),a.eventBus.off(n.TRIGGER_DOM_UPDATE,a.handleConflictAndTransferResolves),a.eventBus.off(n.CONFIG_SEND,a.hideRenderImages)},a.updateDomStatusItems=function(n){var i=n?n:e("body");i.find(".nm-j-configurator-item").each(function(){var n=e(this),i=n.attr("data-configurator-id"),r=t.getItem(i);return n.hasClass("nm-j-configurator-no-update")?!0:void(i&&r&&r.status&&(a.setDOMStatusCode(n,r.status),r.message&&r.message[0].text&&""!==r.message[0].text&&a.setDebugOutput(n,r.message[0].text)))})},a.handlePageLoaded=function(e){e&&"domElement"in e?(a.updateDomTextPrices(),a.updateDomStatusItems(e.domElement),a.updateDomTextItems(e.domElement),a.updateDomTextSummary(),a.updateDomRenderImages()):(a.updateDomTextPrices(),a.updateDomStatusItems(),a.updateDomTextItems(),a.updateDomTextSummary(),a.updateDomRenderImages()),a.updateModeChangeItems()},a.handleLayerLoaded=function(t){if(t&&t.guid){var i=e('body [data-guid="'+t.guid+'"]');a.updateDomStatusItems(i),a.updateDomTextItems(i)}else a.updateDomStatusItems(),a.updateDomTextItems();a.updateDomTextPrices(),a.updateDomTextSummary(),a.updateDomRenderImages(),a.eventBus.emit(n.DOM_UPDATED)},a.getDOMStatusCode=function(e){var t=e.get(0).className;return-1===t.indexOf("nm-j-configurator-status_")?null:t.split("nm-j-configurator-status_")[1].split(" ")[0]},a.setDOMStatusCode=function(e,t){if(t){var n=e.get(0),a=n.className,i=a;a=a.replace(/nm-j-configurator-status_[01]{5}/,["nm-j-configurator-status_",t].join("")),i!==a&&(n.className=a)}},a.setDebugOutput=function(t,n){var a;n&&(n=" ("+n+")",a=1===t.find(".nm-debug-item").length?e(t.find(".nm-debug-item")[0]):t,a.attr("data-message",n))},a.handleConflictAndTransferResolves=function(e){a.updateAllDomItems()},a.handleViewStateUpdates=function(e){var t,n;t=e.currentView,e&&e.domElement&&e.domElement.length&&(n=e.domElement),a.updateDomRenderImages(n)},a.handleConfigurationUpdate=function(e,t){a.updateDomStatusItems(),a.updateDomTextItems(),a.updateDomTextPrices(),a.updateDomTextSummary(),a.updateDomRenderImages(),a.eventBus.emit(n.DOM_UPDATED)},a.updateAllDomItems=function(){a.updateDomStatusItems(),a.updateDomTextItems(),a.updateDomTextPrices(),a.updateDomTextSummary(),
a.updateDomRenderImages(),a.updateModeChangeItems(),a.eventBus.emit(n.DOM_UPDATED)},a.updateDomTextPrices=function(){var n=t.getConfiguration();n&&n.prices&&a.setDOMText(e("body"),n.prices)},a.updateModeChangeItems=function(){var n,a,i,r,o,s;n=t.getPriceRateMode(),a="nm-mode-"+n,e("body").removeClass("nm-mode-rate nm-mode-price"),e("body").addClass(a),s=e(".nm-engine-list a[data-module-maw-criteria=price]"),s.length>0&&(i="rate"===n?"Preis":"Rate",r="rate"===n?"Rate":"Preis",o=s.html(),s.html(o.replace(i,r))),e(".nm-price-rate-switch").each(function(){this.checked="rate"===n})},a.updateDomTextItems=function(n){var i=n?n:e("body");i.find(".nm-j-configurator-item").each(function(){var n=e(this),i=n.attr("data-configurator-id"),r=t.getItem(i);r&&a.setDOMText(n,r)})},a.setDOMText=function(e,t){var n,i={rate:"",price:"",optionsPrice:"",subname:"",packageDescription:"","single-price":"",financeGlobalDisclaimer:"",financeParameters:"",financeProductDisclaimer:"",financeProductName:"",count:"",description:"",rotrprice:"",nettoBase:"",nettoOptions:"",taxTotal:"",taxableBenefit1:"",taxableBenefit2:"",rotrRate:"",totalRate:""};for(n in i)"undefined"!=typeof t[n]?i[n]=t[n]:delete i[n];n="";for(n in i)t.hasOwnProperty(n)&&e.find([a.oDefaults.sSelectorSnippetText,n].join("")).html(t[n])},a.hideRenderImages=function(){e(a.oDefaults.sSelectorRenderImage).each(function(){e(this).addClass("nm-fade-out")})},a.updateDomRenderImages=function(n){var i=t.getConfigurationAssets();if(i){var r=n||e("body");e(a.oDefaults.sSelectorRenderImage,r).each(function(){var n,a,r,o=e(this),s=o.attr("data-renderimage-type"),l=o.attr("data-renderimage-view");s&&l?(n=i[l],n&&n[s]?(a=t.getRenderUrl()+n[s],0!==n[s].indexOf("/preview/")&&(r=t.getAltImagePath(l,s),r&&(a+="?alt="+r)),o.is("img")?a!==o.attr("src")?o.removeClass("nm-fade-out nm-fade-in").addClass("nm-fade-out").delay(300).load(function(t){e(t.target).removeClass("nm-fade-out nm-fade-in").addClass("nm-fade-in").delay(300).removeClass("nm-fade-in")}).attr("src",a):o.removeClass("nm-fade-out nm-fade-in").addClass("nm-fade-in").delay(300).removeClass("nm-fade-in"):o.attr("data-url")!==a&&(o.attr("data-url",a),o.css("backgroundImage","url("+a+")"))):o.removeClass("nm-fade-out nm-fade-in").addClass("nm-fade-in").delay(300).removeClass("nm-fade-in")):o.removeClass("nm-fade-out nm-fade-in").addClass("nm-fade-in").delay(300).removeClass("nm-fade-in")})}},a.updateDomTextSummary=function(){var n=(e("body"),t.getMotorcode()),i=t.getItem(n),r=t.getModelsInfo(n),o=e(".nm-j-configuration-summary"),s=t.getConfiguration();s||console.warn("updateDomTextSummary: no configuration available!");var l,c,u=s&&s.eec?s.eec:{};s&&a.setDOMText(e(a.oDefaults.sSelectorConfigurationSummary),s);var d;if(d=e(window.mss?".mssc-summary-engine, .mssc-summary-technical-data-container":"[data-template='summary']"),i=e.extend(r,i),u&&!u.efficiency&&i&&i["energy-efficiency-category"]&&(u.efficiency=i["energy-efficiency-category"]),d.length){if(s&&s.description&&d.find(".nm-j-configurator-text-description").html(s.description),i){l="";for(l in i)i.hasOwnProperty(l)&&("image"===l?d.find(a.oDefaults.selectorModelImage).attr("src",i[l]):d.find([a.oDefaults.selectorModelText,l].join("")).html(i[l]))}if(u){l="";for(l in u)u.hasOwnProperty(l)&&d.find([a.oDefaults.sSelectorSnippetTextEec,l].join("")).html(u[l]);u.efficiency&&(c=window.mss?t.getDocrootUrl()+"/cms4i-nemo/eec-images/eec-label-"+u.efficiency.toLowerCase().replace(/\+/,"plus")+".png":t.getDocrootUrl()+"/cms4i-nemo/eec-images/eec-label-"+u.efficiency.toLowerCase().replace(/\+/,"plus")+"-small.png",d.find(a.oDefaults.selectorEecImage).attr("src",c))}}if(u&&o.length){l="";for(l in u)u.hasOwnProperty(l)&&o.find([a.oDefaults.sSelectorSnippetTextEec,l].join("")).html(u[l]);u.efficiency&&(c=t.getDocrootUrl()+"/cms4i-nemo/eec-images/eec-label-"+u.efficiency.toLowerCase().replace(/\+/,"plus")+"-small.png",o.find(a.oDefaults.selectorEecImage).attr("src",c))}if(t.isConfigurationStarted()){var m=!!t.getConfigurationCarPriceRate();m?(e(a.oDefaults.sSelectorCarPriceRate).removeClass("nm-hidden"),e(".nm-footnote-finance").removeClass("nm-hidden")):(e(a.oDefaults.sSelectorCarPriceRate).addClass("nm-hidden"),e(".nm-footnote-finance").addClass("nm-hidden"))}},i.initializePromise=function(e){return new Promise(function(t){a.eventBus=e,a.initialize(),t("configurator/dom-state.js")})},i}),define("text!templates/cookie-policy.tpl",[],function(){return'<div class="nm-cookiepolicy" style="">\n	<div class="nm-cookiepolicy-inner nm-el-pg nm-el-pg-04 nm-at-pg-inv">\n		<div>{{=it.text}}</div>\n		<ul>\n			<li>\n				<a x-cq-linkchecker="skip" style="text-decoration: none" id="continue" class="continue nm-el-lk nm-el-lk-01 nm-at-lk-b nm-el-lk-ast nm-at-lk-inv">{{=window.i18n[\'cookie-continue-label\']}}</a>\n			</li>\n			<li>\n				<a x-cq-linkchecker="skip" id="showPolicy" href="{{=it.linkUrl}}" class="nm-layerLink nm-el-lk nm-el-lk-02 nm-at-lk-inv">{{=it.linkText}}</a>\n			</li>\n		</ul>\n	</div>\n</div>\n'}),define("ui/cookie-policy",["jquery","events","core/template","text!templates/cookie-policy.tpl"],function(e,t,n,a){"use strict";var i={},r={__:i};return i.checkCookiePolicy=function(){var t,r;!localStorage.getItem("cookiepolicy")&&SETUPS.get("cookie.policy.scope")&&(t={text:SETUPS.get("cookie.text"),linkText:SETUPS.get("cookie.link.text"),linkUrl:SETUPS.get("cookie.link.url")},r=n.render(a,t),e(r).insertBefore(".nm-header")),i.legacyEventBus.on("click",".continue",function(){localStorage.setItem("cookiepolicy",!0),e(".nm-cookiepolicy").hide()})},i.initialize=function(){i.checkCookiePolicy()},r.initializePromise=function(t){return new Promise(function(n){i.eventBus=t,i.legacyEventBus=e("body"),i.initialize(),n("ui/cookie-policy.js")})},r}),define("text!templates/error-layer.tpl",[],function(){return'<div class="nm-layer-wrapper nm-layer-wrapper-dialogue">\n	<div class="nm-layer nm-layer-dialogue nm-error-layer nm-layer-visible">\n		<div class="nm-layer-inner">\n			<div class="nm-layer-dialogue-content clearfix">\n				{{var errorHeadline = window.i18n[\'error-layer.headline\']; }}\n				<h1 class="nm-h2">{{=errorHeadline}}</h1>\n				{{ var defaultErrorMessage = window.i18n[\'error-layer.unknown-error\'] || \'Es ist ein unbekannter Fehler aufgetreten\'; }}\n				<p class="nm-c3 nm-error nm-error-layer-message" style="float:none;" data-defaultErrorMessage="{{=defaultErrorMessage}}"> {{=it.errorMessage}} </p> <!-- TODO: i18n -->\n				<a class="nm-b1 nm-j-ok-btn" style="float:right;" href="#">\n					{{ var ok = window.i18n[\'ok-label\'] || \'OK\'; }}\n					<span>{{=ok}}</span>\n				</a>\n			</div>\n		</div>\n	</div>\n</div>\n'}),define("core/layer/cms",["core/layer/api","core/content","events","core/template","router","jquery","text!templates/error-layer.tpl"],function(e,t,n,a,i,r,o){"use strict";var s,l;return s={},l={__:s},s.LAYER_TPL_ID="nm-id-default-data-layer-tpl",s.LAYER_CLOSE_LINK_SELECTOR=".nm-button-close",s.defaultLayerType="cms",s.templateStr=null,s.layer=null,s.nextLayerData=null,s.openLayersSinceLastClose=0,s.backButtonEl=null,s.getTemplateStr=function(e){var t,n;return n="#"+s.LAYER_TPL_ID,e&&e["data-layer-tpl"]&&(n="#nm-id-"+e["data-layer-tpl"]+"-layer-tpl"),t=document.querySelector(n),t.innerHTML||""},s.addEvents=function(){s.eventBus.on(n.LAYER_OPEN,l.handleLayerOpen),s.eventBus.on(n.LAYER_CLOSE,l.handleLayerClose),i.register(".nm-layerLink","layer"),i.register("#nm-id-layer-tab-navigation a","layer"),i.register(".nm-layer .nm-button-close","layer","close"),i.register(".nm-layer .nm-button-cancel","layer","close"),i.register(".nm-layerClose","layer","close")},s.initialize=function(){s.addEvents()},s.handleError=function(t){var n;n=a.render(o,{errorMessage:window.i18n["error-layer.unknown-error"]||"Es ist ein unbekannter Fehler aufgetreten"}),e.open("error",n).then(function(e){var t=e.getElement().querySelector(".nm-error-layer .nm-j-ok-btn");r(t).one("click",function(t){t.preventDefault&&t.preventDefault(),e.close()})})["catch"](function(e){console.log(e)}),history.back()},s.next=function(){var n,i,r;s.nextLayerData&&(n=s.nextLayerData[0],i=s.nextLayerData[1],r=s.nextLayerData[2],s.nextLayerData=null,t.getContent(n,!1).then(function(t){var r,o=t.indexOf("<html");return-1!==o&&s.handleError(),r=a.render(s.getTemplateStr(i),{content:t}),s.layer&&"cms"!==s.layer.type?void console.warn("could noct Open Layer"):e.open("cms",r,l.handleCloseRequest).then(function(e){s.layer=e,s.layer.url=n,s.controlBackButton(s.layer)})["catch"](function(e){console.error(e)})})["catch"](s.handleError))},s.controlBackButton=function(e){var t=function(){history.back(),s.openLayersSinceLastClose-=2};s.openLayersSinceLastClose>1&&r(e.getElement()).find(".nm-button-back").removeClass("nm-hidden").on("click",t)},l.handleLayerOpen=function(e){this&&"function"==typeof this.preventDefault&&this.preventDefault(),s.nextLayerData=[e[0].layer,e[1],e[2]],s.openLayersSinceLastClose+=1,s.next()},l.handleLayerClose=function(e){return this&&"function"==typeof this.preventDefault&&this.preventDefault(),s.openLayersSinceLastClose=0,s.layer?void s.layer.close().then(function(){s.layer=void 0,s.next()},function(e){console.error(e)}):!1},l.handleCloseRequest=function(){i.close("layer",s.layer.url)},l.initializePromise=function(e){return new Promise(function(t){s.eventBus=e,s.initialize(),t("core/layer/cms.js")})},l}),define("core/layer/static",["core/layer/api","core/template","events","jquery"],function(e,t,n,a){"use strict";var i,r;return i={},r={__:i},i.getTemplateString=function(e,n){var i;return i=a("#nm-id-"+e+"-layer-tpl").html(),t.render(i,n)},r.handleStaticLayer=function(t){var n,r;n=a(t.target).data("layer-tpl"),r=i.getTemplateString(n,{}),e.open(n,r).then(function(e){i.currentLayer=e},function(e){console.log(e)})},r.initialize=function(){i.legacyEventBus.on("click",".nm-static-layer-open",function(e){e.preventDefault(),r.handleStaticLayer(e)})},r.initializePromise=function(e){return new Promise(function(t){i.eventBus=e,i.legacyEventBus=a("body"),r.initialize(),t("core/layer/static.js")})},r}),define("core/page/pg-dom",["jquery","events","utils/dom"],function(e,t,n){"use strict";var a,i;return a={},i={__:a},a.eventBus=null,a.navURLs=null,a.oDefaults={sClassAnimate:"animate",sClassDirectionForward:"forward",sClassDirectionBackward:"backward",sSelectorPageTitle:"#nm-page-title",sSelectorContent:".nm-content",sSelectorContentElem:".nm-wrapper-content .nm-area-content",sSelectorGlobalWrapper:".nm-wrapper-content",sSelectorNavigation:"#nm-navigation"},a.addClassToSelector=function(e,t){n.getElement(e).classList.add(t)},a.removeClassFromSelector=function(e,t){n.getElement(e).classList.remove(t)},a.removeElement=function(t){e(t).remove()},a.append=function(t,n){e(t).append(n)},a.extractNavigationURLs=function(e,t){var n;return a.navURLs=[],e.each(function(){n=$(this).find("a").attr("data-href"),"undefined"!=typeof n&&(n=n.replace(t,""),a.navURLs.push(n))}),a.navURLs},i.isBackwardsAnimation=function(t,n){return n="undefined"!=typeof n?n.replace(SETUPS.get("nemo.core.router.pathBase",""),""):window.location.pathname.replace(SETUPS.get("nemo.core.router.pathBase",""),""),t=t.replace(SETUPS.get("nemo.core.router.pathBase",""),""),null===a.navURLs&&i.extractNavUrls(e(a.oDefaults.sSelectorContentElem)),a.navURLs.indexOf(t)<a.navURLs.indexOf(n)},i.isNomo=function(){var e=document.querySelector(a.oDefaults.sSelectorContent);return!!e&&"nomo"===e.getAttribute("data-type")},i.extractNavUrls=function(e){return a.extractNavigationURLs(e.find(a.oDefaults.sSelectorNavigation+" li"),SETUPS.get("nemo.core.router.pathBase",""))},i.getCurrentPageId=function(){return n.getElement(a.oDefaults.sSelectorContent).getAttribute("data-guid")},i.setPageTitle=function(e){document.title=e},i.extractPageTitle=function(e){var t=e.find(a.oDefaults.sSelectorPageTitle),n="";return null!==t&&"undefined"!=typeof t[0]&&(n=t[0].innerHTML),n},i.insertNewPageContent=function(t){return a.append(a.oDefaults.sSelectorGlobalWrapper,t),e(a.oDefaults.sSelectorContentElem+":last-child")},i.preparePageTransition=function(e){var t=e?a.oDefaults.sClassDirectionBackward:a.oDefaults.sClassDirectionForward;a.addClassToSelector(a.oDefaults.sSelectorGlobalWrapper,t)},i.triggerPageTranstion=function(){a.addClassToSelector(a.oDefaults.sSelectorGlobalWrapper,a.oDefaults.sClassAnimate)},i.finishPageTransition=function(){a.removeClassFromSelector(a.oDefaults.sSelectorGlobalWrapper,a.oDefaults.sClassAnimate),a.removeClassFromSelector(a.oDefaults.sSelectorGlobalWrapper,a.oDefaults.sClassDirectionBackward),a.removeClassFromSelector(a.oDefaults.sSelectorGlobalWrapper,a.oDefaults.sClassDirectionForward),a.removeElement(a.oDefaults.sSelectorContentElem+":first-child"),e("body").removeClass("nm-nav-fixed nm-page-nav-is-open"),e("html, body").animate({scrollTop:0},400)},i.initializePromise=function(e){return new Promise(function(t){a.eventBus=e,t("core/page/pg-dom.js")})},i}),define("core/page/pg-main",["jquery","core/content","events","router","core/layer/api","core/template","core/page/pg-dom","text!templates/error-layer.tpl"],function(e,t,n,a,i,r,o,s){"use strict";var l,c;return l={},c={__:l},l.eventBus=null,l.currentPageId=null,l.queue=[],l.lock=!1,l.backwardsAnimation=!1,l.oDefaults={navSelector:"",derivatSubListSelector:".nm-area-content .nm-navigation-derivative-sub-list a"},l.initialize=function(){l.oDefaults.navSelector=SETUPS.get("nemo.nav.navSelector"),l.currentPageId=o.getCurrentPageId(),l.addEvents()},l.addEvents=function(){l.eventBus.on(n.PAGE_OPEN,l.handlePageOpen),a.register(l.oDefaults.navSelector+" a","page"),a.register(l.oDefaults.derivatSubListSelector,"page"),a.register(".nm-pageOpen","page")},l.handlePageTransitionComplete=function(){l.reset(),l.eventBus.emit(n.PAGE_READY),l.queue.length>0&&(l.handlePageOpen(null,l.queue.pop()),l.queue=[])},l.handlePageOpen=function(e){if(this&&"function"==typeof this.preventDefault&&this.preventDefault(),l.isLocked())l.queue.push(e);else{var n,a=SETUPS.get("nemo.core.router.pathBase",""),i=e.pathname;l.setLock((new Date).getTime()),"/"!==i.substr(0,1)&&(i="/"+i),l.newPageUrl=i,n=i.replace(a,""),t.getContent(n,!1).then(l.pageContentHandler)["catch"](l.handlePageOpenError)}},l.isLocked=function(){return!!l.lock},l.setLock=function(e){l.lock=e},l.reset=function(){l.lock=!1,l.currentPageUrl=l.newPageUrl,l.newPageUrl="",l.newPageId=null,l.newPageTitle=null},l.pageContentHandler=function(e){var t=o.insertNewPageContent(e);l.eventBus.emit(n.PAGE_LOADED,{domElement:t}),l.backwardsAnimation=o.isBackwardsAnimation(l.newPageUrl,l.currentPageUrl),o.preparePageTransition(l.backwardsAnimation),setTimeout(function(){o.triggerPageTranstion()},10),setTimeout(function(){o.finishPageTransition(),l.handlePageTransitionComplete()},600)},l.handlePageOpenError=function(t){var a;history.back(),a=r.render(s,{errorMessage:window.i18n["error-layer.unknown-error"]||"Es ist ein unbekannter Fehler aufgetreten"}),i.open("error",a).then(function(t){var n=t.getElement().querySelector(".nm-error-layer .nm-j-ok-btn");e(n).one("click",function(e){e.preventDefault&&e.preventDefault(),t.close()})}),l.eventBus.emit(n.PAGE_READY),l.reset()},c.initializePromise=function(e){return new Promise(function(t){l.eventBus=e,l.initialize(),t("core/page/pg-main.js")})},c}),define("core/page/pg-title",["jquery","events","core/page/pg-dom"],function(e,t,n){"use strict";var a,i;return a={},i={__:a},a.oDefaults={},a.initialize=function(){a.addEvents()},a.addEvents=function(){a.eventBus.on(t.PAGE_LOADED,a.handerPageLoaded)},a.handerPageLoaded=function(e){var t,a,i=n.extractPageTitle(e.domElement);i&&""!==i&&(t=document.createElement("div"),t.innerHTML=i,a=t.firstChild.nodeValue,n.setPageTitle(a))},i.initializePromise=function(e){return new Promise(function(t){a.eventBus=e,a.initialize(),t("core/page/pg-title.js")})},i}),define("core/page/pg-preload",["jquery","core/content","events","core/page/pg-dom","core/signal"],function(e,t,n,a,i){"use strict";var r,o;return r={},o={__:r},r.oDefaults={initialContentAreaSelector:".nm-wrapper-content .nm-area-content:first-child",initalScWrapper:".nm-wrapper"},r.scEventBus=i.getEmitter("stockcar"),r.initialize=function(){r.addEvents()},r.addEvents=function(){r.scEventBus.one(n.VERSION_LOAD_COMPLETE,r.handlerSvdVersionLoaded),r.eventBus.on(n.PAGE_LOADED,r.handlerPageLoaded),r.eventBus.one(n.VERSION_LOAD_COMPLETE,r.handlerVersionLoaded)},r.preloadContent=function(e){var n;("true"===SETUPS.get("nemo.content.preload")||"true"===SETUPS.get("stockcar.context")||a.isNomo()===!1)&&(n=a.extractNavUrls(e),t.fillCache(n))},r.handlerPageLoaded=function(e){r.preloadContent(e.domElement)},r.handlerVersionLoaded=function(){r.preloadContent(e(r.oDefaults.initialContentAreaSelector))},r.handlerSvdVersionLoaded=function(){r.preloadContent(e(r.oDefaults.initalScWrapper))},o.initializePromise=function(e){return new Promise(function(t){r.eventBus=e,r.initialize(),t("core/page/pg-preload.js")})},o}),define("core/layer/jslayer",["core/layer/api","events","core/template","router"],function(e,t,n,a){"use strict";var i={},r={__:i};return i.callbacks={},i.layer=null,i.pending=null,i.initialize=function(){a.register(".nm-jslayerLink","jslayer"),a.register(".nm-j-jslayer .nm-button-close","jslayer","close"),i.eventBus.on("jslayer.open",r.handleJslayerOpen),i.eventBus.on("jslayer.close",r.handleJslayerClose)},i.processLayer=function(t,n){var a=i.callbacks[t].call({},n);e.open("jslayer",a,r.handleCloseRequest).then(function(e){i.layer=e,i.layer.key=t,i.layer.id=n},function(e){console.log("jslayer.handleJslayerOpen:",e)})},r.register=function(e,t){i.callbacks[e]=t,i.pending&&2===i.pending.length&&i.pending[0]&&e===i.pending[0]&&i.processLayer(e,i.pending[1])},r.handleJslayerOpen=function(e){var t,n,a,r=e[0]&&e[0].jslayer?e[0].jslayer:null;r&&(r.indexOf("#")>-1&&(r=r.split("#")[1]),t=n=r,r.indexOf(".")>-1&&(a=r.split("."),t=a[0],n=a[1]),i.callbacks[t]&&"function"==typeof i.callbacks[t]?i.processLayer(t,n):i.pending=[t,n])},r.handleJslayerClose=function(){i.layer&&i.layer.close&&(i.layer.close(),i.eventBus.emit(t.LAYER_CLOSE,{element:i.layer.element}),i.pending=null)},r.handleCloseRequest=function(){var e=i.layer.key;i.layer.id&&(e=e+"."+i.layer.id),a.close("jslayer",e)},r.initializePromise=function(e){return new Promise(function(t){i.eventBus=e,i.initialize(),t("core/layer/jslayer.js")})},r}),define("module/device",["events"],function(e){"use strict";var t,n;return t={},n={__:t},t.oDefaults={classIsIOS:"nm-is-ios",classIsIPad:"nm-is-ipad",classIsIPhone:"nm-is-iphone"},t.device=null,t.eventBus=null,t.addEvents=function(){t.eventBus.on(e.PAGE_LOADED,t.handlePageLoaded)},n.isiPhone=function(){return"iphone"===t.getDevice()},n.isiPod=function(){return"ipod"===t.getDevice()},n.isiPad=function(){return"ipad"===t.getDevice()},n.isAndroid=function(){return"android"===t.getDevice()},n.isiOS=function(){return n.isiPhone()||n.isiPad()},n.isMobile=function(){return n.isiOS()||n.isAndroid()},t.handlePageLoaded=function(e){n.isiOS()&&(document.querySelector("body").classList.add(t.oDefaults.classIsIOS),n.isiPhone()?document.querySelector("body").classList.add(t.oDefaults.classIsIPhone):n.isiPad()&&document.querySelector("body").classList.add(t.oDefaults.classIsIPad))},t.getDevice=function(){return t.device=window.navigator.userAgent.toLowerCase(),null!==t.device.match(/ipod/i)&&(t.device="ipod"),null!==t.device.match(/ipad/i)?t.device="ipad":null!==t.device.match(/iphone/i)?t.device="iphone":null!==t.device.match(/android/i)?null!==t.device.match(/mobile/i)&&(t.device="android"):t.device="default",t.device},n.initializePromise=function(e){return new Promise(function(n){t.eventBus=e,t.handlePageLoaded(),n("module/device.js")})},n}),define("core/scroll",["jquery","core/signal","events"],function(e,t,n){"use strict";var a,i={},r={__:i},o=!1,s=!1,l={top:0,bottom:0},c=[],u=[[],[]],d=[0,0],m={ABOVE:1,IN:2,BELOW:3},g={ONSCROLL:0,AFTERSCROLL:1},f={INOUT:0,COVER:1,SCROLLUP:2,SCROLLDOWN:3},p={notifyWhen:g.ONSCROLL,eventName:"",mode:f.INOUT};return i.updateViewportData=function(){l={top:0,bottom:window.innerHeight||document.documentElement.clientHeight}},i.pageLoadHandler=function(e){var n,a;for(u=[[],[]],t.getEmitter().removeAllListeners("element.scroll"),n=0,a=c.length;a>n;n++)i.register(c[n].selector,c[n].options,c[n].callback,e.domElement[0],!0)},i.initializeListeners=function(){o||(window.addEventListener("scroll",i.scrollHandler),window.addEventListener("scroll",i.scrollEndHandler),window.addEventListener("resize",i.scrollHandler),window.addEventListener("resize",i.scrollEndHandler),window.addEventListener("resize",i.updateViewportData),i.updateViewportData(),o=!0)},i.register=function(e,n,a,r){var o,s,l,d,m,g,f,v,h,y,C;if(void 0!==typeof r&&r||c.push({selector:e,options:n,callback:a}),s=document,o=s.querySelectorAll(e),o.length){for(i.initializeListeners(),l=n.notifyWhen||p.notifyWhen,d=n.eventName||p.eventName,m=n.mode||p.mode,g=[],t.getEmitter().addListener("element.scroll."+d,a),f=0,C=o.length;C>f;f++)v=o[f],h=i.getElementsState(v,m,o),y={element:v,selector:e,eventName:d,mode:m,where:h,was:h,elements:o},t.getEmitter().trigger("element.scroll."+y.eventName,y),g.push(y);u[l].push(g)}},i.getElementsState=function(e,t,n){var a,r=i.getElementState(e);if(t===f.COVER&&r===m.IN)for(a=0;a<n.length&&n[a]!==e;a++)if(100===i.getElementCoverage(n[a]))return m.BELOW;return r},i.getElementState=function(e){var t=e.getBoundingClientRect();return t.top>=l.top&&t.top<l.bottom||t.bottom>=l.top&&t.bottom<l.bottom||t.top<l.top&&t.bottom>l.top?m.IN:t.top<l.top?m.ABOVE:m.BELOW},i.getElementCoverage=function(e){var t,n,a;return i.getElementState(e)!==m.IN?0:(a=e.getBoundingClientRect(),a.top>=l.top&&a.bottom<=l.bottom?100:(t=a.top,n=a.bottom,0>t&&(t=0),n>l.bottom&&(n=l.bottom),(n-t)/(l.bottom-l.top)*100))},i.dump=function(){console.log(u)},i.checkOnScroll=function(){i.checkChangedElements(g.ONSCROLL)},i.checkAfterScroll=function(){i.checkChangedElements(g.AFTERSCROLL)},i.checkChangedElements=function(e){var t,n,a,r=window.scrollY;if(s=!1,u[e].length>0)for(t=0,a=u[e].length;a>t;t++)for(n in u[e][t])u[e][t][n]&&document.body.contains(u[e][t][n].element)&&(u[e][t][n]=i.checkChangedElement(u[e][t][n],e,r));d[e]=r},i.checkChangedElement=function(e,n,a){var r=i.getElementsState(e.element,e.mode,e.elements);return e.was=e.where,e.where=r,e.mode===f.SCROLLDOWN?a>d[n]&&t.getEmitter().trigger("element.scroll."+e.eventName,e):e.mode===f.SCROLLUP?a<d[n]&&t.getEmitter().trigger("element.scroll."+e.eventName,e):e.was!==e.where&&t.getEmitter().trigger("element.scroll."+e.eventName,e),e},i.scrollHandler=function(){s||(s=!0,window.requestAnimationFrame(i.checkOnScroll))},i.scrollEndHandler=function(){clearTimeout(a),a=window.setTimeout(function(){window.requestAnimationFrame(i.checkAfterScroll)},250)},i.initialize=function(){i.eventBus.on(n.PAGE_LOADED,i.pageLoadHandler)},r.initializePromise=function(e){return new Promise(function(t){i.eventBus=e,i.initialize(),t("core/scroll.js")})},r.register=i.register,r.unregister=i.unregister,r.WHERE=m,r.NOTIFY=g,r.MODE=f,r}),define("module/maw",["jquery","events"],function(e,t){"use strict";var n={},a={__:n};return n.oDefaults={sSelectorDelegateClick:".nm-j-module-maw-delegate-click",sClassASC:"nm-arrow-up",sClassDESC:"nm-arrow-down",sClassActive:"nm-arrow-active",sDirectionAttr:"data-module-maw-direction",sSortCriteriaAttr:"data-module-maw-criteria"},n.handlePageUpdate=function(){var t,n=e(".nm-engine-list-container");n.length>0&&(t=n.find(".nm-engine-list tbody tr").not(".nm-j-configurator-status_00000"),t.length<2?n.addClass("nm-engine-lonesome"):n.removeClass("nm-engine-lonesome"))},n.doSort=function(t,n,a){var i=e(["[",n,"]"].join("")),r=[];i.each(function(){r.push(e(this).attr(n))});var o=e(["[",n,"]"].join(""),t).remove();return o=-1===a?o.sort(function(t,a){return e(t).attr(n)-e(a).attr(n)}):o.sort(function(t,a){return e(a).attr(n)-e(t).attr(n)}),o.appendTo(t),!1},n.handler=function(t){var a,i=e(this);switch(t.data.action){case"sort":t.preventDefault(),a=parseInt(i.attr(n.oDefaults.sDirectionAttr),10),n.doSort(i.closest("table"),["data-module-maw-criteria-",i.attr(n.oDefaults.sSortCriteriaAttr)].join(""),a),i.attr(n.oDefaults.sDirectionAttr,-1*a),i.closest("table").find("."+n.oDefaults.sClassActive).removeClass(n.oDefaults.sClassActive);var r=i.find("span");r.addClass(n.oDefaults.sClassActive).toggleClass(n.oDefaults.sClassDESC).toggleClass(n.oDefaults.sClassASC);break;default:console.warn("unhandled switch::_handler")}},n.addEvents=function(){var e=n.handler;n.legacyEventBus.on("click.module.maw",n.oDefaults.sSelectorDelegateClick,{action:"sort"},e),n.eventBus.on(t.PAGE_LOADED,n.handlePageUpdate),n.eventBus.on(t.LAYER_LOADED,n.handlePageUpdate),n.eventBus.on(t.CONFIG_UPDATE,n.handlePageUpdate)},n.initialize=function(){n.addEvents()},a.initializePromise=function(t){return new Promise(function(a){n.eventBus=t,n.legacyEventBus=e("body"),n.initialize(),a("module/maw.js")})},a}),define("module/menuflyout",["jquery","utils/utils","events"],function(e,t,n){"use strict";var a=".nm-navigation-header-item",i=".nm-header-overlay-is-open",r=".nm-navigation-sitemap-wrap > .nm-navigation-sitemap-wrap-link",o=".nm-navigation-header-link",s="nm-navigation-header-direct-link",l=".nm-navigation-header-detail-container > ul",c=".nm-header-overlay-is-open .nm-navigation-header-detail-container > ul > li.nm-header-detail-link-active",u=".nm-navigation-header-detail-container > ul > li > a",d="nm-header-detail-link-active",m=".nm-navigation-header-overlay",g="nm-header-overlay-is-open",f=".nm-header-overlay-container",p="#nm-navigation-dropdown-menu",v=".nm-has-additional-logo",h=30,y=899,C=999,S=300,E=460,D={},w={__:D};return w.open=function(t){console.log("api.open"),D.addBackGroundEventOnce(),t.attr("flyout-is-open","true");var a=(t.find("a").attr("href"),t.find("a").attr("data-ref-id")),i=f+" "+m+'[data-ref-id="'+a+'"]',r=e(i);return D.setFlyoutHeight(r),r.find(".nm-navigation-header-detail .nm-navigation-header-detail-overlay").css({"transition-delay":"0s"}),r.addClass(g),D.eventBus.emit(n.MENUFLYOUT_OPEN,{item:t}),D.closeDropdownMenu(),t.addClass(g)},w.close=function(t){var a=t.find("a").attr("href"),i=f+" "+m+'[data-ref-url="'+a+'"]',r=e(i);return D.removeBackGroundEvent(),t.attr("flyout-is-open","false"),r&&void 0!==r.attr("data-height")&&r.height(0),r.find(".nm-navigation-header-detail .nm-navigation-header-detail-overlay-wrap").css({"transition-delay":"1s"}),D.eventBus.emit(n.MENUFLYOUT_CLOSE,{item:t}),r.removeClass(g),t.removeClass(g)},w.closeAll=function(t){e(t).each(function(){w.close(e(this))})},D.itemIsOpen=function(e){var t=e.attr("flyout-is-open");return t&&"true"===t?!0:!1},D.handleMenuClick=function(t){var n=e(this),i=n.parent();return n.hasClass(s)?!0:(t.preventDefault(),void(D.itemIsOpen(i)?w.close(i):(w.closeAll(a,!0),w.open(i))))},D.handleCloseClick=function(t){var n=e(a+"."+g);t.preventDefault(),w.close(n)},D.handleOverlayClick=function(n){var r=t().isElementOutsideOfElementWithSelector(e(n.target),i);r&&w.closeAll(a)},D.isInsideTriangle=function(e,t,n,a,i,r,o,s){var l=(i-n)*(s-a)-(o-n)*(r-a),c=((i-e)*(s-t)-(o-e)*(r-t))/l,u=((o-e)*(a-t)-(n-e)*(s-t))/l,d=((n-e)*(r-t)-(i-e)*(a-t))/l,m=c>0&&u>0&&d>0;return m},D.handleNavigationMouseEnter=function(t){t.preventDefault(),t.stopImmediatePropagation(),D.activeItem=e(c),$(document).on("mousemove",D.handleNavigationMouseMove)},D.handleNavigationMouseLeave=function(){$(document).off("mousemove",D.handleNavigationMouseMove)},D.handleActiveItemChange=function(e){D.activeItem.removeClass(d),D.activeItem=e,D.activeItem.addClass(d)},D.handleHoverTimeout=function(){D.activeItemNominee.length>0&&!D.activeItemNominee.parent().is(D.activeItem)&&D.handleActiveItemChange(D.activeItemNominee.parent())},D.handleNavigationMouseMove=function(t){if(D.activeItemNominee=e(t.target).closest(u),D.topBoundingRect=e(t.target).closest(l).children().first().children("a").get(0).getBoundingClientRect(),t.clientX<D.topBoundingRect.right){if(D.x0=t.clientX,D.y0=t.clientY,D.x1&&D.y1||(D.x1=D.x0,D.y1=D.y0),D.x2=D.topBoundingRect.right,D.y2=Math.max(0,D.topBoundingRect.top),D.x3=D.x2,D.y3=D.topBoundingRect.top+E,!D.activeItemNominee)return;D.activeItemNominee.parent().is(D.activeItem)?D.isInsideTriangle(D.x0,D.y0,D.x1,D.y1,D.x2,D.y2,D.x3,D.y3)||(D.x1=D.x0,D.y1=D.y0):D.activeItem&&(D.isInsideTriangle(D.x0,D.y0,D.x1,D.y1,D.x2,D.y2,D.x3,D.y3)?(clearTimeout(D.hoverTimeout),D.hoverTimeout=setTimeout(D.handleHoverTimeout,S)):D.handleActiveItemChange(D.activeItemNominee.parent()))}},D.handleFlyoutLinkClick=function(t){if(!(e(window).width()>y||0===e(".nm-state-is-responsive").length)&&e(t.target).hasClass("nm-has-sub-nav")){t.preventDefault(),t.stopImmediatePropagation();var n=e(t.target);n.closest(".nm-navigation-sitemap-wrap").toggleClass("nm-flyout-is-expanded")}},D.addBackGroundEventOnce=function(){e("body").on("click",D.handleOverlayClick)},D.removeBackGroundEvent=function(){e("body").off("click",D.handleOverlayClick)},D.addEvents=function(){e(window).resize(function(){D.setDataHeight(),D.setFlyoutHeight(e("."+g+" "+m)),D.setDetailFlyoutHeight()}),e(a+" "+o).on("click",D.handleMenuClick),e(m+" .nm-icon-close").on("click",D.handleCloseClick),e(l).on("mouseenter",D.handleNavigationMouseEnter),e(l).on("mouseleave",D.handleNavigationMouseLeave),e(r).on("click",D.handleFlyoutLinkClick)},D.setDataHeight=function(){e(".nm-header-overlay-container .nm-navigation-header-overlay").each(function(){var t=e(this).find(".nm-navigation-header-detail-container"),n=t.find(".nm-navigation-header-detail.nm-header-detail-link-active .nm-navigation-header-detail-overlay .nm-navigation-header-detail-overlay-content"),a=t.height()+85;n&&n.height()>t.height()&&(a=n.height()+120);var i=e(v);i.length>0&&(a+=h),e(this).attr("data-height",a)})},D.setDetailFlyoutHeight=function(){var t=e(".nm-header-overlay-container .nm-navigation-header-overlay.nm-header-overlay-is-open"),n=t.find(".nm-navigation-header-detail-container .nm-navigation-header-detail.nm-header-detail-link-active .nm-navigation-header-detail-overlay .nm-navigation-header-detail-overlay-content")?t.find(".nm-navigation-header-detail-container .nm-navigation-header-detail.nm-header-detail-link-active .nm-navigation-header-detail-overlay .nm-navigation-header-detail-overlay-content"):t.find(".nm-navigation-header-detail-container"),a=n.height(),i=a+150,r=e(v);r.length>0&&(i+=h),n.find(".nm-navigation-header-detail-container-carline").length>0&&e(window).width()<C?(i=0,n.attr("data-height",i),e(n.find(".nm-icon-close")[0]).trigger("click")):(n.attr("data-height",i),D.setFlyoutHeight(n))},D.setFlyoutHeight=function(t){var n=t;0!==n.length&&void 0!==n||"0"!==e(".nm-navigation-header-overlay.nm-header-overlay-is-open").attr("data-ref-id")||(n=e(".nm-navigation-header-overlay.nm-header-overlay-is-open")),n&&void 0!==n.attr("data-height")&&n.height(n.attr("data-height"))},D.closeDropdownMenu=function(){var t=e(p);t.prop("checked")&&t.prop("checked",!1)},D.initialize=function(){D.addEvents(),D.setDataHeight()},w.initializePromise=function(e){return new Promise(function(t){D.eventBus=e,D.initialize(),t("module/menuflyout.js")})},w}),define("module/model-navigation-wrap",["jquery","module/menuflyout","events"],function(e,t,n){"use strict";var a=".nm-navigation-carline-main-item > a",i=".nm-navigation-header-model-overlay",r=".nm-close",o=".nm-navigation-header-wrapped-link",s=".nm-navigation-model-container",l="nm-navigation-model-container-active",c=".nm-navigation-model-container > ul",u=".nm-navigation-model-container-active > ul > li.nm-header-detail-link-active",d=".nm-navigation-model-container > ul > li > a",m="nm-header-detail-link-active",g=".nm-navigation-header-dropdown-item a",f=".nm-header-overlay-is-open",p=".nm-su-input",v=300,h=460,y={},C={__:y};return y.handleFlyoutOpen=function(){var t=e(i);t.hasClass("flyout-is-open")||t.addClass("flyout-is-open")},y.closeSearchFlyout=function(){var n=e(f);n.find(p).blur(),t.closeAll(n);
},y.flyoutInterval,y.checkForFlyoutClose=function(){y.flyoutInterval=setTimeout(function(){e(i).removeClass("flyout-is-open")},100)},y.stopFlyoutClose=function(){clearTimeout(y.flyoutInterval)},y.itemIsOpen=function(e){var t=e.attr("flyout-is-open");return t&&"true"===t?!0:!1},y.handleCarlineNavigationHover=function(){var t=e(this),n=t.data("ref-id");e(o).removeClass("active"),t.addClass("active"),e(s).removeClass(l),e(s).eq(n-1).addClass(l)},y.isInsideTriangle=function(e,t,n,a,i,r,o,s){var l=(i-n)*(s-a)-(o-n)*(r-a),c=((i-e)*(s-t)-(o-e)*(r-t))/l,u=((o-e)*(a-t)-(n-e)*(s-t))/l,d=((n-e)*(r-t)-(i-e)*(a-t))/l,m=c>0&&u>0&&d>0;return m},y.handleModelNavigationMouseEnter=function(t){t.preventDefault(),t.stopImmediatePropagation(),y.activeItem=e(u),$(document).on("mousemove",y.handleNavigationMouseMove)},y.handleModelNavigationMouseLeave=function(e){$(document).off("mousemove",y.handleNavigationMouseMove)},y.handleActiveItemChange=function(e){y.activeItem.removeClass(m),y.activeItem=e,y.activeItem.addClass(m)},y.handleHoverTimeout=function(e){y.activeItemNominee.length>0&&!y.activeItemNominee.parent().is(y.activeItem)&&y.handleActiveItemChange(y.activeItemNominee.parent())},y.handleNavigationMouseMove=function(t){if(y.activeItemNominee=e(t.target).closest(d),y.topBoundingRect=e(t.target).closest(c).children().first().children("a").get(0).getBoundingClientRect(),t.clientX<y.topBoundingRect.right){if(y.x0=t.clientX,y.y0=t.clientY,y.x1&&y.y1||(y.x1=y.x0,y.y1=y.y0),y.x2=y.topBoundingRect.right,y.y2=Math.max(0,y.topBoundingRect.top),y.x3=y.x2,y.y3=y.topBoundingRect.top+h,!y.activeItemNominee)return;y.activeItemNominee.parent().is(y.activeItem)?y.isInsideTriangle(y.x0,y.y0,y.x1,y.y1,y.x2,y.y2,y.x3,y.y3)||(y.x1=y.x0,y.y1=y.y0):y.activeItem&&(y.isInsideTriangle(y.x0,y.y0,y.x1,y.y1,y.x2,y.y2,y.x3,y.y3)?(clearTimeout(y.hoverTimeout),y.hoverTimeout=setTimeout(y.handleHoverTimeout,v)):y.handleActiveItemChange(y.activeItemNominee.parent()))}},y.addEvents=function(){e(a).on("mouseenter.open",y.handleFlyoutOpen),e(a).on("mouseenter.stayopen",y.stopFlyoutClose),e(a).on("mouseleave.close",y.checkForFlyoutClose),e(i).on("mouseenter.stayopen",y.stopFlyoutClose),e(i).on("mouseleave.close",y.checkForFlyoutClose),e(o).on("mouseenter",y.handleCarlineNavigationHover),e(c).on("mouseenter",y.handleModelNavigationMouseEnter),e(c).on("mouseleave",y.handleModelNavigationMouseLeave),e(g).on("mouseenter",y.closeSearchFlyout),e(i+" "+r).on("click",y.checkForFlyoutClose)},y.removeEvents=function(){e(a).off("mouseenter.open",y.handleFlyoutOpen),e(a).off("mouseenter.stayopen",y.stopFlyoutClose),e(a).off("mouseleave.close",y.checkForFlyoutClose),e(i).off("mouseenter.stayopen",y.stopFlyoutClose),e(i).off("mouseleave.close",y.checkForFlyoutClose),e(o).off("mouseenter",y.handleCarlineNavigationHover),e(c).off("mouseenter",y.handleModelNavigationMouseEnter),e(c).off("mouseleave",y.handleModelNavigationMouseLeave),e(g).off("mouseenter",y.closeSearchFlyout),e(i+" "+r).off("click",y.checkForFlyoutClose)},y.initialize=function(){SETUPS.get("hasModelNavigationWrap")===!0&&y.addEvents()},C.initializePromise=function(e){return new Promise(function(t){y.eventBus=e,y.initialize(),t("module/model-navigation-wrap.js")})},C}),define("module/cart",["jquery","configurator/dpu-api","events"],function(e,t,n){"use strict";var a={},i={__:a},r=!1;return a.oDefaults={sSelectorCart:".nm-basket",sSelectorSnippetText:".nm-j-configurator-text-"},a.updateAndAnimatePrice=function(t,n){t.stop(!0,!0).animate({opacity:"0.01"},250,"easeInSine",function(){e(this).text(n)}).delay(400).animate({opacity:"1"},300,"easeOutSine")},a.hidePriceAndRate=function(e){var t,n,i={price:{},rate:{}};for(t in i)i.hasOwnProperty(t)&&(n=e.find([a.oDefaults.sSelectorSnippetText,t].join("")),""===n.text()&&n.closest("div").addClass("nm-hidden"))},a.hideRateIfUnavailable=function(t){var n;t.prices&&(n=t.prices.totalRateRaw,"undefined"==typeof n||0===parseFloat(n)?e("body").addClass("nm-no-rate"):e("body").removeClass("nm-no-rate"))},a.updatePrice=function(e,t,n){var i,r,o=t.price;for(i in t)if(t.hasOwnProperty(i)){if(r=e.find([a.oDefaults.sSelectorSnippetText,i].join("")),"price"===i&&o&&n&&n.data&&n.data.animate){a.updateAndAnimatePrice(r,o);continue}r.text(t[i])}},a.updateCartText=function(n){var i,r=e(a.oDefaults.sSelectorCart);if(t.isConfigurable()){if(i=t.getConfiguration(),!i)return;a.updatePrice(r,i,n),a.hideRateIfUnavailable(i)}else a.hidePriceAndRate(r)},a.updateEngineLinks=function(){var n,a;t.isConfigurable()&&(n=e("[data-link-pattern]"),a=t.getMotorcode(),n.each(function(){var t=e(this),n=t.attr("data-link-pattern");n&&n.match(/{{=it.model}}/g)&&(n=n.replace(/{{=it.model}}/,a),t.attr("href",n))}))},a.updateSummaryStatus=function(t){var n="summary"===t||"onepage_configurator"===t;n?e("body").addClass("nm-is-summary"):e("body").removeClass("nm-is-summary")},a.updateBasketBodyClass=function(t,n){var a=e(".nm-basket").length>0,i="nemo"===t.attr("data-type"),r="home"===n;a&&i&&!r?e("body").addClass("nm-has-basket"):e("body").removeClass("nm-has-basket")},a.updateClasses=function(t){var n,i;n="undefined"!=typeof t&&"undefined"!=typeof t.domElement?e(t.domElement).find(".nm-content"):e(".nm-content"),i=n.attr("data-template"),a.updateSummaryStatus(i),a.updateBasketBodyClass(n,i)},a.handlerAnimated=function(){var e={data:{animate:!0}};a.updateCartText(e),a.updateEngineLinks()},a.handlerNotAnimated=function(){var e={data:{animate:!1}};a.updateCartText(e),a.updateEngineLinks()},a.addEvents=function(){a.eventBus.on(n.CONFIG_UPDATE,a.handlerAnimated),a.eventBus.on(n.LAYER_LOADED,a.handlerNotAnimated),a.eventBus.on(n.CONFIG_START,a.handlerNotAnimated),a.eventBus.on(n.PAGE_LOADED,a.handlerNotAnimated),a.eventBus.on(n.PAGE_LOADED,a.updateEngineLinks),a.eventBus.on(n.PAGE_LOADED,a.updateClasses)},i.dispose=function(){a.eventBus.off(n.CONFIG_UPDATE,a.handlerAnimated),a.eventBus.off(n.LAYER_LOADED,a.handlerNotAnimated),a.eventBus.off(n.CONFIG_START,a.handlerNotAnimated),a.eventBus.off(n.PAGE_LOADED,a.updateEngineLinks),a.eventBus.off(n.PAGE_LOADED,a.updateClasses)},a.initialize=function(){r||(a.addEvents(),r=!0,a.updateClasses())},i.initializePromise=function(e){return new Promise(function(t){a.eventBus=e,a.initialize(),t("module/cart.js")})},i}),define("core/storage",[],function(){"use strict";var e={};return e.__version=1.1,e.__class="nemo.core.STORAGE",e.ID="STORAGE",e.CONTAINER={},e.get=function(t,n){return n&&e.CONTAINER[n]?e.CONTAINER[n][t]:e.CONTAINER[t]},e.set=function(t,n,a){return"undefined"==typeof t||"undefined"==typeof a?!1:(n?(e.CONTAINER[n]||(e.CONTAINER[n]={}),e.CONTAINER[n][t]=a,null===a&&delete e.CONTAINER[n][t]):(e.CONTAINER[t]=a,null===a&&delete e.CONTAINER[t]),(n?e.CONTAINER[n][t]:e.CONTAINER[t])||void 0)},e.unset=function(t,n){e.set(t,n,null)},e}),define("module/dns",["jquery","events"],function(e,t){"use strict";var n={},a={__:n};return n.close=function(){e(".nm-dns").removeClass("nm-dns-open").find(".nm-dns-listwrapper ul").removeClass("nm-dns-open")},n.open=function(){e(".nm-dns").addClass("nm-dns-open").find(".nm-dns-listwrapper ul").addClass("nm-dns-open")},n.isOpen=function(){return e(".nm-dns").hasClass("nm-dns-open")},n.toggle=function(e){e&&"function"==typeof e.preventDefault&&e.preventDefault(),n.isOpen()===!0?n.close():n.open()},n.addEvents=function(){n.legacyEventBus.on("click",".nm-dns-toggle-link",n.toggle),n.eventBus.on(t.PAGE_LOADED,n.close),n.eventBus.on(t.LAYER_LOADED,n.close)},n.removeEvents=function(){n.legacyEventBus.off("click",".nm-dns-toggle-link",n.toggle),n.eventBus.off(t.PAGE_LOADED,n.close),n.eventBus.off(t.LAYER_LOADED,n.close)},n.initialize=function(){n.addEvents()},a.initializePromise=function(t){return new Promise(function(a){n.eventBus=t,n.legacyEventBus=e("body"),n.initialize(),a("module/dns.js")})},a}),define("module/container",["jquery","configurator/dpu-api","events"],function(jQuery,CONFIGURATOR_API,EVENTS){"use strict";var __={},exports={__:__};return __.toggleAlternativeOptions=function(){var e=jQuery(this),t=e.prev(".nm-options-list");return t.toggleClass("nm-options-list-collapsed"),!1},__.getSelectedIdString=function(e,t){var n="";return t&&jQuery.each(t,function(t,a){"idid"!==a&&e[a]&&e[a].status&&"11010"===e[a].status&&(n+=a)}),n},__.tilesExclusive=function(){jQuery(".nm-md-tiles-exclusive").each(function(){var items=CONFIGURATOR_API.getItems()||{},$element=jQuery(this),selectedIdString,optionsIncluded=$element.attr("data-configurator-id-included");optionsIncluded=eval(optionsIncluded),selectedIdString=__.getSelectedIdString(items,optionsIncluded),$element.attr("data-tile-selected",selectedIdString)})},__.hasSelectedItem=function(e,t){for(var n,e=CONFIGURATOR_API.getItems(),a=0,i=t.length;i>a;a++)if(n=e[t[a]]||{},n.status&&("11010"===n.status||"10011"===n.status))return!0},__.summary=function(){var e=jQuery(".summary");if(e.length){var t=CONFIGURATOR_API.getConfiguration(),n=jQuery(".nm-basket-wrap, .nm-md-summary-total");n.find(".nm-j-configurator-text-price").text(t.price),n.find(".nm-j-configurator-text-rate").text(t.rate)}},__.isVisible=function(e,t){var n=!1;return t&&jQuery.each(t,function(t,a){if(n===!1){if("idid"===a)return!0;if(!e[a]||!e[a].status)return n=!0,!1;if("00000"!==e[a].status&&"10000"!==e[a].status&&"10010"!==e[a].status)return n=!0,!1}}),n},__.isVisibleSummary=function(e,t){var n=!1;return t&&jQuery.each(t,function(t,a){return!n&&e[a]&&e[a].status&&"11000"!==e[a].status&&"00000"!==e[a].status&&"11100"!==e[a].status&&"10000"!==e[a].status&&"10010"!==e[a].status?(n=!0,!1):void 0}),n},__.containsSelectedStandardEquipment=function(e,t){var n=!1;return t&&jQuery.each(t,function(t,a){return!n&&e[a]&&e[a].status&&"10011"===e[a].status?(n=!0,!1):void 0}),n},__.handler=function(){if(CONFIGURATOR_API.isInitialized()){var items=CONFIGURATOR_API.getItems()||{};jQuery(".nm-configurator-container").each(function(){var $element=jQuery(this),optionsIncluded=eval($element.attr("data-configurator-id-included"));__.isVisible(items,optionsIncluded)===!1?($element.addClass("nm-j-configurator-container-hide"),$element.removeClass("nm-j-configurator-container-show")):($element.removeClass("nm-j-configurator-container-hide"),$element.addClass("nm-j-configurator-container-show"))}),jQuery(".nm-configurator-container.nm-summary-list-container").each(function(){var $element=jQuery(this),optionsIncluded=eval($element.attr("data-configurator-id-included"));__.isVisibleSummary(items,optionsIncluded)===!1?($element.addClass("nm-j-configurator-container-hide"),$element.removeClass("nm-j-configurator-container-show")):($element.removeClass("nm-j-configurator-container-hide"),$element.addClass("nm-j-configurator-container-show"))}),jQuery(".j-selected-standard-equipment-container").each(function(){var $element=jQuery(this),optionsIncluded=eval($element.attr("data-configurator-id-included"));__.containsSelectedStandardEquipment(items,optionsIncluded)===!1?($element.addClass("nm-j-configurator-container-hide"),$element.removeClass("nm-j-configurator-container-show")):($element.removeClass("nm-j-configurator-container-hide"),$element.addClass("nm-j-configurator-container-show"))}),jQuery(".nm-md-options-list").each(function(){var $element=jQuery(this),$container=$element.find(".nm-configurator-container");if(0===$container.length)return!0;var optionsIncluded=eval($element.find(".nm-configurator-container").first().attr("data-configurator-id-included")),isCollapsable=$container.find(".nm-j-options-list-alternative").length>0;__.hasSelectedItem(items,optionsIncluded)&&isCollapsable?$element.find(".nm-options-list").first().addClass("nm-options-list-collapsed"):$element.find(".nm-options-list").first().removeClass("nm-options-list-collapsed")})}},__.addEvents=function(){__.eventBus.on(EVENTS.CONFIG_UPDATE,__.handler),__.eventBus.on(EVENTS.PAGE_LOADED,__.handler),__.eventBus.on(EVENTS.LAYER_LOADED,__.handler),__.eventBus.on(EVENTS.CONFIG_UPDATE,__.tilesExclusive),__.eventBus.on(EVENTS.PAGE_LOADED,__.tilesExclusive),__.eventBus.on(EVENTS.LAYER_LOADED,__.tilesExclusive),__.eventBus.on(EVENTS.LAYER_LOADED,__.summary),__.legacyEventBus.on("click.toggle-alternatives",".nm-j-options-list-alternative",__.toggleAlternativeOptions)},__.dispose=function(){__.eventBus.off(EVENTS.CONFIG_UPDATE,__.handler),__.eventBus.off(EVENTS.PAGE_LOADED,__.handler),__.eventBus.off(EVENTS.LAYER_LOADED,__.handler),__.eventBus.off(EVENTS.CONFIG_UPDATE,__.tilesExclusive),__.eventBus.off(EVENTS.PAGE_LOADED,__.tilesExclusive),__.eventBus.off(EVENTS.LAYER_LOADED,__.tilesExclusive),__.eventBus.off(EVENTS.LAYER_LOADED,__.summary),__.legacyEventBus.off("click.toggle-alternatives",__.toggleAlternativeOptions)},__.initialize=function(e){__.legacyEventBus=e,__.addEvents()},exports.initializePromise=function(e){return new Promise(function(t){__.eventBus=e,__.initialize(jQuery("body")),t("module/container.js")})},exports}),define("module/stage",["jquery","events"],function(e,t){"use strict";var n={},a={__:n};return n.stage=null,n.isAnimating=!1,n.domElement=null,n.lastRotationMillis=-1,n.autorotateDisableWidth=1023,n.maxViewIndex=-1,n.viewNamesArr=null,n.currentView=null,n.selectedCategory=null,n.direction=null,n.oDefaults={sAttrAutorotation:"data-autorotation",sAttrViewName:"data-view-name",sAttrStartDate:"data-startdate",sAttrEndDate:"data-enddate",sAttrViewCategory:"data-view-category",sClassHidden:"nm-hidden",sClassHomepage:"nm-homepage",sClassMobileActive:"nm-mobile-ok",sClassBrowseForward:"nm-nextarrow",sClassSelectedMenu:"nm-bs-selected",sClassHasMobileImg:"nm-stage-has-mobileimg",sClassExtendedCTA:"nm-homepage-stage-extend-cta",sSelectorStage:"#nm-id-stage",sSelectorHomepage:".nm-homepage",sSelectorInitialContentArea:".nm-wrapper-content .nm-area-content:first-child",sSelectorNext:"ul.nm-stage-browse>li.nm-nextarrow",sSelectorPrevious:"ul.nm-stage-browse>li.nm-backarrow",sSelectorDot:"ul.nm-dots-navi .nm-dot",sSelectorDotNavi:"ul.nm-dots-navi",sSelectorStageItemScript:".nm-stage-item script",sSelectorHomepageStageContainer:".nm-homepage .nm-stage-container",sSelectorStageContainer:".nm-stage-container",sSelectorMenuItems:"li.nm-stage-item",sSelectorBsRemote:".nm-bs-remote",sSelectorStageContent:".nm-stage",sSelectorRenderImage:"img.nm-j-configurator-renderimage",sSelectorMenuIcons:"ul[class^=nm-stage-list-]",sSelectorStageContentWrap:".nm-homepage-stage-teaser-content-wrap",sSelectorStageMobileImage:".nm-stage-mobile-image",sSelectorCTALink:".nm-homepage-stage-teaser-content a",sDotTemplate:"<li><a class='nm-dot' href='#' data-tracking-link='{&quot;eVar39&quot;:&quot;teaser_spot&quot;, &quot;prop39&quot;:&quot;teaser_spot&quot;, &quot;prop46&quot;:&quot;:teaser spot&quot;, &quot;prop66&quot;:&quot;stage_navigation&quot;}'></a></li>"},n.initialize=function(){n.addEvents();var t=e(n.oDefaults.sSelectorHomepage);0===t.length&&(t=e(n.oDefaults.sSelectorInitialContentArea)),0!==t.length?n.initializeOnDomElement(t):console.log("stage.js - no matching dom element")},n.initializeOnDomElement=function(e){n.stage=e.find(n.oDefaults.sSelectorStage),n.addStageEvents(n.stage),n.domElement=e,n.filterUnpublishedTeasers(e),n.initializeAutorotationOfStage(n.stage),n.resetStage(e,n.stage)},n.initializeAutorotationOfStage=function(t){n.lastRotationMillis=(new Date).getTime();var i=t.find("["+n.oDefaults.sAttrAutorotation+"]");if(i.length>0){var r=i.attr(n.oDefaults.sAttrAutorotation);if("undefined"!=typeof r){var o=1e3*Math.round(r);o>0&&window.setInterval(function(){if(!(e(window).width()<=n.autorotateDisableWidth)){var t=(new Date).getTime();if(t>n.lastRotationMillis+o){var i=n.showNextView();a.setCurrentView(i)}}},o)}}},n.filterUnpublishedTeasers=function(t){t.find(n.oDefaults.sSelectorStageItemScript).each(function(){var a=t.find(this).html(),i=e("<div/>").html(a).find(":first-child");if(i.length>0){var r=i.attr(n.oDefaults.sAttrStartDate),o=i.attr(n.oDefaults.sAttrEndDate);if("undefined"==typeof r||"undefined"==typeof o)return;var s=Math.round(r),l=Math.round(o),c=(new Date).getTime();if(0===s&&0===l)return;if(s>0&&l>0){if(c>=s&&l>c)return}else if(s>0){if(c>=s)return}else if(l>0&&l>c)return}var u=e(this).parent(),d=u.attr(n.oDefaults.sAttrViewName);$("["+n.oDefaults.sAttrViewName+"='"+d+"']").remove()});var a=t.find(n.oDefaults.sSelectorStageContainer);if(a.children().length<1){var i=t.find(n.oDefaults.sSelectorStageItemScript).first().html();a.html(i)}t.find(n.oDefaults.sSelectorHomepageStageContainer).css("visibility","visible")},a.setCurrentView=function(t){var a=n.currentView.attr(n.oDefaults.sAttrViewName);if(a===t)return!1;n.lastRotationMillis=(new Date).getTime(),n.isAnimating=!0;var i=parseInt(n.getCurrentViewIndex(a),10),r=parseInt(n.getCurrentViewIndex(t),10);n.direction="left",(i>r&&(i!==n.maxViewIndex||0!==r)||0===i&&r===n.maxViewIndex)&&(n.direction="right");var o=n.domElement.find(n.oDefaults.sSelectorStageContainer).first();o.find(".nm-j-configurator-renderimage").removeClass("nm-j-configurator-renderimage"),o.addClass("nm-stage-animation-start-"+n.direction);var s=n.getTemplateByName(t),l=e(s);n.currentView=l.appendTo(n.domElement.find(n.oDefaults.sSelectorStageContainer)),n.selectedCategory=n.currentView.attr(n.oDefaults.sAttrViewCategory),n.updateSelectionStatus(n.domElement,n.stage);var c=o.width(),u="-"+.5*c+"px";n.updateRenderImageDataViewAttr(n.domElement),"left"===n.direction?o.animate({"margin-left":u},600,"easeOutSine",n.animationEnded):o.css("margin-left",u).animate({"margin-left":0},600,"easeOutSine",n.animationEnded)},a.jumpToFirstRenderView=function(){var e=n.getFirstRenderImageViewInList();e&&a.setCurrentView(e)},n.getFirstRenderImageViewInList=function(){for(var t,a=!1,i=n.viewNamesArr,r=i.length,o=0;r>o;o++)if(t=e(n.getTemplateByName(i[o])).find(n.oDefaults.sSelectorRenderImage),t.length)return a=i[o];return a},n.animationEnded=function(){$(this).removeClass(["nm-stage-animation-start-",n.direction].join("")).removeAttr("style").find(".nm-stage").first().remove(),n.isAnimating=!1,n.eventBus.emit(t.STAGE_RENDERIMAGE_UPDATED)},n.buildViewIndexArr=function(e){var t=[];return e.find(n.oDefaults.sSelectorMenuItems).each(function(){t.push(this.getAttribute(n.oDefaults.sAttrViewName))}),t},n.getCurrentViewIndex=function(t){var a,i=t||n.currentView.attr(n.oDefaults.sAttrViewName);return a=e.inArray(i,n.viewNamesArr)},n.buildOrUpdateDotNavi=function(t){var a=t.find(n.oDefaults.sSelectorDotNavi),i=t.find(n.oDefaults.sSelectorBsRemote),r=n.oDefaults.sDotTemplate;if(a.children().length===n.maxViewIndex+1)e(n.oDefaults.sSelectorDot).removeClass(n.oDefaults.sClassSelectedMenu);else{a.empty();for(var o="",s=0;s<=n.maxViewIndex;s++)o+=r;a.append(e(o))}var l=n.getCurrentViewIndex(),c=e(a.find(".nm-dot").get(l));n.currentView.hasClass(n.oDefaults.sClassHasMobileImg)?e("body").hasClass(n.oDefaults.sClassHomepage)?t.hasClass(n.oDefaults.sClassMobileActive)?(a.addClass(n.oDefaults.sClassHasMobileImg),i.addClass(n.oDefaults.sClassHasMobileImg)):(a.removeClass(n.oDefaults.sClassHasMobileImg),i.removeClass(n.oDefaults.sClassHasMobileImg)):(a.addClass(n.oDefaults.sClassHasMobileImg),i.addClass(n.oDefaults.sClassHasMobileImg)):(a.removeClass(n.oDefaults.sClassHasMobileImg),i.removeClass(n.oDefaults.sClassHasMobileImg)),c.addClass(n.oDefaults.sClassSelectedMenu)},n.getViewAtIndex=function(e){var t=n.domElement.find(n.oDefaults.sSelectorMenuItems).get(e);return n.domElement.find(t).attr(n.oDefaults.sAttrViewName)},n.getTemplateByName=function(t){var n=e(["#",t,"-tpl"].join("")).html()||"";return n.trim()},n.handleMenuClick=function(t){if(t.preventDefault(),!n.isAnimating){var i,r;i=e(t.currentTarget),r=i.find("li").first().attr(n.oDefaults.sAttrViewName),a.setCurrentView(r)}},n.handleDotClick=function(e){if(e.preventDefault(),!n.isAnimating){var t=$(this).parent().index(),i=n.getViewAtIndex(t);a.setCurrentView(i)}},n.handlePrevNextClick=function(t){if(t.preventDefault(),!n.isAnimating){var i,r;i=e(t.currentTarget),r=i.attr("class")===n.oDefaults.sClassBrowseForward?n.showNextView():n.showPreviousView(),a.setCurrentView(r)}},n.getNextIndex=function(e){var t=e||n.getCurrentViewIndex(),a=n.maxViewIndex;return t=++t%(a+1)},n.getPreviousIndex=function(e){var t=e||n.getCurrentViewIndex(),a=n.maxViewIndex;return t--,0>t&&(t=a),t},n.showNextView=function(){return n.getViewAtIndex(n.getNextIndex())},n.showPreviousView=function(){return n.getViewAtIndex(n.getPreviousIndex())},n.checkForExtendedCTA=function(){n.currentView.hasClass(n.oDefaults.sClassExtendedCTA)?(n.currentView.find(n.oDefaults.sSelectorStageContentWrap).on("click",n.extendedCTAClickHandler),n.currentView.find(n.oDefaults.sSelectorStageMobileImage).on("click",n.extendedCTAClickHandler)):(n.currentView.find(n.oDefaults.sSelectorStageContentWrap).off("click",n.extendedCTAClickHandler),n.currentView.find(n.oDefaults.sSelectorStageMobileImage).off("click",n.extendedCTAClickHandler))},n.extendedCTAClickHandler=function(e){var t=$(e.target),a=t.find(n.oDefaults.sSelectorCTALink);if(a&&a.length>0){var i=a.attr("href");t=a.attr("target"),i&&t?window.open(i,t):location.href=i}},n.updateSelectionStatus=function(e,t){n.checkForExtendedCTA(),n.buildOrUpdateDotNavi(t);var a=e.find(n.oDefaults.sSelectorMenuIcons);a.removeClass(n.oDefaults.sClassSelectedMenu),a.filter([".nm-stage-list-",n.selectedCategory].join("")).addClass(n.oDefaults.sClassSelectedMenu)},n.updateRenderImageDataViewAttr=function(a){var i,r;r=n.currentView.attr(n.oDefaults.sAttrViewName),n.domElement.find(n.oDefaults.sSelectorRenderImage,a).each(function(){i=e(this),"fixed"!==i.attr("data-renderimage-context")&&i.attr({"data-renderimage-view":r})}),n.eventBus.emit(t.UPDATE_VIEW_STATE,{currentView:r,domElement:a})},n.handlePageLoaded=function(e){n.initializeOnDomElement(e.domElement)},n.resetStage=function(e,t){n.maxViewIndex=e.find(n.oDefaults.sSelectorMenuItems).length-1;var a=t.find(n.oDefaults.sSelectorDotNavi),i=e.find(n.oDefaults.sSelectorBsRemote);0===n.maxViewIndex?(a.addClass(n.oDefaults.sClassHidden),i.addClass(n.oDefaults.sClassHidden)):(a.removeClass(n.oDefaults.sClassHidden),i.removeClass(n.oDefaults.sClassHidden)),n.viewNamesArr=n.buildViewIndexArr(e),n.isAnimating=!1,n.currentView=e.find([n.oDefaults.sSelectorStageContainer,">div",n.oDefaults.sSelectorStageContent].join("")).first(),n.selectedCategory=n.currentView.attr(n.oDefaults.sAttrViewCategory),n.updateSelectionStatus(e,t),n.updateRenderImageDataViewAttr(e.find(".nm-basket-image"))},n.addEvents=function(){n.eventBus.on(t.PAGE_LOADED,n.handlePageLoaded)},n.addStageEvents=function(t){t.on("click.stage.menuitem",n.oDefaults.sSelectorMenuIcons,n.handleMenuClick),t.on("click.stage.remote",n.oDefaults.sSelectorNext,n.handlePrevNextClick),t.on("click.stage.remote",n.oDefaults.sSelectorPrevious,n.handlePrevNextClick),t.on("click.stage.dot touchend.stage.dots",n.oDefaults.sSelectorDot,n.handleDotClick),t.on("click.temp-next",'[href*="#next"]',function(t){t.preventDefault(),console.info("clicked next"),e(".nm-homepage li.nm-nextarrow").trigger("click")})},a.dispose=function(){n.eventBus.off(t.PAGE_LOADED,n.handlePageLoaded)},a.initializePromise=function(e){return new Promise(function(t){n.eventBus=e,n.initialize(),t("module/stage.js")})},a}),define("utils/polling",[],function(){"use strict";var e,t;return t={},e={__:t},t.defaultIntervalTime=50,t.run=function(e,t,n,a,i){var r,o,s;o=0,s=e(),s?a(s):r=setInterval(function(){s=e(),s?(clearInterval(r),a(s)):o>t&&(clearInterval(r),i(new Error)),o+=n},n)},e.wait=function(e,n,a){return void 0===a&&(a=t.defaultIntervalTime),new Promise(function(i,r){t.run(e,n,a,i,r)})},e}),define("module/pattern",["jquery","events","configurator/dpu-api","utils/polling"],function(e,t,n,a){"use strict";var i={},r={__:i},o="",s="",l="";return i.setGroupPrice=function(){var t=/[,]/g;e(".js-configurator-group").each(function(a){var i,r=e(this),c=r.closest(".nm-pattern-block, .nm-pattern-block-dynamic, .nm-tile-block"),u=c.find(".nm-j-configurator-item").not(".nm-j-configurator-status_00000"),d=Number.MAX_VALUE,m=!0;u.each(function(a){var r,o,c;r=n.getItem(e(this).attr("data-configurator-id")),o=r&&r.price?r.price:"",c=o.replace(s,""),c=c.replace(t,"."),c=parseFloat(c),isNaN(c)&&(c=0),c=c.toFixed(2),1*c===0&&(i=l),1*d>1*c&&(i=o,d=c),m&&d!==c&&(m=!1)}),m||(i=o+" "+i),r.find(".nm-price").text(i)})},i.setSelectedGroup=function(){var t=e(".nm-pattern-list-dynamic");t.each(function(){var t=e(this),n=t.find("li.nm-j-configurator-status_11010, li.nm-j-configurator-status_10011").length;t.removeClass("nm-pattern-selected"),n&&t.addClass("nm-pattern-selected")})},i.handleUpdates=function(){a.wait(function(){return n.isInitialized()||!nemo.configurator.api.getCarline()},5e3,250).then(function(){i.setSelectedGroup(),i.setGroupPrice()})},i.subscribe=function(){i.eventBus.on(t.CONFIG_UPDATE,i.handleUpdates),i.eventBus.on(t.PAGE_LOADED,i.handleUpdates),i.eventBus.on(t.LAYER_LOADED,i.handleUpdates)},i.initialize=function(){o=window.i18n.from,l=window.i18n["standard-group-price"],s=0===SETUPS.get("commaseparator.scope")?/[^0-9,]/g:/[^0-9.]/g,i.subscribe()},r.initializePromise=function(e){return new Promise(function(t){i.eventBus=e,i.initialize(),t("module/pattern.js")})},r}),define("module/scroll-sticky-elements",["jquery","lib","configurator/dpu-api","core/scroll","events"],function(e,t,n,a,i){"use strict";var r,o,s,l,c,u={},d={__:u},m=!1,g=!1;return u.updateBasketImage=function(e){var t,n={exclusive:"exterior",extcolors:"exterior",upholstery:"interior",roofcolors:"exterior_front",lights:"closeup_lights",seats:"interior","steering-wheels":"dashboard",wheels:"closeup_wheels"},r=jQuery(e.element);if(e.where===a.WHERE.ABOVE){for(t in e.elements)if(e.elements.hasOwnProperty(t)&&e.elements[t]===e.element&&e.elements[t+1]){r=jQuery(e.elements[t+1]);break}}else if(e.where===a.WHERE.BELOW)for(t in e.elements)if(e.elements.hasOwnProperty(t)&&e.elements[t]===e.element&&e.elements[t-1]){r=jQuery(e.elements[t-1]);break}c&&n[r.data("render-view")]&&(c.attr("data-renderimage-view",n[r.data("render-view")]),u.eventBus.emit(i.UPDATE_VIEW_STATE,{currentView:n[r.data("render-view")],domElement:l}))},u.setBasketBottomCheckPosition=function(){jQuery(".nm-footer-basket-scroll-check").css({bottom:l.height()+25+100+"px"})},u.fixBasketTop=function(){"undefined"!=typeof o&&(o.addClass("nm-basket-fixed"),r.addClass("nm-basket-overlay-fixed"),s.addClass("nm-basket-fixed-top"),l.css({top:0}),m=!0)},u.unfixBasketTop=function(e){"undefined"!=typeof o&&(e=!!e,o.removeClass("nm-basket-fixed"),r.removeClass("nm-basket-overlay-fixed"),s.removeClass("nm-basket-fixed-top"),l.css({top:0}),e||(m=!1))},u.fixBasketBottom=function(){"undefined"!=typeof s&&(s.addClass("nm-basket-fixed-bottom"),l.css({top:jQuery(".nm-footer").offset().top-(l.height()+25+jQuery(".nm-basket-overlay-wrap").offset().top)}),g=!0)},u.keepfixBasketBottom=function(){"undefined"!=typeof s&&s.hasClass("nm-basket-fixed-bottom")&&u.fixBasketBottom()},u.unfixBasketBottom=function(){"undefined"!=typeof s&&(s.removeClass("nm-basket-fixed-bottom"),g=!1)},u.handleNaviStateChanged=function(e){e.where===a.WHERE.ABOVE?(jQuery("body").addClass("nm-nav-fixed"),u.fixBasketTop()):(jQuery("body").removeClass("nm-nav-fixed"),u.unfixBasketTop()),"undefined"!=typeof l&&setTimeout(u.setBasketBottomCheckPosition,500)},u.setVariables=function(e){n.isConfigurable()&&(r=e.find(".nm-basket-overlay"),o=e.find(".nm-basket-superwrap"),s=e.find(".nm-basket-wrap"),l=e.find(".nm-basket"),c=e.find(".nm-basket-image>.nm-j-configurator-renderimage"))},u.handleBasketStateChanged=function(e){var t=0===jQuery(".nm-state-is-responsive").length;jQuery(window).height()<jQuery(".nm-basket").height()+40||t&&jQuery(window).width()<960?(u.unfixBasketTop(),u.unfixBasketBottom()):"basket-bottom-changed"===e.eventName?e.where===a.WHERE.ABOVE?(u.unfixBasketTop(!0),u.fixBasketBottom()):(u.unfixBasketBottom(),m&&u.fixBasketTop()):e.where===a.WHERE.ABOVE?u.fixBasketTop():u.unfixBasketTop()},u.addEvents=function(e){u.setVariables(e),jQuery(window).on("resize",u.keepfixBasketBottom)},u.initialize=function(){u.eventBus.on(i.PAGE_LOADED,function(e){u.addEvents(e.domElement)}),u.addEvents(jQuery(".nm-wrapper-content .nm-area-content:first-child")),jQuery("body").addClass("nm-not-sticky"),a.register(".nm-navigation-scroll-check",{eventName:"navigation-changed"},u.handleNaviStateChanged),n.isConfigurable()&&(u.setBasketBottomCheckPosition(),a.register(".nm-basket-overlay-wrap",{eventName:"basket-top-changed"},u.handleBasketStateChanged),a.register(".nm-footer-basket-scroll-check",{eventName:"basket-bottom-changed"},u.handleBasketStateChanged))},d.initializePromise=function(e){return new Promise(function(t){u.eventBus=e,u.initialize(),t("module/scroll-sticky-elements.js")})},d}),define("module/compare",["jquery","doT","router","events"],function(e,t,n,a){"use strict";var i={},r={__:i},o=[],s={sSelectorOpenFormButton:".nm-change-engine",sSelectorSubmitForm:"form.nm-compare-search",sSelectorSelect:"form.nm-compare-search select",sSelectorOptions:"form.nm-compare-search option",sSelectorSearchWrapper:".nm-compare-search-wrapper"};return i.filterItems=function(t,n){var a,i,r,l,c,u,d,m,g,f=e(s.sSelectorSelect,n),p=f.length,v=[],h=function(){return c=e(this),c.data(m)===g},y=t||0;for(f.each(function(t){t>y&&(l=e(this),u=l.find("option:selected").index("option"),l.empty(),l.data("allOptions").each(function(){l.append(e(this))}),l.find("option").eq(u).attr("selected","selected"))}),u=y;p>u;u++)for(l=e(f[u]),m=l.attr("data-compare-type"),v.push(m),i=l.find("option:selected"),g=i.val(),d=u+1;p>d;d++)a=e(f[d]).find("option"),a.attr("disabled","disabled").addClass("nm-hidden"),r=a.filter(h).removeAttr("disabled").removeClass("nm-hidden"),a.filter(".nm-hidden").remove(),i=r.filter(":selected"),0===i.length&&(a.removeAttr("selected"),r.first().attr("selected",!0));0===y&&v.length>0&&(o=v)},i.filterInvisible=function(t){return t.filter(function(){return"hidden"!==e(this).find("form:visible").css("visibility")})},r.initForm=function(t){var n,a=t||e(s.sSelectorSearchWrapper).has("form:visible");if(a=i.filterInvisible(a),e(s.sSelectorSelect,a).each(function(){e(this).data("allOptions")||e(this).data("allOptions",e(this).find("option"))}),n=a.length,n>0)for(;n--;)i.filterItems(0,e(a.get(n)))},r.showForm=function(t){var n=e(this),a=n.closest(s.sSelectorSearchWrapper);t.preventDefault(),a.toggleClass("nm-compare-search-show"),r.initForm(a.has("form:visible"))},i.handleLayerLoaded=function(){r.initForm()},r.handleSelectionChanges=function(t){var n=e(t.target),a=n.attr("data-compare-type"),r=e.inArray(a,o),l=n.closest(s.sSelectorSearchWrapper).has("form:visible");0>r&&(r=0),"engine"!==a&&i.filterItems(r,l)},r.getSelectedMotorCodes=function(){var t=[],n=e([s.sSelectorSelect,'[data-compare-type="engine"]'].join("")).find("option:selected");return n.each(function(){t.push(this.value)}),t},r.submitForm=function(a){var i,o,l,c=r.getSelectedMotorCodes().join();a.preventDefault(),o=e(s.sSelectorSubmitForm).attr("data-link-pattern"),o&&(l=t.template(o),i=l({motorcodes:c}),n.open("layer",i))},i.addEvents=function(){i.legacyEventBus.on("click.nemo.compare",s.sSelectorOpenFormButton,r.showForm),i.legacyEventBus.on("submit",s.sSelectorSubmitForm,r.submitForm),i.legacyEventBus.on("change",s.sSelectorSelect,r.handleSelectionChanges),i.eventBus.on(a.LAYER_LOADED,i.handleLayerLoaded)},r.dispose=function(){i.legacyEventBus.off("click.nemo.compare",s.sSelectorOpenFormButton,r.showForm),i.legacyEventBus.off("submit",s.sSelectorSubmitForm,r.submitForm),i.legacyEventBus.off("change",s.sSelectorSelect,r.handleSelectionChanges),i.eventBus.off(a.LAYER_LOADED,i.handleLayerLoaded)},r.initialize=function(e){i.legacyEventBus=e,i.addEvents()},r.initializePromise=function(t){return new Promise(function(n){i.eventBus=t,r.initialize(e("body")),n("module/compare.js")})},r}),define("module/fullscreen",["jquery","events","doT"],function(e,t,n){"use strict";var a={},i={__:a};return a.open=function(t){var n,i,r,o;t.preventDefault(),n=e(this),i=n.attr("href"),r=e("body"),o=a.templateFunction({src:i
}),r.append(o)},a.close=function(t){try{t&&t.preventDefault&&t.preventDefault()}catch(n){console.warn(n)}e(".nm-layer-full").hide().remove()},a.addEvents=function(){a.legacyEventBus.on("click.fullscreen",".nm-j-fullscreen-open",a.open),a.legacyEventBus.on("click.fullscreen",".nm-fullscreen-close",a.close),a.eventBus.on(t.HASH_CHANGE,a.close)},a.initialize=function(){var t=e("#nm-configuration-fullscreen-tpl").html()||"";t=t.trim(),a.templateFunction=n.template(t),a.addEvents()},i.initializePromise=function(t){return new Promise(function(n){a.eventBus=t,a.legacyEventBus=e("body"),a.initialize(),n("module/bicolor.js")})},i}),define("module/audicode",["jquery","configurator/ajax","configurator/dpu-api","events"],function(e,t,n,a,i){"use strict";var r={},o={__:r};return r.audicode=null,r.eventBus=null,r.addEvents=function(){r.eventBus.on(a.CONFIG_UPDATE,r.deleteAudicode),r.eventBus.on(a.LAYER_LOADED,r.onLayerLoaded),r.legacyEventBus.on("click.nemo.audicode",".nm-j-audicode-link",r.clickAudicodeLink)},r.removeEvents=function(){r.eventBus.off(a.CONFIG_UPDATE,r.deleteAudicode),r.eventBus.off(a.LAYER_LOADED,r.onLayerLoaded),r.legacyEventBus.off("click.nemo.audicode",".nm-j-audicode-link",r.clickAudicodeLink)},r.deleteAudicode=function(){r.audicode=null,r.eventBus.emit(a.AUDICODE_DELETED)},r.loadAudiCodeRequest=function(e){var a=e||n.getPrString(),i=n.getDpuUrl()+"audicode";return t.getJSON(i,{context:n.getContext(),subsession:n.getSubsessionID(),ids:a})},o.loadAudiCode=function(){return new Promise(function(e,t){r.audicode&&r.prString&&r.prString===n.getPrString()&&e(r.audicode),r.audicode=null,r.loadAudiCodeRequest().then(function(i){i&&i.header&&200===i.header.statuscode&&i.audicode&&i.audicode.id?(r.audicode=i.audicode.id,r.prString=n.getPrString(),r.eventBus.emit(a.AUDICODE_SUCCESS),e(r.audicode)):(r.eventBus.emit(a.AUDICODE_FAILED),t(new TypeError("load AudiCode failed")))},function(e){console.error(e),r.eventBus.emit(a.AUDICODE_FAILED),t(new TypeError("load AudiCode error: "+e.message))})})},r.isAudicodeFieldOnPage=function(){var t=e(".nm-j-audicode").length;return 0!==t},r.onLayerLoaded=function(){r.isAudicodeFieldOnPage()&&o.loadAudiCode().then(r.onAudiCodeLoaded)["catch"](function(e){r.error(e)})},r.onAudiCodeLoaded=function(){r.audicode&&(e(".nm-j-audicode").html(r.audicode),e(".nm-j-audicode-show").removeClass("nm-j-audicode-failure").removeClass("nm-j-audicode-loading"))},r.clickAudicodeLink=function(t){var n,a=e(this);return null!==r.audicode?(n=a.attr("data-link-pattern"),n=n.replace("{{=audicode}}",r.audicode),a.attr("href",n),!0):(t.preventDefault(),o.loadAudiCode().then(function(){r.simulateAudiCodeLinkClick(a)})["catch"](function(e){r.error(e)}),!1)},r.simulateAudiCodeLinkClick=function(e){var t=!1;r.audicode?(t=e.attr("data-link-pattern"),t=t.replace("{{=audicode}}",r.audicode)):t=e.attr("href"),t&&(document.location.href=t)},r.error=function(){var t=e(".nm-j-audicode-show");t.addClass("nm-j-audicode-failure")},r.initialize=function(e){r.legacyEventBus=e,r.addEvents()},o.initializePromise=function(t){return new Promise(function(n){r.eventBus=t,r.initialize(e("body")),n("module/audicode.js")})},o}),define("module/scroll-sticky-progressbar",["jquery","core/scroll","events"],function(e,t,n){"use strict";var a={},i={__:a};return a.oDefaults={progressNavigationLinks:"nav.nm-md-progress-navigation a.nm-progress-navigation-scroll",progressNavigationBarTabs:"nav.nm-md-progress-navigation li",progressNavigationBarlabels:".nm-md-progress-navigation-wrap label",progressNavigationSections:".nm-md-dac-wrapper",progressNavigationBar:".nm-md-progress-navigation-wrap",mainSubNavigationBar:".nm-nav-wrap",progressNavigationBarCheckbox:"#nm-progress-navigation-switch"},a.addEvents=function(){a.legacyEventBus.on("click.navlinks",a.oDefaults.progressNavigationLinks,a.handleNavLinkClick)},a.removeEvents=function(){a.legacyEventBus.off("click.navlinks",a.oDefaults.progressNavigationLinks,a.handleNavLinkClick)},a.handleNavLinkClick=function(t){t.preventDefault();var n=e(this).attr("href"),i=e(n).offset(),r=e(a.oDefaults.progressNavigationBarCheckbox),o=e(a.oDefaults.progressNavigationBar),s=o.height(),l=e(a.oDefaults.mainSubNavigationBar).height(),c=i.top-s-l;o.hasClass("nm-sticky-progress")||(c-=s),r.prop("checked")&&r.prop("checked",!1),e("html,body").animate({scrollTop:c},450,"swing")},a.handleProgressbarState=function(n){var a=e(n.element).next(".nm-md-progress-navigation-wrap");n.where===t.WHERE.ABOVE?a.addClass("nm-sticky-progress"):a.removeClass("nm-sticky-progress")},a.setNavigationItemActive=function(t){e(a.oDefaults.progressNavigationBarlabels).removeClass("active"),e(a.oDefaults.progressNavigationBarTabs).removeClass("active");var n=e(t).attr("id"),i=e('.nm-md-progress-navigation a[href="#'+n+'"]'),r=n.replace("nm-","#nm-label-"),o=e(r);i.parent().addClass("active"),o.addClass("active")},a.handleProgressBarSetState=function(e){e.where===t.WHERE.IN?a.handleProgressBarSetActive(e):a.handleProgressBarSetInActive(e)},a.handleProgressBarSetActive=function(e){a.setNavigationItemActive(e.element)},a.handleProgressBarSetInActive=function(e){if(e.where===t.WHERE.BELOW&&e.was===t.WHERE.IN)for(var n in e.elements)if(e.elements.hasOwnProperty(n)&&e.elements[n]===e.element&&e.elements[n-1]){a.setNavigationItemActive(e.elements[n-1]);break}},a.initialize=function(){a.addEvents(),t.register(".nm-md-progress-navigation-scroll-check",{eventName:"anchornav-changed"},a.handleProgressbarState),t.register(".nm-md-dac-wrapper",{eventName:"progressBar-setState"},a.handleProgressBarSetState)},i.initializePromise=function(t){return new Promise(function(n){a.eventBus=t,a.legacyEventBus=e("body"),a.initialize(),n("module/scroll-sticky-progressbar.js")})},i}),define("text!templates/default-error.tpl",[],function(){return'<div class="nm-layer-wrapper nm-layer-wrapper-dialogue">\n	<div class="nm-layer nm-layer-dialogue nm-error-layer nm-layer-visible">\n		<div class="nm-layer-inner">\n			<div class="nm-layer-dialogue-content clearfix">\n				<h1 class="nm-el-hdl nm-el-hdl-02 nm-at-hdl-b">{{=it.errorHeadline}}</h1>\n				<p class="nm-error nm-error-layer-message nm-el-pg nm-el-pg-03 nm-at-pg-indicator" style="float:none;" data-defaultErrorMessage="{{=window.i18n[\'error-layer.unknown-error\']}}">{{=it.errorMessage}}</p>\n				<div class="nm-layer-btn-ok"><a class="nm-el-btn nm-el-btn-01 nm-j-ok-btn" href="#">{{=window.i18n[\'ok-label\']}}</a></div>\n			</div>\n		</div>\n	</div>\n</div>\n'}),define("module/error",["jquery","events","core/layer/api","core/template","text!templates/default-error.tpl","utils/dom"],function(e,t,n,a,i,r){"use strict";var o={},s={__:o};return o.onError=function(e){s.handleError(o.getErrorTexts(e))},o.getErrorTexts=function(e){var t={errorMessage:null,errorHeadline:null};return Array.isArray(e)?(t.errorHeadline=e[0],t.errorMessage=2===e.length&&e[1]?e[1]:null,t):"string"==typeof e?(t.errorMessage=e,t):e&&(e.message||e.headline)?(t.errorMessage=e.message,t.errorHeadline=e.headline,t):t},o.addEvents=function(){o.legacyEventBus.on("click",".nm-error-layer .nm-button-close",o.closeLayer),o.legacyEventBus.on("click",".nm-error-layer .nm-j-ok-btn",o.closeLayer)},o.removeEvents=function(){o.legacyEventBus.off("click",".nm-error-layer .nm-button-close",o.closeLayer),o.legacyEventBus.off("click",".nm-error-layer .nm-j-ok-btn",o.closeLayer)},o.openLayer=function(e,t,a){return new Promise(function(i,r){var s=n.open(e,t,a);s.then(function(e){o.layerInstance=e,o.addEvents(),i(o.layerInstance)},function(e){r(e)})})},o.closeLayer=function(e){var t,n;return n=o.getRedirectURL(),null!==n&&(window.location.href=n),o.cancelEvent(e),t=o.layerInstance.close(),t.then(function(){o.layerInstance=null,o.onLayerClose()},function(e){throw new TypeError("Error closing error Layer: "+e.message)})},o.getRedirectURL=function(){var e=r.getElement("body");return r.getDataAttribute(e,"redirect-url")},o.cancelEvent=function(e){e&&"function"==typeof e.preventDefault&&e.preventDefault()},o.onLayerClose=function(){o.removeEvents()},o.initialize=function(){o.eventBus.on(t.ERROR,o.onError)},s.handleError=function(e){var t,n,r,s,l;return new Promise(function(c,u){t="error-layer",n=i,l=e,l.errorHeadline=l.errorHeadline?l.errorHeadline:window.i18n["error-layer.headline"],o.renderedElement=$(a.render(n,l)),l.errorMessage||(r=o.renderedElement.find(".nm-error-layer-message"),l.errorMessage=o.renderedElement.find(".nm-error-layer-message").attr("data-defaultErrorMessage"),r.html(l.errorMessage)),s=o.renderedElement.filter(".nm-layer-wrapper")[0].outerHTML,o.openLayer(t,s,o.closeLayer).then(c,u)})},s.initializePromise=function(t){return new Promise(function(n){o.eventBus=t,o.legacyEventBus=e("body"),o.initialize(),n("module/error.js")})},s}),define("text!templates/default-notification.tpl",[],function(){return'<div class="nm-layer-wrapper nm-layer-wrapper-dialogue">\n	<div class="nm-layer nm-layer-dialogue nm-error-layer nm-notification-layer nm-layer-visible">\n		<div class="nm-button-close nm-image-replace"><span>X</span></div>\n		<div class="nm-layer-inner">\n			<div class="nm-layer-dialogue-content clearfix">\n				<h1 class="nm-el-hdl nm-el-hdl-02 nm-at-hdl-b">{{=window.i18n[\'notification-layer.headline\']}}</h1>\n				<p class="nm-notification nm-el-pg nm-el-pg-01" style="float:none;">{{=window.i18n[\'notification-layer.submessage\']}}</p>\n				<p class="nm-notification nm-el-pg nm-el-pg-03" style="float:none;">{{=window.i18n[\'notification-layer.message\']}}</p>\n				<div class="nm-layer-btn-ok"><a class="nm-el-btn nm-el-btn-01 nm-j-ok-btn" href="#">{{=window.i18n[\'notification-layer.button\']}}</a></div>\n			</div>\n		</div>\n	</div>\n</div>\n'}),define("module/notification",["jquery","events","core/layer/api","core/template","text!templates/default-notification.tpl"],function(e,t,n,a,i){"use strict";var r={},o={__:r};r.layerInstance=null;var s;return r.onNotification=function(){o.handleNotification()},r.addEvents=function(){r.legacyEventBus.on("click",".nm-notification-layer .nm-button-close",r.closeLayer),r.legacyEventBus.on("click",".nm-notification-layer .nm-j-ok-btn",r.closeLayer)},r.removeEvents=function(){r.legacyEventBus.off("click",".nm-notification-layer .nm-button-close",r.closeLayer),r.legacyEventBus.off("click",".nm-notification-layer .nm-j-ok-btn",r.closeLayer)},r.openLayer=function(e,t,a){return new Promise(function(i,o){var s=n.open(e,t,a);s.then(function(e){r.layerInstance=e,r.addEvents(),i(r.layerInstance)},function(e){o(e)})})},r.closeLayer=function(e){r.cancelEvent(e);var t=r.layerInstance.close();return t.then(function(){r.layerInstance=null,r.onLayerClose()},function(e){throw new TypeError("Error closing notification Layer: "+e.message)})},r.cancelEvent=function(e){e&&"function"==typeof e.preventDefault&&e.preventDefault()},r.onLayerClose=function(){r.removeEvents()},r.initialize=function(){r.eventBus.on(t.NOTIFICATION,r.onNotification);var e=SETUPS.get("notification.scope");if("1"===e){var n=window.i18n["notification-layer.urls"]||"",a=document.location.pathname,i=[];n=n.replace(" ","");try{i=n.split(",")}catch(o){console.error(o)}for(var s=0;s<i.length;s++){if(a.indexOf(-1!==i[s])){if(-1!==document.cookie.indexOf("nm-notification-"+encodeURIComponent(i[s]))){console.info("show no notification-layer because of cookie:",i[s],a,a.indexOf(i[s],document.cookie));break}console.info("show notification-layer:",i[s],a,a.indexOf(i[s])),document.cookie="nm-notification-"+encodeURIComponent(i[s])+"=1",r.onNotification();break}console.info("no notification-layer: ",a,i[s],a.indexOf(i[s]))}}},o.handleNotification=function(){return new Promise(function(e,t){var n="error-layer",o=i;s=$(a.render(o,{}));var l=s.filter(".nm-layer-wrapper")[0].outerHTML,c=r.openLayer(n,l,r.closeLayer);c.then(e,t)})},o.initializePromise=function(t){return new Promise(function(n){r.eventBus=t,r.legacyEventBus=e("body"),r.initialize(),n("module/notification.js")})},o}),define("module/scroll",["jquery","utils/dom"],function(e,t){"use strict";var n={},a={__:n};return n.oDefaults={layerWrapperSelector:".nm-layer-wrapper",scrollDataAttributeName:"data-scroll",layerSubstr:".nm-layer-opened .nm-layer "},n.handler=function(e){var a,i,r,o;e.preventDefault(),a=n.getScrollAnchorClassSelector(e.target.getAttribute(n.oDefaults.scrollDataAttributeName)),a&&t.isElement(a)&&(t.selectorIsInLayerContext(a)?(i=t.getElementsArray(n.oDefaults.layerSubstr+a),r=t.getElement(n.oDefaults.layerWrapperSelector)):(i=t.getElementsArray(a),r=t.getElement("body")),i=i.filter(function(e){return!t.isHidden(e)}),o=n.getElementsScrollPosition(i),n.scrollContent(r,o))},n.getScrollAnchorClassSelector=function(e){var t=e;return t="string"!=typeof t||t.length<2?null:"."+t},n.scrollContent=function(n,a){var i=n===document.body?"html, body":n;t.isElement(n)&&!isNaN(a)&&e(i).animate({scrollTop:a},400)},n.getElementsScrollPosition=function(e,t){var n=0;return e&&e[0]&&(n=parseInt(e[0].getBoundingClientRect().top,10),e.length>1&&"nm-top"===t&&(n=0)),n},n.addEvents=function(){t.getEventDelegate("body").on("click",".nm-j-scroll",n.handler)},a.initializePromise=function(e){return new Promise(function(t){n.eventBus=e,n.addEvents(),t("module/scroll.js")})},a}),define("module/infobox",["utils/dom"],function(e){"use strict";var t={},n={__:t};return t.oDefaults={sSelectorDelegateClick:".nm-infobox",sSelectorInfoboxContainer:".nm-infobox-container",sToggleClass:"nm-infobox-show"},t.clickedElement=null,t.handleOutsideClick=function(n){var a,i=e.getElement(t.oDefaults.sSelectorInfoboxContainer,t.clickedElement);i.classList.contains(t.oDefaults.sToggleClass)&&(a=e.isElementOutsideOfElementWithSelector(n.target,t.oDefaults.sSelectorDelegateClick),a&&(t.domEventDelegate.off("click",t.handleOutsideClick),t.closeInfoBox(i),t.clickedElement=null))},t.handleToggleClick=function(){var n=e.getElement(t.oDefaults.sSelectorInfoboxContainer,this);t.clickedElement=this,n.classList.contains(t.oDefaults.sToggleClass)?t.closeInfoBox(n):(n.classList.add(t.oDefaults.sToggleClass),t.registerOutsideClickEvent())},t.registerOutsideClickEvent=function(){t.domEventDelegate.on("click","*",t.handleOutsideClick)},t.closeInfoBox=function(e){e.classList.remove(t.oDefaults.sToggleClass)},t.addEvents=function(){t.domEventDelegate.on("click",t.oDefaults.sSelectorDelegateClick,t.handleToggleClick)},t.initialize=function(){t.init||t.addEvents(),t.init=!0},n.initializePromise=function(n){return new Promise(function(a){t.eventBus=n,t.domEventDelegate=e.getEventDelegate("body"),t.initialize(),a("module/infobox.js")})},n}),define("module/placeholder",["jquery","events","jquery-easing","jquery-placeholder"],function(e,t){"use strict";var n={},a={__:n};return n.handler=function(){e("input, textarea").placeholder()},n.addEvents=function(){n.eventBus.on(t.PAGE_LOADED,n.handler),n.eventBus.on(t.LAYER_LOADED,n.handler)},n.initialize=function(){n.addEvents(),n.handler()},a.initializePromise=function(e){return new Promise(function(t){n.eventBus=e,n.initialize(),t("module/placeholder.js")})},a}),define("form/field",["doT"],function(e){"use strict";var t={},n={},a={};return a.getTemplateFunc=function(){var t,i,r=this.templateKey||null,o=function(){return""};if(null===r)return o;if(t=a.getTemplateId(this,r),void 0===n[t]){if(i=jQuery("#"+t),!(i.length>0))return o;n[t]=e.template(i.html().trim())}return n[t]},a.sanitizeId=function(e){return void 0!==e?e.replace(/[^a-z0-9_-]/gi,""):""},a.getTemplateId=function(e,n){var i,r,o="nm-id-form-",s="-tpl",l=e.form||e,c=l.customTemplateIds||{};l.pageId;if(n=n.toLowerCase(),void 0!==e.id){if(i=a.sanitizeId(e.id),r=t[l.id+"-"+i],void 0!==r)return r;if(r=o+l.id+"-"+l.pageId+"-"+i+s,void 0!==c[r])return r;if(r=o+l.id+"-"+i+s,void 0!==c[r])return r}return"Form"===e.formConstructorName&&(r=t[l.id+"-"+l.pageId],void 0!==r)?r:(r=o+l.id+"-"+n+s,void 0!==t[l.id+"-"+n]?r:(r=o+l.id+"-"+l.pageId+"-"+n+s,void 0!==c[r]?r:(r=o+l.id+"-"+n+s,void 0!==c[r]?r:r=o+n+s)))},a.FormField=function(e,t){var n;for(n in e)e.hasOwnProperty(n)&&(this[n]=e[n]);return this.formConstructorName="FormField",this.domId=a.sanitizeId(this.id),void 0===this.name&&(this.name=this.id),this.form=t,this.templateKey=this.type,this.getString=this.getTemplateFunc(),this.registerChange(),this},a.FormField.prototype.getTemplateFunc=a.getTemplateFunc,a.FormField.prototype.registerChange=function(){var e,t,n=this,a=this.type.toLowerCase();"radio"===a?(e="#"+this.form.id,t="input[name="+this.domId+"]",jQuery(e).on("change",t,function(){var e=n.auto_submit?n.form.autoSubmit:n.form.changed;e.apply(n.form,[n.action])})):"select"===a?(e="#"+this.form.id,t="#"+this.domId,jQuery(e).on("change",t,function(){var e=n.auto_submit?n.form.autoSubmit:n.form.changed;e.apply(n.form,[n.action])})):"checkbox"===a?(e="#"+this.form.id,t="#"+this.domId,jQuery(e).on("change",t,function(){var e=n.auto_submit?n.form.autoSubmit:n.form.changed;e.apply(n.form,[n.action])})):(e="#"+this.form.id,t="#"+this.domId,jQuery(e).on("blur",t,function(){var e=n.auto_submit?n.form.autoSubmit:n.form.changed;e.apply(n.form,[n.action])}))},a.FormField.prototype.toString=function(){return this.getString(this)},a.FormField}),define("form/item",["jquery","doT","form/field"],function(e,t,n){"use strict";var a={},i={},r={};r.getTemplateFunc=function(){var n,a,o=this.templateKey||null,s=function(){return""};if(null===o)return s;if(n=r.getTemplateId(this,o),void 0===i[n]){if(a=e("#"+n),!(a.length>0))return s;i[n]=t.template(a.html().trim())}return i[n]},r.sanitizeId=function(e){return void 0!==e?e.replace(/[^a-z0-9_-]/gi,""):""},r.getTemplateId=function(e,t){var n,i,o="nm-id-form-",s="-tpl",l=e.form||e,c=l.customTemplateIds||{};l.pageId;if(t=t.toLowerCase(),void 0!==e.id){if(n=r.sanitizeId(e.id),i=a[l.id+"-"+n],void 0!==i)return i;if(i=o+l.id+"-"+l.pageId+"-"+n+s,void 0!==c[i])return i;if(i=o+l.id+"-"+n+s,void 0!==c[i])return i}return"Form"===e.formConstructorName&&(i=a[l.id+"-"+l.pageId],void 0!==i)?i:(i=o+l.id+"-"+t+s,void 0!==a[l.id+"-"+t]?i:(i=o+l.id+"-"+l.pageId+"-"+t+s,void 0!==c[i]?i:(i=o+l.id+"-"+t+s,void 0!==c[i]?i:i=o+t+s)))};var o=function(e,t){if(!e||!t)return!1;var n;for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return r.FormItem=function(e,t){return o(e,this),this.formConstructorName="FormItem",this.domId=r.sanitizeId(this.id),e&&"fields"in e?this.dataFields=e.fields:this.dataFields=[],this.form=t,this.templateKey="item",this.fields=[],this.namedFields={},this.getString=this.getTemplateFunc(),this.processFields(),this},r.FormItem.prototype.getTemplateFunc=r.getTemplateFunc,r.FormItem.prototype.processFields=function(){var e,t,a;if(void 0!==this.dataFields)for(1===this.dataFields.length&&void 0===this.dataFields[0].label&&(this.dataFields[0].label=this.name,delete this.name,this.info&&(this.dataFields[0].info=this.info,delete this.info)),e=0,t=this.dataFields.length;t>e;e++)a=new n(this.dataFields[e],this.form),this.fields.push(a),this.namedFields[a.id]=a},r.FormItem.prototype.toString=function(){return this.getString(this)},r.FormItem}),define("form/group",["jquery","doT","form/item"],function(e,t,n){"use strict";var a={},i={},r={};return r.getTemplateFunc=function(){var n,a,o=this.templateKey||null,s=function(){return""};if(null===o)return s;if(n=r.getTemplateId(this,o),void 0===i[n]){if(a=e("#"+n),!(a.length>0))return s;i[n]=t.template(a.html().trim())}return i[n]},r.sanitizeId=function(e){return void 0!==e?e.replace(/[^a-z0-9_-]/gi,""):""},r.getTemplateId=function(e,t){var n,i,o="nm-id-form-",s="-tpl",l=e.form||e,c=l.customTemplateIds||{};l.pageId;if(t=t.toLowerCase(),void 0!==e.id){if(n=r.sanitizeId(e.id),i=a[l.id+"-"+n],void 0!==i)return i;if(i=o+l.id+"-"+l.pageId+"-"+n+s,void 0!==c[i])return i;if(i=o+l.id+"-"+n+s,void 0!==c[i])return i}return"Form"===e.formConstructorName&&(i=a[l.id+"-"+l.pageId],void 0!==i)?i:(i=o+l.id+"-"+t+s,void 0!==a[l.id+"-"+t]?i:(i=o+l.id+"-"+l.pageId+"-"+t+s,void 0!==c[i]?i:(i=o+l.id+"-"+t+s,void 0!==c[i]?i:i=o+t+s)))},r.FormGroup=function(e,t){var n;for(n in e)e.hasOwnProperty(n)&&(this[n]=e[n]);return this.formConstructorName="FormGroup",this.form=t,this.domId=r.sanitizeId(this.id),this.templateKey="group",this.dataItems=e.items,this.items=[],this.namedItems={},this.processItems(),this.getString=this.getTemplateFunc(),this},r.FormGroup.prototype.getTemplateFunc=r.getTemplateFunc,r.FormGroup.prototype.processItems=function(){var e,t,a;if(this.dataItems)for(e=0,t=this.dataItems.length;t>e;e++)a=new n(this.dataItems[e],this.form),this.items.push(a),this.namedItems[a.id]=a},r.FormGroup.prototype.toString=function(){return this.getString(this)},r.FormGroup}),define("form/core.form",["jquery","doT","form/group","configurator/dpu-api","configurator/dpu-controller","events","configurator/ajax"],function(e,t,n,a,i,r,o){"use strict";var s,l={},c={},u={},d={},m={},g={},f={__:g};return g.initForm=function(e){var t,n;if(n=e.attr("id"),t=g.getUrl("start",n),void 0!==m[n])l[n]=new g.Form(m[n],d),l[n].el.appendTo(e);else{var a=o.getJSON(t);a.then(function(t){t=f.responseToObj(t),t===!1?g.displayStandardError(n):t.form?(l[n]=new g.Form(t,d),l[n].el.appendTo(e),t.header&&t.header.subsession&&i.setSubsessionID(t.header.subsession)):g.displayStandardError(n)},function(e){g.displayStandardError(n)})}},g.bindEnablers=function(){g.legacyEventBus.undelegate(".nm-form input[data-enables]","change").delegate(".nm-form input[data-enables]","change",function(t){var n,a,i,r,o,s;for(a=e(t.target),n=a.attr("data-enables").split(";"),r=n.length;r>-1;r--)n[r]=g.sanitizeId(n[r]);for(i=a.attr("data-active")||"off",i="off"===i?"on":"off",a.attr("data-active",i),r=n.length;r>-1;r--)n[r]&&(o=e("#nm-id-form-field-"+n[r]+" input"),s="off"===i?"disabled":!1,o.attr("disabled",s))})},g.getCustomTemplateIds=function(t){var n={};return e(t).each(function(){n[e(this).attr("id")]=!0}),n},g.blockForm=function(t){var n=e("#"+t.id),a=n.find(".nm-form-shader");a.height(n.height()+"px").show()},g.handleForm=function(t,n){var a={};t=f.responseToObj(t),t===!1?g.displayStandardError(n.id):t.form?(e("#"+n.id).off("blur, click, change"),e("#"+n.id).undelegate("button[data-button-action]","click"),l[n.id]=new g.Form(t,d),e("#"+t.form.id).html("").append(l[n.id].el)):t.success?(a.formHeadline=n.data.form.name,a.message=t.message,e("#"+n.id).html(n.getSuccessString(a)),e("#"+n.id).attr("data-form-is-finished",1),g.eventBus.emit(r.FORM_FINISHED,{id:n.id}),t.configuration&&i.handleExternalConfiguration(t,{startType:null}),delete l[n.id]):(g.displayStandardError(n.id),delete l[n.id]),e("#"+n.id).closest(".nm-layer-wrapper").length?e(".nm-layer-wrapper").scrollTop(0):e("body").scrollTop(0)},g.displayStandardError=function(t){var n=e("#"+t),a=n.find(".nm-form-shader"),i=n.find(".nm-form-standard-error");a.hide(),n.html(i.html())},g.getUrl=function(e,t){var n=a.getPrString(),i=a.getContext(),r=a.getSubsessionID(),o=!!a.getCarline(),l=[];return i&&l.push("context="+i),r&&l.push("subsession="+r),"tdrdealerreq"===t&&o&&n?l.push("ids="+encodeURIComponent(n)):"tdrdealerreq"!==t&&n&&l.push("ids="+encodeURIComponent(n)),l.push("action="+encodeURIComponent(e)),l.push("id="+encodeURIComponent(t)),s+"?"+l.join("&")},g.parseData=function(e){var t;try{t=JSON.parse(e)}catch(n){return!1}return t},g.getTemplateFunc=function(){var n,a,i=this.templateKey||null,r=function(){return""};if(null===i)return r;if(n=g.getTemplateId(this,i),void 0===u[n]){if(a=e("#"+n),!(a.length>0))return r;u[n]=t.template(a.html().trim())}return u[n]},g.sanitizeId=function(e){return void 0!==e?e.replace(/[^a-z0-9_-]/gi,""):""},g.getTemplateId=function(e,t){var n,a,i="nm-id-form-",r="-tpl",o=e.form||e,s=o.customTemplateIds||{};o.pageId;if(t=t.toLowerCase(),void 0!==e.id){if(n=g.sanitizeId(e.id),a=c[o.id+"-"+n],void 0!==a)return a;if(a=i+o.id+"-"+o.pageId+"-"+n+r,void 0!==s[a])return a;if(a=i+o.id+"-"+n+r,void 0!==s[a])return a}return"Form"===e.formConstructorName&&(a=c[o.id+"-"+o.pageId],void 0!==a)?a:(a=i+o.id+"-"+t+r,void 0!==c[o.id+"-"+t]?a:(a=i+o.id+"-"+o.pageId+"-"+t+r,void 0!==s[a]?a:(a=i+o.id+"-"+t+r,void 0!==s[a]?a:a=i+t+r)))},g.Form=function(e,t){return this.formConstructorName="Form",this.data=e,this.id=e.form?e.form.id:void 0,this.domId=g.sanitizeId(this.id),this.customTemplateIds=t||{},this.templateKey="form",this.groups=[],this.fields=[],this.pageId=this.getPageId(),this.processSteps=this.getProcessSteps(),this.processStepName=this.getStepHeadline(),this.processGroups(),this.getString=this.getTemplateFunc(),this.getSuccessString=this.getSuccessTemplateFunc(),this.load(),this},g.Form.prototype.getPageId=function(){var e;if(this.data&&this.data.pages)for(e=this.data.pages.length-1;e>-1;e--)if(this.data.pages[e].active===!0)return this.data.pages[e].id;return null},g.Form.prototype.getStepHeadline=function(){var e;if(this.data&&this.data.pages)for(e=this.data.pages.length-1;e>-1;e--)if(this.data.pages[e].active===!0)return this.data.pages[e].name;return null},g.Form.prototype.getProcessSteps=function(){var e;if(this.data&&this.data.pages)for(e=this.data.pages.length-1;e>-1;e--)if(this.data.pages[e].active===!0)return{step:e+1,maxSteps:this.data.pages.length};return null},g.Form.prototype.getSuccessTemplateFunc=function(){var n,a="nm-id-form-success-tpl",i=function(){return""};if(void 0===u[a]){if(n=e("#"+a),!(n.length>0))return i;u[a]=t.template(n.html())}return u[a]},g.Form.prototype.getTemplateFunc=g.getTemplateFunc,g.Form.prototype.processGroups=function(){var e,t,a;if(this.data.form&&this.data.form.groups)for(e=0,t=this.data.form.groups.length;t>e;e++)a=new n(this.data.form.groups[e],this),this.groups.push(a)},g.Form.prototype.load=function(){var t,n,a;a={formHeadline:this.data.form.name,pageDisclaimers:this.data.form.disclaimers,pageHeadline:this.data.form.headline,pageDescription:this.data.form.description,pageError:this.data.form.error,groups:this.groups,pages:this.data.pages,id:this.data.form.id,actions:this.data.form.actions},t=e("#"+this.data.form.id),n=t.attr("data-form-is-first-view"),void 0===n?t.attr("data-form-is-first-view",1):t.attr("data-form-is-first-view",0),"undefined"!=typeof this.data.form.footnote&&(a.footnote=this.data.form.footnote),this.processSteps&&(t.attr("data-form-process-step",this.processSteps.step),t.attr("data-form-process-max",this.processSteps.maxSteps)),this.processStepName&&t.attr("data-form-process-name",this.processStepName),this.el=e(this.getString(a));var i=this;window.setTimeout(function(){i.bindActions(),i.bindActionLinks(),i.preventSubmit(),g.eventBus.emit(r.FORM_LOADED,{id:i.id,form:i})},100)},g.Form.prototype.preventSubmit=function(){e("#"+this.id).undelegate("form","submit").delegate("form","submit",function(e){return e.preventDefault(),!1})},g.Form.prototype.bindActions=function(){var t=(this.data.form.actions||[],this);e("#"+this.id).undelegate("button[data-button-action]","click").delegate("button[data-button-action]","click",function(n){var a,i,r;n.preventDefault(),a=e(n.target),i=a.attr("data-button-action"),r=a.attr("data-form-id"),"cancel"===i&&a.addClass("nm-button-cancel"),r===t.id&&i&&(g.blockForm(t),t.serializeAndSend(i,t.id))})},g.Form.prototype.bindActionLinks=function(){var t=this;e("#"+this.id).off("click",".nm-form-action-link").on("click",".nm-form-action-link",function(n){n.preventDefault(),t.serializeAndSend(e(this).attr("data-form-action"),t.id)})},g.Form.prototype.disableButtons=function(){var t,n,a;if(this.data&&this.data.form&&this.data.form.actions)for(t=0,n=this.data.form.actions.length;n>t;t++)a=this.data.form.actions[t],a.disable_on_change===!0&&e('button[data-button-action="'+a.action+'"]').hide()},g.Form.prototype.changed=function(){this.disableButtons()},g.Form.prototype.autoSubmit=function(e){e=e||"submit",g.blockForm(this),this.serializeAndSend(e,this.id)},g.Form.prototype.serializeAndSend=function(t,n){var a,i,r=e("#"+n+" form"),s=g.getUrl(t,n),l=r.serializeArray(),c=l.length,u=[],d=this,m=[];for(i=0;c>i;i+=1)-1!==l[i].name.indexOf("DateTime-")?(a=l[i].name.slice(9,l[i].name.length-2),"undefined"==typeof m[a]&&(m[a]=[]),m[a].push(l[i].value)):u.push(l[i]);for(var f in m)m.hasOwnProperty(f)&&"0"!==m[a][0]&&"0"!==m[a][1]&&"0"!==m[a][2]&&(a=m[a].reverse().join("-"),u.push({name:f,value:a}));o.getJSON(s,u,{requestMethod:"POST"}).then(function(e){g.handleForm(e,d)},function(e){g.displayStandardError(d)})},f.responseToObj=function(e){if(!e)return!1;if("object"==typeof e)return e;try{return JSON.parse(e)}catch(t){return!1}},f.layerLoadHandler=function(t){var n;n=e(t),n.find(".nm-form").each(function(){g.initForm(e(this))})},f.processNavHandler=function(t){var n,a=e(t.target);t.preventDefault(),"true"===a.attr("data-selectable")&&(n=a.parents(".nm-form").attr("id"),f.getForm(n).serializeAndSend(a.attr("data-action"),n))},f.addInitData=function(e,t){m[e]=t},f.getForm=function(e){return l[e]},g.initialize=function(){var t;s=SETUPS.get("nemo.url.formapi"),c=SETUPS.get("nemo.form.templatemap"),d=g.getCustomTemplateIds(".nm-custom-form-tpl"),g.eventBus.on(r.LAYER_LOADED,function(e){e&&e.element&&f.layerLoadHandler(e.element)}),g.legacyEventBus.delegate(".nm-process-navigation a","click",f.processNavHandler),g.bindEnablers(),t=e(".nm-layer-wrapper"),t.length&&f.layerLoadHandler(t)},f.initializePromise=function(t){return new Promise(function(n){g.eventBus=t,g.legacyEventBus=e("body"),g.initialize(),n("form/core.form.js")})},f}),define("form/simple",["jquery","form/core.form","configurator/dpu-api","events","configurator/ajax","router"],function(e,t,n,a,i,r){"use strict";var o={formSelector:".nm-j-simpleform"},s={},l={__:s};return s.scanSource=function(t){t.find(o.formSelector).each(function(){s.initForm(e(this))})},s.initForm=function(e){var t,n,a,i;i=e,t=i.attr("id"),n=i.find(".nm-button-submit"),a=i.find("form"),a.on("submit",function(e){e.preventDefault(),s.onSubmit(e,t,a)})},s.onSubmit=function(e,t,n){var a=n.serialize();if("audicode-input"===t){var i=a.match(/audicode=([Aa]{1}[a-zA-Z0-9]{7})/i);i&&(a="audicode="+a.match(/audicode=([Aa]{1}[a-zA-Z0-9]{7})/i)[1].toUpperCase())}s.call(t,{data:a})},s.getUrl=function(e){var t,a,i,r,o;return t=SETUPS.get("nemo.url.form."+e),o=[],a=n.getContext(),a&&o.push("context="+a),i=n.getSubsessionID(),i&&o.push("subsession="+i),r=n.getPrString(),r&&o.push("ids="+encodeURIComponent(r)),t+=-1===t.indexOf("?")?"?":"&",t+o.join("&")},s.call=function(t,n){var a,r=n.data,o=e("#"+t);a=o.attr("data-dpu-form-id")||t,o.addClass("nm-j-simpleform-loading").removeClass("nm-j-simpleform-error").removeClass("nm-j-simpleform-success");var l=s.getUrl(a),c=i.getJSON(l,r,{});c.then(function(e){s.handleSuccess(e,t,a)},function(e){s.handleFail(e,t,a)})},s.handleSuccess=function(i,o,l){var c,u=e("#"+o);return i=t.responseToObj(i),i&&i[l]?(2===Math.floor(i[l].statuscode/100)?(u.find(".nm-error").html(""),i[l].message&&u.find(".nm-success").html(i[l].message),u.removeClass("nm-j-simpleform-error").addClass("nm-j-simpleform-success"),s.legacyEventBus.trigger(a.FORM_FINISHED,{id:o,response:i}),u.attr("data-form-is-finished",1),"audicode-input"===o&&(r.open("page",n.getCurrentCarlineUrl()),e(".nm-button-close.nm-ajaxLayerClose").trigger("click"))):(i.login&&!i.login.success&&i.login.message?c=i.login.message:(c=n.getErrorMessage(i.header.error.id),c=c||i[l].message),u.find(".nm-error").html(c),u.addClass("nm-j-simpleform-error").removeClass("nm-j-simpleform-success"),s.eventBus.emit(a.FORM_ERROR,{id:o,response:i})),void u.removeClass("nm-j-simpleform-loading")):s.handleFail(i,o,l)},s.handleFail=function(t,a,i){var r,o,s=e("#"+a);t&&(i&&t[i]&&(o=t[i].message),r=n.getErrorMessage(t.header.error.id)||o),r=r||n.getErrorMessage(),s.find(".nm-error").html(r),s.addClass("nm-j-simpleform-error").removeClass("nm-j-simpleform-success").removeClass("nm-j-simpleform-loading")},s.addEvents=function(){s.eventBus.on(a.LAYER_LOADED,function(t){t&&t.element&&s.scanSource(e(t.element))}),s.scanSource(e("body"))},l.initializePromise=function(t){return new Promise(function(n){s.legacyEventBus=e("body"),s.eventBus=t,s.addEvents(),n("form/simple.js")})},l}),define("form/select",["jquery","events"],function(e,t){
"use strict";var n={},a={__:n};return n.instance=!1,n.oDefaults={sDropdownSelectionClass:"nm-at-select-default-val"},n.addEvents=function(){n.eventBus.on(t.PAGE_LOADED,n.onPageLoaded),n.eventBus.on(t.FORM_LOADED,n.onFormLoaded),n.handleSelectChanges()},n.onPageLoaded=function(){n.handleSelectChanges()},n.onFormLoaded=function(){n.handleSelectChanges()},n.handleSelectChanges=function(t){var a=e("select");e.each(a,function(){var t=e(this);n.legacyEventBus.on("change.select",n.updateSelect),n.setSelectState(t)})},n.updateSelect=function(t){var a=e(t.target);n.setSelectState(a)},n.setSelectState=function(t){var a,i,r,o=t.find("option:selected");e.each(o,function(){i=e(this),a=i.val(),r=void 0!==i.attr("data-is-default"),i.parent().toggleClass(n.oDefaults.sDropdownSelectionClass,a&&"*"===a||r)})},n.removeEvents=function(){},n.initialize=function(){n.addEvents(),n.handleSelectChanges()},a.initializePromise=function(t){return new Promise(function(a){n.eventBus=t,n.legacyEventBus=e("body"),n.initialize(),a("form/select.js")})},a}),define("configurator/last-configuration",["configurator/dpu-api","events"],function(e,t){"use strict";var n={},a={__:n};return n.globalEventBus=null,n.EXPIRED_THRESHOLD=72,window.audi=window.audi||{},window.audi.api=window.audi.api||{},n.isExpired=function(e){var t=(new Date).getTime()/216e3;return t-e>=n.EXPIRED_THRESHOLD},n.addEvents=function(){n.globalEventBus.on(t.CONFIG_UPDATE,n.handleConfigurationUpdate)},n.getLastConfiguration=function(){var e=n.getStoredConfiguration();return e&&e.lastChanged?n.isExpired(e.lastChanged)?!1:e:!1},window.audi.api.lastConfiguration=n.getLastConfiguration,n.handleConfigurationUpdate=function(){var e=n.getConfigurationObject();n.hasSorage()&&e&&n.writeEntry(e)},n.hasSorage=function(){return!!n.getStorage()},n.getStorage=function(){return window.localStorage||null},n.writeEntry=function(e){var t,a;try{t=JSON.stringify(e),a=n.getStorage(),a.setItem("lastConfiguration",t)}catch(i){console.warn(i)}},n.getConfigurationObject=function(){var t,a=e.getConfiguration(),i={assets:{}},r=e.getConfigurationAssets();return t=e.getRenderUrl(),a&&!e.getConflicts()&&r&&0!==Object.keys(r).length?(i.assets.exterior_front=r.exterior_front&&r.exterior_front["stage.new"]?t+r.exterior_front["stage.new"]:"",i.assets.closeup_lights=r.closeup_lights&&r.closeup_lights["stage.new"]?t+r.closeup_lights["stage.new"]:"",i.assets.exterior=r.exterior&&r.exterior["stage.new"]?t+r.exterior["stage.new"]:"",i.price=a.price,i.carline=a.carline,i.carlineName=a.carlineName,i.lastChanged=(new Date).getTime(),i["mv-version"]=e.getMarketVersion(),i.context=e.getContext(),i.url=n.getEntryUrl(a.prstring),i):null},n.getStoredConfiguration=function(){var e=n.getStorage();if(!e||!e.lastConfiguration)return null;try{return JSON.parse(e.lastConfiguration)}catch(t){return console.warn(t),null}},n.getEntryUrl=function(e){var t,n=window.location.href.split("#")[0];return t=n,t+=t.indexOf("?")>0?"&":"?",t+="prString="+e},n.initialize=function(e){var t;return new Promise(function(a){n.globalEventBus=e,n.addEvents(),t=parseInt(SETUPS.get("nemo.last_config.expires"),10),t>0&&(n.EXPIRED_THRESHOLD=t),a("configurator/last-configuration.js")})},a.initializePromise=n.initialize,a}),define("text!templates/search-layer.tpl",[],function(){return'<div class="nm-su-result">\n	{{?!!it.audicode}}\n		{{?!!it.configuration}}\n		<div class="nm-su-result-wrap">\n			<div class="nm-su-result-audicode clearfix">\n				{{?it.success===false}}\n					{{?it[\'vtp-audicode\'] && it[\'other-url\']}}\n					<div class="nm-su-vtp">\n						<h2 class="nm-el-lk nm-el-lk-03"><span class="nm-su-result-audicode-label nm-el-lk nm-el-lk-08">{{=window.i18n[\'search-layer.your-audicode\']}}</span> {{=it.audicode}}</h2>\n						<div class="nm-su-vtp-image"></div>\n						<div class="nm-su-vtp-description">\n							<span class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">\n								{{=window.i18n[\'search-layer.available-cars\']}}\n							</span>\n							<div class="nm-description nm-el-lbl nm-el-lbl-01">\n								{{=window.i18n[\'search-layer.available-cars-info\']}}\n							</div>\n							<a href="{{=it[\'other-url\']}}" class="nm-el-btn nm-el-btn-01 nm-el-btn-ast">{{=window.i18n[\'search-layer.your-car\']}}</a>\n							<p class="nm-el-pg nm-el-pg-04">\n								<span class="nm-at-pg-b">\n									{{=window.i18n[\'search-layer.label.disclaimer\']}}:\n								</span>\n								{{=window.i18n[\'search-layer.vtp-warning\']}}\n							</p>\n						</div>\n					</div>\n					{{??}}\n						<h2 class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">{{=it.message}}</h2>\n					{{?}}\n				{{??}}\n					<h2 class="nm-el-lk nm-el-lk-09"><span class="nm-su-result-audicode-label">{{=window.i18n[\'search-layer.your-audicode\']}}</span> {{=it.audicode}}</h2>\n					<img src="{{=it.mediaservice}}{{=it.configuration.configuration.assets[\'exterior_front\'][\'compare.new\']}}"/>\n					<div class="nm-su-result-audicode-description">\n						<span class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">\n							{{=it.configuration.configuration.carlineName}}\n						</span>\n						<div class="nm-description nm-el-lbl nm-el-lbl-01">\n							{{=it.configuration.configuration.description}}\n						</div>\n						<strong class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b nm-su-result-audicode-price">\n							{{=it.configuration.configuration.price}}\n						</strong>\n						<a href="#" data-tracking-link="{&quot;prop5&quot;:&quot;load_configuration&quot;,&quot;prop7&quot;:&quot;{{=it.audicode}}&quot;,&quot;eVar3&quot;:&quot;{{=it.audicode}}&quot;,&quot;eVar9&quot;:&quot;tools/nemo-search&quot;,&quot;events&quot;:&quot;event27&quot;}" class="nm-j-audicode-accept nm-el-btn nm-el-btn-01 nm-el-btn-ast">{{=window.i18n[\'search-layer.load-configuration\']}}</a>\n						<p class="nm-el-pg nm-el-pg-04">\n							<span class="nm-at-pg-b">\n								{{=window.i18n[\'search-layer.label.disclaimer\']}}:\n							</span>\n							{{=window.i18n[\'search-layer.configuration-overwrite-warning\']}}\n						</p>\n					</div>\n				{{?}}\n			</div>\n		</div>\n		{{??}}\n			<div class="nm-su-result-audicode">\n				<h2 class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">\n					{{=window.i18n[\'search-layer.audicode-loading\']}}\n				</h2>\n				<div class="nm-j-audicode-loading nm-loading">\n				</div>\n			</div>\n		{{?}}\n	{{?}}\n	{{?!it.audicode}}\n		<div class="nm-su-result-wrap">\n			{{?it.search.length}}\n				<ul class="nm-su-result-list-group">\n					{{~ it.search :entry }}\n						<li>\n							<h2><span class="nm-el-lbl nm-el-lbl-03">{{=entry.value.carlineName}}</span><span class="nm-el-lbl nm-el-lbl-03">{{=entry.key}}</span></h2>\n							<ul class="nm-su-result-list">\n								{{~ entry.value.items :item }}\n									<li class="nm-j-configurator-item nm-j-configurator-status_{{=item.status}} clearfix"\n									data-configurator-id="{{=item.id}}">\n										<div class="nm-su-result-image">\n											{{? !!item.image}}\n												<img src="{{=item.image}}" alt="{{=item.name}}" class="nm-image" />\n											{{?}}\n										</div>\n										<div class="nm-su-result-list-content">\n											<p class="nm-j-configurator-name nm-el-pg nm-el-pg-04 nm-at-pg-b">\n												{{=item.name}}\n												{{? !!item.nonrenderable && item.nonrenderable == true }}\n													<span class="nm-el-pg nm-el-pg-04"><br />{{=window.i18n[\'configuration.not-rendable-message\']}}</span>\n												{{?}}\n											</p>\n											{{? !!item.description}}\n											<div class="nm-su-result-list-description nm-el-pg nm-el-pg-04">\n												{{= item.description || \'\'}}\n											</div>\n											{{?}}\n										</div>\n										<div class="nm-su-result-list-actions">\n											<div class="nm-su-result-list-add clearfix">\n												{{?!!item.url}}\n													<a class="nm-info nm-layerLink" href="{{=item.url}}" title="{{=window.i18n[\'more-information\']}}" data-tracking-link="{&quot;prop5&quot;:&quot;{{=window.i18n[\'more-information\']}}&quot;,&quot;prop7&quot;:&quot;{{=it.audicode}}&quot;,&quot;eVar3&quot;:&quot;{{=it.audicode}}&quot;,&quot;eVar9&quot;:&quot;tools/nemo-search&quot;,&quot;events&quot;:&quot;event28&quot;}"></a>\n												{{?}}\n												<span class="nm-conflict-icon" title="#I18N("nemo.ui.common.conflict" "Konflikt")"></span>\n												<div class="nm-su-result-list-price nm-el-pg nm-el-pg-04">\n													{{? !!item.price}}\n														<span class="nm-j-configurator-text-price">{{=item.price}}</span>\n													{{?}}\n												</div>\n											</div>\n											<div class="nm-su-result-list-add-btn">\n												<a class="nm-el-btn nm-el-btn-02 nm-j-configurator-delegate-click" href="#">\n													<span class="nm-at-btn-state01">{{=window.i18n[\'search-layer.add-item\']}}</span>\n													<span class="nm-at-btn-state02">{{=window.i18n[\'search-layer.item-included\']}}</span>\n													<span class="nm-at-btn-state03">{{=window.i18n[\'search-layer.remove-item\']}}</span>\n												</a>\n											</div>\n										</div>\n									</li>\n								{{~}}\n							</ul>\n						</li>\n					{{~}}\n				</ul>\n			{{?}}\n			<div class="nm-su-sitesearch-list">\n				{{?it.modelSearch.length}}\n					<ul class="nm-su-modelsearch-group">\n						{{~it.modelSearch :modelItem}}\n						<li>\n							<a data-tracking-link="{&quot;prop5&quot;:&quot;{{=modelItem.name}}&quot;,&quot;prop7&quot;:&quot;{{=it.searchString}}&quot;,&quot;eVar3&quot;:&quot;{{=it.searchString}}&quot;,&quot;eVar9&quot;:&quot;tools/nemo-search&quot;,&quot;events&quot;:&quot;event28&quot;}" class="nm-el-lk nm-el-lk-09" href="{{=modelItem.url}}">{{=modelItem.name}}</a>\n						</li>\n						{{~}}\n					</ul>\n				{{?}}\n				{{?it.siteMapSearch.length}}\n					<ul class="nm-su-sitemapsearch-group">\n						{{~it.siteMapSearch :siteMapItem}}\n							{{var itemName = siteMapItem.name;\n							var rhombus = /\\[rhombus\\]/ig;\n							var plus = /\\:plus/ig;\n							var replacedName = itemName.replace( rhombus, \'***\');/*<span class="nm-icon-rhombus"></span>\' );*/\n							replacedName = replacedName.replace( plus, \'<span class="nm-brand-plus">:plus</span>\' );\n						}}\n						<li>\n							<a data-tracking-link="{&quot;prop5&quot;:&quot;{{=itemName}}&quot;,&quot;prop7&quot;:&quot;{{=it.searchString}}&quot;,&quot;eVar3&quot;:&quot;{{=it.searchString}}&quot;,&quot;eVar9&quot;:&quot;tools/nemo-search&quot;,&quot;events&quot;:&quot;event28&quot;}" class="nm-el-lk nm-el-lk-09" href="{{=siteMapItem.url}}">{{=replacedName}}</a>\n						</li>\n						{{~}}\n					</ul>\n				{{?}}\n				{{?it.footerSearch.length}}\n					<ul class="nm-su-footersearch-group">\n						{{~it.footerSearch :footerItem}}\n							<li>\n								<a data-tracking-link="{&quot;prop5&quot;:&quot;{{=footerItem.name}}&quot;,&quot;prop7&quot;:&quot;{{=it.audicode}}&quot;,&quot;eVar3&quot;:&quot;{{=it.audicode}}&quot;,&quot;eVar9&quot;:&quot;tools/nemo-search&quot;,&quot;events&quot;:&quot;event28&quot;}" class="nm-el-lk nm-el-lk-09" href="{{=footerItem.url}}">{{=footerItem.name}}</a>\n							</li>\n						{{~}}\n					</ul>\n				{{?}}\n			</div>\n			/*Proposals*/\n			<ul class="nm-su-result-list-group">\n				{{?it.searchListProposals.length}}\n					<li>\n						<ul class="nm-su-result-list nm-su-proposal-list">\n							{{~it.searchListProposals :proposalItem}}\n								<li>\n									<a href="{{=proposalItem.Url}}" data-tracking-link="{&quot;prop5&quot;:&quot;{{=proposalItem.Headline}}&quot;,&quot;prop7&quot;:&quot;{{=it.searchString}}&quot;,&quot;eVar3&quot;:&quot;{{=it.searchString}}&quot;,&quot;eVar9&quot;:&quot;tools/nemo-search&quot;,&quot;events&quot;:&quot;event28&quot;}" x-cq-linkchecker="valid" class="nm-su-proposol-item{{?proposalItem.Type=="Layer"}} nm-layerLink{{?}}">\n										<div class="nm-su-result-image">\n											{{? !!proposalItem.ImageUrl}}\n												<img src="{{=proposalItem.ImageUrl}}" alt="{{=proposalItem.Headline}}" class="nm-image" />\n											{{?}}\n										</div>\n										<div class="nm-su-proposol-list-content">\n											<strong class="nm-el-pg nm-el-pg-04 nm-at-pg-b">{{=proposalItem.Headline}}</strong>\n											<p class="nm-su-result-list-description nm-el-pg nm-el-pg-04">{{=proposalItem.Description}}</p>\n											<span class="nm-el-lk nm-el-lk-01 nm-at-lk-b nm-el-lk-ast" >{{=window.i18n[\'discover-now\']}}</span>\n										</div>\n									</a>\n								</li>\n							{{~}}\n						</ul>\n					</li>\n				{{?}}\n			</ul>\n		</div>\n		{{?!!it.gsaSearchUrl}}\n			<div class="nm-su-gsa">\n				<a data-tracking-link="{&quot;prop5&quot;:&quot;{{=window.i18n[\'search-layer.search-audi-web\']}} {{=it.searchString}} {{=window.i18n[\'search-layer.search-for\']}}&quot;,&quot;prop7&quot;:&quot;{{=it.searchString}}&quot;,&quot;eVar3&quot;:&quot;{{=it.searchString}}&quot;,&quot;eVar9&quot;:&quot;tools/nemo-search&quot;,&quot;events&quot;:&quot;event28&quot;}" class="nm-el-lk nm-el-lk-09" href="{{=it.gsaSearchUrl}}">{{=window.i18n[\'search-layer.search-audi-web\']}} &quot;<span class="nm-highlight">{{=it.searchString}}</span>&quot; {{=window.i18n[\'search-layer.search-for\']}}</a>\n			</div>\n		{{?}}\n	{{?}}\n</div>\n'}),define("text!templates/search-audicode-error.tpl",[],function(){return'<div class="nm-su-result-audicode-wrap">\n	<div class="nm-su-result-audicode">\n		<h2 class="nm-el-hdl nm-el-hdl-05 nm-at-hdl-b">{{=window.i18n[\'search-layer.audicode.error\']}}: </h2>\n		<p class="nm-error nm-error-layer-message nm-el-pg nm-el-pg-03 nm-at-pg-indicator">{{=it.message}}</p>\n	</div>\n</div>'}),define("module/search",["jquery","configurator/dpu-api","configurator/dpu-controller","utils/utils","module/state","configurator/ajax","events","router","core/template","text!templates/search-layer.tpl","text!templates/search-audicode-error.tpl"],function(e,t,n,a,i,r,o,s,l,c,u){"use strict";var d=".nm-header-overlay-container .nm-navigation-header-search-overlay.nm-header-overlay-is-open",m=".nm-has-additional-logo",g=30,f={},p={__:f};return f.mobileBreakpoint=1e3,f.searchLayerOpen=!1,f.searcListProposalsArr=null,f.audicodeActivated=!1,f.oDefaults={sAcceptAudicodeButton:".nm-j-audicode-accept"},f.searchForm,f.utils,f.loadedConfiguration,f.loadSearchListProposals=function(){var e=SETUPS.get("nemo.url.searchproposals");return r.getJSON(e).then(function(e){f.searcListProposalsArr=e&&e.Proposals?e.Proposals:[]},function(e){console.log("error",e.message)})},f.searchResultListProposals=function(t){var n=[];return t&&(t=t.toLowerCase(),f.searcListProposalsArr&&f.searcListProposalsArr.length&&e.each(f.searcListProposalsArr,function(e,a){return a.Search?void(a.Search.indexOf(t)>-1&&n.push(a)):!0})),n},f.addEvents=function(){f.legacyEventBus.on("keyup",".nm-su .nm-su-input",f.onOpenSearchLayer),f.legacyEventBus.on("paste",".nm-su .nm-su-input",f.onOpenSearchLayerDelayed),f.legacyEventBus.on("click",".nm-su .nm-su-input",f.onOpenSearchLayer),f.legacyEventBus.on("click",".nm-su .nm-su-submit",f.onOpenSearchLayer),f.legacyEventBus.on("click",".nm-su .nm-su-reset",f.resetSearch),f.legacyEventBus.on("submit",".nm-su form",f.formSubmit),f.eventBus.on(o.MENUFLYOUT_OPEN,f.clearSearch),f.eventBus.on(o.MENUFLYOUT_CLOSE,f.emptySearchResults);var e="click";"undefined"!=typeof document.documentElement.ontouchstart&&(e="touchstart"),f.legacyEventBus.on(e,f.onClickOutsideOfSearchLayer)},f.removeEvents=function(){f.legacyEventBus.off("keyup",".nm-su .nm-su-input",f.onOpenSearchLayer),f.legacyEventBus.off("paste",".nm-su .nm-su-input",f.onOpenSearchLayerDelayed),f.legacyEventBus.off("click",".nm-su .nm-su-input",f.onOpenSearchLayer),f.legacyEventBus.off("click",".nm-su .nm-su-submit",f.onOpenSearchLayer),f.legacyEventBus.off("click",".nm-su .nm-su-reset",f.resetSearch),f.legacyEventBus.off("submit",".nm-su form",f.formSubmit),f.eventBus.off(o.MENUFLYOUT_OPEN,f.clearSearch),f.eventBus.off(o.MENUFLYOUT_CLOSE,f.emptySearchResults);var e="click";"undefined"!=typeof document.documentElement.ontouchstart&&(e="touchstart"),f.legacyEventBus.off(e,f.onClickOutsideOfSearchLayer)},f.emptySearchResults=function(){e(".nm-su-result-container").empty()},f.resetSearch=function(){e(d).find("input.nm-su-input").focus(),f.emptySearchResults(),e(d).find("input.nm-su-input").keyup()},f.clearSearch=function(t){"undefined"!=typeof t.item&&(e(d).find("input.nm-su-input").val(""),e(d).find("input.nm-su-input").focus())},f.formSubmit=function(t){if(t&&"function"==typeof t.preventDefault&&t.preventDefault(),f.loadedConfiguration)return f.acceptLoadedConfiguration(),!1;if(e(".nm-j-audicode-loading").length)return!1;var n=f.getSearchString();if(n.length<=0)return console.log("Search String is empty -> stop!"),!1;var a=f.buildGsaSearchUrl(n);return a&&(document.location=a),!1},f.getSearchString=function(){var t=e(".nm-su .nm-su-input").val();return t=t.replace(/^\s+/g,"").replace(/</g,"").replace(/>/g,"")},f.onOpenSearchLayerDelayed=function(t){var n=this;setTimeout(function(){e(n).keyup()}),50},f.preventEvent=function(e){return!1},f.onOpenSearchLayer=function(n){if(f.audicodeActivated){if(13===n.keyCode&&e(".nm-j-audicode-accept").is(":visible"))return f.acceptLoadedConfiguration(),!1}else f.loadedConfiguration=null;if(16!==n.keyCode&&13!==n.keyCode){f.searchForm=e(n.target).parents("form");var a,r=e(this).closest(".nm-su"),s=r.find(".nm-su-result-container"),u=f.getSearchString(),d={},m=r.data("current")||"",g=m!==u||"click"===n.type;if(m!==u&&(f.audicodeActivated=!1,f.loadedConfiguration=null),r.data("current",u),u.length>1&&g){if(f.searchLayerOpen=!0,8===u.length&&-1!==u.search(/[Aa]{1}[a-zA-Z0-9]{7}/)?(d.audicode=u.toUpperCase(),f.legacyEventBus.off("submit",".nm-su form",f.formSubmit),f.legacyEventBus.on("submit",".nm-su form",f.preventEvent)):(f.legacyEventBus.off("submit",".nm-su form",f.preventEvent),f.legacyEventBus.on("submit",".nm-su form",f.formSubmit)),-1!==u.indexOf("|")&&(d.prstring=u),-1!==u.search(/^[a-z]*=[true|false]*$/)){var p=/^([a-z]*)=([true|false]*)$/.exec(u);i.triggerModeChange(p[1],p[2])}if(t.getSearchStopWords()){var v=new RegExp("\\b(?:i|"+t.getSearchStopWords()+")\\b\\s*","gi");u=u.replace(v,"")}console.log("<<"+u,t.search(u,!0)),d.search=(!!u&&u.length)>1?t.search(u,!0):[],d.audicode&&!d.search.length?(console.warn("Audicode detected"),f.triggerAudicodeLoad(d.audicode)):d.audicode=null,d.searchString=u?u:f.getSearchString(),d.siteMapSearch=t.searchNavigation(u,"siteMap"),d.modelSearch=t.searchNavigation(u,"model"),d.footerSearch=t.searchNavigation(u,"footer"),d.gsaSearchUrl=f.buildGsaSearchUrl(u),d.searchListProposals=f.searchResultListProposals(u),a=l.render(c,d),s.empty().html(a),f.eventBus.emit(o.SEARCH_OPEN,d)}else u.length<=1&&f.closeSearchLayer();if(f.setFlyoutHeight(s),e(window).width()<f.mobileBreakpoint&&e(n.target).hasClass("nm-su-submit"))if(e(".nm-j-audicode-loading").length)f.audicodeActivated?(console.log("audicode has been loaded=>accept configuration"),f.acceptLoadedConfiguration()):console.log("Loading AudiCode has not yet been completed");else{u=f.getSearchString();var h=f.buildGsaSearchUrl(u);null!==h&&(document.location=h)}}},f.buildGsaSearchUrl=function(e){var n;return(n=t.getGsaSearchUrl())?n+="#search="+encodeURIComponent(e.toLowerCase()):null},f.onClickOutsideOfSearchLayer=function(e){var t=$(e.target);f.searchLayerOpen&&f.isClickedTargetOutsideSearchLayer(t)&&f.isClickedTargetOutsideSearchSearchInputField(t)&&f.isClickedTargetOutsideAnyOtherLayer(t)&&f.closeSearchLayer()},f.isClickedTargetOutsideSearchLayer=function(e){return f.utils.isElementOutsideOfElementWithSelector(e,".nm-su-result-container")},f.isClickedTargetOutsideSearchSearchInputField=function(e){return f.utils.isElementOutsideOfElementWithSelector(e,"div.nm-su")},f.isClickedTargetOutsideAnyOtherLayer=function(e){return f.utils.isElementOutsideOfElementWithSelector(e,".nm-layer-wrapper")},f.isClickedTargetOutsideElementWithSelector=function(e,t){return e.is(t)?!1:e.parents(t).length>0?!1:!0},f.closeSearchLayer=function(){setTimeout(function(){f.searchLayerOpen=!1,e(".nm-su-result-container").empty(),f.eventBus.emit(o.SEARCH_CLOSE)},100)},f.triggerAudicodeLoad=function(e){n.loadConfigurationByAudiCode(e).then(function(e){f.onAudiCodeLoaded(e)},function(e){e.message=e.message||window.i18n["standard-audicode-error"],f.showAudiCodeLoadError(e)})},f.showAudiCodeLoadError=function(t){console.error(t),f.legacyEventBus.off("submit",".nm-su form",f.preventEvent),f.legacyEventBus.on("submit",".nm-su form",f.formSubmit);var n=e(".nm-su-result-container"),a=l.render(u,t);n.empty().html(a),f.setFlyoutHeight(n)},f.onAudiCodeLoaded=function(t){f.loadedConfiguration=t;var n=null;if(f.loadedConfiguration&&t.audicode&&f.loadedConfiguration.audicode.id){var a=f.loadedConfiguration.audicode.id.toUpperCase(),i=e(".nm-su-input").filter(function(){return e(this).val().toUpperCase()===a});i&&1===i.length?(f.audicodeActivated=!0,console.log("matching Audicode input found:",f.loadedConfiguration),f.showLoadedConfiguration(i)):(f.audicodeActivated=!1,console.log("NO matching Audicode input found"),f.loadedConfiguration=void 0,n={},f.showAudiCodeLoadError(n))}else console.error("ERROR loading Audicode"),f.loadedConfiguration=void 0,n={},n.message=window.i18n["standard-audicode-error"],f.showAudiCodeLoadError(n),f.showAudiCodeLoadError(n)},f.showLoadedConfiguration=function(e){var n=e.closest(".nm-su"),a=n.find(".nm-su-result-container");a.one("click.accept.loaded.audicode",f.oDefaults.sAcceptAudicodeButton,f.acceptLoadedConfiguration);var i={search:{},audicode:f.loadedConfiguration.audicode.id,configuration:f.loadedConfiguration,mediaservice:t.getRenderUrl(),success:!!f.loadedConfiguration.audicode.success,"vtp-audicode":!!f.loadedConfiguration.audicode["other-url"],"other-url":f.loadedConfiguration.audicode["other-url"]?f.loadedConfiguration.audicode["other-url"]:null,message:f.loadedConfiguration.audicode.message};console.log("configData=>DotJS Template",i);var r=l.render(c,i);a.empty().html(r),f.setFlyoutHeight(a)},f.acceptLoadedConfiguration=function(e){var a=f.loadedConfiguration&&f.loadedConfiguration.audicode?f.loadedConfiguration.audicode:null;e&&"function"==typeof e.preventDefault&&e.preventDefault(),f.eventBus.emit(o.SEARCH_LOAD_AUDICODE,{audicode:a}),n.handleExternalConfiguration(f.loadedConfiguration,{startType:"audicode-search"}),s.open("page",t.getCurrentCarlineUrl()),f.closeSearchLayer()},f.setFlyoutHeight=function(t,n){e(".nm-su").removeClass("noSrcollbars"),t.height()<410&&e(".nm-su").addClass("noSrcollbars");var a=t.height()+150,i=e(m);i.length>0&&(a+=g),e(d+".nm-header-overlay-is-open").height(a)},f.initialize=function(){f.utils=a(),f.addEvents(),f.loadSearchListProposals()},p.initializePromise=function(t){return new Promise(function(n){f.eventBus=t,f.legacyEventBus=e("body"),f.initialize(),n("module/search.js")})},p}),define("module/gsa-search",["jquery","events","configurator/ajax"],function(e,t,n){"use strict";var a,i;return a={},i={__:a},a.pending=!1,a.initialize=function(){a.addEvents(),a.$SearchResultEl=e(".gsa-search-result"),a.$SearchResultEl.length>0&&(a.baseSearchURL=a.$SearchResultEl.attr("data-searchurl"),a.onHashChange())},a.search=function(t){return a.pending=!0,n.getContent(t).then(function(t){var n=e(t);n.find(".dropdown-search-sort").hide(),n.find("a[data-tracking]").each(function(){var t=e(this);t.attr("data-tracking-link",t.attr("data-tracking")),t.removeAttr("data-tracking")}),a.$SearchResultEl.html(n)},function(e){console.log("GSA Ajax Error:"+e.message),a.$SearchResultEl.html("<div class='nm-error'>"+a.$SearchResultEl.attr("data-errormessage")+"</div>")}).then(function(){a.pending=!1})},a.addEvents=function(){a.legacyEventBus.on("click","a[data-gsa]",a.handleNewSearchClick),a.eventBus.on(t.HASH_CHANGE,a.onHashChange)},a.handleNewSearchClick=function(t){t.preventDefault();var n=e(this).attr("data-gsa"),i=a.baseSearchURL+n;a.search(i)},a.onHashChange=function(){var e=i.getSearchQueryString(),t=a.baseSearchURL+"&q="+e;e&&a.search(t)},i.getSearchQueryString=function(e){for(var t=e||window,n=t.location.hash.replace("#","").replace(/</g,"").replace(/>/g,"").split("&"),a=null,i=0;i<n.length;i++)0===n[i].search("search=")&&(a=n[i].replace("search=",""));return a},i.hasPendingResults=function(){return a.pending},i.initializePromise=function(t){return new Promise(function(n){a.eventBus=t,a.legacyEventBus=e("body"),a.initialize(),n("module/gsa-search.js")})},i}),define("text!templates/carstore-list.tpl",[],function(){return'	<div class="nm-module nm-md-carstore-list nm-carstore">\n		<div class="nm-3col">\n			<h2 class="nm-el-hdl nm-el-hdl-02 nm-at-hdl-b">{{=window.i18n[\'carstore-layer.saved-slots\']}}</h2>\n			<p class="nm-el-pg nm-el-pg-01">{{=window.i18n[\'carstore-layer.manage-slots\']}}</p>\n			<ul class="nm-carstore-listing">\n				{{~ it.list :value }}\n					<li class="clearfix">\n						<div class="nm-position nm-el-pg nm-el-pg-03 nm-at-pg-b">{{=value.position}}</div>\n						<div class="nm-carstore-listing-item nm-carstore-listing-image">\n								<img src="{{? !!value[\'exterior-image\']}}{{=value[\'exterior-image\']}}?alt={{?}}{{=it.altImage}}" alt="{{=value.name}}" width="350" height="196" />\n						</div>\n						<div class="nm-carstore-listing-item nm-carstore-listing-text">\n							<ul class="nm-carstore-list-overview">\n								{{? !!value.name}}\n									<li class="nm-name">\n										<strong class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">{{=value.name}}</strong>\n									</li>\n								{{?}}\n								{{? !!value.shoppingCartName}}\n									<li class="nm-description">\n										<p class="nm-el-pg nm-el-pg-03">{{=value.shoppingCartName}}<br />\n										{{? !!value.powersAndUnits}}\n											{{=value.powersAndUnits}}\n										{{?}}</p>\n									</li>\n								{{?}}\n								{{? !!value.price && value.valid !== false}}\n									<li class="nm-price">\n										<strong class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">{{=value.price}}</strong>\n									</li>\n								{{?}}\n								{{? !!value.audicode}}\n									<li class="nm-audicode">\n										<p class="nm-el-pg nm-el-pg-03">{{=window.i18n[\'audicode-label\']}}: {{=value.audicode}}</p>\n									</li>\n								{{?}}\n							</ul>\n							<form class="nm-stz nm-carstore-picker" action="#">\n							<fieldset>\n								<legend class="nm-legend"></legend>\n								<label for="carstore-selection"></label>\n								<select id="carstore-selection" class="nm-selection">\n									{{? value.valid !== false}}\n										<option value="configuration-load">{{=window.i18n[\'carstore-layer.load-slot\']}}</option>\n									{{??}}\n										<option>{{=window.i18n[\'carstore-layer.invalid-slot\']}}</option>\n									{{?}}\n									<option value="configuration-delete">{{=window.i18n[\'delete-configuration-label\']}}</option>\n								</select>\n								<input type="hidden" name="carstore-position" value="{{=value.position}}">\n								<button class="nm-el-btn nm-el-btn-04 nm-el-btn-ast nm-j-carstore-submit" type="submit">submit</button>\n							</fieldset>\n							</form>\n							<div class="nm-carstore-delete nm-hidden">\n								<strong class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">{{=window.i18n[\'carstore-layer.delete-slot\']}}</strong>\n								<p class="nm-el-pg nm-el-pg-03">{{=window.i18n[\'carstore-layer.delete-dialog\']}}</p>\n								<ul class="nm-button-list">\n									<li><a class="nm-el-btn nm-el-btn-01 nm-j-abort-btn" href="#">{{=window.i18n[\'abort-label\']}}</a></li>\n									<li><a class="nm-el-btn nm-el-btn-01 nm-el-btn-ast nm-j-delete-btn" href="#">{{=window.i18n[\'delete-label\']}}</a></li>\n								</ul>\n							</div>\n						</div>\n					</li>\n				{{~}}\n			</ul>\n		</div>\n	</div>\n'}),define("text!templates/carstore-empty.tpl",[],function(){return"<p class=\"nm-el-pg nm-el-pg-03\">{{=window.i18n['carstore-layer.no-slots-available']}}</p>"}),define("text!templates/carstore-fail.tpl",[],function(){return"<p class=\"nm-el-pg nm-el-pg-03\">{{=window.i18n['carstore-layer.error-loading-stots']}}</p>"}),define("module/carstore",["jquery","doT","events","configurator/dpu-api","configurator/dpu-controller","router","core/template","text!templates/carstore-list.tpl","text!templates/carstore-empty.tpl","text!templates/carstore-fail.tpl"],function(e,t,n,a,i,r,o,s,l,c){"use strict";var u={},d={__:u};return u.loadAgents=function(e){var t,n=[];for(t=0;t<e.length;t++)n[t]=new Image,n[t].src=e[t]},u.addEvents=function(){u.legacyEventBus.on("submit.carstore",".nm-carstore-picker",u.handleSubmitClick),u.eventBus.on(n.FORM_FINISHED,u.handleFormFinished),u.eventBus.on(n.FORM_ERROR,u.checkLogin),u.eventBus.on(n.MYAUDI_LOGIN,u.list),u.eventBus.on(n.LAYER_LOADED,u.list),u.eventBus.on(n.CONFIG_UPDATE,u.checkLogin)},u.checkLogin=function(t){var i=e("body");t&&t.response&&t.response.header&&t.response.header["logged-in"]&&t.response.header.subsession&&a.setLogin(t.response.header["logged-in"],t.response.header.subsession),a.isLoggedIn()?i.hasClass("nm-logged-in")||(i.addClass("nm-logged-in"),u.eventBus.emit(n.MYAUDI_LOGIN)):(i.removeClass("nm-logged-in"),u.eventBus.emit(n.MYAUDI_LOGOUT))},u.handleSubmitClick=function(t){var n,a,i;switch(t.preventDefault(),n=e(this),a=this["carstore-position"].value,i=n.find(".nm-selection option:selected").val()){case"configuration-delete":u.deleteCarstoreItem(a,n);break;case"configuration-load":u.loadCarstoreItem(a)}},u.renderCarstoreList=function(t){var n,i=e(".nm-j-carstore-list");t.carstore.list?(t.carstore.altImage=a.getAltImagePath("selection-compare","none"),n=o.render(s,t.carstore),i.empty().html(n).removeClass("nm-loader")):t.carstore.statuscode&&800===t.carstore.statuscode?(n=o.render(c,{}),i.empty().html(n)):(n=o.render(l,{}),i.empty().html(n))},u.handleFormFinished=function(t){var i,r;if(t.id)switch(t.id){case"login":u.loadAgents(t.response.login.agents.standard),u.loadAgents(t.response.login.agents.secure),i=a.setLogin(!0,t.response.header.subsession),i.then(function(){u.checkLogin(t)})["catch"](function(e){console.error("CARSTORE Login failed:"+e),r=a.getErrorMessage(e),u.eventBus.emit(n.ERROR,["Carstore Login-Error",r])});break;case"carstore":e(".nm-carstore-save .nm-j-carstore-save").removeClass("nm-j-carstore-save").addClass("nm-j-carstore-list").empty(),u.list("carstore")}},u.list=function(t){var r,o,s,l;u.checkLogin(),a.isLoggedIn()&&(s=u.showLoader(),s&&(r=i.listCarstoreItems(),r.then(function(a){u.renderCarstoreList(a),t&&"carstore"===t&&(o=e(".nm-j-audicode")[0].innerText,u.eventBus.emit(n.CONFIG_SAVED,o))})["catch"](function(e){console.error("Error listing Carstore Item: "+e),l=a.getErrorMessage(e),u.eventBus.emit(n.ERROR,[window.i18n["carstore-layer.error-loading-stots"],l])}).then(function(){u.hideLoader(),console.log("Always hide loader")})))},u.showLoader=function(){var t=e(".nm-j-carstore-list");return t.length>0?(t.empty(),t.addClass("nm-loader"),!0):!1},u.hideLoader=function(){e(".nm-j-carstore-list").removeClass("nm-loader")},u.deleteCarstoreItem=function(e,t){var n=t;n=n.parent(),n.find(".nm-carstore-delete").removeClass("nm-hidden"),n.find(".nm-carstore-picker").addClass("nm-hidden"),u.legacyEventBus.one("click.carstore.delete.abort","ul.nm-button-list a.nm-j-abort-btn",{id:e},u.handleDeleteAbort),u.legacyEventBus.one("click.carstore.delete.submit","ul.nm-button-list a.nm-j-delete-btn",{id:e},u.handleDeleteSubmit)},u.handleDeleteAbort=function(t){var n,a;return t.preventDefault(),n=e(this),a=n.closest(".nm-carstore-listing-item"),a.find(".nm-carstore-delete").addClass("nm-hidden"),a.find(".nm-carstore-picker").removeClass("nm-hidden"),u.legacyEventBus.off("click.carstore.delete.abort",u.handleDeleteAbort),u.legacyEventBus.off("click.carstore.delete.submit",u.handleDeleteSubmit),!1},u.handleDeleteSubmit=function(e){var t,r;return e.preventDefault(),u.legacyEventBus.off("click.carstore.delete.abort",u.handleDeleteAbort),u.legacyEventBus.off("click.carstore.delete.submit",u.handleDeleteSubmit),t=i.deleteCarstoreItem(e.data.id),t.then(function(e){u.list(e)})["catch"](function(e){console.error("Error deleting Carstore Item: "+e),r=a.getErrorMessage(e),u.eventBus.emit(n.ERROR,[window.i18n["carstore-layer.error-deleting-stot"],r]);
}),!1},u.loadCarstoreItem=function(t){var o,s=i.loadCarstoreItem(t);return s["catch"](function(e){console.error("Error loading Carstore Item: "+e),o=a.getErrorMessage(e),u.eventBus.emit(n.ERROR,[window.i18n["carstore-layer.error-loading-car"],o])}).then(function(){r.open("page",a.getCurrentCarlineUrl()),setTimeout(function(){e(".nm-button-close.nm-ajaxLayerClose").trigger("click")},100)}),!1},d.initializePromise=function(t){return new Promise(function(n){u.eventBus=t,u.legacyEventBus=e("body"),u.addEvents(),n("carstore.js")})},d}),define("module/swipe-stage",["jquery","events"],function(e,t){"use strict";var n,a={},i={__:a},r={x:0,y:0},o=25,s="none",l="none",c=0,u=0,d={touchdevice:{down:"touchstart",move:"touchmove",up:"touchend"},desktopdevice:{down:"mousedown",move:"mousemove",up:"mouseup"}},m=!1,g="desktopdevice";return a.isTouchDevice=function(){return!!("ontouchstart"in window)||!!navigator.msMaxTouchPoints},a.handleMouseDown=function(e){m=!1,"select"!==e.target.nodeName.toLowerCase()&&"input"!==e.target.nodeName.toLowerCase()&&"option"!==e.target.nodeName.toLowerCase()&&(m=!0),u=0,c=0,r.x=e.pageX||e.originalEvent.changedTouches[0].pageX,r.y=e.pageY||e.originalEvent.changedTouches[0].pageY,n.off(d[g].up,a.handleMouseUp).on(d[g].up,a.handleMouseUp),a.isTouchDevice()||n.off(d[g].move,a.handleMouseMove).on(d[g].move,a.handleMouseMove)},a.triggerStageViewChange=function(t){"right"===t?e("li.nm-backarrow").trigger("click.stage.remote"):e("li.nm-nextarrow").trigger("click.stage.remote")},a.handleMouseUp=function(e){m=!1,c=r.x-(e.pageX||e.originalEvent.changedTouches[0].pageX),u=r.y-(e.pageY||e.originalEvent.changedTouches[0].pageY),s=c>0?"left":"right",l=0>u?"down":"up",Math.abs(c)>o&&Math.abs(u)<o&&a.triggerStageViewChange(s)},a.handleMouseMove=function(e){m&&(c=r.x-(e.pageX||e.originalEvent.changedTouches[0].pageX),u=r.y-(e.pageY||e.originalEvent.changedTouches[0].pageY),l=0>u?"down":"up",s=c>0?"left":"right",Math.abs(c)>o&&Math.abs(u)<o&&(a.removeSwipeEvents(),m=!1,a.triggerStageViewChange(s)))},a.removeSwipeEvents=function(){n.off(d[g].move,a.handleMouseMove),n.off(d[g].up,a.handleMouseUp)},i.disableSwipe=function(){n.off(d[g].move,a.handleMouseMove),n.off(d[g].up,a.handleMouseUp),n.off(d[g].down,a.handleMouseDown)},i.enableSwipe=function(){n.off(d[g].down,a.handleMouseDown).on(d[g].down,a.handleMouseDown)},a.addEvents=function(){n=e(".nm-stage"),a.isTouchDevice()&&(g="touchdevice"),n.find("img").on("dragstart",function(e){e.preventDefault()}),n.off(d[g].down,a.handleMouseDown).on(d[g].down,a.handleMouseDown)},a.initialize=function(){a.addEvents(),a.eventBus.on(t.PAGE_LOADED,a.addEvents),a.eventBus.on(t.UPDATE_VIEW_STATE,a.addEvents)},i.initializePromise=function(e){return new Promise(function(t){a.eventBus=e,a.initialize(),t("module/swipe-stage.js")})},i}),define("module/zip-download",["jquery","configurator/dpu-api","core/storage","events"],function(e,t,n,a){"use strict";var i={},r={__:i},o="/media-zip",s=".nm-j-zip-download-delegate-click";return i.handleLayerLoaded=function(){e(s).attr("href",i.updateHrefAttribute())},i.addEvents=function(){i.eventBus.on(a.LAYER_LOADED,i.handleLayerLoaded)},i.initialize=function(){i.addEvents()},i.getImageListFromConfigurationObject=function(){var n=t.getConfigurationAssets()||[],a=[],i=function(e,n){var i=n.fullscreen||n["stage.new"];i=t.getRenderUrl()+i,a.push(i)};return e.each(n,i),a},i.updateHrefAttribute=function(){var e,n,a,r,s;return e=t.getCarline(),n=null,a=encodeURIComponent(i.getImageListFromConfigurationObject().join("\n")),r=["&carline=",t.getCarline(),"&audicode=","","&images=",a].join(""),s=SETUPS.get("nemo.url.dpu")+o+"?",s+=r},r.initializePromise=function(e){return new Promise(function(t){i.eventBus=e,i.initialize(),t("module/zip-download.js")})},r}),define("text!templates/iph-cart.tpl",[],function(){return'<li class="nm-iph-item">\n	<a href="{{=it.dealerURL}}" target="_blank" class="nm-iph-item nm-iph-name nm-el-pg nm-el-pg-04 nm-at-pg-b" title="{{=it.dealerName}}" data-tracking-link="{&quot;prop39&quot;:&quot;IPH-HÃ¤ndlerseite_cart-link&quot;,&quot;prop46&quot;:&quot;:nemo configuration cart:IPH-dealer_click:{{=it.dealerBNR}}&quot;}">{{=it.dealerName}}</a>\n	<a x-cq-linkchecker="skip" href="#" class="nm-icon-cancel" data-tracking-link="{&quot;prop39&quot;:&quot;IPH-close button_cart-link&quot;,&quot;prop46&quot;:&quot;:nemo configuration cart:IPH-close button_click:{{=it.dealerBNR}}&quot;}"></a>\n</li>\n<li class="nm-iph-item">\n	<span class="nm-iph-phone nm-el-pg nm-el-pg-04">{{=it.dealerPhoneLabel}} {{=it.dealerPhone}}</span>\n</li>'}),define("module/iph",["events","configurator/ajax","core/template","text!templates/iph-cart.tpl"],function(e,t,n,a){"use strict";var i={},r={__:i};return i.oDefaults={sClassIPHActive:"nm-iph-active",sSelectorLinkList:".nm-basket-linklist",sSelectorIPHCancelBtn:".nm-iph-item .nm-icon-cancel",sSelectorIPHWrapper:".nm-iph-wrapper"},r.parsePartnerID=function(){var e=!1;return window.location.search&&window.location.search.indexOf("partner_id=")>-1?e=window.location.search.split("partner_id=")[1]:window.location.hash&&window.location.hash.indexOf("partner_id=")>-1&&(e=window.location.hash.split("partner_id=")[1]),e&&(e=e.split("&")[0]),e},r.addPartnerId=function(e){var t=e;return-1===t.indexOf("partner=")&&(t+=t.indexOf("?")>-1?"&partner="+localStorage.getItem("iphdealerBNR"):"?partner="+localStorage.getItem("iphdealerBNR")),t},r.updateNWB=function(e){return-1===e.search(/(a)+[a-z]*(nwbp)+/g)?e.replace(/(a)+[a-z]*(nwb)+/g,function(e){return e+"p"}):e},r.inIPHMode=function(){return i.isWithinLifecycle()||r.parsePartnerID()},i.updateDealerLinks=function(e){var t,n,a,i,o=e.querySelectorAll(".nm-j-vtp-link");if(o&&o.length>0)for(t=0,n=o.length;n>t;t++)i=o[t],a=i.getAttribute("href"),a=r.addPartnerId(a),i.setAttribute("href",r.updateNWB(a))},i.updateTrackingLinkDealer=function(){var e,t,n,a,i,r,o,s,l=document.querySelectorAll(".nm-basket-linklist li");if(l&&l.length)for(e=0,t=l.length;t>e;e++)a=l[e],a.classList.contains("nm-iph-item")||(i=a.querySelector("a")?a.querySelector("a").getAttribute("title"):null,i&&(o='"IPH-'+i+'_cart-link"',s='":nemo configuration cart:'+i+"_click:"+localStorage.getItem("iphdealerBNR")+'"',r='{"eVar39":'+o+',"prop39":'+o+', "eVar46":'+s+',"prop46":'+s+"}",n=a.querySelector("a"),n&&n.setAttribute("data-tracking-link",r)))},i.sendCustomerDataToVeeAPI=function(e,t){var n=[];"undefined"!=typeof vee24&&(n.push(new vee24.crm.Data("BNR",e)),n.push(new vee24.crm.Data("Audipartner",t)),vee24.crm.submit("Customer Information",n))},i.enableIPH=function(e){var t,r={dealerName:localStorage.getItem("iphdealerName")||"",dealerBNR:localStorage.getItem("iphdealerBNR")||"",dealerURL:localStorage.getItem("iphdealerURL")||"",dealerPhoneLabel:"Tel.",dealerPhone:localStorage.getItem("iphdealerPhone")||"-"},o=e.querySelector(i.oDefaults.sSelectorIPHWrapper);o&&(document.querySelector("body").classList.add(i.oDefaults.sClassIPHActive),o.innerHTML=n.render(a,r),t=e.querySelector(i.oDefaults.sSelectorIPHCancelBtn),i.sendCustomerDataToVeeAPI(r.dealerBNR,r.dealerName),t&&t.addEventListener("click",i.disableIPHBasket),SETUPS.get("iph.dealerlink")===!0&&(i.updateDealerLinks(e),i.updateTrackingLinkDealer(e)))},i.disableIPHBasket=function(e){document.querySelector("body").classList.remove(i.oDefaults.sClassIPHActive),localStorage.removeItem("iphdealer"),e&&this.removeEventListener("click",i.disableIPHBasket)},i.getDealerSearchUrl=function(e){var t=SETUPS.get("iph.clientid")?SETUPS.get("iph.clientid"):"e2aaa0fa0c",n=SETUPS.get("iph.dealersearchurl")?SETUPS.get("iph.dealersearchurl"):"dealersearch.audi.com/api/json/v2/audi-deu";return"//"+n+"/id?q="+e+"&clientId="+t},i.getPartnerInfo=function(e){var n=i.getDealerSearchUrl(e);return i.dealerData?Promise.resolve(i.dealerData):t.getJSON(n,null,{withCredentials:!1})},i.isWithinLifecycle=function(){var e,t=0,n=SETUPS.get("iph.lifecycle")?parseInt(SETUPS.get("iph.lifecycle"),10):24,a=60*n*60*1e3;return localStorage.getItem("iphdealer")?(e=Date.now(),t=e-parseInt(localStorage.getItem("iphdate"),10),a>t):!1},i.checkForPartnerID=function(e){var t,n=e&&e.domElement&&e.domElement[0]?e.domElement[0]:document;i.isWithinLifecycle()?i.enableIPH(n):(i.disableIPHBasket(),t=r.parsePartnerID(),t&&i.getPartnerInfo(t).then(function(e){e&&e.meta&&"OK"===e.meta.returnCode&&e.partners&&e.partners.length>0&&(localStorage.setItem("iphdealer",!0),localStorage.setItem("iphdealerBNR",t),localStorage.setItem("iphdate",Date.now()),localStorage.setItem("iphdealerName",e.partners[0].name),localStorage.setItem("iphdealerURL",e.partners[0].url),localStorage.setItem("iphdealerPhone",e.partners[0].contactDetails.phone.international),i.enableIPH(n))}))},i.addEvents=function(){i.eventBus.on(e.PAGE_LOADED,i.checkForPartnerID)},r.initializePromise=function(e){return new Promise(function(t){i.eventBus=e,"1"===SETUPS.get("iph.scope")&&(i.addEvents(),i.checkForPartnerID()),t("module/iph.js")})},r}),define("module/vtp",["jquery","configurator/dpu-api","events","configurator/ajax","module/iph"],function(e,t,n,a,i){"use strict";var r,o,s,l,c={},u={__:c};return c.oDefaults={sSelectorVTPlink:".nm-j-vtp-link"},c.handleJSONresponse=function(t){var n,a,i=r;n="",t&&t.num&&t.num>0?(i=o,n=" ("+t.num+")"):i=!1,s.each(function(){l=e(this),i||(i=l.attr("data-vtp-original")),l.attr({href:i}),a=l.text().split(" (")[0],l.text(a+n)})},c.sendJSONrequest=function(t){Promise.resolve(e.getJSON(t)).then(function(e){c.handleJSONresponse(e)},function(e){console.log("VTP JSON request failed! ",e.message),c.handleJSONresponse(null)})},c.checkForIPHDealerLink=function(e){var t=e;return i.inIPHMode()&&(t=i.addPartnerId(t),t=i.updateNWB(t)),t},c.handleUpdates=function(){var n=t.getNwbLink(),a="";s=e(c.oDefaults.sSelectorVTPlink),s.length&&(s.each(function(){l=e(this),l.attr("data-vtp-original")||(a=l.attr("href"),l.attr("data-vtp-original",a))}),n&&(r=c.checkForIPHDealerLink(n.plainLink),o=c.checkForIPHDealerLink(n.entryLink),c.sendJSONrequest(c.checkForIPHDealerLink(n.queryLink))))},c.addEvents=function(){c.eventBus.on(n.CONFIG_UPDATE,c.handleUpdates),c.eventBus.on(n.LAYER_LOADED,c.handleUpdates),c.eventBus.on(n.PAGE_LOADED,c.handleUpdates)},c.initialize=function(){c.instance||(c.addEvents(),c.instance=!0)},u.initializePromise=function(t){return new Promise(function(n){c.eventBus=t,c.legacyEventBus=e("body"),c.initialize(),n("module/vtp.js")})},u}),define("module/dealermap",["jquery","doT","form/core.form","events"],function(e,t,n,a){"use strict";var i,r,o,s,l,c={zoomDetailView:15,markerSprite:"/cms4i-nemo/assets/img/maps/sprite_marker.png",markerDetailSprite:"/cms4i-nemo/assets/img/maps/sprite_marker_partner.png",markerDetailUri:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAABkCAYAAADJ9hMcAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsSAAALEgHS3X78AAAAB3RJTUUH3QMIEAIGJxOTqQAACvNJREFUeNrtmnmQFNUZwH99Tc+x7C67CAYjyLVELkVYCQaCxlDhKBNNogGNljFGyiorZRI0FLk0pVUaTcCDMqZSVDRlYrDMUUaKBPGCgEpRUEHXyCEoKlGy7O7s7hzdPd35Y17Pvn307C7rQlgyXdXVM33N93vf8b7ve6MFQcDptGnvnDkLwARmATcASwAHqD1FZfaBPwCPANsAb9ThV0oXdQGzDNgigJKnMEwo81LgZSG3qV6cBTw8SC3sYSF/N6DrB7nbXK8CLRnkQEtUIGeQA3kqUN0gB6pVgU6rrQJ0qm9mr6lEKkHqii+QWDgPq2EMmq7hvfMB2ee30rluPYWPmrEbp5G6ciH2zGnoQ2vw0+04O5vofHoDuc3b0aurSF21iMT8uZjjzi568v5DZJ/bQue69fht7cTnzCR15UJi509Crx6C39JGfsduOtc9S3777uNKfcomc7EpDdSt/iGxyQ1FIV/fC66HNXEsxpnD8A6+T37HblJfWQCA++Z+vA8+xBheT2zqRAAyf96IOWF08R1HW3He2Ft89+QJ6HW1uE37cPccIHn5fACc1/dQ+PA/mCNHYJ07DoD2R39P691rCFwvUs5Rh1/RetWQ1TCGM55YhVFXS+tda+h48hn85taS1pILL6buFytJnbMAZ2cTR1f8DPfNfcUfNXSshjEMvePWkqAtK++n8+m/4afbi7ZePYTUVxcw9O7vYU0aT27zdlp+shp3zwEo+GiWiTWlgdrbb2LIsqVoqQRHb7unnz5kGtTdczvG8HqO3PB90mt+W4IBCDqzFI40o2ni8ZiFu+dA1wgWfNy3DqBZXeNVaE2XYAD8dDuF5pYuUzHNEgxA4Ho4O5s4ct1yMs++QNXXLye56OL+AcVnnY89ezrtv15HduOWiKd0apZ/i0JzC+kHHyM2eQJVSy/rdkty8SXYs6eT/uXvcPcepHb5jWhxuwvAjlF7+zLcvQdJP/gY9uzpJBddcsxPBa5Hy8r78dPtVN9yXT+B5hXzvc6n1kcrcORw7BlTyD63lbZVa/E7MsQ/N1t5x4UErkf6ocfJ/OU5zLGjsMaN6mbS5tizya5/kfQjTxC4LolLL4r8vcJHzWQ3vFzyy+MGMs4aQZB38A4djnzI+MQZoGl4+w4S5PIU3juMMWIY6F2vM0efhX+kGf9oK+7b75beW/rhYUOLgWT/u/itafzmNszRI8sK6ryxD0yjnz7kuGiGgRazIi8HTtFXtERcmI8NXqH7PXmneF7X0exY6VzXsBdKpoeuo8VMgrxbXtBkvP8Tq/Ov/WAaxKZ9KjobfPcDgs4ssRlTMMeejTlqJO7eA+D7pXvc1/eg19cSO3c8duM08Ap4bx/q9g4KPvaMKVgTzkGvq8XZ/VZZQe05M/HTHf0Dym7cQuC6VN98TTczKkWoljYyz2wi/tlG6lf/GHSNzj9t7HZPZsPLBI5L3X0rSF52KdmXXsV7799dQAffJ/vCNhKL5lF33woCxyXz7AuRQsbnzCT+mRnRAaovQN7bh2j/1ZPYs6cz9M5bI02v7aHHwfWwG6eSe/FVci++0l3Lu5rIPLOJ2PRJ6MkE6VVrQWnItK1ai55MYjdOI/PX53F2NR07uU+dSP0DP8LvyJB+4De9AhnfqfrkHVEX8q/9E2viGKq+tpj4nJmQdyAAo6Yae9Z5VN+0hNjkhuKo1NegV6UIXA8tZmKNH03VVYtJfmk+eioJulYMGsKHjPpa4hddwJCblpYinzGsDt2OgeuhxWNYDWMYct2XqVv1A/SqFM3f/in5bTsjIWqW33hnn1IfzTKpvvUbVC+7Gi2VOOZ6+9qnyG/ZQfUt1xK7YPIx190399O2ei2xyQ0MuflqNMtS5hiX9kefxNnVRM13v4k1afyx/ryrida71pD7x46yWpFTnx6BSg7ZOJXE/LlY545DMwzcA4fIbdpK9qVXoeBjDK8nsWAe8U+fj15Xi9/WTv61XWQ3bMZ7v+g38bmNJD5/Eeb4c4pmvfcg2U1byW3eXtTQyBEkF83DvvC8UnKa27aT7IaXKHzU3KN8xw10qm8ykF51zRdPrwKv7t4VnE5QOobO6QRVnIdOI6iuiXXwQvnlM4XBCfX3nlOfEOraKwYL0L29lw+GTt09t5G6avGpDnMLxWWgPvTldJ36n6/EOPOMU9Fn/gjMBR5Ve9va6bYkWWkFV4AqQBWgClAFqAJUAaoAVYAqQBWg/1eg3v94UVrqLg2AKX0+0QPii4rUD/feClKzDzAqxMkG0mUwTSu1sb0ouGNKcAXCBGKAJX2XfwgFTj8BmtHFZw8IpPNOeD4IAj8SSMDExW5R/EOtLaAMcdQUzeri3EBugdT88IFwNbkgQPJADsgCGcAJoUwJJiZAUgJEPtoCyBJHVRvaAIMFQnhfHEOwEKRTgHQKhoymaTnAMyXNxIAh0j4UqBZAcfGgDEUE0ED6juwLBaGlvIDoEMejijyZUENxAVEjIOqBYeJ7qKnQj8r5ijFAYL60B5K2PEk7HUCLdF8InJMjVgxICJjhFP+LWi0B2ZK5qdrRFLCPa26hoKWIJnwnK/l0IDSWFzAWEFM1VCWET0pmlxTXY5KGZIhAMg9tgPwoUOBCDYXBypfMLyf5UgnIEuS2AEhIWgm/WwLGULKMgYAJIt5VEHv4Tlc6xoVMKeFHYXTOq/NKQjK9MHzboToV7WgRAmn9BAuUIBCarq9ct4Xp2dLAWnKENaWMIXTqUHhbMjMZRlecXxamvwFBUwYm/KxJUU6TAFTTN9TUJ8wMwhBoSOal95INlNNIb5qK0koopK+8I1Bk0CLSrwDwzYjYrym73odJM+qH+6qVvlwLB9yRIqCuDL4nA4VCW2LXpAhDRGRTNaANYDkSRJhgECGHDBNal2lGTGooE2iYV8UUAP0k1FZaGb/SI+YqEzBkDckphN+DSegnINXpq5/JliD7dym/1HsYXb+MNk72kl8Q4ctlB1xX8id6yaBPlmb60joIeuspqLE9iMh6gwjwE71pPYT5PjVJwgf1iGTxfwGjRcD4Ed8HTddHU1wjkD4XlArXk4FcKcVQZ2sjYh7yT0KAUM1eizD7btZjKic9Sb1hYRWU8SNduqYNMETUHlWyaFJpEQCBChRImpIrRhlAHiUtYvI7UUDyIKv9hpK21EzBk3bVtHzJFPW+Rp0Bgioogy7LWpDlMJVWUVibexEjYSgOSZlZPOjDfNWbKUXd50oyekqvoWRlarbtSg/npCajEZH2aIqjqpl6cBwOH5QJ0yqMK/UQctJnR822w5tDqLCBFxcPIlWJamkh++AxBddxNkO0MmV52CRxpGZJVuopuCqQLy50AG1CK2E5XpBGwSpTuGllcq/e2lVhNapHvMdXNOSIQU5Le9hsDLs/pb5c2FZNSzVRCJNQmo1ahMCqqfQlI5d7anqZRmO4O1J3p1305FoFUF4cc7KGHKkVFO6BOJcSUHZEG9j4mCsRgTJRqt3SQLGQjABqE8ej4tjeDSgIAkf0hnWpQ5kWjcak6NeZEXXTiehtq33tQAoGGeEWHeJ7m9hziLUjOcrlJKcLX5YV2jGkMteKyA6i+nX96WHLOZo8gbuSnzhKgzEnrxVFrQ/FpPaVrXRMLan8VTtBHyfR9cusC+kSUDiR5iUrcuS1oUggZa1IV4DMiDWhgc7Y/YiwLmcwPmVW73oEigAzIwpCGPilSVlLckrWI0ifgQbbVvmfQgWoAlQBqgBVgCpAFaDy238BUxBuU8uF3bsAAAAASUVORK5CYII=",markerUri:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAYACAYAAABhPPhzAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABh0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzT7MfTgAAABZ0RVh0Q3JlYXRpb24gVGltZQAwOC8xNi8xMCwi7ioAAAQRdEVYdFhNTDpjb20uYWRvYmUueG1wADw/eHBhY2tldCBiZWdpbj0iICAgIiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+Cjx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDQuMS1jMDM0IDQ2LjI3Mjk3NiwgU2F0IEphbiAyNyAyMDA3IDIyOjM3OjM3ICAgICAgICAiPgogICA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogICAgICA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIgogICAgICAgICAgICB4bWxuczp4YXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iPgogICAgICAgICA8eGFwOkNyZWF0b3JUb29sPkFkb2JlIEZpcmV3b3JrcyBDUzM8L3hhcDpDcmVhdG9yVG9vbD4KICAgICAgICAgPHhhcDpDcmVhdGVEYXRlPjIwMTAtMDgtMTZUMTE6MTk6NTRaPC94YXA6Q3JlYXRlRGF0ZT4KICAgICAgICAgPHhhcDpNb2RpZnlEYXRlPjIwMTAtMDgtMTZUMTQ6MzI6MDFaPC94YXA6TW9kaWZ5RGF0ZT4KICAgICAgPC9yZGY6RGVzY3JpcHRpb24+CiAgICAgIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICAgICAgICAgIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyI+CiAgICAgICAgIDxkYzpmb3JtYXQ+aW1hZ2UvcG5nPC9kYzpmb3JtYXQ+CiAgICAgIDwvcmRmOkRlc2NyaXB0aW9uPgogICA8L3JkZjpSREY+CjwveDp4bXBtZXRhPgogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIJ/ii10AACAASURBVHic7Z13fFP1/v9fJ6sr6U6B0jZddKUjLauMQpE9lSmX60C/4kVBvThQ1Cte5arI5QLKEgQRUBAsoyyBi4xCoSCrBREsFIS2lNJ0pG2SZrx/f3TYYpOT5sTcx6+c1+PB4wFN+nn2c04S3s9+FkNE+F9E8D+h/i/Bola+9mdde6b5Px7s8Z95w1u0/fDdYx7stLT2dmo1l3++goKbtxAgl6NH964tHissKkb2yRzI/f2Q3j/NtgaJqPmfVrNk6UoK7ZJI3XsPIEVkPM16/W0yGI1ERLR5SwYpVankJQ+hMeMmW2qiMU0s1ktdfPculixdidSe3XH44G68PHM61qzbgP/+9zAAYMO33yEuNgahoSEQiyW2XkB2cN6ln6FWlyO1Zzd4uLtj+NDB8PBwx5FjxwEASxcvwFerl8HVxQVms9lx4IKbv8FsNsPH2xsAIBGL4eriivKKCgBAqCIEDMPAZDLZDLUJLBDUP4Ue+DRlmn30tqWnNoPDw0IhFAigVpcDAPR1ddBqa+Hr59NmWJvACfFxCAiQ48fDx1B8twTfbt4Kvb4OQwY+0uJ5RqOxTZebFRwg98e7c95AUfFdDBkxFjsy9+DNN2ahf78+Tc9hGAa+vr7w8vKyGcw8UPpY/G+xvKICv+bfQFDnQAR26tjiMSKCRqOBQCCAVCq1ymsz2EFpAre81Mdn/Mnc39MS/PNy4PCT/wMwAPy6ETgx838ABoDLy4DjL/wPwADw80rgxyf+NHDL/48F4paP5n8DuHcAujwF+CU5FPzg28lpefhqLh7stPC26LTw4PYP5myLVVUaZJ04idLS+wgJCUJqj25wd3dnb9BeWzSbzXSvtJQGDX+UwqNVNHz0BAqLTqKJk5+mKo2G1RZZwUXFxRQeo6LJT/wfVdfU0MLFS8nTP5iOZp2gnbv2UKeQaFq7biMREc394GPy9A+mY1knuGuqJVvc98NBDByQjvOnj+GpJyb/fu+EQohEYistNjyP7QmWbFFdXg4PD3d4eNTfzxPZOVi/cROSVYmIV8awgh1ii0eOZuGJqdPQOTAQyz9fCJlMxh1syRb9/HwBAJm79+H5GX/HwAHp2L8nA1FdIlmhNoEt2eKjo0dgwzebMfW5FxGmUGDE8ME4fPQ4tu/c3fRDWotN7rTx2y1Y9Nly1NXVgYjw5F8n483XX8GHHy3Ath27IJNJodPpYDKaYDSZsH7tCiQlJrTKaxMYaN0WdTo9DAYDGKblN7u7uUEoFDoG7KDwttgsvC3+SeFtkQfzYIeFt0WnhQe3fzBnW6wzGHDmp3O4X3ofwcFBSFYlgmEYKy01hIstVmk0NGnKVAqJUFLagGEU2iWRXpo1m/R6/Z9ni4ePZtGZn85RZGwyzf/3YjIajTTjldcpICiSfr5y9c+zxR/2H0JSYjzOnjqC2a+9AiJCTU0NZFIpZDKrIzEAONhieUU5xGIxxGIxvvr6GyxdvgrlFZX41wfvIqhzICvYblts/tEbr4zFqJHDIJV64FhWNnQ6HSuYtceWbFEu90dZmRql98vQvVsKundLgclkwqov12Hmi89DGWfdke22xcdGj8CRY8fRs+9ALPpsOao0Gvx2+w7EEglcXV1Ze2zT22nDN99RSs/+FJ/ci5SqVPpkwWIiIiorU9OUp6ZRRIyKuqb2p4SU3rRw8VIymUysr2qHjC2eO38RZWo1EuKV6NghwFo/eVtsCG+LTgcDvC06PA9fzcWDnRbeFp0WHtz+wQ6ZiQoAGk019u0/iA4BAS1mt1mMLeVtqzNRDcYWz/nnvPnk5tWRxk16wlIzLcpbu21xz74DTc/JPnWawqNVFBKhpClPPWcT2G5bPNowE1Wn0+Ott+ciKVEJXx8fm+do2j0TtbKyCgDw+bIvoNXq8Pabr8HoyOmRlmzR1c0VFy7mYemKVXht1kwEBMhRV1cHg8GAWq2WO7h1W9SiQ4Acu/fuR1WVBvMXLMbIRydBIBDg9Jlz+OTTRaxg1rdTc1ucPGl8gy3qkda3N/x8fRAT1QUCgQClZWVYsHAJQhUheHT0CFaw3bb4oBGWqcupe+8B9PyLr9j0qnaILQL1M441mmoIhUJIpR6WmuFtsSG8LTodDPC26PA8fDUXD3ZaeFt0Wnhw+wdzskWdTo+8S5dhNBoB1FesYrEYyapEiEQsTdtS3rZmiyaTiW4U3KQoZVcKCosjRWQCdQ6NocRufai8vIK1vLXbFg8dPkq3b98hRWQ8fTT/P3Sj4CZdv1FAV6/lk9FobK2pFmC7bfFY1gkYjUYwDIOAAH9cuJiHi7mX0Dmwo6X5ei1i99hiZWUVarU66PR6LF2+GsFBnXHp8s/oEhmBzRvXwsfH22q7dtuiyWyGp0yGUSOG4aUZf0Pmtk14d84bOJlzBgcPHWFr1v6xRZlUik6dOuDzRfObhvRioqMgEAhQWFTECrZ7bHHMqOG4eu1XxCX1xDtz56H0fhk2b8mAUMCgR7c//nLmD7Hl7WRpbFGn09Frs9+hLnFdKSGlNyWk9KZ5Hy1w3thiwc1bKCwsQpfICHTgxxYthLfF+vC2yNsiD+bBNoS3RaeFB7d/sEPGFq9ey8f16zfg6+uDlGQVJBL2xXQcxhYNRES0cdMWiohRUa+0wRQUHkeTpkwlTXU1a3lrty0e+O9hqqyqoihlV3pu+stERLRy9Vc0cOgYuvZrPivYbls8deo0cnMvo0ytxiPpaTiVcwZxMdHI3LYZXSIjWK+03bZYpanGr9evw9XFBV+u3QAiwo2CAqQkJ2HV8iXw9/ez2i6HmaiAtlaLmlotVEkJ2JO5BTNemIb9B3/E1m072JrlsMuNrw+8vb1gNpnQp3dPuLm6IrVHd0jEYpuWD9ptiwPS09Czeze4urpi/8FDUJeXY+8PB0AAUnt2ZwXbbYvmhscWLVlGSlUqJfdII6Uqld6ZO8+m34E4xBbvlpQgP78ACkUwgoM6W+snb4sN4W3R6WCAt0WH5+GruXiw08LbotPCg9s/mJMt3r5TiJu3foOocYCrYb1ifFws+4I6W8rb1myx8evecgUpIuNJEZlA4dFJFKiIoZzTZ1nLW7ttcf+BQ3Sv9D6dv5BLuXmX6NLlKzTj5dcpPDqJbt76jRVsty0eOnwUcn8/qJISkBCvRER4KHLOnEWfXqlQhASz3joOM1ErWzzv4KEjuFFwE09MmcQKtQlsy7pFAFi/cTOUcdFIT7dtw12H7Imam3cJWcezMXnieEjENvz+wxawLXuirl6zHjKZDOPGjrEJCoCDLZrrfbFMraZe/QbT31+bY+nbW31Vc7ZFg8EIjUYDqdQDEgnrFsO8LTaEt0WngwHeFh2eh6/m4sFOC2+LTgsPbv9gzmOLOp0O2SdPo/huCeRyf3TrqoKvjw3nENhS3ra6y43JTOUVlTTu8ScpIkZFQ0eOo7CoRBo4dAzdu1fKWt5y2hN1z779JPPtTDsy9xARUcb2TPL0D6aM7ZmsYLtt8fCRLATI5XBzd0dRUTGqa2pw714pZFIpgoOtjsQA4DC2WHz3Lrp1TcY7b76Kj+b/BytWr0W5ugIvzfgbundNYQXbbYsSsQRFRXex54eDiI2JwvRpzyAuNhqZu/bi+o0CVrCdM1G1CAzsiB2Ze3Dy1Gkc2LMNqT27Q5WYiOGjx2Pbjt1449WXrHeIDdy6LeoxaGA6PD1lMJvNOHP2PKqrq5Fz+ieYyYyAAH/WHnOaiaour6Cpz71IYVFJlNKzH4VHq+jZaTOoqqqK9VXtkLHFi7mXcKewCIqQYMQrY631k7fFhvC26HQwwNuiw/Pw1Vw82GnhbdFp4cHtH8zZFg0GA05k56CwqBjBQYHoldoDYltGYmwpb1tdt2g2U3V1DU156jkKj06i4aMnUGhUIk2fOatplqq18paTLX6/bSd5+ATS8i/WEBHRB/Pmk39gBOXmXWIFc1i3mI2Cm7cgEgmbNuUMDVOgTl+H3LzLrFfa/hM01GpMHD8WEokEy1asRnl5BbZm7IDERYKKikqWVjnYYq1Wi16p3bFq+WKUV1Ri5aq1cHN1hVgsgre39cWSNoGtnaCh0+kxbOhg7Mvcin27vsewIYOg1+sdM4xraWxx7JhR2PvDAUREq7B6zdeoqtJg5+69CJDLERMTxQrmZIuFRUU0euxkioxNppSe/Sg+uRet2/CtpWZavKo526LZbMb5C7moqKxEQrwSAXKrbszbYkN4W3Q6GOBt0eF5+GouHuy08LbotPDg9g+22RbLyyvw45Fj8HB3x+BBA1psr3Lu/EUU3y1BUOdAJCXG29agLeXtzl17KTVtEPl2CKNeaYOotraWiIjMZjPN+2gBBYcrqVtqOoVEKOn9Dz8ms9lSS22QNgBYu24DvLw8ER4eComLS9PXL+TmYcmylZgwbgx+PJCJkcOHYuXqr/DL1WusbbKCiQj/+fQjbP32a3h4uDeczl7/IXT4SBYMBiPGjBoBmUyGEcMGQ6vV4WjWCe5ghmHqeyoR/+FIeLW6HC4SCby8PAEA/nJ/iEQilJaWcgc3xtbdXRt+XMeBW4tc7g+dXo8ytRoAcPduCYxGY6sbeXICG40mGI0mNH7eD3qkP9xc3bD5uwwUFhbh+207IZN6YEB/9vm3Nr+PGYaBb8PuRI0n3SjjYvHeO29g+RdrMHTUeIjFIsyZ/RrCw0PZ27NV2ogImupqAIBMKm1xzE7JvVLcvn0HYWEK+Pn6WuW1Geyg8LbYLLwt/knhbZEH82CHhbdFp4UHt3+wQ2yxsKgY2SdzIPf3Q7oNpS0AbrZIRLR5SwYpVankJQ+hMeMmWxsIaWGLNvXYki0SETZ8+x3iYmMgEosgFrMutLK9x2azma5fL6CqKg31HzSS+g4Y1tRjk8lEBTdvUXV1DfXsO5DGTrR6Xkjb/NiaLQoEAoQqQsAwzB8eY4tDbLFtJtlGsKNj89sJQIMpWnrM2KbLzckWWzzm6wsvLy+bwQ6xRSKCRqOBQCCAVGp1wTNviw3hbdHpYIC3RYfn4au5eLDTwtui08KD2z+Ysy1WVWmQdeIkSkvvIyQkCKk9usHd3Z29QS62eLfkHg0a/iiFR6to+OgJFBadRBMnP01VGg13dwIs2+KPR47h8uVf8O6c17E3cyue+utk7P/vj7hwIZe1TdZLTQ1ji3K5P0aPm9zCFkYNH4JH+qe12IZUJBRCJGKf9MsKbrRFvV7/B0WRyWSQyWQAgBPZOVi/cROSVYmIV1o/px5wkC0eOZqFJ6ZOQ+fAQCz/fGHTD+MQsKXs3LUPz8/4OwYOSMf+PRmI6hJp0/fZObZY/x/Nqi/X4dlpLyJMocCI4YNx+OhxbN+526bNWDnZ4t2SewgJCYZWp8MnCxbBZDTBaDJh/doV8PW1vgaZky3q9HoY6gyNu2M1fbO7m5uls2F4W2wIb4tOBwO8LTo8D1/NxYOdFt4WnRYe3P7BnG2xzmDAmZ/O4X7pfQQHByFZlfiHMYtWw8UWKyoradKUqRQSoaS0AcMotEsivTRrNun1+j/XFi9cvIRz5y9ixgvTcPjgbowcMQTfbd2G6zdusrbJyRZTe3TD2VNH4OnpCaPRiJqaGsikUvatZ20BW7NFFxcJXFwk+Orrb7B0+SqUV1TiXx+8i6DOgaxgh9hivDIWo0YOg1TqgWNZ2dDpdKzttWmI78HcK70Ptboc3buloHu3FJhMJqz6ch1mvvh807JRS7HTFuuz/8Ah9Ow7EIs+W44qjQa/3b4DsUTSdPCjtXCyxRHDBmPUiGFYtmI1vtm0BXV1Brz29xkICw1hb88RY4vnzl9EmVqNhHglOvLnLVoIb4v14W2Rt0UezINtCG+LTgsP5sFNKS+vQMb2TPyw/7+tTpHTaKqx5fvtOHqMfSEdAO4zURvzz3nzyc2rI42bZHVupmNssTEnc87g6w2bIPf3s6mYB+xet/h7dDod3np7LpISlfD18bF5jianmagA8NmyVdBqdXj7zddgbMP0SE62eCrnDJYuX4XXZs1EQIAcdXV1MBgMqNVqHQdumfrP+x2Ze6DRVGH+gsUY+egkCAQCnD5zDp98uoi1BTtnotZ/3k+eNB7dUpIhEAhQWlaGBQuXIFQRgkdHj3AcuDVbVCUlQJWUAABQl1dgzVfrERsbha4pKvb2HGGLQP1rQKOphlAohFTqYZHXZrCDwttis/C2+CeFt0UezIMdFt4WnRYe3P7BnMYWdXo98vIuw2g0AqgvCMViMZJViRCJWJrmYovXrxdQlLIrBYXFkSIygTqHxlBitz5UXl7Baouc1i0ajAbo9Xq8OP05TJ40DkQEo9HkmCE+sjK2aDAYAYZBQIA/LlzMAwAMeWD5qN1ga2OLer0eep0eS5evRnBQZ1y6/DO6REZg88a18PGxvj0pJ1v08fbGqJFD8dKMvyFz2ya8O+cNnMw5g4OHjrC2x2lsMTgkCJ8v+rTptwAx0VEQCAQoLCpi/V5OY4u5uZcQl9QT78ydh9L7Zdi8JQNCAYMe3bpaaaU+nGwxLi4G4x4bja3f78Cu3fsAAK++MhO9Uruzt+cIWyy4eQuFhUXoEhmBDvzYooXwtlgf3hZ5W+TBPNiG8LbotPDg9g92yC43V6/l4/r1G/D19UFKsgoSiYNO0LA2trhx0xaKiFFRr7TBFBQeR5OmTCVNdfWfO7Z4t+QePpg3HwPS+yH72AG8O+cNlJWpUVx8l3uPre1ys2//f8mvYxh9u3krnTx1mo5lZVNNzR9HWu3yY2u2eKPgJlxcXPDl2g0gItwoKEBKchJWLV/SYhFla7HTFus/drW1taitrYUqKQF7MrdgxgvTsP/gj9i6bQdre3a+neo/dmWeMpjMZvTp3RNurq5I7dEdErHYpuWDnGwxtUd3uLm6Yv/BQ1CXl2PvDwdAAFJ7sksbJ1tMiI/DnNmz8OVXGzBo2KOoqzNg5ovPI71fX/b2HGGLd0tKkJ9fAIUiGMFBVk8Q5W2xIbwtOh0M8Lbo8Dx8NRcPdlp4W3RaeHD7B3OyxTt3ClFw6zeIGs2xoQCMj4tlH23jYouLliwnb7mCFJHxpIhMoPDoJApUxFDO6bPc3QmwbIt/mTwB6f37QigUQCAQYsUXa7Bv/0F06CBnb5SLLTaPVqulbr0G0JNT/2aTLXKeidqYg4eO4EbBTTwxZZItF9Ex6xYBYP3GzVDGRSM93bYNdx3ydsrNu4Ss49mYPHE8JLacIAoH7Ym6es16yGQyjBs7xua2OO+Jqi4vx9nzFzBqxFC2pYMt2+NqiwaDERqNBlKpByQS1i2GeVtsCG+LTgcDvC06PA9fzcWDnRbeFp0WHtz+wZzHFnU6HbJPnkbx3RLI5f7o1lUFXx/r+ygC4GaLanU5jX/8SYqIUdHQkeMoLCqRBg4dQ/fulbK6k03gR8f/hYaOGkfdeg2g/oNGNoG3fL+dZL6daUfmHiIiytieSZ7+wZSxPZO7tJGVdYsBAXK4ubuhqKgY1TU1uHevFDKpFMHBVkdibL/UREQ6nY76Dhj2B01d/PkKCgqLo4SuvSkoLK7pVHfOPW5Ma7Z489Zv2LvvAGJjojB92jOIi41G5q69uH6jwHE9rq2tbdZjLRERzf/3YpL5daaTp04TEdGJ7Bzy9AuiTxd+5rgeA388b9HbywtmM+HM2fOorq5GzumfYCYzAgKsnlcPgKMtThj/KE7mnMGiJcuxbv03qKiowqTxYzHu0VHs7ZEDxhYv5l7CncIiKEKCEa+MtcprM9hB4W2xWXhb/JPC2yIP5sEOC2+LTgsPbv9gzrZoMBhwIjsHhUXFCA4KRK/UHhDbMhJjS0FvyRarNBqa8tRzFB6dRMNHT6DQqESaPnMWGQwGxxT0lsYWt+/YhZ279uL1V1/G3sytePapv+L7bZm48stV1jbttMX6D6GCm7cgEgqbNuUMDVOgTl+H3LzL3MGtjy3Wfwj169sHEokEy1asxs5de7E1YwckLhJUVFRyBzemNVsckJ6GL5YvRnlFJVauWgs3V1eIxSJ4e1tfLNkmcGvRarUYPmww9mVuxb5d32PYkEHQ6/VQhAQ7FvzgTNRtO3YjIlqF1Wu+RlWVBjt370WAXI6YmCjWtjjZYnq/PuiaosLCxUuxeu3XqKsz4K3Zs+Dv58veHldbNJvNOH8hFxWVlUiIVyJAbtWNeVtsCG+LTgcDvC06PA9fzcWDnRbeFp0WHtz+wTZVmbVaLbKzc3D7TiE6dAhA39494enp2fT4ufMXUXy3BEGdA5GUGG8bmc0WNdXVNOEvT1NIRDyNGDOBopRdafCIsVRUfJeIiOZ9tICCw5XULTWdQiKU9P6HH5PZbEkW2zC2eO5CLim6JNB7//wXERFt+u578vDuRGu+2kC/5t8geecImvX6HKqqqqIXZr5KHUOi6OcrV7lralxMFE5l/RdzZr/acIUARiCAu7s7Dh/NgsFgxJhRIyCTyTBi2GBotToczWLfgpYV7OLigo4dAuDq6orLP/+CTxcuQXSXSAweNABFRcVwkUjg5VV/v/3l/hCJRCgtLWUF26wweXmX8fhfn4VAyODLNSvh5+sDg8Fg4dnsx7PY9HY6cvQ4nv6/FxAXF42De3c07QAq9/eHTq9HmVoNALh7twRGoxGBnTpyB+/ddwCTn3gWEokEkyaMxYXcS/h+204U3LyFYUMGws3VDZu/y0BhYRG+37YTMqkHBvRnn3/LeqnvFBYhIEAOFxcJFi5aCpPJhOqaWrz/jzcxedJ4vPfOG1j+xRoMHTUeYrEIc2a/hvDwUFYwq7TV1dVBr69D8y1QiQAXV5emCb4l90px+/YdhIUp4OdrVVF5W2wIb4tOBwO8LTo8D1/NxYOdFt4WnRYe3P7BDrHFwqJiZJ/MgdzfD+k2lLYAuNhiMRERbd6SQUpVKnnJQ2jMuMkWNbHN0vZr/g2c+ekcpj71F+zZuRX/fG8OsrNPYcfOPQCADd9+h7jYGISGhkAsZl1o1RTWS91oi94NYtZoiyJx/bcuXbwAcn9/DBw2xubTMwA7bTGqSyRGDBsMAAhVhIBhGKtrGluLXbb49ZqV6Bz4+2GObelpYzjZIpfYbYsPHthpNBrbdLnttsW5785GRIMVMgwDX19feHl52Qy22xZdXV2aJiEQETQaDQQCAaRSqwueeVtsCG+LTgcDvC06PA9fzcWDnRbeFp0WHtz+wZxtsapKg6wTJ1Faeh8hIUFI7dEN7u7u7I3aa4v3SkupTK2mQcMfpfBoFQ0fPYHCopNo4uSnqUqjYbVFu8cW163/lnbt+YE6hUTT2nUbiYho7gcfk6d/MB3LOsEKttsWDUYDBvRPw/nTx1psQyoSCiESOWjSb2MuXb5Cqu5plNKzP925U9jiseMnTjUtEa2qquJ+qRuTm3uJYhN6kFLVk346e77FY4ePHKPQLgnUN30YXb32q7Vm2gY+fCSLkrun0fjHn6SiouIWj+3I3EtdlCn0f8+/RDU1NdagLcCsCrN33wE8+/xMhCpC8OrfZ0Amk6GmpgY9unXFfw8fwRtv/gPduibjb9OegYuLC+rq6tA/rQ98fVtdCtz0P5Tdtjj/o/dRUV6JkJBgaHU6fLJgEUxGE4wmE9avXWEJ/PtPwNZjy7boCrPZjLq63x9r/GZ3NzdLZ8PwttgQ3hadDgZ4W3R4Hr6aiwc7LbwtOi08uP2DOdtincGAMz+dw/3S+wgODkKyKvEPB2+3GraC3pItlty7RzU1NTRpylQKiVBS2oBhFNolkV6aNZv0ej13k7Bki2vXbaCz5y5QZGwyzf/3YjIajTTjldcpICjSppmodtuiyWRGvDIOZ08dgaenJ4xGI2pqaiCTSm066NEhtrh23UZK6dGPwqKS6NvNW6010fY9X/LyLmPi5KdhMNRh1fLF6Nz597HFeGUsRo0cBqnUA8eysqHT6RzTY0u2WFJyj678cq3p3++89yHJAyPo0uUr3HtsaWzxt9t38OORLPTsOxCLPluOKo0Gv92+A7FE0nTwo7XYbYvz/vkORo8cil17hmHZitX4ZtMW1NUZ8NrfZyAsNIQVbP9MVBdJ0x6o585fRJlajYR4JduGrLwtNoS3RaeDAd4WHZ6Hr+biwU4Lb4tOCw9u/2CHzEQFAI2muv4siYAA9O/Xh71RtoLe4kzUB4aB/jlvPrl5daRxk56wSWHstsWlK1Y1PSf71GkKj1ZRSISSpjz1nE1gu21R0jDdVafT4a235yIpUYmCgls2z9G0fybq8CEAgM+WrYJWq8Pbb74GY1tmo7Jd6sa0NrZ48tRpCg5X0uYtGXTrt9sUpexK4x9/kmpaOVOkzfeYyLItvvn2XPKWB1Ny9zSKT+5FMQndKThcSf94/1+sYLvHFpNVSdBoNMjPvwGBQIDSsjIsWLgEgZ06YdG/P7I0TZb72OLcd2fjL49PgCopAQCgLq/Amq/WIzY2yqa5uQ6ZiQrUzzjWaKohFAohlXpY5NkMdnB4W2wW3hb/pPC2yIN5sMPC26LTwoPbP5iTLep0OuRd+hlGoxFAfY0uFouRrEqESGS9adZir7qmBs9Mm4HTp88iXhmD/OsFUChC8M26VdDpdBg0/DHU1mohFAphNBrg5++Howf3wNu71UVXv7+X2UzCki1+ufZrKiwqJkVkPH00/z90o+AmXb9RQFev5ZPRaGQ1Cbtt0cXFpX7PF4ZBQIA/LlzMAwAMabY1rdXY4k6NaT62WFp6n3LzLlHH4ChSdU+j0WMnU1hUIg0ZMZbU6nLWHnOyxfzrN+i56S/RmoZJv2u+2kAyvyD6but2x4At2WJdXR1ptdqmf5/IziEveQj9Z8kyVrDdY4u3bt3GlV+uIS6pJ96ZOw+l98uweUsGhAIGPbp1Zb3FdtviB3PnYNxjozHusdHY+v0O7Nq9DwDw6isz0Su1OyuYw9iiCySS+nK44OYtFBYWoUtkBDrwY4sWwttifXhb5G2RB/Ng6IwkqAAAIABJREFUG8LbotPCg9s/2CFji1ev5eP69Rvw9fVBSrKqqQi0GraCnm1sceOmLRQRo6JeaYMpKDyOJk2ZSprqau4mYckWv1j9FVVpNBSl7ErPTX+ZiIhWrv6KBg4dQ9d+zWcF222LMpkUeXmXUVamxiPpaTiVcwZxMdHI3LYZ7u5u3C918zS3RbW6nFav+ZoCFTH0yJAxNGDwaFJExtPYiX+l0tL7rD22eyaqj483KisrUVtbC1VSAvZkbsGMF6Zh/8EfsXXbDtb2OO1yI5PJYDKb0ad3T7i5uiK1R3dIxGKo1eXcwZZs8ebN35DWtxfcXF2x/+AhqMvLsfeHAyAAqT3Zpc3+PVHfewuTJ47DnNmz8OVXGzBo2KOoqzNg5ovPI71fX1awQ/ZEvVtSgvz8AigUwQgOsnqCKG+LDeFt0elggLdFh+fhq7l4sNPC26LTwoPbP5iTLd6+U4ibt36DqHGAq6EijI+LZV9Qx6YwlmxRXV5Oy1asJm+5ghSR8aSITKDw6CQKVMRQzumzrApjty2uWLWG7t8vo/MXcik37xJdunyFZrz8OoVHJ9HNW7+xgu22RYFAAD8/X/g1HH+n0+mQc+Ys+vRKtekQQPvXLRa23OUmc/c+8u0YRvsPHLLWhGPGFptnwuSnKe2RYaSvq3Mc2NouN0REF3PzqENQF1q2YrU1aAuwQ/ZEXb1mPWQyGcaNHcN+bxvCeU9UdXk5zp6/gFEjhrItHWwRzjNRDQYjNBoNpFKPpnWM1ng2gx0c3habhbfFPym8LfJgHuyw8LbotPDg9g/mPLao0+mQffI0iu+WQC73R7euKvj6WN9HEQCXXW5KSaOppvGPP0kRMSoaOnJc00ad9+6VcjcJa3ui7tt/kGS+nWlH5h4iIsrYnkme/sGUsT2TFWz/CRoiIeRyOdzc3VBUVIzqmhrcu1cKmVSK4GCrIzG2XermaW6LhYVFRES0+PMVFBQWRwlde1NQWBx9smCxtSa4jy0GBnZCwc1b2LvvAGJjojB92jOIi41G5q69uH6jwDE9tmSLnyxYTDK/znTy1Gkiqp+J6ukXRJ8u/Ix7j63tchMg94fZTDhz9jyqq6uRc/onmMmMgACr59UD4LjLzeMTx+HY8WwsWrIc69Z/g4qKKkwaPxbjHh3FCnbILjcXcy/hTmERFCHBiFfGWuXZDHZweFtsFt4W/6TwtsiDebDDwtui08KD2z+Ysy0aDAacyM5BYVExgoMC0Su1R4vNKyyGraC3aIsl90ir1dKUp56j8OgkGj56AoVGJdL0mbPIYDCwFvT22+KGb2nbjl3k4RNIy79YQ0REH8ybT/6BEZSbd4kVbP+6RYkEBTdvQSQUQhkXAwAIDVOgTl+H3LzLSIhXWm2XFdy4yw2AFrvcDBn0CH7+5SokEgmWrViN8vIKbM3YAYmLBBUVlay32G5b9PX1Qd/eqfhi+WKUV1Ri5aq1cHN1hVgsgre3N3uDbPeYyLIt1tTUklana1qLunbdRvLtGEpZx0+y3mNOtrh77w+IiFZh9ZqvUVWlwc7dexEglyMmJoq1w3bb4r8+eBcDH+mPrikqLFy8FKvXfo26OgPemj0L/g2D2dbC2RbNZjPOX8hFRWUlEuKVCJBbdWPeFhvC26LTwQBviw7Pw1dz8WCnhbdFp4UHt3+wTbZoMplw7vxFFBYVIyBAjh7dukIk+n17lXPnL6L4bgmCOgciKTHeNjJbQa/T6en5F16hoLA46vfICIqIUdFTz06nqqr6MxXnfbSAgsOV1C01nUIilPT+hx+T2Wypnm+DLeZfv0GJXfvQrNffJqPRSAsWLiF370509Nhxunotn+SdI2jW63OoqqqKXpj5KnUMibLpBA3We6wICUHWj/vw7/kfQigUQlNdA6mHBzp16oRDh4/CYDBizKgRkMlkGDFsMLRaHY5mnWC90qxgkUgIT08ZDv14FL36DcbXGzZh7rtvoktkOAoLi+AikcCrQWH95f4QiUQoLS3lDm5MWJgCY0YNR0CAHFknTqK2ttbKNknsx7Owvqo1mmoUFhUhJCQYc2a/ig4BAXj51dk4e+4igoM7Q6fXo0ytBgDcvVsCo9GIwE4dWcGsPb76az76DRyBt9/9ADU1tbhRcBNCoRCurhIM6N8Pbq5u2PxdBgoLi/D9tp2QST0woH8aK5j1VV1bW0vTZ8yiyNhk6tYrneKSetI/533S9AuW5Su/pPjkXqRUpZKqe19atuJLi++l5iybpe3nK7/g9p1CRHWJRFioosVjJfdKcfv2HYSFKeDna1VReVtsCG+LTgcDvC06PA9fzcWDnRbeFp0WHtz+wQ6xxcKiYmSfzIHc3w/ptpS2AHdb3Lwlg5SqVPKSh9CYcZOtlbZtk7Y7hYU4dfonTBz/GH48kInp057B99t24mTOGQDAhm+/Q1xsDEJDQyAWsy60agrrpW60RanUAwKBAJrqGnh4eEDu7wcAWLp4AeT+/hg4bIzNp2cAHGwxWZUIAAhVhIBhGJjacnqGLeDGPGiL5eUVTY+1pac2gzWaavxy9RoCAzthzuxXMX3aM9i1Zx+yT51uM6xN4NZsUSQUQiZtuczXaDS26XKzvriUsdEY/9gY7Nm3HydOnkJtrRav/b3lvqcMw8DX1xdeXq1uK9xqHGKLRASNRgOBQACp1OqCZ94WG8LbotPBAG+LDs/DV3PxYKeFt0WnhQe3fzBnW6yq0iDrxEmUlt5HSEgQUnt0g7u7O3uj9tpibU0t3b9fRoOGP0rh0SoaPnoChUUn0cTJT1OVRsNqi3aPLR4/cZJ27tpLnUKiaW3DsQ5zP/iYPP2D6VjWCVaw3bbo4eEBVVICzp8+Bv8GcwQAkVAIkcgBk34bc+Dgj5SaNogUkQm0tJW9XY6fONW0RLSqqoq1x3bborqZLR45moUnpk5D58BALP98IWQyGfceV1Vp6MovV5sOb1zz1QZy9+lEe/btJyKiHZl7qYsyhf7v+ZeopqbG2kVrW49bt0URAgICsOGbzXh22osIUygwYvhgHD56HNt37rZpM1a7bTFFlYgf9h9ESEgwtDodPlmwCCajCUaTCevXroCvr/U1yJxsUafTw2AwNM1Sbfxmdzc3S2fD8LbYEN4WnQ4GeFt0eB6+mosHOy28LTotPLj9gznbYp3BgDM/ncP90vsIDg5CsioRDMM+WdBuW6ypqSFNdTVNmjKVQiKUlDZgGIV2SaSXZs0mvV7PWtDbbYvHsk7QmZ/OUWRsMs3/92IyGo0045XXKSAo0qaZqHbbolQqhTIuFmdPHYGnpyeMRiNqamogk0rZt5615VI3xpotrl23kVJ69KOwqCT6dvNWa804whZ/96N4ZSxGjRwGqdQDx7KyodPpuPfYki3u++Eg3b9fRld+udb03Hfe+5DkgRF06fIV7j22NLbYoUMAjhw7jp59B2LRZ8tRpdHgt9t3IJZI4Orqyr3HlmaiGo0mUqvLacpT0ygiRkVdU/tTQkpvWrh4KZlMJtYeO2Rs8dz5iyhTq5EQr2TbkJW3xYbwtuh0MMDbosPz8NVcPNhp4W3RaeHB7R/skJmoQP3cvn37D6JDQAD69+vD3ihbeWvJFisfGNT657z55ObVkcZNesJSadu2gt7iTNSTv89SPJlzBl9v2AS5v59txTy4zERt2PdDp9PhrbfnIilRiYKCWzbP0bR7JmpKcn1F8tmyVdBqdXj7zddgbMP0SLttsaa2Fj+dPY+ly1fhtVkzERAgR11dHQwGA2q1WvYG2V5crdmih08gHT12gj78aAF5y4MpuXsaxSf3opiE7hQcrqR/vP8v1hcX6z2++ms+RoyZgCmPT8S/PvhH07pFkUiEcY+NRkxUFwgEApSWlWHBwiUIVYTg0dEjuPfYki0+eChJmbqcuvceQM+/+IpNbyeH2CJQP+NYo6mGUCiEVOphqRneFhvC26LTwQBviw7Pw1dz8WCnhbdFp4UHt38wJ1vU6fTIu3QZRqMRQH3FKhaLkaxKtLJJSX1Yiz29vg4vz5qNvT8cRHhYKAqLitCndypWfL4QpffLMGTEWNTWaiEUCmE0GuDn74ejB/fA27vVRVe/v5fZ6mpLY4tHjmbR7TuFpIiMp4/m/4duFNyk6zcK6Oq1/Kb9MzmZhGVblEOv1wMMg4AAf1y4mAcAGDJogKX5ei3D1uPGtDa2ePbcBeoYHEWq7mk0euxkCotKpCEjxpJaXc7aY7ttsbKyCj4+3hg1cihemvE3ZG7bhHfnvIGTOWdw8NAR7j22PBP1ABmNRtJqtU3PPZGdQ17yEPrPkmXce2xpbFEu98PVa/mIS+qJd+bOQ+n9MmzekgGhgEGPbl2599jy2KKRdDo9vTb7HeoS15USUnpTQkpvmvfRAueNLRbcvIXCwiJ0iYxAB35s0UJ4W6wPb4u8LfJgHmxDeFt0Wnhw+wc7ZGzx6rV8XL9+A76+PkhJVkEiccBiOraxxY2btlBEjIp6pQ2moPA4mjRlKmmqq1nLW7tt8dDho1RZWUVRyq703PSXiYho5eqvaODQMXTt13xWsN222DkwEBcu5qKsTI1H0tNwKucM4mKikbltM9zd3bhf6sa0ZovLV35JgYoYemTIGBoweDQpIuNp7MS/UmnpfdYe22WLx0+cRG2tFnV1daitrYUqKQF7MrdgxgvTsP/gj9i6bQdre3btifrSq7Nx9vwFyOVymMxm9OndE26urkjt0R0Ssdim5YN226Kriwt6dO8KN1dX7D94COrycuz94QAIQGrP7mzNct8TddGSZaRUpVJyjzRSqlLpnbnzbPodiENs8W5JCfLzC6BQBCM4yOoJorwtNoS3RaeDAd4WHZ6Hr+biwU4Lb4tOCw9u/2BOtnj7TiFu3voNosYBrob1ivFxsewL6tjKW0u2qNPp6fNlX5C3XEGKyHhSRCZQeHQSBSpiKOf0Wdby1m5bPHjoMJWW3qfzF3IpN+8SXbp8hWa8/DqFRyfRzVu/sYLttkVfHx/4+/s17XCj0+mQc+Ys+vRKhSIkmP3+sfW4MWy73GTu3ke+HcNo/4FD1prhPrbYfE9UAFi/cTOUcdFIT3fQhruWxhZ3793f9JyLuXnUIagLLWvlStjdY1v2RF29Zj1kMhnGjR1j6wXkviequrwcZ89fwKgRQ9mWDrYIZ1s0GIzQaDSQSj0gkbBuMczbYkN4W3Q6GOBt0eF5+GouHuy08LbotPDg9g/mPLao0+mQffI0iu+WQC73R7euKvj6WN9HEQC3XW4qK6to/ONPUkSMioaOHNe0Uee9e6WsBb3dtng8+xTt2XeAZL6daUfmHiIiytieSZ7+wZSxPZMVbLct+vn6QiwSwc3dDUVFxaiuqcG9e6WQSaUIDrY6EmPbpW6MJVtc/PkKCgqLo4SuvSkoLI4+WbDYWjPcbbG6ugZ37hRi774DiI2JwvRpzyAuNhqZu/bi+o0C7j22tG7xWFY2LVvxJcn8OtPJU6eJqH4mqqdfEH268DPuPbZ03qJU6gFPTxnMZsKZs+dRXV2NnNM/wUxmBARYPa/eth5b2+WmvLyCpj73IoVFJVFKz34UHq2iZ6fNsGnfW4eMLV7MvYQ7hUVQhAQjXhlrrZ+8LTaEt0WngwHeFh2eh6/m4sFOC2+LTgsPbv9gzrZoMBhwIjsHhUXFCA4KRK/UHhCL/8SZqDU1NVRTU0tTnnqOwqOTaPjoCRQalUjTZ85qmlZnrbzlZIvfb9tJHj6BtPyLNURE9MG8+eQfGEG5eZdYwXbZotTDAwFyf5w4cQoioRDKuBgAQGiYAnX6OuTmXUZCvNJqu6zgxl1uDv73MN774CMUF5fgvXffRJfICPTongKJRIJlK1ajvLwCWzN2QOIiQUVFJesttn9PVHU50vun4Yvli1FeUYmVq9bCzdUVYrEI3t7e7A2y3WNr6xa1Wh1pdbqmeZhr120k346hlHX8JOs9tntssVPHDtj7wwFERKuwes3XqKrSYOfuvQiQyxETE8W9x5Zs0WQyUWFRMY0eO5kiY5MppWc/ik/uRes2fGupty16zNkWzWYzzl/IRUVlJRLilQiQW3Vj3hYbwtui08EAb4sOz8NXc/Fgp4W3RaeFB7d/sE222BiDwYDde/fD28sTA9L7NX393PmLKL5bgqDOgUhKjLetMbbytnmWrlhFHj6BNOqxx4mIyGwmmvfRAgoOV1K31HQKiVDS+x9+TGYze3lrM/jar/kUk9CdFJEJNGHyU0REdOFiHsk7R9Cs1+dQVVUVvTDzVeoYEmXTCRo23+N33vsQsTFRCA9TwGis34L08JEsGAxGjBk1AjKZDCOGDYZWq8PRrBOs7dkEXrtuI3LzLuPD998FI/j9W8rUarhIJPDy8gQA+Mv9IRKJUFpayh1ccPMWPlmwCE/+dTIUimDU1tbCYDSiprbWyjEs7MezsIJ/PHIMJSWl2PL9dvTuNwQVFZW4dOlnvPveh+gc2Al6vR5lajUA4O7dEhiNRgR26sgKZn079U/rgzWrPodAIIBOp8OnCz+Dj7c3Hp84Dj4+3nB1c8Pm7zIQGx2F77fthEzqgQH9bZh/25a3ExHRsNET6Klnpzf9e/nKLyk+uRcpVamk6t6Xlq340tq3t90WG39IjaYaAgEDabO5tyX3SnH79h2EhSng5+trrQneFhvC26LTwQBviw7Pw1dz8WCnhbdFp4UH8+AWMRgM2L5zNw4fOdbi64VFxdiasQNHjmbZ3lhbytsHbZGIaPOWDFKqUslLHkJjxk1ma8L2Ib7G/Jp/HUuXr4a/nx9cXV2afugN336HuNgYiMQiiMWsC62aYjO40RYrKiqbbJGIsHTxAsj9/TFw2BibT88AONqiQCBAqCIEDMPA1IbTM2wCW7TFmpqm57SlpzaDLdniK6++1WZY89hti0898ZcWzzMajW263KzgyIhwREaEN/17w7dbECD3R7+03k1fYxgGvr6+8PJqdVvhVuMQW6z/ugYCgaDF11vj2QV2QHhbbBbeFv+k8LbIg3mww8LbotPCg9s/mPPYYlWVBlknTqK09D5CQoKQ2qMb3N3d2RvjYosl90pp0PBHKTxaRcNHT6Cw6CSaOPlpqtJoWG2R09ji5i0Z1Ckkmtau20hERHM/+Jg8/YPpWNYJx2lqa7Y4YtgQpPfr27TTDQCIhEKIROyTfjnZokwmRYcOARAKhTiRnYP1GzchWZWIeGUMe6Nsl/pGwU3qEpdC8z7+N2mqqyk1bRCNfOzxFnvbHj5yjEK7JFDf9GF09dqv1u6Y7ff4y6/Wk6dfMCV27UMJKb2b7vO0hr1ud+7aS12UKfR/z79ENTU11qAtwKwKk3/9Bi5czGthi+5ublj46Tz8fOUqZs95D926JuNv056Bi4sL6urq0D+tD3x9W10KbL87DR8zEQFyf3y9ZgU+/GgBtu3YBZlMCp1OB5PRBKPJhPVrVyApMcFxYHrAFvV6PerqDI27YzV9s7ubm6WzYXhbbAhvi04HA7wtOjwPX83Fg50W3hadFh7c/sGcbbHOYMCZn87hful9BAcHIVmVaGUSYbOwFfTN86AtVlZW0aQpUykkQklpA4ZRaJdEemnWbNLr9awFvc2XurWxxYu5l3Du/EXMeGEaDh/cjZEjhuC7rdtw/cZN1vY42WKPHl1x9tQReHp6wtgw+iaTStm3ngVsu9RrvtpA0fHd6NLlK/TI0DH02IS/tnh87bqNlNKjH4VFJdG3m7dau1u2X2pLY4vV1b+PLcYrYzFq5DBIpR44lpUNnU7HvceWbPFvL7xCpaX36ZdfrjU99533PiR5YARdunyFe48bxxbnvvsm3nrj73BxcUFgp454ZuoTOHjoMHr0HYhFny1HlUaD327fgVgigaurK/ceP5jmM1Hvl6lpylPPUUSMirqm9qeElN60cPFSx5632PhDtja2eO78RZSp1UiIV7JtyMrbYkN4W3Q6GOBt0eF5+GouHuy08LbotPBgHtwilmaiAvUn2G35fjuOHmNfSAeA+0zUxvxz3nxy8+pI4yY9Ya0Jx9hiY07mnMHXGzZB7u9nWzEPjrYI1G8/+9bbc5GUqERBwS2b52hyGlsEgM+WrYJWq8Pbb74GYxumR3Jat3j6zFksXb4Kr82aiYAAOerq6mAwGFCr1bKCWU1izboNePX1dxAaGgIigsFggFarw6NjRsDH2wtLPl+JsFAFDEZjg5zXYupTU/DB3Ldb5TX+xe6ZqJMnjoNUKkW8Mg4CRoDSsjIsWLgEoYoQPDp6BGuPOa9bbEyZupy69x5Az7/4ik1vJ4fYIlA/41ijqW7aIdZCeFtsCG+LTgcDvC06PP9/lD48+P9LMG+LTgsPbv9gTmOLer0euXmXYTQaAdQXg2KxGMmqRIhELE23pbx90BZvFNykKGVXCgqLI0VkAnUOjaHEbn2ovLyCtbzltG7RYDBCr9fjxenPYfKkcSAiGI0mm4b4ONmi0WAAGAYBAf64cDEPADBk0ABL8/XaDm60xYzvNuDlV99s+rpOr4dep8fS5asRHNQZly7/jC6REdi8cS18fKxvT2r/2GJNDby9vTBq5FC8NONvyNy2Ce/OeQMnc87g4KEj7L1he3FZm4lqMBhIq9U2PfdEdg55yUPoP0uWcX9xWbLFZ57+Ky5dvoJxk57AXyZPxN9fegGbt2RAKGDQo1tX7j1+MM1tUavV0Wuz36EucV0pIaU3JaT0pnkfLXDe2GLBzVsoLCxCl8gIdODHFi2Et8X68LbI2yIP5sE2hLdFp4UHt3+wQ/ZEvXotH9ev34Cvrw9SklWQSBxwgkbztDa2uHHTFoqIUVGvtMEUFB5Hk6ZMbbHezVJ5y2ls8V5pKT6YNx8D0vsh+9gBvDvnDZSVqVFcfJe1PU62eOFiHsrK1HgkPQ2ncs4gLiYamds2w93dzTFgS7Z448ZNuLi44Mu1G0BEuFFQgJTkJKxavqTFIsrWYrct1tbWQqvVora2FqqkBOzJ3IIZL0zD/oM/Yuu2HaydsXuXm3fe+xB+fn4wm83o07sn3FxdkdqjOyRiMdTqclYwpz1RPT094erqiv0HDyG9f1/s/eEACEBqz+6sYE62aDabadGSZaRUpVJyjzRSqlLpnbnzms4QsfZ2cogt3i0pQX5+ARSKYAQHWT1BlLfFhvC26HQwwNuiw/Pw1Vw82GnhbdFp4cHtH8zJFu/cKUTBrd8gahzgalivGB8Xyz7a1pby9kFbXPz5CvKWK0gRGU+KyAQKj06iQEUM5Zw+y1rechpb/Muk8eif1gdCoQACgRArvliDffsPokMHOWt7nGwxIECOgIB6iE6nQ86Zs+jTKxWKkGDW9jjPRG3MwUNHcKPgJp6YMsmmjjhkT1QAWL9xM5Rx0UhPt+EsCVvAtuyJmpt3CVnHszF54nhIbDlBFA7aE3X1mvWQyWQYN3aMTVCbwGx7oqrLy3H2/AWMGjGUbelgi3C2RYPBCI1GA6nUAxIJ6xbDvC02hLdFp4MB3hYdnoev5uLBTgtvi04LD27/YM5jizqdDtknT6P4bgnkcn9066qCr0+rGzi2DBdbLC+voPGPP0kRMSoaOnIchUUl0sChY+jevVJWW+S0J+rWjJ0k8+1MOzL3EBFRxvZM8vQPpoztmY7T1NZt0R9u7m4oKipGdU0N7t0rhUwqRXCw1ZEY2y+1tV1uFn++goLC4iiha28KCoujTxYstnbhuO9yU1tbi1u/3cbefQcQGxOF6dOeQVxsNDJ37cX1GwXce2xpJurfX5tDSz5fSTK/IDp56jQR1c9E9fQLok8Xfsb9HltctzhpHC7//AvMZjPOnD2PeGUsck7/BDOZERBg9bx62+9x8zQfW1Sry2nqcy9SWFQSpfTsR+HRKnp22gyqqqpi7bFDxhYv5l7CncIiKEKCEa+MtdYEb4sN4W3R6WCAt0WH5+GruXiw08LbotPCg9s/mLMtGgwGnMjOQWFRMYKDAtErtQfEtozEtKW8fdAWNZpqmvLUcxQenUTDR0+g0KhEmj5zFhkMBtby1k5bfJqIiNZ/s5k8fAJp+RdriIjog3nzyT8wgnLzLrGCbb7HjbYYHqZoWhJaUHALIqEQyrj6gytCwxSo09chN+8ya3ucxhb7pfWGRCLBshWrsXPXXmzN2AGJiwQVFZXcwdb2RE3v1xdfLF+M8opKrFy1Fm6urhCLRfD2tr5YEgC3dYtarZa0Ol3TPMy16zaSb8dQyjp+kvuL69f867Q1YwdlbM+kbzZtoaRufalX2mA6eeo0bfougwIVMbTiizVUWVlFj06YQjEJ3an0fhl38INpbot3Coto9NjJFBmbTCk9+1F8ci9at+Fba9/uOFs0m804fyEXFZWVSIhXIkBu1Y15W2wIb4tOBwO8LTo8D1/NxYOdFt4WnRYe3P7BrLZoMplwMfcS9Ho9gPqXpoBhkJQYDze3+kVz585fRPHdEgR1DkRSYrxtZLbytrKyilJ69qPOoTGkiEyg4PA4iohRUX7+DSIimvfRAgoOV1K31HQKiVDS+x9+TGYze3nLCi4rU1NcUk+a8fLrdP3GTbpRcJN+uXqN9Ho9XbiYR/LOETTr9TlUVVVFL8x8lTqGRNHPV66yglnvcZ3BALPZDE9PT/x85QrO/HQOHQICIJFI8N8fj8JgMGLMqBGQyWQYMWwwtFodjmaxb0HLeo8btxvdtiMTV375BVev5WPh4mXI+G49ampq4CKRwMvLEwDgL/eHSCRCaWkpd7CbqytGDh8KhSIYr74yA0eOHce4SU/i+4wdcHGRPPAJ3Bj241lYwb6+Ppj/0ftN+9lGhIVBKvVAeUUlgoM7Q6/To0ytBgDcvVsCo9GIwE4dWcGs97io6C569HkE06a/DLW6HNt27EJ5eQXiYmMw6JF0uLq6YfN3GSgsLML323ZCJvXAgP42zL9le1UbjUaa+8HHFJvYgxJTelNcUg96461/kE6nIyKi5SvhK+hWAAACnUlEQVS/pPjkXqRUpZKqe19atuJLi+8lsscWi4rvIv/6DShCgv8wf7rkXilu376DsDAF/Hx9rfWTt8WG8LbodDDA26LDw9dcYOqPHGNQ/0M1/t2eULM/ZnrgnrYAMwwjEAgEQpFIJCYikclkEpnN5kZ4W34AAkBCodAsEokMZrPZyDCMEYCxkd/04mIYRuji4iIG4EZEUpPJ5EpEYiISElFbwAQAAoGAGIYxMAyjEwqFtQzDaI1Go87Y8KteUWNPXVxcJEQkJSJvIvIG4EFELkQktKfHZrPZzDCMUSgUas1mcyXDMOVCoZAxm81ahmGMIoZhGGH9HoSuRORtNpsDiMi34YcQN4O2+VIDMJpMJp1AIHBruI0kFotNdXV1ZhEARigUipv11peIfIjIFUDjpoh2gYmIGIZxNZvNQoFAYAKgA6BlGMYgAiAwm80iInJrgHs0QJv3Fmg7GA1wAcMwZiLSmUwmqUAgqCIirQgAYzKZRAzDiBvuqaShp/Zc4sY0/x5BwwvUhWEYl4YXrECE+lc2Q0QC/P7eba0Be9L8ajFEJGjgMILmD7Tyx1Fp/mHEOBP8hzYfvv8keDAP5sE82NbQg3/+bHALGMMwZoZh/gD+w0/lQKiZYRhjQw1mBECiVp7kaLCRYRg9wzA1AoFAKxAIDAKBwCx6AGRs+GMAYIb9/zU2HnlkZhhGxzCMRiAQVDEMo2EYRgfA1Ag2AdADqAVQ1QDmcv8b76mRYZhahmEqGYZRN9RberPZ3AQ2AqgBoAZQB0AC7vpiFggERoZhtAzDVDMMUwmgtq6uzgCgSU9EAFwBuAFwwe/Fnr1pVBijUCg0MAyjIyJ9XV2dgYjMQMuSRNjsD9fS5/f3a309bTKbzeZGKMCLOQ9uj+D/B0E2h22cLtSIAAAAAElFTkSuQmCC"
},u={},d={__:u};return u.initMap=function(t){var n,a;a=u.sanitizeIdAndClass(t.id),n=u.getMapItems(a),o=u.getMapElement(a),i=e("#"+a).find(".nm-dealermap"),r=u.createListMap(o,n,t),r.markers=u.addMarkers(r,n),i.attr("data-view","list-map")},u.getMapElement=function(t){return e(".nm-map-canvas","#"+t)[0]},u.createListMap=function(e,t,n){var a;return void 0===window.google?!1:(a={center:new google.maps.LatLng(t[0].latitude,t[0].longitude),mapTypeId:google.maps.MapTypeId.ROADMAP,zoom:u.getListMapZoom(n)},new google.maps.Map(e,a))},u.getListMapZoom=function(e){return 10},u.createDetailMap=function(e,t){var n;return void 0===window.google?!1:(n={center:new google.maps.LatLng(t.latitude,t.longitude),mapTypeId:google.maps.MapTypeId.ROADMAP,zoom:c.zoomDetailView},s=new google.maps.Map(e,n),s.marker=new google.maps.Marker({position:new google.maps.LatLng(t.latitude,t.longitude),map:s,icon:{url:c.markerDetailUri,size:new google.maps.Size(52,52),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(0,52)},title:t.name}),s)},u.addMarkers=function(e,t){var n,a,i=0,r=[];for(n=t.length-1;n>-1;n--)i=30*n,a=new google.maps.Marker({position:new google.maps.LatLng(t[n].latitude,t[n].longitude),map:e,icon:{url:c.markerUri,size:new google.maps.Size(30,30),origin:new google.maps.Point(0,i),anchor:new google.maps.Point(0,30)},title:t[n].name}),a._distance=t[n].distance,a._street=t[n].street,a._zip=t[n].zip,a._city=t[n].city,r.push(a);for(n=r.length-1;n>-1;n--)u.addMarkerWindow(r,n),u.addMarkerEvent(r,n);return r},u.addMarkerWindow=function(e,t){var n=e[t];n.infoWindow=new InfoBox({content:"<div><strong>"+n.title+"</strong><br >"+n._street+"<br />"+n._zip+" "+n._city+"<br />"+n._distance+"</div>",pixelOffset:new google.maps.Size(30,0),boxClass:"nm-map-info-window",enableEventPropagation:!0,closeBoxURL:""})},u.addMarkerEvent=function(e,t){var n,a=e[t];google.maps.event.addListener(a,"click",function(t){for(n=e.length-1;n>-1;n--)e[n].infoWindow.close();a.infoWindow.open(r,a)})},u.getMapItems=function(t){var n=[];return e(".nm-map-list .nm-j-map-dealer","#"+t).each(function(){var t=e(this);n.push({latitude:t.attr("data-latitude"),longitude:t.attr("data-longitude"),name:t.attr("data-name"),distance:t.attr("data-distance"),street:t.attr("data-street"),zip:t.attr("data-zip"),city:t.attr("data-city")})}),n},u.sanitizeIdAndClass=function(e){return e.replace(/[^a-z0-9_-]/gi,"")},u.handleFormLoaded=function(t){var n=t.form;1===e("#"+t.id+" .nm-dealermap").length&&n&&n.groups&&n.groups[1]&&n.groups[1].items&&n.groups[1].items[0]&&n.groups[1].items[0].namedFields&&n.groups[1].items[0].namedFields["Dealer.DealerId"]&&n.groups[1].items[0].namedFields["Dealer.DealerId"].options&&(u.bindEvents(n),u.initMap(n))},u.handleDealerDetail=function(t){var n,a,i,r,o,s,l;r=e(t.target),l=r.attr("data-dealer-id"),o=r.parents(".nm-j-map-dealer"),s=r.parents(".nm-dealermap"),a={latitude:o.attr("data-latitude"),longitude:o.attr("data-longitude"),name:o.attr("data-name")},i=u.sanitizeIdAndClass(r.attr("data-map-id")),n=u.createDetailMap(u.getMapElement(i),a),s.attr("data-view","detail-map"),s.attr("data-active-dealer",l),s.find(".nm-dealer-detail").hide(),s.find(".nm-dealer-detail[data-dealer-id="+l+"]").show()},u.handleRouteFormSwitch=function(t){var n=e(t.target),a=n.hasClass("nm-map-show-route-form"),i=n.parents(".nm-dealermap");a?i.attr("data-view","route-form"):i.attr("data-view","detail-map")},u.handleRouteFormSubmit=function(t){var n,a,r=e(t.target).parents("form"),o=r.parents(".nm-dealermap"),l=o.attr("data-active-dealer"),c=e("#nm-id-dealer-"+l),u=r.serializeArray(),d=new google.maps.DirectionsRenderer,m=new google.maps.DirectionsService;t.preventDefault(),n=u[0].value+" "+u[1].value+" "+u[2].value,a=new google.maps.LatLng(c.attr("data-latitude"),c.attr("data-longitude")),d.setMap(s),d.setPanel(i.find(".nm-map-route-panel")[0]),m.route({origin:n,destination:a,travelMode:google.maps.DirectionsTravelMode.DRIVING},function(e){d.setDirections(e),i.attr("data-view","route-panel")})},u.handleDealerSet=function(t){var n;n=e(t.target).attr("data-dealer-id"),n&&(e("#nm-id-map-selected-dealer").attr("value",n),e('.nm-dealermap button[data-button-action="set-dealer-selected"]').trigger("click"))},u.bindEvents=function(){u.unbindEvents(),u.legacyEventBus.delegate(".nm-map-dealer-detail","click",u.handleDealerDetail),u.legacyEventBus.delegate(".nm-map-show-route-form, .nm-map-show-dealer-detail","click",u.handleRouteFormSwitch),u.legacyEventBus.delegate(".nm-map-route-form button","click",u.handleRouteFormSubmit),u.legacyEventBus.delegate(".nm-map-dealer-choose","click",u.handleDealerSet),u.legacyEventBus.delegate(".nm-map-show-dealer-list","click",u.handleDealerList),u.legacyEventBus.delegate(".nm-route-new a","click",u.handleDealerList)},u.unbindEvents=function(){u.legacyEventBus.undelegate(".nm-map-dealer-detail","click"),u.legacyEventBus.undelegate(".nm-map-show-route-form, .nm-map-show-dealer-detail","click"),u.legacyEventBus.undelegate(".nm-map-route-form button","click"),u.legacyEventBus.undelegate(".nm-map-dealer-choose","click"),u.legacyEventBus.undelegate(".nm-map-show-dealer-list","click"),u.legacyEventBus.undelegate(".nm-route-new a","click")},u.handleDealerList=function(t){var a;t&&t.preventDefault&&t.preventDefault(),a=e(t.target).attr("data-form-id"),u.initMap(n.getForm(a))},d.initialize=function(){u.legacyEventBus=e("body"),l=t.template("<p>{{=it.instructions}}</p>"),u.eventBus.on(a.FORM_LOADED,u.handleFormLoaded)},d.dispose=function(){u.eventBus.off(a.FORM_LOADED,u.handleFormLoaded),u.unbindEvents()},d.initializePromise=function(e){return new Promise(function(t){u.eventBus=e,d.initialize(),t("module/dealermap.js")})},d}),define("module/expertmode",["jquery","events"],function(e,t){"use strict";var n,a,i={},r={__:i},o={sExpertContainerSelector:".nm-mode-expert",sSelectorDelegateClick:".nm-toggle",sToggleClass:"nm-toggle-open",sOptionsListHeadSelector:".nm-options-list-head",sOptionsGroupListWrapperSelector:".nm-mode-expert-group-list-wrap"};return i.handleToggleClick=function(n){n.preventDefault();var a=e(this),r=a.find(o.sSelectorDelegateClick);r.toggleClass(o.sToggleClass);var s=a.parent().find(o.sOptionsGroupListWrapperSelector);s.toggleClass("nm-closed"),i.eventBus.emit(t.CONTENT_RESIZE)},i.itemIsSelected=function(e){var t="nm-j-configurator-status_",n=e.className.indexOf(t);if(0>n)return!1;var a=e.className.split(t)[1].split(" ")[0];return"1"===a.substr(3,1)?!0:!1},i.itemIsSelectedStandard=function(e){var t="nm-j-configurator-status_",n=e.className.indexOf(t);if(0>n)return!1;var a=e.className.split(t)[1].split(" ")[0],i=/1001[0,1]/;return i.test(a)},i.getSelectedItemsFromList=function(e){var t=e.parent().find("li[class*='nm-j-configurator-status_']");return t=t.filter(function(){return i.itemIsSelected(this)&&!i.itemIsSelectedStandard(this)})},i.updateListCounter=function(e){var t=i.getSelectedItemsFromList(e).length,n=(e.find("span.nm-selected-items").text(t>0?t:""),e.find("span.nm-selected-multi").addClass("nm-hidden")),a=e.find("span.nm-selected-single").addClass("nm-hidden");t>1&&n.removeClass("nm-hidden"),1===t&&a.removeClass("nm-hidden")},i.updateLists=function(){n=e(o.sExpertContainerSelector),n.length<1||(a=e(o.sOptionsListHeadSelector,n),a.each(function(){var t=e(this);i.updateListCounter(t)}))},i.handleConfigUpdate=function(){i.updateLists()},i.handleLayerLoaded=function(){i.updateLists()},i.addEvents=function(){i.legacyEventBus.on("click.expertmode.toggle",o.sOptionsListHeadSelector,i.handleToggleClick),i.eventBus.on(t.DOM_UPDATED,i.handleLayerLoaded),i.eventBus.on(t.PAGE_LOADED,i.handleLayerLoaded)},i.initialize=function(){i.addEvents(),i.updateLists()},r.initializePromise=function(t){return new Promise(function(n){i.eventBus=t,i.legacyEventBus=e("body"),i.initialize(),n("module/expertmode.js")})},r}),define("module/summary-techdata",["jquery","events","configurator/dpu-api"],function(e,t,n){"use strict";var a={},i={__:a};return a.oDefaults={ssButtonCompactMode:".nm-summary-list-toggle-btn",sSelectorSummaryTechDataContainer:".nm-summary-list-techdata-container",sSelectorSummaryContainer:".nm-md-summary-engine"},a.handlePageLoaded=function(){a.$summaryTechDataContainer=e(a.oDefaults.sSelectorSummaryTechDataContainer),a.$buttonCompactMode=e(a.oDefaults.ssButtonCompactMode),a.removeEvents(),a.$summaryTechDataContainer.length&&a.$buttonCompactMode.length&&e(".nm-content").on("click.page",a.oDefaults.ssButtonCompactMode,a.handleToggleBtnClick),a.patchMotorInfo()},a.handleLayerLoaded=function(){a.$summaryTechDataContainer=e(a.oDefaults.sSelectorSummaryTechDataContainer),a.$buttonCompactMode=e(a.oDefaults.ssButtonCompactMode),a.removeEvents(),a.$summaryTechDataContainer.length&&a.$buttonCompactMode.length&&e(".nm-layer").on("click.layer",a.oDefaults.ssButtonCompactMode,a.handleToggleBtnClick),a.patchMotorInfo()},a.handleConfigurationUpdates=function(){a.patchMotorInfo()},a.removeEvents=function(){e(".nm-content").off("click.page",a.oDefaults.ssButtonCompactMode,a.handleToggleBtnClick),e(".nm-layer").off("click.layer",a.oDefaults.ssButtonCompactMode,a.handleToggleBtnClick)},a.handlePageLeave=function(){a.removeEvents()},a.cancelEvent=function(e){e&&"function"==typeof e.preventDefault&&e.preventDefault()},a.initialize=function(){a.addEvents(),a.handlePageLoaded()},a.addEvents=function(){a.eventBus.on(t.PAGE_LOADED,a.handlePageLoaded),a.eventBus.on(t.PAGE_LEAVE,a.handlePageLeave),a.eventBus.on(t.LAYER_LOADED,a.handleLayerLoaded),a.eventBus.on(t.CONFIG_UPDATE,a.handleConfigurationUpdates)},a.handleToggleBtnClick=function(t){a.cancelEvent(t),e(this).closest(a.oDefaults.sSelectorSummaryTechDataContainer).toggleClass("nm-is-compact-mode")},a.patchMotorInfo=function(){var t=e("[data-template='summary']");if(t.length){var i,r,o,s=n.getEngine(),l=a.getMotorTechdata(s);for(o in l)i=l[o],r=t.find([".nm-j-summary-text-",o].join("")),a.patchDOMfragment(r,i)}a.hideInvisibleCategories()},a.getMotorTechdata=function(t){return e.extend({},n.getModelsInfo(t),n.getTechdata())},a.patchDOMfragment=function(e,t){e.length&&(t?(e.closest(".nm-techrow").removeClass("nm-hidden"),e.html(t)):e.closest(".nm-techrow").addClass("nm-hidden"))},a.hideInvisibleCategories=function(){var t,n,i=a.$summaryTechDataContainer.find(".nm-summary-list-container, .nm-md-summary-engine");e.each(i,function(){t=e(this),n=t.find(".nm-techrow").not(".nm-hidden"),n.length?t.removeClass("nm-hidden"):t.addClass("nm-hidden")})},i.initializePromise=function(e){return new Promise(function(t){a.eventBus=e,a.initialize(),t("module/summary-techdata.js")})},i}),define("module/supportbar",["jquery"],function(e){"use strict";var t,n,a,i,r,o,s,l,c,u,d;return t=".nm-toolbar",n="nm-toolbar-fixed",r=40,o=0,u=0,l={},c={__:l},d=null,l.checkPosition=function(a){a>=o?(d||(e(t).addClass(n),s.css("top","50%")),d=!0):((d||null===d)&&(e(t).removeClass(n),s.css("top",u)),d=!1)},l.getElementLengths=function(t){var n=t.find("a");n.each(function(){var t=e(this);t.data("width",t.outerWidth())})},l.getSwitchPosition=function(e,t,n,a){return n+a+r+t/2-e/2},l.getAbsoluteTop=function(){return a.height()+i.height()+r+s.height()/2},l.initialize=function(){s=e(t),a=e(".nm-header-inner-wrapper"),i=e(".nm-stage-wrapper"),l.getElementLengths(s),o=l.getSwitchPosition(e(window).height(),s.height(),a.height(),i.height()),u=l.getAbsoluteTop(),l.checkPosition(e(window).scrollTop()),e(window).on("scroll",function(){l.checkPosition($(window).scrollTop())})},c.initializePromise=function(e){return new Promise(function(t){l.eventBus=e,l.initialize(),t("module/supportbar.js")})},c}),define("module/homepage",["jquery"],function(e){"use strict";var t=e,n=function(){var e=null,n=function(e){return""+e.getUTCFullYear()+("0"+(e.getUTCMonth()+1)).slice(-2)+("0"+e.getUTCDate()).slice(-2)+"-"+("0"+e.getUTCHours()).slice(-2)+Math.floor(e.getUTCMinutes()/30)},a=function(n,a){t("[data-"+n+"]").each(function(i,r){var o=t(r),s=o.data(n),l=s.replace("CACHETIMESTAMP",e);o.load(l,a)})};return function(i,r){null===e&&t("[data-"+i+"]").length>0?t.ajax({type:"HEAD",url:window.location,timeout:1e3,success:function(t,o,s){var l=new Date(s.getResponseHeader("Date"));e=n(l),a(i,r)},error:function(e,t,n){r("","error",null)}}):a(i,r)}}(),a=function(){return new Promise(function(e){SETUPS.get("nemo.homepage.cacheupdateurl")===!0&&n("cacheupdateurl",function(){}),e("module/homepage.js")})};return{initializePromise:a,updateCacheUrl:n}}),define("module/poa",["jquery"],function(e){"use strict";var t={},n={__:t};return t.poaHandler=function(e){e.preventDefault();try{vee24&&vee24.api.helpMe()}catch(t){console.warn(t)}},t.cookieHandler=function(e){e.preventDefault();try{blueConicClient&&blueConicClient.event.publish("optin_optout_openPermissionLevelSelector")}catch(t){console.warn(t)}},t.addEvents=function(){t.legacyEventBus.on("click.nemo.poa",".nm-j-poa",t.poaHandler),t.legacyEventBus.on("click.nemo.cookie",".nm-j-ext-cookie",t.cookieHandler)},t.initialize=function(){t.addEvents()},n.initializePromise=function(n){return new Promise(function(a){t.eventBus=n,t.legacyEventBus=e("body"),t.initialize(),a("module/poa.js")})},n}),define("module/pattern-matching/pattern-matching",["events"],function(e){"use strict";var t={},n={__:t};return t.oDefaults={},t.eventBus=null,t.registered={},t.extractUrlParams=function(e){var t=[];return e&&e.indexOf("{{")>0&&(t=e.match(/{{\s*(=)?[(\w|_)\.|:]+\s*}}/g).map(function(e){return e.match(/(=)?[\w\.|:]+/)[0]})),t},n.getReplacedUrl=function(e,n){var a,i=[];return a=t.extractUrlParams(e),a.forEach(function(e){i.push(t.replaceUrl(e))}),Promise.all(i).then(function(n){return t.buildPatchedUrl(n,e)})["catch"](function(e){return console.log(e),Promise.resolve(n)})},t.buildPatchedUrl=function(e,t){var n,a,i=t;return e.forEach(function(e){a=Object.keys(e),n=encodeURIComponent(e[a]),i=i.replace("{{"+a[0]+"}}",n)}),Promise.resolve(i)},t.replaceUrl=function(e){var n,a,i,r=e.replace(":mandatory","");return new Promise(function(o,s){n=t.registered[r],i={},a=!!e.match(/:mandatory/),n&&"function"==typeof n?(console.log("pattern-matching.js --> replaceUrl() --> mandatory: ",e),n(r).then(function(t){!t&&a?s():(i[e]=t,o(i))})["catch"](function(t){a?s(t):(i[e]="",o(i))})):(console.warn("no matching module found for pattern: "+e),a?s():(i[e]="",o(i)))})},n.register=function(e,n){t.registered[e]?console.warn("pattern ist already registered: ",e):t.registered[e]=n},n.initializePromise=function(e){return new Promise(function(n){t.eventBus=e,n("pattern-matching/pattern-matching.js")})},n}),define("module/iframe",["utils/dom","events","module/pattern-matching/pattern-matching"],function(e,t,n){"use strict";var a={},i={__:a};return a.oDefaults={module:".nm-j-iframe"},a.eventBus=null,a.addEvents=function(){a.eventBus.on(t.APP_INITIALIZED,a.setIframeUrl),a.eventBus.on(t.PAGE_LOADED,a.setIframeUrl),a.eventBus.on(t.LAYER_LOADED,a.setIframeUrl)},a.getIframeContainer=function(e){return e?[].slice.call(e.querySelectorAll(a.oDefaults.module)):!1},a.getContext=function(e){var t;return t=e?e.domElement?e.domElement[0]:e.element:document},a.setIframeUrl=function(e){var t,i=a.getContext(e);t=a.getIframeContainer(i),t&&t.length>0&&t.forEach(function(e){var t,a,i,r;t=e.getAttribute("data-pattern")||"",a=e.getAttribute("data-src")||"",i=e.getAttribute("data-height")||"0",t&&a&&n.getReplacedUrl(t,a).then(function(t){r=t,console.log("PATTERN URL: ",r),e.innerHTML='<iframe src="'+r+'" height="'+i+'" frameborder="0" ></iframe>'})["catch"](function(e){console.error(e)})})},i.initializePromise=function(e){return new Promise(function(t){a.eventBus=e,a.addEvents(),t("iframe.js")})},i}),define("module/iframe-height",["jquery","events","core/layer/animation"],function(e,t,n){"use strict";var a={},i={__:a};return a.eventBus=null,a.getIframeForUrl=function(t){var n,a,i=document.querySelector('iframe[src*="'+t+'"]');return null===i&&(n=document.createElement("a"),n.href=t,a=n.pathname,i=document.querySelector('iframe[src*="'+a+'"]')),e(i)},a.toggleShader=function(t,i){var r=a.getIframeForUrl(i),o=e(".nm-header").height(),s=479,l=window.document.body.offsetHeight,c=r.height();t?(r.css({zIndex:101,position:"relative"}),(window.document.body.offsetWidth<=s||c>=l-70)&&r.css({top:-o}),e("body").addClass("nm-carpark-shader-visible"),n.showShader()):(e("body").removeClass("nm-carpark-shader-visible"),n.hideShader(),r.css({position:"static",top:0}))},a.parseJsonDataFromEvent=function(e){var t;try{t=window.JSON.parse(e.data)}catch(n){console.warn(n)}return t},a.removeClassFromModule=function(e){var t,n,a,i=e;i&&(t=e.closest(".nm-md-iframe")[0],t&&(n=t.classList,[].slice.call(n).forEach(function(e,t){var i=e.indexOf("nm-md-iframe-pageformat-")>=0;i&&(a=n[t],n.remove(a))})))},a.setAndAnimateIframeHeight=function(e,t){var n=a.getIframeForUrl(e);a.removeClassFromModule(n),t=parseInt(t,10)+"px",n.animate({height:t},400,"swing",function(){n.animate({opacity:1})})},a.setIframeHeight=function(e,t,n){var i=a.getIframeForUrl(n);a.removeClassFromModule(i),t=parseInt(t,10)+"px",i.height(t)},a.handler=function(e){var t;"undefined"!=typeof e&&"undefined"!=typeof e.data&&(t=a.parseJsonDataFromEvent(e),t&&(t.originurl&&t.layerExternalizerBridgeSetHeight?a.setAndAnimateIframeHeight(t.originurl,t.layerExternalizerBridgeSetHeight):t.height?a.setIframeHeight(e.origin,t.height,t.url):t.shader&&a.toggleShader("show"===t.shader,t.url)))},a.addEvents=function(){window.addEventListener?window.addEventListener("message",a.handler,!1):window.attachEvent("onmessage",a.handler)},i.initializePromise=function(e){return new Promise(function(t){a.eventBus=e,a.addEvents(),t("module/iframe-height.js")})},i}),define("module/pattern-matching/pattern-audicode",["events","module/pattern-matching/pattern-matching","module/audicode"],function(e,t,n){"use strict";var a={},i={__:a};return a.oDefaults={},a.eventBus=null,a.register=function(){t.register("audicode",a.getAudiCode),t.register("conf_audicode",a.getAudiCode)},a.getAudiCode=function(){return new Promise(function(e,t){var a=n.loadAudiCode();a.then(function(t){e(t)},function(e){t(e),console.error(e)})})},i.initializePromise=function(e){return new Promise(function(t){a.eventBus=e,a.register(),t("pattern-matching/pattern-audicode.js")})},i}),define("module/pattern-matching/pattern-carlineId",["events","module/pattern-matching/pattern-matching","configurator/dpu-api"],function(e,t,n){"use strict";var a={},i={__:a};return a.oDefaults={},a.eventBus=null,a.register=function(){t.register("carlineID",a.getCarlineId)},a.getCarlineId=function(){var e;return new Promise(function(t,a){e=n.getCarline(),e?t(e):a(new TypeError("load pattern -carlineID- failed"))})},i.initializePromise=function(e){return new Promise(function(t){a.eventBus=e,a.register(),t("pattern-matching/pattern-carlineID.js")})},i}),define("module/pattern-matching/pattern-partnerId",["events","module/pattern-matching/pattern-matching","module/iph"],function(e,t,n){"use strict";var a={},i={__:a};return a.oDefaults={},a.eventBus=null,a.register=function(){t.register("partnerid",a.getPartnerId)},a.getPartnerId=function(){var e;return new Promise(function(t,a){e=n.parsePartnerID(),e?t(e):a(new TypeError("load pattern -partnerid- failed"))})},i.initializePromise=function(e){return new Promise(function(t){a.eventBus=e,a.register(),t("pattern-matching/pattern-partnerId.js")})},i}),define("module/pattern-matching/pattern-configuration",["events","module/pattern-matching/pattern-matching","configurator/dpu-api"],function(e,t,n){"use strict";var a={},i={__:a};return a.oDefaults={},a.eventBus=null,a.register=function(){t.register("conf_finance",a.getConfigurationAttribute("financeProductName")),t.register("conf_name",a.getConfigurationAttribute("carlineName")),t.register("conf_id",a.getConfigurationAttribute("carline")),t.register("conf_description",a.getConfigurationAttribute("description")),t.register("conf_power_primary",a.getModelInfoAttribute("power-primary")),t.register("conf_power_secondary",a.getModelInfoAttribute("power-secondary"))},a.getConfigurationAttribute=function(e){return function(){var t=n.getConfiguration();return new Promise(function(n,a){t&&t[e]?n(t[e]):a(e+" was not found within the configuration")})}},a.getModelInfoAttribute=function(e){return function(){var t=n.getCurrentModelInfo();return new Promise(function(n,a){t&&t[e]?n(t[e]):a(e+" was not found within the model Info")})}},i.initializePromise=function(e){return new Promise(function(t){a.eventBus=e,a.register(),t("pattern-matching/pattern-configuration.js")})},i}),define("module/audicode-iframe",["configurator/ajax","configurator/dpu-api","configurator/dpu-model","events","module/audicode"],function(e,t,n,a,i){"use strict";var r={},o={__:r};return r.eventBus=null,r.dispose=function(){r.removeEvents()},r.addEvents=function(){r.eventBus.on(a.LAYER_LOADED,r.loadAudiCode),r.eventBus.on(a.PAGE_LOADED,r.loadAudiCode)},r.removeEvents=function(){r.eventBus.off(a.LAYER_LOADED,r.loadAudiCode),r.eventBus.off(a.PAGE_LOADED,r.loadAudiCode)},r.loadAudiCode=function(){document.querySelector(".nm-audicode-iframe")&&i.loadAudiCode().then(r.setAudiCodeUrl)["catch"](function(e){console.warn("AudiCode iFrame Error"),r.resetAudiCodeUrlonError()})},r.setAudiCodeUrl=function(e){var t,n=document.querySelector(".nm-audicode-iframe");e&&n&&(t=n.getAttribute("data-url")||"",t=t.replace("{audicode}",e),n.innerHTML='<iframe src="'+t+'"></iframe>')},r.resetAudiCodeUrlonError=function(){var e,t=document.querySelector(".nm-audicode-iframe");t&&(e=t.getAttribute("data-url")||"",e=e.replace("audicode={audicode}",""),t.innerHTML='<iframe src="'+e+'"></iframe>')},o.initializePromise=function(e){return new Promise(function(t){r.eventBus=e,r.addEvents(),t("module/audicode-iframe.js")})},o}),define("text!templates/recommendations-list.tpl",[],function(){return'<h2 class="nm-el-hdl nm-el-hdl-02 nm-at-hdl-b">\n	{{=window.i18n[\'recommendations-layer.your-recommendations-for\']}}\n</h2>\n<p class="nm-el-pg nm-el-pg-03">\n	{{=window.i18n[\'recommendations-layer.message\']}}\n</p>\n{{~it.recommendations :value :index}}\n<div class="nm-recommendation-container nm-recommendation-{{=index+1}}">\n	<div class="nm-module nm-md-recommendations">\n		<strong class="nm-el-hdl nm-el-hdl-04">\n			{{=window.i18n[\'recommendations-layer.recommendation-index\']}} {{=index+1}}\n		</strong>\n		<p class="nm-recommendation-title nm-el-pg nm-el-pg-03">\n			{{=value.explanation}}\n		</p>\n		{{~value.recommendation :r}}\n		<div class="nm-module nm-md-teaser-equipment nm-md-teaser clearfix nm-j-configurator-item nm-j-configurator-status_{{=r.status}}"\n		data-configurator-id="{{=r.id}}">\n			<div class="nm-md-teaser-img">\n				<img src="{{=r.image}}" alt="" />\n			</div>\n			<div class="nm-md-teaser-copy">\n				<strong class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">\n					{{=r.name}}\n				</strong>\n				<div class="nm-info-wrap">\n					<a class="nm-info nm-image-replace nm-layerLink" href="{{=r.url}}">{{=window.i18n[\'more-information\']}}</a>\n				</div>\n				<span class="nm-price nm-el-hdl nm-el-hdl-04">\n					{{=r.price}}\n				</span>\n				<div class="nm-el-pg nm-el-pg-02">\n					{{=r.description || "No descriptive text found"}}\n				</div>\n				<a class="nm-el-btn nm-el-btn-02 nm-j-configurator-delegate-click" href="#">\n				    <span class="nm-at-btn-state01">{{=window.i18n[\'configuration.add-item\']}}</span>\n				    <span class="nm-at-btn-state02">{{=window.i18n[\'configuration.item-included\']}}</span>\n				    <span class="nm-at-btn-state03">{{=window.i18n[\'configuration.remove-item\']}}</span>\n				</a>\n			</div>\n		</div>\n		{{~}} {{? 0 !== value.chosen.length}}\n		<p class="nm-el-pg nm-el-pg-03 nm-at-pg-b">\n			{{=window.i18n[\'recommendations-layer.explanation\']}}:\n		</p>\n		{{~value.chosen :c}}\n		<ul class="nm-options-list">\n			<li class="clearfix">\n				<div class="nm-options-cell-additional">\n					<div class="nm-list-item-text nm-el-pg nm-el-pg-04">\n						{{=c.name}}\n					</div>\n				</div>\n				<div class="nm-info-wrap">\n					<a class="nm-info nm-layerLink" href="{{=c.url}}" title="#I18N(" nemo.ui.common.more-information" "Mehr Informationen ")"></a>\n				</div>\n				<div class="nm-price nm-el-pg nm-el-pg-04 clearfix">\n					<span class="nm-price">\n						{{=c.price}}\n					</span>\n				</div>\n			</li>\n		</ul>\n		{{~}} {{?}}\n	</div>\n</div>\n{{~}}\n'}),define("text!templates/recommendations-empty.tpl",[],function(){return"	{{? it.carlineName}}\n		<h2 class=\"nm-h2\">{{=window.i18n['recommendations-layer.your-recommendations-for']}}</h2>\n	{{?}}\n	<p class=\"nm-c2\">{{=window.i18n['recommendations-layer.no-recommendations-available']}}</p>\n"}),define("module/recommendations",["jquery","doT","configurator/dpu-api","events","core/template","text!templates/recommendations-list.tpl","text!templates/recommendations-empty.tpl"],function(e,t,n,a,i,r,o){"use strict";var s={},l={__:s};return s.oDefaults={sSelectorTemplateClass:".nm-recommendation",sSelectorTabClass:".nm-j-link-recommendations"},s.tplFunc=null,s.tplFuncNoRecs=function(){return""},s.getTplString=function(e){var t=$(e);return t.length>0?t.html():""},s.showTab=function(){e("body").addClass("nm-has-recommendations")},s.hideTab=function(){e("body").removeClass("nm-has-recommendations")},s.tabAvailable=function(){return e(s.oDefaults.sSelectorTabClass).length>0},s.containerAvailable=function(){return e(s.oDefaults.sSelectorTemplateClass).length>0},s.initialize=function(){s.addEvents()},s.dispose=function(){s.disposeEvents()},s.parse=function(t){var a=n.getItems()||{},i={recommendations:[]},r=JSON.parse(JSON.stringify(t)),o={};e.each(a,function(e,t){o[t.mbvId]=t});var s=[];return e.each(r,function(t,i){return null===i?!1:(i.recommendation=e.map(i.recommendation,function(e){var t=null,a=!!o[e.id];return t=a?o[e.id]:n.getItem(e.id)}),i.chosen=e.map(i.chosen,function(e){var t=null,n=!!o[e.id];return t=n?o[e.id]:a[e.id]}),void s.push(i))}),e.each(s,function(e,t){Array.prototype.push.call(i.recommendations,t)}),i.recommendations=s,i.carlineName=n.getCarlineName(),i},s.render=function(){var t=n.getRecommendations(),a=s.parse(t),o=i.render(r,a);o=o.replace("{{=it.carlineName}}",a.carlineName.toUpperCase()),e(s.oDefaults.sSelectorTemplateClass).html(o)},s.renderNoRecommendations=function(){var t=n.getConfiguration(),a=i.render(r,t);a=a.replace("{{=it.carlineName}}",(n.getCarline()||"").toUpperCase()),e(s.oDefaults.sSelectorTemplateClass).html(a),e(s.oDefaults.sSelectorTemplateClass).html(s.tplFuncNoRecs(t))},s.addEvents=function(){s.eventBus.on(a.CONFIG_UPDATE,s.handleConfigUpdate),s.eventBus.on(a.PAGE_LOADED,s.handlePageLoaded),s.eventBus.on(a.PAGE_LOADED,s.handleLayerLoaded),s.eventBus.on(a.LAYER_LOADED,s.handleLayerLoaded),s.eventBus.on(a.LAYER_CLOSED,s.handleLayerClosed)},s.disposeEvents=function(){s.eventBus.off(a.CONFIG_UPDATE,s.handleConfigUpdate),s.eventBus.off(a.PAGE_LOADED,s.handlePageLoaded),s.eventBus.off(a.PAGE_LOADED,s.handleLayerLoaded),s.eventBus.off(a.LAYER_LOADED,s.handleLayerLoaded),s.eventBus.off(a.LAYER_CLOSED,s.handleLayerClosed)},s.recommendationsAvailable=function(){return n.isConfigurable()&&n.getRecommendations().length},s.updateView=function(){s.containerAvailable()||(s.recommendationsAvailable()?(s.showTab(),s.render()):s.hideTab())},s.handleConfigUpdate=function(){s.updateView()},s.handlePageLoaded=function(){s.updateView()},s.handleLayerClosed=function(){s.recommendationsAvailable()||s.hideTab()},s.handleLayerLoaded=function(){!s.recommendationsAvailable()&&s.containerAvailable()?(s.showTab(),s.renderNoRecommendations()):s.recommendationsAvailable()&&s.containerAvailable()?(s.showTab(),s.render()):s.recommendationsAvailable()&&s.tabAvailable()&&s.showTab()},l.initializePromise=function(e){return new Promise(function(t){s.eventBus=e,s.initialize(),t("module/recommendations.js")})},l}),define("module/preconfs-teaser",["jquery","configurator/dpu-api","configurator/dpu-controller","events","router"],function(e,t,n,a,i){"use strict";var r={},o={__:r};return r.oDefaults={sPreconfTeaserSelector:".nm-md-preconfs-teaser",sPreconfsSlide:".nm-md-preconfs-teaser-slide",sButtonSelector:".j-preconfs-submit",sButtonConfigurationClass:"nm-md-preconfs-teaser-custom-configuration",sSelectorDotsNavi:"ul.nm-dots-navi",sSelectorTeaserTemplates:"j-preconfs-teaser-tpl-",sDotsSelectorDelegateClick:"li.nm-dot",sMenuSelectedClass:"nm-selected",sSelectorTeaserContainer:".nm-peephole"},r.selectedIndex=0,r.maxIndex=0,r.startPos={x:0,y:0},r.sensitivity=40,r.direction="left",r.isAnimating=!1,r.xDirection="none",r.yDirection="none",r.deltaX=0,r.deltaY=0,r.eventLookup={touchdevice:{down:"touchstart",move:"touchmove",up:"touchend"},desktopdevice:{down:"mousedown",move:"mousemove",up:"mouseup"}},r.isDown=!1,r.deviceType="desktopdevice",r.isTouchDevice=function(){return!!("ontouchstart"in window)||!!navigator.msMaxTouchPoints},r.handlePageLoaded=function(){if(r.$preconfsTeaserContainer=e(r.oDefaults.sPreconfTeaserSelector),r.$preconfsTeaserContainer.length){var t=e("script[id^='"+r.oDefaults.sSelectorTeaserTemplates+"']");r.maxIndex=t.length-1,r.isTouchDevice()&&(r.deviceType="touchdevice"),r.maxIndex>0&&(r.addSwipeEvents(),r.$preconfsTeaserContainer.on("click.dots touchend.dots",r.oDefaults.sDotsSelectorDelegateClick,r.handleDotClick)),r.$preconfsTeaserContainer.on("click.configuration.start touchend.configuration.start",r.oDefaults.sButtonSelector,r.handleConfigurationStartClick),r.eventBus.on(a.CONFIG_UPDATE,r.updateButtonLabel),r.updateButtonLabel()}},r.addSwipeEvents=function(){r.removeSwipeEvents(),r.$preconfsTeaserContainer.off(r.eventLookup[r.deviceType].down,r.handleMouseDown).on(r.eventLookup[r.deviceType].down,r.handleMouseDown)},r.removeSwipeEvents=function(){r.$preconfsTeaserContainer.off(r.eventLookup[r.deviceType].up,r.handleMouseUp),r.$preconfsTeaserContainer.off(r.eventLookup[r.deviceType].move,r.handleMouseMove)},r.handleMouseDown=function(e){r.isDown=!1,"select"!==e.target.nodeName.toLowerCase()&&"input"!==e.target.nodeName.toLowerCase()&&"option"!==e.target.nodeName.toLowerCase()&&(r.isDown=!0,r.deltaX=0,r.deltaY=0,r.startPos.x=e.pageX||e.originalEvent.changedTouches[0].pageX,r.startPos.y=e.pageY||e.originalEvent.changedTouches[0].pageY,r.$preconfsTeaserContainer.off(r.eventLookup[r.deviceType].up,r.handleMouseUp).on(r.eventLookup[r.deviceType].up,r.handleMouseUp),r.isTouchDevice()||r.$preconfsTeaserContainer.on(r.eventLookup[r.deviceType].move,r.handleMouseMove))},r.handleMouseUp=function(e){r.down=!1,r.removeSwipeEvents(),r.deltaX=r.startPos.x-(e.pageX||e.originalEvent.changedTouches[0].pageX),r.deltaY=r.startPos.y-(e.pageY||e.originalEvent.changedTouches[0].pageY),r.deltaX>0?r.xDirection="left":r.xDirection="right",r.deltaY>0?r.yDirection="up":r.yDirection="down",Math.abs(r.deltaX)>r.sensitivity&&Math.abs(r.deltaY)<r.sensitivity&&r.triggerViewChange(r.xDirection)},r.handleMouseMove=function(e){r.isDown&&(r.deltaX=r.startPos.x-(e.pageX||e.originalEvent.changedTouches[0].pageX),r.deltaY=r.startPos.y-(e.pageY||e.originalEvent.changedTouches[0].pageY),r.deltaX>0?r.xDirection="left":r.xDirection="right",r.deltaY>0?r.yDirection="up":r.yDirection="down",Math.abs(r.deltaX)>r.sensitivity&&Math.abs(r.deltaY)<r.sensitivity&&(r.removeSwipeEvents(),r.isDown=!1,r.triggerViewChange(r.xDirection)))},r.removeEvents=function(){r.$preconfsTeaserContainer=e(r.oDefaults.sPreconfTeaserSelector),r.$preconfsTeaserContainer.length&&(r.removeSwipeEvents(),r.$preconfsTeaserContainer.off("click.dots touchend.dots",r.handleDotClick),r.$preconfsTeaserContainer.off("click.configuration.start touchend.configuration.start",r.handleConfigurationStartClick),e("body").off(a.CONFIG_UPDATE,r.updateButtonLabel))},r.handleConfigurationStartClick=function(a){r.cancelEvent(a);var o=e(this),s=o.data("prstring"),l=o.data("audicode");return l?(n.loadConfigurationFromTeaser({audicode:l,prstring:null},"audicode.preconfs-teaser").then(function(){i.open("page",t.getCurrentCarlineUrl())}),!1):s?(n.loadConfigurationFromTeaser({prstring:s,audicode:null},"prstring.preconfs-teaser").then(function(){
i.open("page",t.getCurrentCarlineUrl())}),!1):(i.open("page",t.getCurrentCarlineUrl()),void e("a.nm-configuration-new").trigger("click.configuration.new"))},r.handleDotClick=function(e){if(r.cancelEvent(e),r.isAnimating)return null;var t=$(this).index(),n=r.selectedIndex;return t===n?!1:(t>n?r.direction="left":r.direction="right",r.selectedIndex=t,void r.updateContent(r.selectedIndex,r.direction))},r.getNextIndex=function(e){return(e+1)%(r.maxIndex+1)},r.getPreviousIndex=function(e){return e-=1,0>e&&(e=r.maxIndex),e},r.updateContent=function(e,t){r.insertTeaser(e,t),r.updateSelection(e)},r.triggerViewChange=function(e){if(r.isAnimating)return null;var t=r.selectedIndex;"right"===e?(r.direction="right",t=r.getPreviousIndex(t)):(r.direction="left",t=r.getNextIndex(t)),r.selectedIndex=t,r.updateContent(r.selectedIndex,r.direction)},r.handlePageLeave=function(){r.removeEvents()},r.insertTeaser=function(t,n){var a=e(r.oDefaults.sSelectorTeaserContainer);a.addClass("nm-slide-animation-start-"+n);var i=r.getTemplateByIndex(t),o=e(i),s=e(r.oDefaults.sPreconfsSlide),l=s.height()+"px";o.appendTo(a);var c=o.height()+"px",u=a.width(),d="-"+.5*u+"px";r.isAnimating=!0,"left"===n?a.css("height",l).animate({"margin-left":d,height:c},500,"easeOutSine",r.animationEnded):a.css("margin-left",d).animate({"margin-left":0,height:c},500,"easeOutSine",r.animationEnded)},r.animationEnded=function(){var e=$(this).removeClass(["nm-slide-animation-start-",r.direction].join("")).removeAttr("style"),t=e.find(r.oDefaults.sPreconfsSlide).first();t.remove(),r.isAnimating=!1},r.updateButtonLabel=function(){t.hasCustomConfiguration()?$(r.oDefaults.sSelectorTeaserContainer).addClass(r.oDefaults.sButtonConfigurationClass):$(r.oDefaults.sSelectorTeaserContainer).removeClass(r.oDefaults.sButtonConfigurationClass)},r.updateSelection=function(t){var n=r.$preconfsTeaserContainer.find(r.oDefaults.sSelectorDotsNavi),a=n.find(r.oDefaults.sDotsSelectorDelegateClick);a.removeClass(r.oDefaults.sMenuSelectedClass);var i=e(a[t]);i.addClass(r.oDefaults.sMenuSelectedClass)},r.getTemplateByIndex=function(t){var n=e(["#",r.oDefaults.sSelectorTeaserTemplates,t].join("")).html()||"";return n=n.trim()},r.cancelEvent=function(e){e&&"function"==typeof e.preventDefault&&e.preventDefault()},r.initialize=function(){r.addEvents(),r.handlePageLoaded()},r.addEvents=function(){r.eventBus.on(a.PAGE_LOADED,r.handlePageLoaded),r.eventBus.on(a.PAGE_LEAVE,r.handlePageLeave),r.eventBus.on(a.LAYER_LOADED,r.handlePageLoaded)},o.initializePromise=function(e){return new Promise(function(t){r.eventBus=e,r.initialize(),t("module/preconfs-teaser.js")})},o}),define("tracking/omniture-constants",[],function(){"use strict";return{none:"",contactRequest:"event2",configurationStarted:"event7",microConversionStarted:"event8",microConversionEnded:"event9",dealerRequest:"event13",newsletterRegistration:"event29",testDriveRequest:"event31",carChat:"event35",recommendation:"event36",enteredWithAudiCode:"event38",configurationSaved:"event39",pdfDownloadClick:"event40",print:"event42",technicalData:"event64",yourAudiLayer:"event65",configurationStarted2:"event66",configurationCompleted:"event67",conflictLayerOpened:"event73",conflictCanceled:"event74",conflictConfirmed:"event75",conflictShowAlternatives:"event76",conflictSelectAlternative:"event77",itemActivelySelected:"event78",configurationCompleted2:"event79",microConversionEnded2:"event80",audicodeShown:"event83",audicodeShown2:"event84",formStarted:"event81",formCompleted:"event82",itemCategoriesEngines:"eVar21",itemCategoriesExteriorItems:"eVar22",itemCategoriesInteriorItems:"eVar25",itemSelectionMethod:"eVar29",itemPrNumber:"eVar34",itemCategoryStandardItems:"eVar35",itemCategoryTrimlineItems:"eVar60",itemCategoriesEquipmentItems:"eVar61",itemCategoriesAccessoryItems:"eVar62",configurationItems:"prop61"}}),define("tracking/tracking-utils",["tracking/omniture-constants","configurator/dpu-api","router","core/logging","jquery"],function(e,t,n,a,i){"use strict";var r={},o={__:r};r.LOGGER=a.createLogger("tracking");var s=!1;return o.getConflictTriggers=function(){return t.getConflictTriggers()},o.getConflicts=function(){return t.getConflicts()},o.getUrl=function(){var e,t="",n=window.location.hash.replace(/#/,"");return 0!==n.length&&(n=n.split("&"),i.each(n,function(n,a){-1!==a.indexOf("jslayer=")||-1===a.indexOf("layer=")&&-1===a.indexOf("modal=")&&0!==n||(t=a),-1!==a.indexOf("jslayer=")&&(e=a)}),t=t.replace(/[a-zA-Z0-9]*=/,"")),t=""===t?window.location.pathname.replace(/^\/content/,"").replace(/\.html$/,""):t.replace(/^\/content/,"").replace(/\.html$/,""),e&&(t+=e.replace(/[a-zA-Z0-9]*=/,"/")),t},o.getGlobalObject=function(){var e=window.location.pathname;return s===!1&&(e=e.replace(/^\//,"").replace(/\.html$/,""),s={},"content"===e.split("/")[0]?(s.prop2=e.split("/")[3],s.prop3=e.split("/")[1]):(s.prop2=e.split("/")[2],s.prop3=e.split("/")[0]),s.eVar41="script",s.prop59=o.getAppName(),s.eVar48=s.prop59),s},o.getAppName=function(){return t.isConfigurable()?window.mss?"mssc":"NeMo":"CMS"},o.getPageName=function(){return o.getUrl().replace(/^\//,"").replace(/([\w-]*\/){3}/,"")},o.isConflictAlternative=function(e){return e&&e.length&&"function"==typeof e.closest&&e.closest(".nm-layer-conflict").length>0},o.getItemsCategory=function(e){var n=null;return e&&e.family&&(n=t.getFamilies()[e.family]||null),n},o.generateConfigStartItemPropertiesArr=function(e){var n=[];if(e&&e.family){var a=t.getFamilies()[e.family];a&&a.group&&n.push(a.group.replace(/,|;/g," ")),a&&a.name&&n.push(a.name.replace(/,|;/g," ")),e.name&&n.push(e.name.replace(/,|;/g," "))}return n},o.proxyMethod=function(e,t,n){return function(){try{for(var a=new Array(arguments.length),i=0;i<a.length;++i)a[i]=arguments[i];n&&a.push(n),e.apply(t,a)}catch(r){console.error(r)}}},o.log=function(e){r.LOGGER.debug(e)},o}),define("tracking/tracking-config",["tracking/tracking-utils"],function(e){"use strict";var t={},n={__:t};return window.s,n}),define("tracking/omniture-api",["jquery","tracking/tracking-config","tracking/omniture-constants","configurator/dpu-api","core/logging"],function(e,t,n,a,i){"use strict";var r={},o={__:r};return r.LOGGER=i.createLogger("tracking"),r.serializeData=function(e){return e},o.trackNow=function(e,t){if(o.isOmnitureTrackingAvailable())if(o.isOmnitureTrackingAvailable()){if(e.prop58="D=mid",e.eVar75="D=mid",r.LOGGER.info("omniture-api.trackNow: ",e),r.cleanUpGlobalOmnitureObject(),"object"==typeof e){s.linkTrackVars="";for(var n in e)e.hasOwnProperty(n)&&(s[n]=e[n],s.linkTrackVars.length>0&&(s.linkTrackVars+=","),s.linkTrackVars+=n);if(e.events){for(var a=[],i=e.events.length-1;i>=0;i--)a.push(e.events[i].replace(/:.+$/,"").replace(/=.+$/,""));s.linkTrackEvents=a.join(","),s.events=e.events.join(",")}}if(s.tl(!0,"o",t),r.LOGGER.info("omniture-api.trackNow: ",e),"function"==typeof trackactions)try{trackactions({tl:e})}catch(l){console.error("Tried to track to custom trackactions of mediacom, but something went wrong.",l)}}else r.LOGGER.warning("omniture-api.track: s is not defined.")},o.track=function(e){var t;if(r.LOGGER.info("omniture-api.track: ",e),o.isOmnitureTrackingAvailable()){e.prop58="D=mid",e.eVar75="D=mid",r.cleanUpGlobalOmnitureObject(),e.events&&(e.events=e.events.toString());for(t in e)e.hasOwnProperty(t)&&(s[t]=e[t]);if(s.t(),"function"==typeof trackactions)try{trackactions({t:e})}catch(n){console.error("Tried to track to custom trackactions of mediacom, but something went wrong.",n)}}else r.LOGGER.warning("omniture-api.track: s is not defined.")},o.isOmnitureTrackingAvailable=function(){var e=r.getOmnitureAccount();if(!e)return!1;if("undefined"==typeof window.initializeOmitureWithPlugins)return!1;try{r.initializeOmniture(e)}catch(t){r.LOGGER.error("omniture-api.trackNow: ",t)}return"undefined"==typeof window.s?!1:!0},o.mediaOpen=function(e,t){o.isOmnitureTrackingAvailable()&&s.Media.open(e,t,"mejs")},o.mediaPlay=function(e,t,n,a,i){o.isOmnitureTrackingAvailable()&&s.Media.play(e,t,n,a,i)},o.mediaStop=function(e,t,n){o.isOmnitureTrackingAvailable()&&(n===!0&&(s.Media.contextDataMapping["a.media.segmentView"]="event72,event71"),s.Media.stop(e,t),n===!0&&(s.Media.contextDataMapping["a.media.segmentView"]="event72"))},o.mediaClose=function(e){s.Media.close(e)},r.getOmnitureAccount=function(){var t=e(".nm-track-load[data-track-account]"),n=t.first().attr("data-track-account");return n},r.initializeOmniture=function(e){return e||(e=r.getOmnitureAccount()),e?"undefined"==typeof initializeOmitureWithPlugins?(r.LOGGER.error("[omniture-api].__.initializeOmniture(): `initializeOmitureWithPlugins` is undefined"),!1):("undefined"==typeof s&&(initializeOmitureWithPlugins(e),r.LOGGER.debug("[omniture-api].__.initializeOmniture(): omniture initialized")),!0):!1},r.removeVarFromGlobalOmnitureObject=function(e){s[e]&&(s[e]="")},r.cleanUpGlobalOmnitureObject=function(){var e,t=0;for(t=100;t>=0;t--)s["prop"+t]="",r.removeVarFromGlobalOmnitureObject("prop"+t),r.removeVarFromGlobalOmnitureObject("eVar"+t),r.removeVarFromGlobalOmnitureObject("hier"+t);for(e=["channel","products","events","campaign","purchaseID","state","zip","server","linkName"],t=e.length-1;t>=0;t--)r.removeVarFromGlobalOmnitureObject(e[t])},o.initializePromise=function(e){return new Promise(function(t){r.eventBus=e,r.initializeOmniture(),t("tracking/omniture-api.js")})},o}),define("tracking/tracking-dispatcher",["jquery","tracking/omniture-api","core/logging","tracking/tracking-utils"],function(e,t,n,a){"use strict";var i={},r={__:i};return i.debugMode=!1,i.trackingModules=[],i.maxFetchTime=21e3,i.LOGGER=n.createLogger("tracking"),r.registerTracker=function(e){"function"==typeof e.getDataPromise?(i.trackingModules.push(e),i.LOGGER.debug("dispatcher.registerTracker: module registered:",e)):i.LOGGER.error("dispatcher.registerTracker: module provided does not have a getDataPromise method.")},i.fetchSubmoduleData=function(e){var t,n,a=i.trackingModules.length,r=a,o=200,s=[],l=0;return a?new Promise(function(c,u){for(;a--;)t=i.trackingModules[a].getDataPromise(e),t.then(function(e){s.push(e),r--},function(e){i.LOGGER.warning("Error fetching Data "+e.message),r--});n=setInterval(function(){l>i.maxFetchTime&&(clearInterval(n),s.length?(i.LOGGER.warning("fetching Data aborted due to timeout!"),c(s)):u(new Error("fetching Data aborted due to timeout!"))),1>r&&(clearInterval(n),c(s)),l+=o},o)}):Promise.reject(new Error("no regstered Trackers - no Data to fetch!"))},i.mergeFetchedData=function(t,n){var a={},i=0;if(n=n||[],!n.length)return t;i=n.length;var r=t.events||[];e.extend(a,t);for(var o,s;i--;){if(n[i].events)if("string"==typeof n[i].events)r.push(n[i].events);else if("object"==typeof n[i].events&&n[i].events.length)for(s=n[i].events.length;s--;)o=n[i].events[s],r.indexOf(o)<0&&r.push(o);e.extend(a,n[i])}return r.length&&(a.events=r),a},r.track=function(n){i.LOGGER.debug("dispatcher.track: ",n),n=e.extend(n,a.getGlobalObject()),t.track(n)},r.trackNow=function(n,r){i.LOGGER.debug("dispatcher.trackNow: ",n),n=e.extend(n,a.getGlobalObject()),t.trackNow(n,r)},r.trackPage=function(e,n){var a,r=e,o=i.fetchSubmoduleData(n);i.LOGGER.debug("dispatcher.trackPage: ",e,n),o.then(function(e){a=e},function(e){i.LOGGER.log(e.message)}).then(function(){var e=i.mergeFetchedData(r,a);t.track(e)},function(e){i.LOGGER.error(e)})},r.mediaOpen=function(e,n){t.mediaOpen(e,n)},r.mediaPlay=function(e,n,a,i,r){t.mediaPlay(e,n,a,i,r)},r.mediaStop=function(e,n,a){t.mediaStop(e,n,a)},r.mediaClose=function(e){t.mediaClose(e)},r}),define("tracking/swipe-tracker",["jquery","events","tracking/tracking-dispatcher"],function(e,t,n){"use strict";var a={},i={__:a};return a.getCurrentPageName=function(){return e("body").attr("page-name")},i.swipeTrackingHandler=function(e,t){var i,r=a.getCurrentPageName(),o={},s=window.mss||null,l=s?"MSSC":"NeMo";for(i in t)t.hasOwnProperty(i)&&(o[i]=t[i].replace(/<pagename>/g,r).replace(/<prefix>/g,l));n.trackNow(o)},i.initializePromise=function(e){return new Promise(function(t){a.eventBus=e,t("tracking/swipe-tracker.js")})},i}),define("module/preconfiguration-teaser",["jquery","configurator/dpu-api","configurator/dpu-controller","events","router","tracking/tracking-utils","tracking/swipe-tracker"],function(e,t,n,a,i,r,o){"use strict";var s={},l={__:s};return s.oDefaults={sPreconfTeaserSelector:".nm-md-preconfig-teaser",spreconfigSlide:".nm-md-preconfig-teaser-slide",sButtonSelector:".j-preconfig-submit",sButtonConfigurationClass:"nm-md-preconfig-teaser-custom-configuration",sSelectorTabsNavi:"ul.nm-preconfig-teaser-thumbs",sSelectorTeaserTemplates:"j-preconfig-teaser-tpl-",sTabsSelectorDelegateClick:"li.nm-preconfig-teaser-thumbnail",sMenuSelectedClass:"nm-selected",sSelectorTeaserContainer:".nm-preconfig-teaser-peephole"},s.selectedIndex=0,s.maxIndex=0,s.startPos={x:0,y:0},s.sensitivity=40,s.direction="left",s.isAnimating=!1,s.xDirection="none",s.yDirection="none",s.deltaX=0,s.deltaY=0,s.eventLookup={touchdevice:{down:"touchstart",move:"touchmove",up:"touchend"},desktopdevice:{down:"mousedown",move:"mousemove",up:"mouseup"}},s.isDown=!1,s.deviceType="desktopdevice",s.isTouchDevice=function(){return!!("ontouchstart"in window)||!!navigator.msMaxTouchPoints},s.handlePageLoaded=function(){if(s.$preconfigTeaserContainer&&e.contains(document,s.$preconfigTeaserContainer[0]))return!1;if(s.$preconfigTeaserContainer=e(s.oDefaults.sPreconfTeaserSelector),s.$preconfigTeaserContainer.length){var t=e("script[id^='"+s.oDefaults.sSelectorTeaserTemplates+"']");s.maxIndex=t.length-1,s.isTouchDevice()&&(s.deviceType="touchdevice"),s.maxIndex>0&&(s.addSwipeEvents(),s.$preconfigTeaserContainer.on("click.tabs touchend.tabs",s.oDefaults.sTabsSelectorDelegateClick,s.handleTabClick)),s.$preconfigTeaserContainer.on("click.configuration.start touchend.configuration.start",s.oDefaults.sButtonSelector,s.handleConfigurationStartClick),s.eventBus.on(a.CONFIG_UPDATE,s.updateButtonLabel),s.updateButtonLabel()}},s.addSwipeEvents=function(){s.removeSwipeEvents(),s.$preconfigTeaserContainer.off(s.eventLookup[s.deviceType].down,s.handleMouseDown).on(s.eventLookup[s.deviceType].down,s.handleMouseDown)},s.removeSwipeEvents=function(){s.$preconfigTeaserContainer.off(s.eventLookup[s.deviceType].up,s.handleMouseUp),s.$preconfigTeaserContainer.off(s.eventLookup[s.deviceType].move,s.handleMouseMove)},s.handleMouseDown=function(e){s.isDown=!1,"select"!==e.target.nodeName.toLowerCase()&&"input"!==e.target.nodeName.toLowerCase()&&"option"!==e.target.nodeName.toLowerCase()&&(s.isDown=!0,s.deltaX=0,s.deltaY=0,s.startPos.x=e.pageX||e.originalEvent.changedTouches[0].pageX,s.startPos.y=e.pageY||e.originalEvent.changedTouches[0].pageY,s.$preconfigTeaserContainer.off(s.eventLookup[s.deviceType].up,s.handleMouseUp).on(s.eventLookup[s.deviceType].up,s.handleMouseUp),s.isTouchDevice()||s.$preconfigTeaserContainer.on(s.eventLookup[s.deviceType].move,s.handleMouseMove))},s.getXDirection=function(e){return e>0?"left":"right"},s.getYDirection=function(e){return e>0?"up":"down"},s.handleMouseUp=function(e){s.down=!1,s.removeSwipeEvents(),s.deltaX=s.startPos.x-(e.pageX||e.originalEvent.changedTouches[0].pageX),s.deltaY=s.startPos.y-(e.pageY||e.originalEvent.changedTouches[0].pageY),s.xDirection=s.getXDirection(s.deltaX),s.yDirection=s.getYDirection(s.deltyY),Math.abs(s.deltaX)>s.sensitivity&&Math.abs(s.deltaY)<s.sensitivity&&s.triggerViewChange(s.xDirection)},s.handleMouseMove=function(e){s.isDown&&(s.deltaX=s.startPos.x-(e.pageX||e.originalEvent.changedTouches[0].pageX),s.deltaY=s.startPos.y-(e.pageY||e.originalEvent.changedTouches[0].pageY),s.xDirection=s.getXDirection(s.deltaX),s.yDirection=s.getYDirection(s.deltyY),Math.abs(s.deltaX)>s.sensitivity&&Math.abs(s.deltaY)<s.sensitivity&&(s.removeSwipeEvents(),s.isDown=!1,s.triggerViewChange(s.xDirection)))},s.removeEvents=function(){s.$preconfigTeaserContainer=e(s.oDefaults.sPreconfTeaserSelector),s.$preconfigTeaserContainer.length&&(s.removeSwipeEvents(),s.$preconfigTeaserContainer.off("click.tabs touchend.tabs",s.handleTabClick),s.$preconfigTeaserContainer.off("click.configuration.start touchend.configuration.start",s.handleConfigurationStartClick),e("body").off(a.CONFIG_UPDATE,s.updateButtonLabel))},s.handleConfigurationStartClick=function(a){s.cancelEvent(a);var r=e(this),o=r.data("prstring"),l=r.data("audicode");return e(a.target).closest("a").trigger("click.link-tracking"),l?(n.loadConfigurationFromTeaser({audicode:l,prstring:null},"audicode.preconfig-teaser").then(function(){i.open("page",t.getCurrentCarlineUrl())}),!1):o?(n.loadConfigurationFromTeaser({prstring:o,audicode:null},"prstring.preconfig-teaser").then(function(){i.open("page",t.getCurrentCarlineUrl())}),!1):(i.open("page",t.getCurrentCarlineUrl()),void e("a.nm-configuration-new").trigger("click.configuration.new"))},s.handleTabClick=function(e){var t=$(this).index(),n=s.selectedIndex;return s.cancelEvent(e),s.isAnimating?null:t===n?!1:(t>n?s.direction="left":s.direction="right",s.selectedIndex=t,void s.updateContent(s.selectedIndex,s.direction))},s.getNextIndex=function(e){return(e+1)%(s.maxIndex+1)},s.getPreviousIndex=function(e){var t=e-1;return 0>t&&(t=s.maxIndex),t},s.updateContent=function(e,t){s.insertTeaser(e,t),s.updateSelection(e)},s.triggerViewChange=function(e){var n=s.selectedIndex;return s.isAnimating?null:(s.legacyEventBus.trigger("swipe.preconfiguration",{prop16:"<prefix>:"+t.getCarlineName(),eVar39:"Pre-Config Switch",prop39:"Pre-Config Switch",eVar44:"Pre-Config Switch",prop44:"Pre-Config Switch",eVar46:"<pagename>:Pre-Config Switch:Swipe",prop46:"<pagename>:Pre-Config Switch:Swipe",prop67:"<pagename>"}),s.direction=e,n="right"===e?s.getPreviousIndex(n):s.getNextIndex(n),s.selectedIndex=n,void s.updateContent(s.selectedIndex,s.direction))},s.handlePageLeave=function(){s.removeEvents()},s.animateStage=function(e,t,n,a){var i=t.width(),r="-"+.5*i+"px";s.isAnimating=!0,"left"===e?t.css("height",n).animate({"margin-left":r,height:a},500,"easeOutSine",s.animationEnded):t.css("margin-left",r).animate({"margin-left":0,height:a},500,"easeOutSine",s.animationEnded)},s.insertTeaser=function(t,n){var a,i,r,o,l,c=e(s.oDefaults.sSelectorTeaserContainer);c.addClass("nm-slide-animation-start-"+n),a=s.getTemplateByIndex(t),i=e(a),r=e(s.oDefaults.spreconfigSlide),o=r.height()+"px",i.appendTo(c),l=i.height()+"px",s.animateStage(n,c,o,l)},s.animationEnded=function(){var e=$(this).removeClass(["nm-slide-animation-start-",s.direction].join("")).removeAttr("style"),t=e.find(s.oDefaults.spreconfigSlide).first();t.remove(),s.isAnimating=!1},s.updateButtonLabel=function(){t.hasCustomConfiguration()?$(s.oDefaults.sSelectorTeaserContainer).addClass(s.oDefaults.sButtonConfigurationClass):$(s.oDefaults.sSelectorTeaserContainer).removeClass(s.oDefaults.sButtonConfigurationClass)},s.updateSelection=function(t){var n,a=s.$preconfigTeaserContainer.find(s.oDefaults.sSelectorTabsNavi),i=a.find(s.oDefaults.sTabsSelectorDelegateClick);i.removeClass(s.oDefaults.sMenuSelectedClass),n=e(i[t]),n.addClass(s.oDefaults.sMenuSelectedClass)},s.getTemplateByIndex=function(t){var n=e(["#",s.oDefaults.sSelectorTeaserTemplates,t].join("")).html()||"";return n=n.trim()},s.cancelEvent=function(e){e&&"function"==typeof e.preventDefault&&e.preventDefault()},s.initialize=function(){s.addEvents(),s.handlePageLoaded()},s.addEvents=function(){s.eventBus.on(a.PAGE_LOADED,s.handlePageLoaded),s.eventBus.on(a.LAYER_LOADED,s.handlePageLoaded),s.legacyEventBus.on("swipe.preconfiguration",r.proxyMethod(o.swipeTrackingHandler,s))},l.initializePromise=function(t){return new Promise(function(n){s.eventBus=t,s.legacyEventBus=e("body"),s.initialize(),n("module/preconfiguration-teaser.js")})},l}),define("module/interactive-image-rotation",["jquery","events"],function(e,t){"use strict";var n={},a={__:n};return n.clickPosX=!1,n.controllerOffset=!1,n.controlOffset=!1,n.clickOffset=!1,n.numOfImages=0,n.oDefaults={sSelectorRotationImage:".nm-rotation-image",sSelectorSliderContainer:".nm-image-container",sSelectorSliderControl:".nm-rotation-control",sSelectorSliderController:".nm-rotation-controller"},n.addEvents=function(){n.eventBus.on(t.PAGE_LOADED,a.handler),n.eventBus.on(t.LAYER_LOADED,a.handler),a.handler()},a.dispose=function(){n.eventBus.off(t.PAGE_LOADED,a.handler),n.eventBus.off(t.LAYER_LOADED,a.handler)},a.handler=function(){$(n.oDefaults.sSelectorSliderControl).bind("mousedown touchstart",n.activateDragEventHandler)},n.ie8AdjustWrapOverlay=function(){$(n.oDefaults.sSelectorIE8WrappedImage).each(function(){var e=$(this).closest(n.oDefaults.sSelectorSliderContainer).height(),t=$(this).closest(n.oDefaults.sSelectorSliderContainer).width();$(this).height(e),$(this).width(t)})},n.changeSliderControlPosition=function(e,t){var a=e.closest(n.oDefaults.sSelectorSliderContainer).width();e.siblings(n.oDefaults.sSelectorSliderControl).animate({left:t},300,!1),e.animate({width:a-t},300,!1)},n.activateDragEventHandler=function(e){"touchstart"===e.type?n.clickPosX=e.originalEvent.touches[0].pageX:n.clickPosX=e.pageX,n.numOfImages=$(this).closest(n.oDefaults.sSelectorSliderController).siblings(n.oDefaults.sSelectorRotationImage).length,n.controllerOffset=$(this).closest(n.oDefaults.sSelectorSliderController).offset().left,n.controlOffset=$(this).closest(n.oDefaults.sSelectorSliderControl).offset().left,n.clickOffset=n.clickPosX-n.controlOffset,$(this).unbind("mousedown touchstart",n.activateDragEventHandler),n.mouseMoveContainer=$(this).closest(n.oDefaults.sSelectorSliderContainer),n.mouseMoveContainer.unbind("mousemove touchmove",n.dragMovement),n.mouseMoveContainer.bind("mousemove touchmove",n.dragMovement),n.legacyEventBus.unbind("mouseup touchend",n.deactivateDragEventHandler),n.legacyEventBus.bind("mouseup touchend",n.deactivateDragEventHandler)},n.dragMovement=function(e){var t,a=$(this).find(n.oDefaults.sSelectorSliderController),i=$(this).find(n.oDefaults.sSelectorSliderControl),r=0,o=0;r="touchmove"===e.type?e.originalEvent.touches[0].pageX-n.controllerOffset-n.clickOffset:e.pageX-n.controllerOffset-n.clickOffset,o=(r+i.width()/2)/a.width()*100,t=Math.min(n.numOfImages-1,Math.max(0,Math.floor(o/(100/n.numOfImages)))),$(this).closest(n.oDefaults.sSelectorSliderContainer).find(n.oDefaults.sSelectorRotationImage).removeClass("active"),$(this).closest(n.oDefaults.sSelectorSliderContainer).find(n.oDefaults.sSelectorRotationImage).eq(t).addClass("active"),r>=-i.width()/2&&r<=a.width()-i.width()/2&&$(this).find(n.oDefaults.sSelectorSliderControl).css({left:r})},n.deactivateDragEventHandler=function(){n.deactivatedDrag($(this))},n.deactivatedDrag=function(e){e.find(n.oDefaults.sSelectorSliderControl).unbind("mousedown touchstart",n.activateDragEventHandler),e.find(n.oDefaults.sSelectorSliderControl).bind("mousedown touchstart",n.activateDragEventHandler),n.mouseMoveContainer.unbind("mousemove touchmove",n.dragMovement),n.legacyEventBus.unbind("mouseup touchend",n.deactivateDragEventHandler)},n.initialize=function(){n.addEvents()},a.initializePromise=function(t){return new Promise(function(a){n.eventBus=t,n.legacyEventBus=e("body"),n.initialize(),a("module/interactive-image-rotation.js")})},a}),define("module/interactive-image-slider",["jquery","events"],function(e,t){"use strict";var n={},a={__:n};return n.oDefaults={sSelectorSliderContainer:".nm-image-container",sSelectorSliderMainImage:".nm-slider-first-image",sSelectorSliderOverlayImage:".nm-slider-second-image",sSelectorIE8WrappedImage:".nm-slider-wrappedImage",sSelectorSliderControl:".nm-slider-control",sSelectorSliderControlItems:".nm-slider-control-items"},n.addEvents=function(){n.eventBus.on(t.PAGE_LOADED,a.handler),n.eventBus.on(t.LAYER_LOADED,a.handler),a.handler()},a.dispose=function(){n.eventBus.off(t.PAGE_LOADED,a.handler),n.eventBus.off(t.LAYER_LOADED,a.handler)},a.handler=function(){$(n.oDefaults.sSelectorSliderMainImage).on("click",n.clickMainImageEventHandler),$(n.oDefaults.sSelectorSliderOverlayImage).on("click",n.clickOverlayImageEventHandler),$(n.oDefaults.sSelectorSliderControl).bind("mousedown touchstart",n.activateDragEventHandler)},n.clickMainImageEventHandler=function(){var e=$(this).closest(n.oDefaults.sSelectorSliderContainer);n.changeSliderControlPosition($(this).siblings(n.oDefaults.sSelectorSliderOverlayImage),e.width()-1)},n.clickOverlayImageEventHandler=function(){n.changeSliderControlPosition($(this),0)},n.changeSliderControlPosition=function(e,t){var a=e.closest(n.oDefaults.sSelectorSliderContainer).width();e.siblings(n.oDefaults.sSelectorSliderControl).animate({left:t},300,!1),e.animate({width:a-t},300,!1)},n.activateDragEventHandler=function(){$(this).unbind("mousedown touchstart",n.activateDragEventHandler),n.mouseMoveContainer=$(this).closest(n.oDefaults.sSelectorSliderContainer),n.mouseMoveContainer.unbind("mousemove touchmove",n.dragMovement),n.mouseMoveContainer.bind("mousemove touchmove",n.dragMovement),n.legacyEventBus.unbind("mouseup touchend",n.deactivateDragEventHandler),n.legacyEventBus.bind("mouseup touchend",n.deactivateDragEventHandler)},n.getSliderPositionX=function(e,t){var n=0;return n="touchmove"===e.type?e.originalEvent.touches[0].pageX-t.offset().left:e.pageX-t.offset().left},n.dragMovement=function(t){var a,i,r=n.getSliderPositionX(t,e(this));30>=r&&(r=0),$(this).width()-r<=30&&(r=$(this).width()-1),a=$(this).width()-r,i=$(this).closest(n.oDefaults.sSelectorSliderContainer).width(),a>=0&&i>=a?($(this).find(n.oDefaults.sSelectorSliderControl).css({left:r}),$(this).find(n.oDefaults.sSelectorSliderOverlayImage).css({width:a})):n.deactivatedDrag($(this))},n.deactivateDragEventHandler=function(){n.deactivatedDrag($(this))},n.deactivatedDrag=function(e){e.find(n.oDefaults.sSelectorSliderControl).unbind("mousedown touchstart",n.activateDragEventHandler),e.find(n.oDefaults.sSelectorSliderControl).bind("mousedown touchstart",n.activateDragEventHandler),n.mouseMoveContainer.unbind("mousemove touchmove",n.dragMovement),n.legacyEventBus.unbind("mouseup touchend",n.deactivateDragEventHandler)},n.initialize=function(){n.addEvents()},a.initializePromise=function(t){return new Promise(function(a){n.eventBus=t,n.legacyEventBus=e("body"),n.initialize(),a("module/interactive-image-slider.js")})},a}),define("module/configuratorteaser",["jquery","module/homepage","events"],function(e,t,n){"use strict";var a,i,r,o,s,l,c,u,d,m,g,f,p,v,h,y,C,S,E,D,w,b,A,I,k,T={},L={__:T},P=!1,R=!1;return T.initialize=function(n){return T.legacyEventBus=n,e(".nm-homepage-md-configurator-teaser").length<1?!1:(SETUPS.get("nemo.homepage.cacheupdateurl")===!0&&t.updateCacheUrl("carlinedataurl",function(){}),e(".nm-homepage-md-configurator-teaser-vtp-used-cars").length>0&&(P=!0),T.setUpStage(),void T.addEvents())},T.setUpStage=function(){E=$(window),D=e(".nm-homepage-md-configurator-teaser"),w=D.find(".nm-homepage-md-configurator-teaser-image"),b=D.find(".nm-homepage-md-configurator-teaser-selection"),A=D.find(".nm-homepage-md-configurator-teaser-vtp"),I=D.find(".nm-homepage-md-configurator-teaser-box-efficiency"),l=w.find(".nm-homepage-md-configurator-teaser-image-wrap"),c=l.find("img"),u=w.find(".nm-homepage-md-configurator-teaser-image-clickable"),S=w.find(".loading-indicator"),s=e("#nm-homepage-md-configurator-teaser-selection-type"),o=e("#nm-homepage-md-configurator-teaser-selection-color"),f=b.find(".nm-homepage-md-configurator-teaser-button"),k=e(".nm-homepage-md-configuration-teaser-selector"),d=A.find("strong span.carline_label"),p=A.find(".nm-homepage-md-configurator-teaser-vtp-cols"),v=A.find(".nm-homepage-md-configurator-teaser-vtp-new-cars .stat"),h=A.find(".nm-homepage-md-configurator-teaser-vtp-new-cars > a"),P&&(y=A.find(".nm-homepage-md-configurator-teaser-vtp-used-cars .stat"),C=A.find(".nm-homepage-md-configurator-teaser-vtp-used-cars > a")),m=I.find(".fuel_consumption .value"),g=I.find(".co2_emissions .value");var t=s.children(".active-carline").data("carline");if(t){var n=t.colors;o.children("li").each(function(){var e=t.configuratorUrlBase,a=$(this).attr("value"),i=$(this).data("prstring");if(e&&(e.indexOf("#")<0?e+=i:e=e.replace("#",i+"#"),$(this).attr("data-configuratorurl",e),"undefined"!=typeof n[a])){var r=n[a].configuratorTracking;$(this).data("configuratorTracking",r)}});var a=t.newUsed;a&&(v.text(a.numNew),h.attr("href",a.urlNew),P&&(y.text(a.numUsed),C.attr("href",a.urlUsed)))}},T.onClickOutside=function(){e(".nm-homepage-md-configuration-teaser-selector").addClass("selector-closed")},T.addEvents=function(){f.on("click",T.openConfiguratorPage),u.on("click",T.openConfiguratorPage),T.legacyEventBus.on("click.enter.configuratorpage",".nm-j-enter-configurator-click",T.openConfiguratorPage),s.on("click.select.value",".selector-value a",T.onCarlineSelect),o.on("click.select.value",".selector-value a",T.onCarColorSelect),T.legacyEventBus.on("click.close",T.onClickOutside),k.on("click.open",".selector-current-selected a",function(){var t=e(this).closest(".nm-homepage-md-configuration-teaser-selector");return t.toggleClass("selector-closed"),k.not(t).addClass("selector-closed"),!1}),k.on("click.close","li.close-selector",function(){k.addClass("selector-closed")})},T.removeEvents=function(){r.off("click.dealersearchBtn"),r.off("submit.location"),f.off("click"),u.off("click"),T.legacyEventBus.off("click.enter.configuratorpage"),s.off("click.select.value"),o.off("click.select.value"),k.off("click.open"),k.off("click.close")},T.openConfiguratorPage=function(e){e.preventDefault();var t=T.getSelectedConfiguratorUrl();try{sessionStorage.setItem("almo.entryToNemoFromTeaser","yes")}catch(n){}window.document.location.href=t},T.getSelectedConfiguratorUrl=function(){return o.children(".active-color").attr("data-configuratorurl")},T.gracefulLoad=function(){$(".carline-stage img").each(function(){this.complete?($(this).css("visibility","visible"),$(this).stop().fadeTo(1e3,1),R=!0):$(this).on("load",function(){$(this).css("visibility","visible"),$(this).stop().fadeTo(1e3,1),$(this).off("load"),R=!0})})},T.showLoadingIndicator=function(){S.show()},T.hideLoadingIndicator=function(){S.hide()},T.activateConfiguratorLink=function(){f.removeClass("disabled")},T.onCarColorSelect=function(t){var n=e(this).closest("li");n.length||(n=o.children("li.active-color")),n.siblings("li").removeClass("active-color"),n.addClass("active-color");var a=s.children("li.active-carline").data("carline"),r=n.data("value"),l=(o.children("li.active-color").data("configuratorTracking"),s.data("mediaserviceurl")+a.colorPrefix+r+a.colorSuffix);if("imagetext"===t){var u=s.children(".active-carline").data("carline");T.animateSwitchCar(l,!0,u),c.attr("alt",u.name)}else"nothing"!==t&&T.animateSwitchCar(l,!1);return T.activateConfiguratorLink(),i=r,k.addClass("selector-closed"),o.closest(".nm-homepage-md-configuration-teaser-selector").find(".selector-current-selected a").text(n.text()),e("body").trigger("change.teaserselection"),!1},T.onCarlineSelect=function(t){var n=e(this).closest("li");n.siblings("li").removeClass("active-carline"),n.addClass("active-carline");var i=n.data("carline");if(i){var r=s.data("mediaserviceurl")+i.defaultColorUrl;i.newUsed;c.attr("alt",i.name),o.empty(),o.append('<li class="close-selector" />');var l=i.colors,u="";for(var d in l)if(d){if(u!==l[d].colorClass){var m=$("<li />").append("<span>"+l[d].colorClass+"</span>");o.append(m)}u=l[d].colorClass;var g=$("<li />").addClass("selector-value"),f=$("<a />").text(l[d].name).attr("href","").attr("style","background-image:url("+s.data("mediaserviceurl")+l[d].tileUrl+")");g.append(f),g.attr("data-prstring",l[d].prstring),g.attr("data-value",d);var p=i.configuratorUrlBase,v=l[d].prstring;p.indexOf("#")<0?p+=v:p=p.replace("#",v+"#"),g.attr("data-configuratorurl",p),g.attr("data-configuratorTracking",l[d].configuratorTracking),i.defaultColor===d&&(g.addClass("active-color"),o.closest(".nm-homepage-md-configuration-teaser-selector").find(".selector-current-selected a").text(l[d].name)),o.append(g)}return t!==!1&&(T.onCarColorSelect("nothing"),T.animateSwitchCar(r,!0,i),a=i),k.addClass("selector-closed"),
s.closest(".nm-homepage-md-configuration-teaser-selector").find(".selector-current-selected a").text(i.name),e("body").trigger("change.teaserselection"),!1}},T.replaceNewUsedContent=function(e){var t;e&&(t=e.newUsed),t||(t={numNew:"0",numUsed:"0"},p&&(t.urlNew=p.data("default").vtpNewBaseUrl,P&&(t.urlUsed=p.data("default").vtpUsedBaseUrl))),v.fadeOut(function(){v.text(t.numNew),$(this).fadeIn()}),P&&y.fadeOut(function(){y.text(t.numUsed),$(this).fadeIn()}),h.attr("href",t.urlNew),P&&C.attr("href",t.urlUsed)},T.switchTeaserTexts=function(e){d.fadeOut(function(){d.text(e.nominativePlural),$(this).fadeIn()}),m.fadeOut(function(){m.text(e.eecFuel),$(this).fadeIn()}),g.fadeOut(function(){g.text(e.eecCo2),$(this).fadeIn()}),T.replaceNewUsedContent(e)},T.animateSwitchCar=function(e,t,n){var a,i=500,r=200,o=!1,s=c.attr("src");e!==s&&l.fadeOut(i,function(){c.unbind("load"),c.load(function(){o=!0,T.hideLoadingIndicator(),a?setTimeout(function(){T.hideLoadingIndicator(),l.fadeIn(i),t&&T.switchTeaserTexts(n),c.unbind("load")},r):(T.hideLoadingIndicator(),l.fadeIn(i),t&&T.switchTeaserTexts(n),c.unbind("load"))}),setTimeout(function(){o||(a=!0,T.showLoadingIndicator())},r),c.attr("src",e)})},L.initializePromise=function(t){return new Promise(function(n){T.eventBus=t,T.initialize(e("body")),n("module/configuratorteaser.js")})},L}),define("module/visualizer",["jquery","configurator/dpu-api","configurator/dpu-controller","events","router","module/device"],function(e,t,n,a,i,r){"use strict";var o={},s={__:o};return o.oDefaults={sColors:"nm-j-visualizer-tiles-color",sRims:"nm-j-visualizer-tiles-rim",sCombination:".nm-md-visualizer-combination",sSelectorCombiTemplates:"nm-j-visualizer-tpl-",sCombiItem:".nm-visualizer-slide",sSelectorCombiContainer:".nm-visualizer-combination",sTilesSelectorDelegateClick:"li.nm-j-visualizer-item",sSelectorVisualizer:".nm-md-visualizer",sMenuSelectedClass:"nm-selected",sButtonSelector:".nm-j-preconfig-submit",svisualizerSlide:".nm-visualizer-slide"},o.selectedIndex=0,o.selectedColorIndex=0,o.selectedRimIndex=0,o.eventLookup={touchdevice:{down:"touchstart",move:"touchmove",up:"touchend"},desktopdevice:{down:"mousedown",move:"mousemove",up:"mouseup"}},o.isDown=!1,o.deviceType="desktopdevice",o.isTouchDevice=function(){return!!("ontouchstart"in window)||!!navigator.msMaxTouchPoints},o.handlePageLoaded=function(t){var n,a=this&&t&&t.element?t.element:"body";o.$visualizerContainer=e(a).find(o.oDefaults.sSelectorVisualizer),o.$visualizerSlide=e(o.oDefaults.sCombiItem),o.$visualizerContainer.length&&(o.removeEvents(a),n=e("script[id^='"+o.oDefaults.sSelectorCombiTemplates+"']"),o.maxIndex=n.length-1,o.isTouchDevice()&&(o.deviceType="touchdevice"),o.maxIndex>0&&o.$visualizerContainer.on("click.tiles touchend.tiles",o.oDefaults.sTilesSelectorDelegateClick,o.handleTileClick),o.$visualizerContainer.on("click.configuration.start touchend.configuration.start",o.oDefaults.sButtonSelector,o.handleConfigurationStartClick))},o.removeEvents=function(t){o.$visualizerContainer=t?e(t).find(o.oDefaults.sSelectorVisualizer):e(o.oDefaults.sSelectorVisualizer),o.$visualizerContainer.length&&(o.$visualizerContainer.off("click.tiles touchend.tiles",o.handleTileClick),o.$visualizerContainer.off("click.configuration.start touchend.configuration.start",o.handleConfigurationStartClick))},o.handleConfigurationStartClick=function(a){var r,s,l;o.cancelEvent(a),s=e(o.oDefaults.sCombiItem).data("audicode"),l=e(o.oDefaults.sCombiItem).data("prstring"),(s||l)&&(r={},s?r.audicode=s:r.prstring=l,n.loadConfigurationFromTeaser(r,"audicode.visualizer").then(function(){i.open("page",t.getCurrentCarlineUrl())}))},o.handleTileClick=function(e){o.cancelEvent(e),o.updateContent($(this))},o.updateContent=function(e){o.updateSelection(e),o.insertCombination()},o.handlePageLeave=function(){o.removeEvents()},o.insertCombination=function(t){var n=e(o.oDefaults.sSelectorCombiContainer),a=o.getTemplate(),i=e(a).addClass("nm-md-visualizer-hidden"),r=e(o.oDefaults.svisualizerSlide),s=r.height()+"px";r.addClass("nm-md-visualizer-hide"),i.appendTo(n),setTimeout(function(){i.addClass("nm-md-visualizer-show").removeClass("nm-md-visualizer-hidden")},250);var l=i.height()+"px";o.isAnimating=!0,n.css("height",s).animate({height:l},500,"easeOutSine"),setTimeout(function(){o.animationEnded(n)},500)},o.animationEnded=function(e){var t=e.find(o.oDefaults.svisualizerSlide).first(),n=e.find(o.oDefaults.svisualizerSlide).last(),a=t.find("video");a.length>0&&a.each(function(){$(this)[0].pause(),$(this).prop("src",""),$(this).find("source").remove(),$(this).remove()});var i=n.find("video");if(r.isMobile()){var s=i[0].closest(".nm-video");s.classList.add("nm-hide-controls"),i[0].setAttribute("controls","controls")}e.removeAttr("style"),t.remove(),o.isAnimating=!1},o.updateSelection=function(t){var n=e(t.parent().parent()),a=t.index();n.hasClass(o.oDefaults.sColors)?o.selectedColorIndex=a:n.hasClass(o.oDefaults.sRims)&&(o.selectedRimIndex=a);var i=t.parent(),r=i.find(o.oDefaults.sTilesSelectorDelegateClick);r.removeClass(o.oDefaults.sMenuSelectedClass);var s=e(r[a]);s.addClass(o.oDefaults.sMenuSelectedClass)},o.getTemplate=function(){var t='.nm-visualizer-tpl[data-visualizer-data-counter="'+o.selectedColorIndex+'"][data-visualizer-matrix-counter="'+o.selectedRimIndex+'"]',n=e(t).html()||"";return n=n.trim()},o.cancelEvent=function(e){e&&"function"==typeof e.preventDefault&&e.preventDefault()},o.initialize=function(){o.addEvents(),o.handlePageLoaded()},o.addEvents=function(){o.eventBus.on(a.PAGE_LOADED,o.handlePageLoaded),o.eventBus.on(a.LAYER_LOADED,o.handlePageLoaded)},s.initializePromise=function(e){return new Promise(function(t){o.eventBus=e,o.initialize(),t("module/visualizer.js")})},s}),define("module/navigation",["jquery","events"],function(e,t){"use strict";var n={initialContentAreaSelector:".nm-wrapper-content .nm-area-content:first-child",navigationSelector:".nm-navigation-derivative-main-lists",layerNavigationSelector:".nm-navigation-derivative-sub-list",globalLayerNavigationSelector:".nm-layer .nm-navigation-derivative-sub-list",hiddenNavItemClassName:"nm-navigation-hidden-item",showMoreButtonClassName:"nm-navigation-more-btn-show",hasMoreButtonClassName:"nm-has-more-btn",basketToggle:"#nm-basket-toggle",mainNavToggle:"#nm-navigation-toggle-btn",shoppingToolsToggle:"#nm-supportbar-toggle",shoppingToolsLabel:".nm-supportbar-toggle-label",shoppingToolsNav:".nm-supportbar-navigation",stckWidgetToggle:"#nm-matching-toggle",stckWidgetLabel:".nm-matching-toggle-label",sSelectorNavWrap:".nm-nav-wrap",sClassLoaded:"nm-nav-loaded",sClassStockCar:".sc-filter-navigation",mobileWidth:768},a={isStockCar:!1},i={__:a};return a.showMoreButton=function(t,i){if(a.isStockCar)return!1;var r,o=t.find(i+" > li:first-child label"),s=t.find(n.layerNavigationSelector);o.length>0&&(r=t.find(i+" > li:last-child"),r.hasClass("nm-summary-mobile-link")&&(r=t.find(i+" > li:nth-last-child(2)")),(r.position().top>0||r.hasClass(n.hiddenNavItemClassName))&&r.find("a").is(":visible")?(o.addClass(n.showMoreButtonClassName),s.addClass(n.hasMoreButtonClassName)):(o.removeClass(n.showMoreButtonClassName),s.removeClass(n.hasMoreButtonClassName))),e(n.sSelectorNavWrap).addClass(n.sClassLoaded)},a.setHiddenNavItems=function(t,i){return a.isStockCar?!1:(t.find(i).length>0&&t.find(i+" > li").length>0&&(t.find(i+" > li").removeClass(n.hiddenNavItemClassName),e(t.find(i+" > li").get().reverse()).each(function(){return e(this).find("a").length&&e(this).find("a").position().top>0?void e(this).addClass(n.hiddenNavItemClassName):!1})),void a.showMoreButton(t,i))},a.initNavToggles=function(t){var i,r;a.isStockCar||(a.legacyEventBus.on("change",n.basketToggle,a.handleToggleChange),e(n.stckWidgetToggle).length&&a.legacyEventBus.on("change",n.stckWidgetToggle,a.handleToggleChange),e(n.shoppingToolsToggle).length&&(a.legacyEventBus.on("change",n.shoppingToolsToggle,a.handleToggleChange),e(window).width()>n.mobileWidth&&!("ontouchstart"in window||navigator.msMaxTouchPoints)&&(i=e(n.shoppingToolsLabel),r=e(n.shoppingToolsNav),i.on("mouseover mouseout",a.handleShoppingToolsHover),r.on("mouseover mouseout",a.handleShoppingToolsHover)))),a.legacyEventBus.on("change",n.mainNavToggle,a.handleToggleChange)},a.handleShoppingToolsHover=function(t){var a=e(n.shoppingToolsToggle);a.prop("checked","mouseover"===t.type)},a.handleToggleChange=function(t){var a=e(n.stckWidgetToggle).length,i=e(n.shoppingToolsToggle).length;e(t.target).is(n.basketToggle)?(e(".nm-basket").toggleClass("nm-basket-widget-is-open",e(t.target).is(":checked")),e("body").removeClass("nm-page-nav-is-open"),e(n.mainNavToggle).is(":checked")&&e(n.mainNavToggle).prop("checked",!1),i&&e(n.shoppingToolsToggle).is(":checked")&&e(n.shoppingToolsToggle).prop("checked",!1),a&&e(n.stckWidgetToggle).is(":checked")&&e(n.stckWidgetToggle).prop("checked",!1)):e(t.target).is(n.mainNavToggle)?(e("body").toggleClass("nm-page-nav-is-open",e(t.target).is(":checked")),e(".nm-basket").removeClass("nm-basket-widget-is-open"),e(n.basketToggle).is(":checked")&&e(n.basketToggle).prop("checked",!1),i&&e(n.shoppingToolsToggle).is(":checked")&&e(n.shoppingToolsToggle).prop("checked",!1),a&&e(n.stckWidgetToggle).is(":checked")&&e(n.stckWidgetToggle).prop("checked",!1)):e(t.target).is(n.shoppingToolsToggle)?(e("body").removeClass("nm-page-nav-is-open"),e(".nm-basket").removeClass("nm-basket-widget-is-open"),e(n.basketToggle).is(":checked")&&e(n.basketToggle).prop("checked",!1),e(n.mainNavToggle).is(":checked")&&e(n.mainNavToggle).prop("checked",!1),a&&e(n.stckWidgetToggle).is(":checked")&&e(n.stckWidgetToggle).prop("checked",!1)):e(t.target).is(n.stckWidgetToggle)&&(e(".nm-basket").toggleClass("nm-basket-widget-is-open",e(t.target).is(":checked")),e("body").removeClass("nm-page-nav-is-open"),e(n.basketToggle).is(":checked")&&e(n.basketToggle).prop("checked",!1),e(n.mainNavToggle).is(":checked")&&e(n.mainNavToggle).prop("checked",!1),i&&e(n.shoppingToolsToggle).is(":checked")&&e(n.shoppingToolsToggle).prop("checked",!1))},a.checkForMoreBtn=function(e){e.find(n.navigationSelector);a.setHiddenNavItems(e,n.navigationSelector);var t=e.find(".nm-nav-wrap").attr("data-mainnav"),i=n.navigationSelector+' > li > a[data-href="'+t+'"] ~ .nm-navigation-sub-wrap-outer .nm-navigation-derivative-sub-list';a.setHiddenNavItems(e,i)},a.checkForLayerMoreBtn=function(e){e.find(n.layerNavigationSelector);a.setHiddenNavItems(e,n.layerNavigationSelector);var t=e.find(".nm-nav-wrap").attr("data-mainnav"),i=n.navigationSelector+' > li > a[data-href="'+t+'"] ~ .nm-navigation-sub-wrap-outer .nm-navigation-derivative-sub-list';a.setHiddenNavItems(e,i)},a.handlerPageLoaded=function(e){a.checkForMoreBtn(e.domElement),a.initNavToggles()},a.handlerLayerLoaded=function(){var t=e(".nm-layer");a.checkForLayerMoreBtn(t)},a.initialize=function(){a.isStockCar=e(n.sClassStockCar).length>0,a.isStockCar||a.checkForMoreBtn(e(n.initialContentAreaSelector));var i=e(".nm-layer");i&&i.length>0&&a.checkForLayerMoreBtn(e(n.globalLayerNavigationSelector).parent()),a.eventBus.on(t.PAGE_LOADED,a.handlerPageLoaded),a.legacyEventBus.on("click.navigation",a.handleOutsideNavigationClick),a.isStockCar||(a.eventBus.on(t.LAYER_LOADED,a.handlerLayerLoaded),e(window).resize(function(){a.checkForMoreBtn(e(n.initialContentAreaSelector)),a.checkForLayerMoreBtn(e(n.globalLayerNavigationSelector).parent())})),a.initNavToggles()},i.initializePromise=function(t){return new Promise(function(n){a.eventBus=t,a.legacyEventBus=e("body"),a.initialize(),n("module/navigation.js")})},i}),define("text!templates/renderinglayer.tpl",[],function(){return'	<div class="nm-layer-toolbar">\n		<div class="nm-renderingcounter">\n			&nbsp;<span class="nm-renderingcounter-current">01</span>|\n			<span class="nm-renderingcounter-total">--</span>&nbsp;\n		</div>\n		<div class="nm-button-close nm-b-icon nm-icon-close">\n			<span>{{=window.i18n[\'close-icon\']}}</span>\n		</div>\n	</div>\n	<div class="nm-layer-inner nm-renderinglayer-wrapper">\n		<div class="nm-renderinglayer {{? it.open }} nm-cabrio-open{{ } }}" style="{{?it.native_width!=undefined}} width: {{=it.native_width}}px{{?}}">\n			<input type="radio" id="nm-renderinglayer-exteriortoggle" name="nm-renderinglayer-toggle-radio" value="exterior" class="nm-renderinglayer-toggle-radio" {{? it.interiorActive }}{{?? it.open }}{{??}}checked{{?}} >\n			<input type="radio" id="nm-renderinglayer-exterioropentoggle" name="nm-renderinglayer-toggle-radio" value="exterioropen" class="nm-renderinglayer-toggle-radio" {{? it.interiorActive }}{{?? it.open }}checked{{??}}{{?}} >\n			<input type="radio" id="nm-renderinglayer-interiortoggle" name="nm-renderinglayer-toggle-radio" value="interior" class="nm-renderinglayer-toggle-radio" {{? it.interiorActive }}checked{{?? it.open }}{{??}}{{?}} >\n			<!--\n			<input type="checkbox" id="nm-renderinglayer-opentoggle" name="nm-rl-toggle-open" class="nm-rl-toggle-open" {{? it.open}}checked{{?}} >\n		-->\n			<div class="nm-renderinglayer-stagewrapper {{? it.openavailable}} openavailable {{ }Â }}">\n				<ul class="nm-renderinglayer-stagebrowse">\n					<li class="nm-backarrow"><a href="" class="nm-b-icon nm-icon-back-arrow-l"></a></li>\n					<li class="nm-nextarrow"><a href="" class="nm-b-icon nm-icon-next-arrow-l"></a></li>\n				</ul>\n				<a href="" class="nm-renderinglayer-open nm-el-btn nm-el-btn-01">{{? it.open}}{{=window.i18n[\'rendering-layer.cabrio-close\']}}{{??}}{{=window.i18n[\'rendering-layer.cabrio-open\']}}{{?}}</a>\n				\n	 			<div class="nm-renderinglayer-stage">\n	 				<ul class="nm-renderinglayer-stageimages">{{~ it.exterior :value:i }}<li class="nm-renderinglayer-imagewrapper{{? it.currentRenderingView == value.name }} nm-active{{?}}" data-view="{{=value.name}}"><div class="nm-renderinglayer-image nm-j-configurator-renderimage nm-rendersource-{{=value.name}}" data-renderimage-type="fullscreen" data-renderimage-view="{{=value.name}}" style="background-image: url({{=value.image}});"></div></li>{{~}}{{~ it.exterior_open :value:i }}<li class="nm-renderinglayer-imagewrapper{{? it.currentRenderingView == value.name }} nm-active{{?}}"><div class="nm-renderinglayer-image nm-j-configurator-renderimage nm-rendersource-{{=value.name}}" data-renderimage-type="fullscreen" data-renderimage-view="{{=value.name}}" style="background-image: url({{=value.image}});"></div></li>{{~}}{{~ it.interior :value:i }}<li class="nm-renderinglayer-imagewrapper{{? it.currentRenderingView == value.name }} nm-active{{?}}"><div class="nm-renderinglayer-image nm-j-configurator-renderimage nm-rendersource-{{=value.name}}" data-renderimage-type="fullscreen" data-renderimage-view="{{=value.name}}" style="background-image: url({{=value.image}});"></div></li>{{~}}</ul>\n	 			</div>\n			</div>\n			<div class="nm-renderinglayer-thumbnails clearfix">\n				<ul class="nm-renderinglayer-thumbs">\n{{~ it.exterior :value:i }}\n	{{? i == 0}}	\n					<li class="nm-renderinglayer-item nm-rl-toggle-exterior">\n						<div class="nm-rl-placeholder nm-js-exterior {{=value.name}}{{? it.currentRenderingView == value.name }} nm-active{{?}}" data-key="{{=value.name}}">\n							<label for="nm-renderinglayer-exteriortoggle" class="nm-renderinglayer-expander"></label>\n						</div>\n						<div class="nm-renderinglayer-thumb nm-j-configurator-renderimage {{=value.name}}" data-renderimage-type="{{=value.type}}" data-renderimage-view="{{=value.name}}" style="background-image:url({{=value.thumbnail}})"><a class="nm-b-icon nm-icon-plus"></a></div>\n	{{??}}\n					<li class="nm-renderinglayer-item nm-rl-item-exterior">\n						<div class="nm-rl-placeholder nm-js-exterior {{=value.name}}{{? it.currentRenderingView == value.name }} nm-active{{?}}" data-key="{{=value.name}}"></div>\n						<div class="nm-renderinglayer-thumb nm-j-configurator-renderimage {{=value.name}}" data-renderimage-type="{{=value.type}}" data-renderimage-view="{{=value.name}}" style="background-image:url({{=value.thumbnail}})"></div>\n	{{?}}						\n					</li>\n{{~}}\n{{~ it.exterior_open :value:i }}\n	{{? i == 0}}\n					<li class="nm-renderinglayer-item nm-rl-toggle-exterior-open">\n						<div class="nm-rl-placeholder nm-js-exterior-open {{=value.name}}{{? it.currentRenderingView == value.name }} nm-active{{?}}" data-key="{{=value.name}}">\n							<label for="nm-renderinglayer-exterioropentoggle" class="nm-renderinglayer-expander"></label>\n						</div>\n						<div class="nm-renderinglayer-thumb nm-j-configurator-renderimage {{=value.name}}" data-renderimage-type="{{=value.type}}" data-renderimage-view="{{=value.name}}" style="background-image:url({{=value.thumbnail}})"><a class="nm-b-icon nm-icon-plus"></a></div>\n	{{??}}\n					<li class="nm-renderinglayer-item nm-rl-item-exterior-open">\n						<div class="nm-rl-placeholder nm-js-exterior-open {{=value.name}}{{? it.currentRenderingView == value.name }} nm-active{{?}}" data-key="{{=value.name}}"></div>\n						<div class="nm-renderinglayer-thumb nm-j-configurator-renderimage {{=value.name}}" data-renderimage-type="{{=value.type}}" data-renderimage-view="{{=value.name}}" style="background-image:url({{=value.thumbnail}})"></div>\n	{{?}}						\n					</li>\n{{~}}\n{{~ it.interior :value:i }}		\n	{{? i == 0}}\n					<li class="nm-renderinglayer-item nm-js-toggle nm-rl-toggle-interior">\n						<div class="nm-rl-placeholder nm-js-interior {{=value.name}}{{? it.currentRenderingView == value.name }} nm-active{{?}}" data-key="{{=value.name}}">\n							<label for="nm-renderinglayer-interiortoggle" class="nm-renderinglayer-expander"></label>\n						</div>\n						<div class="nm-renderinglayer-thumb nm-j-configurator-renderimage {{=value.name}}" data-renderimage-type="{{=value.type}}" data-renderimage-view="{{=value.name}}" style="background-image:url({{=value.thumbnail}})"><a class="nm-b-icon nm-icon-plus"></a></div>\n	{{??}}\n					<li class="nm-renderinglayer-item nm-js-item nm-rl-item-interior">\n						<div class="nm-rl-placeholder nm-js-interior {{=value.name}}{{? it.currentRenderingView == value.name }} nm-active{{?}}" data-key="{{=value.name}}"></div>\n						<div class="nm-renderinglayer-thumb nm-j-configurator-renderimage {{=value.name}}" data-renderimage-type="{{=value.type}}" data-renderimage-view="{{=value.name}}" style="background-image:url({{=value.thumbnail}})"></div>\n	{{?}}						\n					</li>\n{{~}}\n				</ul>\n			</div>\n		</div>\n	</div>\n'}),define("tracking/renderinglayer-tracker",["jquery","events","tracking/tracking-dispatcher","tracking/tracking-utils"],function(e,t,n,a){"use strict";var i={},r={__:i};return i.renderingLayerType="Rendering Layer 2D",i.oDefaults={sSelectorThumbnail:".nm-rl-placeholder",sSelectorArcNavi:".nm-renderinglayer-stagebrowse li",sSelectorColorOption:".nm-renderinglayer #nm-renderinglayer-extcolor-selection-color li a",sSelectorAnimationOption:".nm-renderinglayer .nm-ave-animation-selection .animation-option",sSelectorAnimationOptionInline:".nm-md-inline-rendering .nm-ave-animation-selection .animation-option",sSelectorRenderingLayer:".nm-layer-renderinglayer",sSelectorRenderingLayerCloseButton:".nm-layer-renderinglayer .nm-layer-toolbar .nm-button-close",sSelectorBasketImage:".nm-basket-image"},i.addEvents=function(){i.eventBus.on(t.AVE_STREAM_READY,i.enable3dTrackingMode),i.legacyEventBus.on("click.renderinglayerThumbnail",i.oDefaults.sSelectorThumbnail,a.proxyMethod(i.thumbnailClickedHandler,i)),i.legacyEventBus.on("click.renderinglayerArcNavi",i.oDefaults.sSelectorArcNavi,a.proxyMethod(i.arcNaviClickedHandler,i)),i.legacyEventBus.on("click.renderinglayerColorOption",i.oDefaults.sSelectorColorOption,a.proxyMethod(i.colorOptionClickedHandler,i)),i.legacyEventBus.on("click.renderinglayerAnimationOption",i.oDefaults.sSelectorAnimationOption,a.proxyMethod(i.animationOptionClickedHandler,i)),i.legacyEventBus.on("click.renderinglayerAnimationOption",i.oDefaults.sSelectorAnimationOptionInline,a.proxyMethod(i.animationOptionInlineClickedHandler,i)),i.legacyEventBus.on("click.renderinglayerCloseButton",i.oDefaults.sSelectorRenderingLayerCloseButton,a.proxyMethod(i.closeButtonClickedHandler,i)),i.legacyEventBus.on("click.basketImage",i.oDefaults.sSelectorBasketImage,a.proxyMethod(i.basketImageClickedHandler,i))},i.initialize=function(){i.addEvents()},i.getCurrentPageName=function(){var t=e("body").attr("page-name");return""===t&&(t=window.location.href.indexOf("page=")>-1?window.location.href.substr(window.location.href.indexOf("page=")+5).split("/"):window.location.pathname.split("/"),t.splice(0,4),t=t.join("/"),t=t.substr(0,t.indexOf("."))+"/"+e("body").attr("page-name")),t},i.thumbnailClickedHandler=function(t){var n=e(t.currentTarget),a=n.attr("data-key");i.genericRenderinglayerHandler(i.renderingLayerType+":Thumbnail Click:"+a,!1)},i.arcNaviClickedHandler=function(){r.swipeHandler("Arrow")},r.swipeHandler=function(e){i.genericRenderinglayerHandler(i.renderingLayerType+":Swipe:"+e,!1)},r.swipeInlineHandler=function(e){i.genericRenderinglayerHandler("Inline Rendering 3D:Swipe:"+e,!0)},i.colorOptionClickedHandler=function(t){var n=e(t.currentTarget);i.genericRenderinglayerHandler(i.renderingLayerType+":Switch:"+n.text(),!1)},i.animationOptionClickedHandler=function(t){var n=e(t.currentTarget),a=n.attr("data-animation"),r=n.attr("data-environment");a?i.genericRenderinglayerHandler(i.renderingLayerType+":Switch:"+a,!1):i.genericRenderinglayerHandler(i.renderingLayerType+":Switch:"+r,!1)},i.animationOptionInlineClickedHandler=function(t){var n=e(t.currentTarget),a=n.attr("data-animation"),r=n.attr("data-environment");a?i.genericRenderinglayerHandler("Inline Rendering 3D:Switch:"+a,!0):i.genericRenderinglayerHandler("Inline Rendering 3D:Switch:"+r,!0)},i.closeButtonClickedHandler=function(){i.genericRenderinglayerHandler(i.renderingLayerType+":Close Layer",!1)},i.basketImageClickedHandler=function(){i.genericRenderinglayerHandler("Nemo Cart:Rendering Layer Link:Cart Rendering Layer Link",!1)},i.genericRenderinglayerHandler=function(e,t){var a=i.getCurrentPageName(),r={};r.eVar37=a,r.prop57=r.eVar37,r.eVar39=e,r.prop39=r.eVar39,r.eVar46=a+":"+e,r.prop46=r.eVar46,t?r.eVar71="configuration_inline_rendering":r.eVar71="configuration_rendering_layer",n.trackNow(r,"renderinglayer")},i.genericRenderinglayerPageHandler=function(e,t){var a=i.getCurrentPageName(),r={};r.eVar37=a,r.prop57=r.eVar37,r.eVar39=e,r.prop39=r.eVar39,r.eVar46=a+":"+e,r.prop46=r.eVar46,t?r.eVar71="configuration_inline_rendering":r.eVar71="configuration_rendering_layer",n.track(r)},i.trackLayerLoaded=function(){var t=i.getCurrentPageName(),r={};r.prop1=t,r.eVar37=t,r.prop57=r.eVar37,r.eVar71="configuration_rendering_layer",r.prop68=r.eVar71,r=e.extend(r,a.getGlobalObject()),r.eVar24=r.prop59+":"+r.prop2,n.track(r)},i.handlerLayerLoaded=function(){var t=e(i.oDefaults.sSelectorRenderingLayer);t.length>0&&i.trackLayerLoaded()},i.enable3dTrackingMode=function(){var t=e("#streamWrapper").closest(".nm-renderinglayer").length>0;console.log("INLAYER: ",t),i.renderingLayerType="Rendering Layer 3D",t?i.genericRenderinglayerPageHandler(i.renderingLayerType+":Layer Loaded",!1):i.genericRenderinglayerPageHandler(i.renderingLayerType+":Layer Loaded",!0)},r.initializePromise=function(t){return new Promise(function(n){i.eventBus=t,i.legacyEventBus=e("body"),i.initialize(),n("renderinglayer-tracker.js")})},r}),define("module/renderinglayer",["jquery","events","core/template","text!templates/renderinglayer.tpl","configurator/dpu-api","core/layer/jslayer","tracking/renderinglayer-tracker"],function(e,t,n,a,i,r,o){"use strict";var s={},l={__:s};return l.initialized=!1,s.activeImageSrc=!1,s.interiorImages=[],s.exteriorImages=[],s.exteriorOpenImages=[],s.min360ImgCount=6,s.oDefaults={sClassActive:"nm-active",sClassNoThumbnailAnimation:"nm-no-animation",sClassAnimate:"nm-animate",sClassCabrioOpen:"nm-cabrio-open",sClassSelectorClosed:"nm-icon-expand-white",sClassSelectorOpen:"nm-icon-collapse-white",sClassItemExterior:"nm-js-exterior",sClassItemExteriorOpen:"nm-js-exterior-open",sClassItemInterior:"nm-js-interior",sAttrDisplayedRenderingView:"data-renderimage-view",sIdToggleExterior:"nm-renderinglayer-exteriortoggle",sIdToggleExteriorOpen:"nm-renderinglayer-exterioropentoggle",sIdToggleInterior:"nm-renderinglayer-interiortoggle",sSelectorColorItems:"#nm-renderinglayer-extcolor-selection-color li",sSelectorOpenButton:".nm-renderinglayer-open",sSelectorRenderingLayerOuter:".nm-layer-renderinglayer",sSelectorRenderingLayer:".nm-renderinglayer",sSelectorItemExterior:".nm-js-exterior",sSelectorItemExteriorOpen:".nm-js-exterior-open",sSelectorItemInterior:".nm-js-interior",sSelectorDisplayedRenderingImage:".nm-basket-image .nm-j-configurator-renderimage",sSelectorRenderingCounterCurrent:".nm-renderingcounter-current",sSelectorRenderingCounterTotal:".nm-renderingcounter-total",sSelectorBack:".nm-renderinglayer .nm-backarrow",sSelectorNext:".nm-renderinglayer .nm-nextarrow",sSelectorStageImage:".nm-renderinglayer-image",sSelectorStageImages:".nm-renderinglayer-stageimages",sSelectorActiveStageImageWrapper:".nm-renderinglayer-imagewrapper.nm-active",sSelectorFirstStageImageWrapper:".nm-renderinglayer-imagewrapper:first-child",sSelectorActiveStageImage:".nm-renderinglayer-imagewrapper.nm-active .nm-renderinglayer-image",sSelectorThumbnailArea:".nm-renderinglayer-thumbnails",sSelectorThumbnail:".nm-renderinglayer-item .nm-rl-placeholder",sSelectorPlusButton:".nm-renderinglayer-item .nm-icon-plus",sSelectorThumbnailActive:".nm-renderinglayer-item .nm-rl-placeholder.nm-active",sSelectorColorSelector:".nm-render-color-selector",sSelectorColorSelectorWrapper:".nm-render-color-selector-wrapper",sSelectorOptionsSelector:".nm-render-animation-selector",sSelectorCurrentColorIndicator:".selector-current-selected .nm-render-active-color"},s.isInteriorActive=function(e){var t=!1;return(0===e.indexOf("interior")||0===e.indexOf("dashboard")||0===e.indexOf("rearseat"))&&(t=!0),t},s.isOpenActive=function(e){var t=!1;return e.indexOf("_open")>0&&(t=!0),t},s.getActiveImageSrc=function(e){e.interiorActive&&s.interiorImages.length>0?s.activeImageSrc=s.interiorImages[0].image:e.open&&s.exteriorOpenImages.length>0?s.activeImageSrc=s.exteriorOpenImages[0].image:s.exteriorImages.length>0?s.activeImageSrc=s.exteriorImages[0].image:s.activeImageSrc=""},s.getConfigurationAssets=function(){var e=i.getConfigurationAssets();(!e||Object.keys(e).length<=0)&&(e=SETUPS.get("nemo.default.data").configuration.assets),s.generateRenderingLayerInnerHtml(e),s.initListeners()},s.pollConfigurationAssets=function(){return e(s.oDefaults.sSelectorRenderingLayer).length>0?void console.log("RL: abort poll request"):void s.getConfigurationAssets()},s.parseRenderImageTypeFromHash=function(e){var t,n,a;return e?(n=/(renderingLayer)(\.(\S)+)?/,a=e.match(n),a&&(a=a[0].split("&")[0],a=a.split("."),t=2===a.length?a[1]:!1),t):!1},s.setAllowedItems=function(e){var t;s.activeRenderings=[];for(t in e)t&&s.activeRenderings.push(t)},s.generateRenderingLayerInnerHtml=function(t){var r=i.getCarline(),o=i.getExtColor(),l=i.getConfiguration(),c=s.parseRenderImageTypeFromHash(window.location.hash),u={};c||(c=e(s.oDefaults.sSelectorDisplayedRenderingImage).attr(s.oDefaults.sAttrDisplayedRenderingView)),s.setAllowedItems(t),-1===s.activeRenderings.indexOf(c)&&(c="exterior_front"),u.interiorActive=s.isInteriorActive(c),u.open=s.isOpenActive(c),s.preloadImages=["exterior_straight_front","exterior_front","exterior","exterior_back","exterior_straight_back"],s.preloadImagesOpen=["exterior_straight_front_open","exterior_front_open","exterior_open","exterior_back_open","exterior_straight_back_open"],s.exteriorImages=s.extractAssets(r,t,c,"exterior"),s.exteriorImages=s.exteriorImages.concat(s.extractAssets(r,t,c,"closeup")),s.exteriorOpenImages=s.extractAssets(r,t,c,"exterior_open"),s.exteriorOpenImages=s.exteriorOpenImages.concat(s.extractAssets(r,t,c,"closeup_open")),u.openavailable=s.exteriorOpenImages.length>0,s.interiorImages=s.extractAssets(r,t,c,"interior"),s.interiorImages=s.interiorImages.concat(s.extractAssets(r,t,c,"dashboard")),s.interiorImages=s.interiorImages.concat(s.extractAssets(r,t,c,"rearseat")),s.activeImageSrc||s.getActiveImageSrc(u),c||(c="exterior_front"),u.exterior=s.exteriorImages,u.exterior_open=s.exteriorOpenImages,u.interior=s.interiorImages,u.active_image_src=s.activeImageSrc,u.currentRenderingView=c,u.config=l,u.activeColor=o;var d=n.render(a,u);e(s.oDefaults.sSelectorRenderingLayerOuter).html(d)},s.generateRenderingLayerHtml=function(){var e=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,t=975,n=1400,a=n/t,i="";return t>e&&(i=' style="width: '+e*a+'px;"'),'<div class="nm-layer-wrapper nm-layer-wrapper-renderinglayer"><div class="nm-layer-renderinglayer nm-j-jslayer nm-layer"'+i+"></div></div>"},s.addEvents=function(){r.register("renderingLayer",s.generateRenderingLayerHtml),s.eventBus.on(t.LAYER_LOADED,s.handler),l.initialized=!0},l.dispose=function(){s.eventBus.off(t.LAYER_LOADED,s.handler)},l.disableFor3D=function(){e(s.oDefaults.sSelectorOpenButton).off("click",s.handlerOpenToggle),e(s.oDefaults.sSelectorBack).off("click",s.handlerBackClick),e(s.oDefaults.sSelectorNext).off("click",s.handlerNextClick),e(s.oDefaults.sSelectorThumbnail).off("click",s.handlerThumbnailClick),e(s.oDefaults.sSelectorStageImage).off("mousedown",s.activateSwipe),e(s.oDefaults.sSelectorStageImage).off("touchstart",s.activateSwipe)},s.handler=function(){e(s.oDefaults.sSelectorRenderingLayerOuter).length>0&&s.pollConfigurationAssets()},s.initListeners=function(){s.interiorToggle=document.getElementById(s.oDefaults.sIdToggleInterior),s.exteriorOpenToggle=document.getElementById(s.oDefaults.sIdToggleExteriorOpen),s.exteriorToggle=document.getElementById(s.oDefaults.sIdToggleExterior),e(s.oDefaults.sSelectorOpenButton).off("click",s.handlerOpenToggle),e(s.oDefaults.sSelectorBack).off("click",s.handlerBackClick),e(s.oDefaults.sSelectorNext).off("click",s.handlerNextClick),e(s.oDefaults.sSelectorThumbnail).off("click",s.handlerThumbnailClick),e(s.oDefaults.sSelectorPlusButton).off("click",s.handlerPlusButtonClick),""===e(s.oDefaults.sSelectorStageImage).first().attr("src")&&s.pollConfigurationAssets(),s.updateCounter(),e(s.oDefaults.sSelectorOpenButton).on("click",s.handlerOpenToggle),e(s.oDefaults.sSelectorBack).on("click",s.handlerBackClick),e(s.oDefaults.sSelectorNext).on("click",s.handlerNextClick),e(s.oDefaults.sSelectorThumbnail).on("click",s.handlerThumbnailClick),e(s.oDefaults.sSelectorPlusButton).on("click",s.handlerPlusButtonClick),s.exteriorOpenToggle&&s.exteriorOpenToggle.checked&&s.preloadDefinedImages(s.preloadImagesOpen,"exterior_open"),s.exteriorToggle&&s.exteriorToggle.checked&&s.preloadDefinedImages(s.preloadImages,"exterior"),s.activateSwipeOrDrag(),e(window).on("resize",s.resizeLayer),s.resizeLayer(),s.eventBus.emit(t.RENDERINGLAYER_LOADED)},s.determineImageObjectsForArea=function(e){var t=[];return t="interior"===e?s.interiorImages:"exterior_open"===e?s.exteriorOpenImages:s.exteriorImages},s.preloadDefinedImages=function(e,t){var n,a,i,r=s.determineImageObjectsForArea(t);for(n=0,a=r.length;a>n;n++)e.indexOf(r[n].name)>=0&&(i=new Image,i.src=r[n].image)},s.activateSwipeOrDrag=function(){var t,n=document.getElementById(s.oDefaults.sIdToggleExterior),a=document.getElementById(s.oDefaults.sIdToggleExteriorOpen);e(s.oDefaults.sSelectorStageImage).off("mousedown",s.activateSwipe),e(s.oDefaults.sSelectorStageImage).off("touchstart",s.activateSwipe),e(s.oDefaults.sSelectorStageImage).off("mousedown",s.activateDrag),e(s.oDefaults.sSelectorStageImage).off("touchstart",s.activateDrag),e(document).off("mouseup",s.deactivateDrag),e(document).off("touchend",s.deactivateDrag),e(document).off("mouseup",s.deactivateSwipe),e(document).off("touchend",s.deactivateSwipe),t=a&&a.checked?e(s.oDefaults.sSelectorItemExteriorOpen).length:e(s.oDefaults.sSelectorItemExterior).length,(n&&n.checked||a&&a.checked)&&t>=s.min360ImgCount?(e(s.oDefaults.sSelectorStageImage).on("mousedown",s.activateDrag),
e(s.oDefaults.sSelectorStageImage).on("touchstart",s.activateDrag),e(document).on("mouseup",s.deactivateDrag),e(document).on("touchend",s.deactivateDrag)):(e(s.oDefaults.sSelectorStageImage).on("mousedown",s.activateSwipe),e(s.oDefaults.sSelectorStageImage).on("touchstart",s.activateSwipe),e(document).on("mouseup",s.deactivateSwipe),e(document).on("touchend",s.deactivateSwipe))},s.getViewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight},s.getViewportWidth=function(){return window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth},s.fitToWidth=function(t,n,a,i){var r,o=1400;o>t&&(r=i*n,a>=r?e(s.oDefaults.sSelectorRenderingLayerOuter).outerWidth(i*n):e(s.oDefaults.sSelectorRenderingLayerOuter).outerWidth(a))},s.resizeLayer=function(){var n=s.getViewportHeight(),a=e(s.oDefaults.sSelectorRenderingLayerOuter).outerHeight(),i=e(s.oDefaults.sSelectorRenderingLayerOuter).outerWidth(),r=i/a,o=s.getViewportWidth();a>n?e(s.oDefaults.sSelectorRenderingLayerOuter).outerWidth(n*r):s.fitToWidth(i,r,o,n),s.eventBus.emit(t.RENDERINGLAYER_RESIZED)},s.calculateTotalItems=function(){var t=0,n=document.getElementById(s.oDefaults.sIdToggleExteriorOpen),a=document.getElementById(s.oDefaults.sIdToggleInterior);return t=a&&a.checked?e(s.oDefaults.sSelectorItemInterior).length:n&&n.checked?e(s.oDefaults.sSelectorItemExteriorOpen).length:e(s.oDefaults.sSelectorItemExterior).length},s.calculateCurrentItem=function(e){var t=0,n=document.getElementById(s.oDefaults.sIdToggleExteriorOpen),a=document.getElementById(s.oDefaults.sIdToggleInterior);return t=a&&a.checked?s.calculateCurrentPosition(s.oDefaults.sSelectorItemInterior,e):n&&n.checked?s.calculateCurrentPosition(s.oDefaults.sSelectorItemExteriorOpen,e):s.calculateCurrentPosition(s.oDefaults.sSelectorItemExterior,e)},s.updateCounter=function(){var t=s.calculateTotalItems(),n=s.calculateCurrentItem(t);"undefined"!=typeof t&&(t=10>t?"0"+t:t,n=10>n?"0"+n:n,e(s.oDefaults.sSelectorRenderingCounterTotal).html(t),e(s.oDefaults.sSelectorRenderingCounterCurrent).html(n))},s.calculateCurrentPosition=function(t,n){var a,i=e(t);for(a=0;n>a;a++)if(i.eq(a).hasClass(s.oDefaults.sClassActive))return a+1},s.activateDrag=function(t){e(s.oDefaults.sSelectorStageImages).hasClass(s.oDefaults.sClassAnimate)||("touchstart"===t.type?s.swipeX=t.originalEvent.pageX:s.swipeX=t.pageX,e(document).on("mousemove",s.drag),e(document).on("touchmove",s.drag))},s.deactivateDrag=function(){var t=e(s.oDefaults.sSelectorActiveStageImage).attr("data-renderimage-view");e(document).off("mousemove",s.drag),e(document).off("touchmove",s.drag),e(s.oDefaults.sSelectorThumbnail).removeClass(s.oDefaults.sClassActive),e(s.oDefaults.sSelectorThumbnail+"."+t).addClass(s.oDefaults.sClassActive)},s.activateSwipe=function(t){"touchstart"===t.type?s.swipeX=t.originalEvent.pageX:s.swipeX=t.pageX,e(document).on("mousemove",s.swipe),e(document).on("touchmove",s.swipe),o.swipeHandler("Wipe")},s.deactivateSwipe=function(){e(document).off("mousemove",s.swipe),e(document).off("touchmove",s.swipe)},s.retrieveCurrentPos=function(e){var t;return t="touchmove"===e.type?e.originalEvent.pageX:e.pageX},s.doLeftDragAction=function(e){e.removeClass(s.oDefaults.sClassActive),e.prev().attr("data-view")&&e.prev().attr("data-view").indexOf("exterior")>=0?e.prev().addClass(s.oDefaults.sClassActive):e.prev().prev().addClass(s.oDefaults.sClassActive)},s.doRightDragAction=function(t){var n;t.next().length>0&&t.next().attr("data-view")&&t.next().attr("data-view").indexOf("exterior")>=0?(t.removeClass(s.oDefaults.sClassActive),t.next().addClass(s.oDefaults.sClassActive)):t.attr("data-view")&&t.attr("data-view").indexOf("closeup")>=0&&(t.removeClass(s.oDefaults.sClassActive),n=e(s.oDefaults.sSelectorFirstStageImageWrapper),n.addClass(s.oDefaults.sClassActive))},s.doDragAction=function(t,n){var a=e(s.oDefaults.sSelectorActiveStageImageWrapper);n&&a.prev().length>0?s.doLeftDragAction(a):t&&s.doRightDragAction(a)},s.drag=function(e){var t=!1,n=!1,a=!1,i=s.retrieveCurrentPos(e);i>=s.swipeX+55?(t=!0,n=!0,s.swipeX+=55):i<=s.swipeX-55&&(t=!0,a=!0,s.swipeX-=55),t&&s.doDragAction(a,n)},s.getEventPos=function(e){var t;return t="touchmove"===e.type?e.originalEvent.pageX:e.pageX},s.swipe=function(e){var t=s.getEventPos(e);t>=s.swipeX+5?(s.deactivateSwipe(e),s.handlerBackClick(e)):t<=s.swipeX-5&&(s.deactivateSwipe(e),s.handlerNextClick(e))},s.determineCarlineFallbackGroup=function(e){var t=e.charAt(0);return(0===e.indexOf("rs")||0===e.indexOf("s"))&&(t="a"),0===e.indexOf("tt")&&(t="r"),t},s.getFallbackThumb=function(e,t){var n,a=window.location.href,i=a.split("/");return n=i[2].indexOf("audi.local")>=0?i[0]+"//"+i[2]+"/cms4i-nemo/fallback-renderings/"+e+"-thumbnail-"+t+".jpg":i[0]+"//"+i[2]+SETUPS.get("nemo.url.static")+"/cms4i-nemo/fallback-renderings/"+e+"-thumbnail-"+t+".jpg"},s.getFallbackImg=function(e,t){var n,a=window.location.href,i=a.split("/");return n=i[2].indexOf("audi.local")>=0?i[0]+"//"+i[2]+"/cms4i-nemo/fallback-renderings/"+e+"-fullscreen-"+t+".jpg":i[0]+"//"+i[2]+SETUPS.get("nemo.url.static")+"/cms4i-nemo/fallback-renderings/"+e+"-fullscreen-"+t+".jpg"},s.getRenderImageType=function(e,t){var n="thumbnail";return e[t].hasOwnProperty("thumbnail.16-9")?n="thumbnail.16-9":e[t].hasOwnProperty("thumbnail.new")&&(n="thumbnail.new"),n},s.getThumbnail=function(e,t,n,a){var i=e[t][a];return"undefined"!=typeof i&&(i=-1===i.indexOf("?")?"http://mediaservice.audi.com/media"+i+"?alt="+n:"http://mediaservice.audi.com/media"+i),i},s.getFullImg=function(e,t,n){var a;return a=e[t].hasOwnProperty("fullscreen.new")?e[t]["fullscreen.new"]:e[t].fullscreen,"undefined"!=typeof a&&(a=-1===a.indexOf("?")?"http://mediaservice.audi.com/media"+a+"?alt="+n:"http://mediaservice.audi.com/media"+a),a},s.checkForActiveImage=function(e,t,n){e===t&&(s.activeImageSrc=n)},s.compliesWithCondition=function(e,t,n,a){var i=!1;return 0===t.indexOf(n)&&e.hasOwnProperty(t)&&s.activeRenderings.indexOf(t)>=0&&(a&&t.indexOf("_open")>0?i=!0:!a&&t.indexOf("_open")<0&&(i=!0)),i},s.determineAssetType=function(e){var t;return t=e.indexOf("_open")>0?e.substring(0,e.indexOf("_open")):e},s.isOpen=function(e){var t=!1;return e.indexOf("_open")>=0&&(t=!0),t},s.extractAssets=function(e,t,n,a){var i,r,o,l,c,u,d=[],m=s.determineCarlineFallbackGroup(e),g=s.determineAssetType(a),f=s.isOpen(a);for(u in t)s.compliesWithCondition(t,u,g,f)&&(l=s.getFallbackThumb(m,u),o=s.getFallbackImg(m,u),c=s.getRenderImageType(t,u),r=s.getThumbnail(t,u,l,c),i=s.getFullImg(t,u,o),"undefined"!=typeof i&&(s.checkForActiveImage(u,n,i),d.push({name:u,image:i,thumbnail:r,type:c})));return s.sortThumbs(g,f,d)},s.customArraySort=function(e,t){var n=["exterior_straight_front","exterior_front","exterior","exterior_back","exterior_straight_back","closeup_lights","closeup_wheels","interior","dashboard","rearseat"];return t&&(n=["exterior_straight_front_open","exterior_front_open","exterior_open","exterior_back_open","exterior_straight_back_open","closeup_lights_open","closeup_wheels_open","interior","dashboard","rearseat"]),function(t,a){var i=0;return i=n.indexOf(t[e])<n.indexOf(a[e])?-1:1}},s.sortThumbs=function(e,t,n){return n.sort(s.customArraySort("name",t))},s.toggleCheckAndPreload=function(){s.exteriorOpenToggle.checked?(s.exteriorToggle.checked=!0,s.preloadDefinedImages(s.preloadImages,"exterior")):(s.exteriorOpenToggle.checked=!0,s.preloadDefinedImages(s.preloadImagesOpen,"exterior_open"))},s.setDefaultActiveThumbnail=function(){e(s.oDefaults.sSelectorRenderingLayer).hasClass(s.oDefaults.sClassCabrioOpen)?e(s.oDefaults.sSelectorItemExteriorOpen).first().addClass(s.oDefaults.sClassActive):e(s.oDefaults.sSelectorItemExterior).first().addClass(s.oDefaults.sClassActive)},s.retrieveCorrespondingCabrioKey=function(e){var t;return t=e.indexOf("_open")>0?e.substring(0,e.indexOf("_open")):e+"_open"},s.handlerOpenToggle=function(t){var n,a,i=e(s.oDefaults.sSelectorThumbnailActive),r=i.attr("data-key");t.preventDefault(),e(s.oDefaults.sSelectorThumbnailArea).addClass(s.oDefaults.sClassNoThumbnailAnimation),s.toggleCheckAndPreload(),setTimeout(function(){e(s.oDefaults.sSelectorThumbnailArea).removeClass(s.oDefaults.sClassNoThumbnailAnimation)},50),0===i.length&&s.setDefaultActiveThumbnail(),e(s.oDefaults.sSelectorRenderingLayer).hasClass(s.oDefaults.sClassCabrioOpen)?(e(s.oDefaults.sSelectorRenderingLayer).removeClass(s.oDefaults.sClassCabrioOpen),e(s.oDefaults.sSelectorOpenButton).html(window.i18n["rendering-layer.cabrio-open"])):(e(s.oDefaults.sSelectorRenderingLayer).addClass(s.oDefaults.sClassCabrioOpen),e(s.oDefaults.sSelectorOpenButton).html(window.i18n["rendering-layer.cabrio-close"])),r&&(n=s.retrieveCorrespondingCabrioKey(r),a=e("."+n),s.activateImage(a,!1,!1))},l.determinePrevFromActive=function(t){var n;return t.hasClass(s.oDefaults.sClassItemExterior)?n=e(s.oDefaults.sSelectorThumbnailActive).parent().prev().children(s.oDefaults.sSelectorItemExterior).get(0):t.hasClass(s.oDefaults.sClassItemExteriorOpen)?n=e(s.oDefaults.sSelectorThumbnailActive).parent().prev().children(s.oDefaults.sSelectorItemExteriorOpen).get(0):t.hasClass(s.oDefaults.sClassItemInterior)&&(n=e(s.oDefaults.sSelectorThumbnailActive).parent().prev().children(s.oDefaults.sSelectorItemInterior).get(0)),n},l.determineDefaultPrev=function(){var t;return t=s.interiorToggle.checked?e(s.oDefaults.sSelectorItemInterior).last().get(0):s.exteriorOpenToggle&&s.exteriorOpenToggle.checked?e(s.oDefaults.sSelectorItemExteriorOpen).last().get(0):e(s.oDefaults.sSelectorItemExterior).last().get(0)},s.handlerBackClick=function(t){var n,a=e(s.oDefaults.sSelectorThumbnailActive);t.preventDefault(),a.length>0&&(n=l.determinePrevFromActive(a)),"undefined"==typeof n&&(n=l.determineDefaultPrev()),s.activateImage(n,!0,"prev")},l.determineNextFromActive=function(t){var n;return t.hasClass(s.oDefaults.sClassItemExterior)?n=e(s.oDefaults.sSelectorThumbnailActive).parent().next().children(s.oDefaults.sSelectorItemExterior).get(0):t.hasClass(s.oDefaults.sClassItemExteriorOpen)?n=e(s.oDefaults.sSelectorThumbnailActive).parent().next().children(s.oDefaults.sSelectorItemExteriorOpen).get(0):t.hasClass(s.oDefaults.sClassItemInterior)&&(n=e(s.oDefaults.sSelectorThumbnailActive).parent().next().children(s.oDefaults.sSelectorItemInterior).get(0)),n},l.determineDefaultNext=function(){var t;return t=s.interiorToggle.checked?e(s.oDefaults.sSelectorItemInterior).first().get(0):s.exteriorOpenToggle&&s.exteriorOpenToggle.checked?e(s.oDefaults.sSelectorItemExteriorOpen).first().get(0):e(s.oDefaults.sSelectorItemExterior).first().get(0)},s.handlerNextClick=function(t){var n,a=e(s.oDefaults.sSelectorThumbnailActive);t.preventDefault(),a.length>0&&(n=l.determineNextFromActive(a)),"undefined"==typeof n&&(n=l.determineDefaultNext()),s.activateImage(n,!0,"next")},s.handlerThumbnailClick=function(){e(this).hasClass(s.oDefaults.sClassActive)||s.activateImage(this,!0,!1)},s.handlerPlusButtonClick=function(t){var n=e(this).parent().parent().find(".nm-rl-placeholder"),a=e(this).parent().parent().find(".nm-renderinglayer-expander");t.preventDefault(),n.trigger("click"),a.trigger("click")},s.doStageAnimation=function(t){var n=e(".ie8").length>0,a=e(".ie9").length>0;n||a?e(s.oDefaults.sSelectorStageImages).animate({left:t},500):e(s.oDefaults.sSelectorStageImages).css("left",t)},s.determineAnimationDirection=function(e,t,n){var a=!1;return t===!1?n.parent().prevAll().find(e).length>0&&(a=!0):"prev"===t&&(a=!0),a},s.activateImage=function(t,n,a){var i=e(s.oDefaults.sSelectorThumbnailActive),r=e(t).attr("data-key"),o=".nm-rendersource-"+r,l=e(o),c=e(".nm-rendersource-"+i.attr("data-key")).closest(".nm-renderinglayer-imagewrapper"),u=l.closest(".nm-renderinglayer-imagewrapper"),d=!1;e(s.oDefaults.sSelectorStageImages).hasClass(s.oDefaults.sClassAnimate)||(e(s.oDefaults.sSelectorThumbnail).removeClass(s.oDefaults.sClassActive),e(t).addClass(s.oDefaults.sClassActive),n===!0?(d=s.determineAnimationDirection(t,a,i),d?(e(s.oDefaults.sSelectorStageImages).css("left","-100%"),c.css("left","50%"),u.css("left","0")):(e(s.oDefaults.sSelectorStageImages).css("left","0"),c.css("left","0"),u.css("left","50%")),u.addClass(s.oDefaults.sClassActive),setTimeout(function(){e(s.oDefaults.sSelectorStageImages).addClass(s.oDefaults.sClassAnimate),d?s.doStageAnimation("0"):s.doStageAnimation("-100%"),setTimeout(function(){c.css("left","0"),c.removeClass(s.oDefaults.sClassActive),e(s.oDefaults.sSelectorStageImages).css("left","0"),u.css("left","0"),s.activateSwipeOrDrag(),e(s.oDefaults.sSelectorStageImages).removeClass(s.oDefaults.sClassAnimate)},500)},10)):(u.addClass(s.oDefaults.sClassActive),c.removeClass(s.oDefaults.sClassActive),s.activateSwipeOrDrag()),setTimeout(function(){s.updateCounter()},50))},s.initialize=function(){s.addEvents()},l.initializePromise=function(e){return new Promise(function(t){s.eventBus=e,s.initialize(),t("module/renderinglayer.js")})},l}),define("core/jsloader",["events","core/signal"],function(e,t){"use strict";var n={},a={__:n};return a.loadURL=function(e){return new Promise(function(t,n){require([e],function(){t()},function(t){console.log(t),n({msg:"could not load "+e})})})},n.initialize=function(){console.log("DOMReady jsloader.js -- initialize")},n.eventBus=t.getEmitter(),n.eventBus.once(e.APP_READY,n.initialize),a}),define("text!templates/ave-canvas.tpl",[],function(){return'<div class="nm-ave-animation-selector-wrapper">\n	<div class="nm-ave-animation-selector nm-el-btn nm-el-btn-01 nm-icon-settings nm-icon-expand-white">\n		<div class="options-text">{{=window.i18n[\'rendering-layer.options\']}}</div>\n	</div>\n	<ul class="nm-ave-animation-selection">\n		<li class="nm-button-close nm-b-icon nm-icon-close"></li>\n	</ul>\n</div>'}),define("module/ave/ave-dom",["jquery","core/template","text!templates/ave-canvas.tpl"],function(e,t,n){"use strict";var a={},i={__:a};return window.i18n=window.i18n||{},a.eventBus=null,a.optionMappings={Trunk:window.i18n["rendering-layer.option-trunk"],Doors:window.i18n["rendering-layer.option-doors"],MMI:window.i18n["rendering-layer.option-mmi"],RTTVoid:window.i18n["rendering-layer.option-env-grey"],WhiteVoid:window.i18n["rendering-layer.option-env-white"],Tunnel_Env:window.i18n["rendering-layer.option-Tunnel_Env"],Iceland_Void:window.i18n["rendering-layer.option-Iceland_Void"]},a.oDefaults={sClassActive:"nm-active",sClassSelectorClosed:"nm-icon-expand-white",sClassSelectorOpen:"nm-icon-collapse-white",sSelectorOptionsSelectorWrapper:".nm-ave-animation-selector-wrapper",sSelectorOptionsSelector:".nm-ave-animation-selector",sSelectorActive3dContainer:".nm-md-ave-container",sSelectorStreamWrapper:"#streamWrapper"},i.renderAnimationControls=function(e){var t,n,i="",r=Object.keys(a.optionMappings);for(t=0,n=r.length;n>t;t++)e.indexOf(r[t])>-1&&(i+=a.renderAnimationOption(r[t],a.optionMappings[r[t]]));return i},i.renderEnvironmentControls=function(e){var t,n,i="",r=Object.keys(a.optionMappings);for(t=0,n=r.length;n>t;t++)e.indexOf(r[t])>-1&&(i+=a.renderEnvironmentOption(r[t],a.optionMappings[r[t]]));return i},i.enableOptions=function(){e(a.oDefaults.sSelectorOptionsSelector).show(),e(a.oDefaults.sSelectorOptionsSelectorWrapper).on("click",a.handlerAnimationSelectorClick)},a.renderAnimationOption=function(e,t){return'<li class="nm-avectrl-animation animation-option nm-el-lbl nm-el-lbl-01 nm-at-lbl-b" data-animation="'+e+'">'+t+"</li>"},a.renderEnvironmentOption=function(e,t){return'<li class="nm-avectrl-environment animation-option nm-el-lbl nm-el-lbl-01 nm-at-lbl-b" data-environment="'+e+'">'+t+"</li>"},a.handlerAnimationSelectorClick=function(t){t.preventDefault(),e(a.oDefaults.sSelectorOptionsSelector).hasClass(a.oDefaults.sClassSelectorClosed)?(e(a.oDefaults.sSelectorOptionsSelector).removeClass(a.oDefaults.sClassSelectorClosed),e(a.oDefaults.sSelectorOptionsSelector).addClass(a.oDefaults.sClassSelectorOpen),e(a.oDefaults.sSelectorOptionsSelectorWrapper).addClass("active")):(e(a.oDefaults.sSelectorOptionsSelector).removeClass(a.oDefaults.sClassSelectorOpen),e(a.oDefaults.sSelectorOptionsSelector).addClass(a.oDefaults.sClassSelectorClosed),e(a.oDefaults.sSelectorOptionsSelectorWrapper).removeClass("active"))},a.stopWheel=function(e){var t;t=e?e:window.event,t&&t.preventDefault&&t.preventDefault(),t&&(t.returnValue=!1)},a.catchScrollWheel=function(){e(document).bind("mousewheel DOMMouseScroll",function(){a.stopWheel()})},a.releaseScrollWheel=function(){e(document).unbind("mousewheel DOMMouseScroll")},i.activateAveCanvas=function(i){console.log("ave-dom: activate ave canvas"),e("#"+i).prepend(t.render(n,{})),e("#"+i).hover(a.catchScrollWheel,a.releaseScrollWheel)},i.resizeStreamWrapper=function(){var t=e(a.oDefaults.sSelectorStreamWrapper);t.css("width","100%"),t.css("height","100%"),t.css("position","absolute")},i.moveAveCanvas=function(t,n){var i=e("#"+t);console.log("ave-dom: move ave canvas"),i.removeClass(a.oDefaults.sClassActive),i.find(a.oDefaults.sSelectorOptionsSelectorWrapper).prependTo(e("#"+n)),e("#"+t).off("mouseenter mouseleave"),e("#"+n).hover(a.catchScrollWheel,a.releaseScrollWheel)},i.deactivateAveCanvas=function(t){console.log("ave-dom: deactivate ave canvas"),e("#"+t).empty(),e("#"+t).off("mouseenter mouseleave")},i.initializePromise=function(e){return new Promise(function(t){a.eventBus=e,t("module/ave/ave-dom.js")})},i}),define("module/ave/ave-api",["jquery","events","configurator/dpu-api","core/jsloader","module/ave/ave-dom"],function(e,t,n,a,i){"use strict";var r={},o={__:r};return r.oDefaults={sSelectorAnimationListSelector:".nm-ave-animation-selection"},r.debugEnabled=!0,r.zlLoaded=!1,r.zlValidated=!1,r.zlEnvLive="live",r.zlEnvStaging="live",r.zlCustomerLive="audi",r.zlCustomerStaging="zerolight",r.zlboltURL="//zlbolt.zlthunder.net/v1/zlbolt.min.js",r.zlboltURLPre="//zlbolt.zlthunder.net/v1pre/zlbolt.min.js",r.cameraMappings={closeup_lights:"FrontRightShare",closeup_wheels:"Rims",dashboard:"Interior",exterior:"MRVSide",exterior_back:"MRV4",exterior_front:"MRV1",exterior_straight_back:"MRV5",exterior_straight_front:"MRV6",interior:"InteriorSide_L0L",rearseat:"Interior_Rear_View"},r.defaultCamera="MRV1",r.zlGetCustomer=function(){var e=r.zlCustomerLive,t=SETUPS.get("ave3d.customer");return r.zlLoaded||r.debug("zlbolt not yet loaded"),(-1!==document.location.host.indexOf("pre-")||-1!==document.location.host.indexOf("nemo-t")||-1!==document.location.host.indexOf("local"))&&(e=r.zlCustomerStaging),t&&(r.debug("override zlbolt customer with "+t),e=t),e},r.zlGetEnv=function(){var e=r.zlEnvLive,t=SETUPS.get("ave3d.env");return r.zlLoaded||r.debug("zlbolt not yet loaded"),(-1!==document.location.host.indexOf("pre-")||-1!==document.location.host.indexOf("nemo-t")||-1!==document.location.host.indexOf("local"))&&(e=r.zlEnvStaging),t&&(r.debug("override zlbolt env with "+t),e=t),e},r.zlValidate=function(){var e;r.zlLoaded?"undefined"!=typeof zlbolt?r.zlValidated===!1&&(e=r.buildUpValidateObject(),zlbolt.validate(e,function(e,n){n&&"valid"===n.status?(r.zlValidated=!0,r.eventBus.emit(t.AVE_AVAILABLE)):n&&n.reason?r.debug("zl validation failed: "+n.reason):r.debug("zl validation failed")})):r.debug("failed zlbolt.validate"):r.debug("zlbolt not yet loaded")},r.zlSetReady=function(){r.debug("zlbolt loaded"),r.zlLoaded=!0,r.zlValidate()},r.prepareZLboltURL=function(){var e=SETUPS.get("ave3d.url");(-1!==document.location.host.indexOf("nemo-t")||-1!==document.location.host.indexOf("local"))&&(r.zlboltURL=r.zlboltURLPre),e&&(r.debug("override zlbolt url with "+e),r.zlboltURL=e)},r.zlSetAveString=function(e){r.zlLoaded?zlbolt.setPrCodes(e,function(e){r.debug("set prcodes with msg: ",e)}):r.debug("zlbolt not yet loaded")},r.zlDisconnect=function(e,t){if(r.zlLoaded&&"undefined"!=typeof zlbolt&&r.isConnected===!0){r.debug("disconnect from zlbolt");try{zlbolt.disconnect(function(){e(t)})}catch(n){r.debug("zl exception on disconnect: "+n),e(t)}r.isConnected=!1}else e(t)},r.zlActivateCamera=function(e){var t=r.cameraMappings[e];zlbolt.switchCamera(t,function(e){r.debug("switched camera to "+t+" with result",e)})},r.zlSetConnectCallbacks=function(n,a){zlbolt.isSupported(function(e,t){return e||!t?(r.debug("zl this browser is not supported"),!1):void zlbolt.connect(r.buildUpConnectObject(n,a),function(e){e?(r.debug("zlbolt connect exited in error state: ",e),r.isConnected=!1):(r.debug("zlbolt connected"),r.isConnected=!0)})}),zlbolt.onStreamReady=function(){r.streamActive===!0&&r.debug("stream already active - possible side effect"),r.streamActive=!0,r.isConnected=!0,r.eventBus.on(t.CONFIG_UPDATE,r.handlerConfigUpdated),r.zlBuildOptionsControl(),zlbolt.enableMouseTracking(),e(window).on("resize",i.resizeStreamWrapper),r.eventBus.emit(t.AVE_STREAM_READY),i.resizeStreamWrapper()},zlbolt.onMouseUp=function(e){r.debug("mouse up with x:"+e.x+" and y:"+e.y)},zlbolt.onError=function(e){r.debug("zlbolt Error: ",e)},zlbolt.onStreamDisconnect=function(){r.debug("zlbolt StreamDisconnect"),r.eventBus.off(t.CONFIG_UPDATE,r.handlerConfigUpdated),e(window).off("resize",i.resizeStreamWrapper),r.streamActive=!1},zlbolt.onClose=function(){r.debug("zlbolt stream close"),r.streamActive=!1}},r.zlConnect=function(e,t){return r.zlLoaded?"undefined"==typeof zlbolt?(r.debug("failed zlConnect"),!1):(r.debug("zlbolt StreamReady"),void r.zlSetConnectCallbacks(e,t)):(r.debug("zlbolt not yet loaded"),!1)},r.zlBuildOptionsControl=function(){r.debug("build options control"),zlbolt.enumerateAnimations(function(t){var n=i.renderAnimationControls(t.animations);e(r.oDefaults.sSelectorAnimationListSelector).append(n),e(".nm-avectrl-animation").on("click",r.zlTriggerAnimation)}),zlbolt.enumerateEnvironments(function(t){var n;t.environments.length>1&&(n=i.renderEnvironmentControls(t.environments),e(r.oDefaults.sSelectorAnimationListSelector).append(n),e(".nm-avectrl-environment").on("click",r.zlTriggerEnvironmentChange))}),i.enableOptions()},r.zlTriggerAnimation=function(t){var n=e(t.target).closest(".nm-avectrl-animation").attr("data-animation");console.log("trigger animation "+n),zlbolt.triggerAnimation(n,function(e){console.log("triggered "+n+" with result",e)})},r.zlTriggerEnvironmentChange=function(t){var n=e(t.target).closest(".nm-avectrl-environment").attr("data-environment");console.log("trigger environment change "+n),zlbolt.switchEnvironment(n,function(e){console.log("triggered "+n+" with result",e)})},r.handlerConfigUpdated=function(){r.zlSetAveString(n.getAveString().split(","))},r.mapViewPerspeciveToCamera=function(e){return e in r.cameraMappings?r.cameraMappings[e]:(r.debug("falling back to default camera from "+e),r.defaultCamera)},r.getActiveProtocol=function(){return document.location.protocol.indexOf("https")>-1?"https":"http"},r.buildUpValidateObject=function(){return{connectionParameters:{protocol:r.getActiveProtocol(),customer:r.zlGetCustomer(),environment:r.zlGetEnv()},car:{manufacturer:"audi",model:n.getCarline(),year:n.getModelYear()}}},r.buildUpConnectObject=function(e,t){var a=1112,i=668,o=n.getAveString(),s=r.buildUpValidateObject();return s.resolution={x:a,y:i},s.parent=e,s.setupCamera=r.mapViewPerspeciveToCamera(t),o&&(s.setupPrCodes=o.split(",")),s},r.debug=function(e){r.debugEnabled&&console.log("ave-api: "+e)},r.isCarlineContainedInCarlineString=function(e){var t,n=e.split(",");for(t=0;t<n.length;t++)if(r.carline===n[t])return!0;return!1},o.isActiveCarline=function(){var e=SETUPS.get("ave3d.carlines");return"1"!==SETUPS.get("ave3d.scope")?!1:(r.carline=n.getCarline(),e?"all"===e?!0:r.isCarlineContainedInCarlineString(e):!1)},o.showPerspective=function(e){r.zlActivateCamera(e)},o.isAveAvailable=function(){return r.zlValidated},o.deactivate=function(e){r.zlDisconnect(i.deactivateAveCanvas,e)},o.activateAVE=function(e,t){i.activateAveCanvas(e),r.zlConnect(e,t)},o.moveAVE=function(e,t,n){console.log("moving from "+e+" to "+t),zlbolt.moveStream(t),i.moveAveCanvas(e,t),"undefined"!=typeof n&&n!==!1&&r.zlActivateCamera(n)},o.initializePromise=function(e){return new Promise(function(t){r.eventBus=e,o.isActiveCarline()&&(r.prepareZLboltURL(),a.loadURL(r.zlboltURL).then(r.zlSetReady)),t("module/ave/ave-api.js")})},o}),define("module/renderinginjector",["jquery","events","module/renderinglayer","module/ave/ave-api","core/layer/api","tracking/renderinglayer-tracker"],function(e,t,n,a,i,r){"use strict";var o={},s={__:o};return o.oDefaults={sIdCanvas:"avecanvas",sClassActive:"nm-active",sClassAVE:"ave-layer",sSelectorOptionsWrapper:".nm-ave-animation-selector-wrapper",sSelectorStageWrapper:".nm-renderinglayer-stagewrapper",sSelectorBack:".nm-renderinglayer .nm-backarrow",sSelectorNext:".nm-renderinglayer .nm-nextarrow",sSelectorOuterRenderingLayer:".nm-layer-renderinglayer",sSelectorRenderingLayer:".nm-layer-renderinglayer",sSelectorRenderingStageWrapper:".nm-renderinglayer-stagewrapper",sSelectorThumbnail:".nm-renderinglayer-item .nm-rl-placeholder",sSelectorThumbnailActive:".nm-renderinglayer-item .nm-rl-placeholder.nm-active",sSelectorAVEContainerActive:".nm-md-ave-container.nm-active",sSelectorActiveStageImageWrapper:".nm-renderinglayer-imagewrapper.nm-active"},o.disableStreamReadyEvent=function(){o.eventBus.off(t.AVE_STREAM_READY,n.disableFor3D)},o.handlerLayerClosed=function(){var t,n;e(o.oDefaults.sSelectorRenderingLayer).length>0&&e(o.oDefaults.sSelectorRenderingLayer).first().hasClass(o.oDefaults.sClassAVE)&&(e(".nm-3d-unloading").length>0?(t=e(".nm-3d-unloading").prev(),n=t.attr("id"),o.moveOptionsIntoCanvas(),a.moveAVE(o.oDefaults.sIdCanvas,n),t.addClass(o.oDefaults.sClassActive)):(a.deactivate(o.oDefaults.sIdCanvas),e(o.oDefaults.sSelectorOptionsWrapper).remove()))},o.handlerThumbnailClick=function(){e(this).hasClass(o.oDefaults.sClassActive)||o.activateView(this)},o.handlerBackClick=function(t){var a,i=e(o.oDefaults.sSelectorThumbnailActive);t.preventDefault(),i.length>0&&(a=n.determinePrevFromActive(i)),"undefined"==typeof a&&(a=n.determineDefaultPrev()),o.activateView(a)},o.handlerNextClick=function(t){var a,i=e(o.oDefaults.sSelectorThumbnailActive);t.preventDefault(),i.length>0&&(a=n.determineNextFromActive(i)),"undefined"==typeof a&&(a=n.determineDefaultNext()),o.activateView(a)},o.activateView=function(t){var n=e(o.oDefaults.sSelectorThumbnailActive),i=n.attr("data-key"),r=e(t).attr("data-key");e(o.oDefaults.sSelectorThumbnail).removeClass(o.oDefaults.sClassActive),e(t).addClass(o.oDefaults.sClassActive),r!==i&&a.showPerspective(r)},o.captureAVEDrag=function(t){var n=t.target.closest(".nm-ave-animation-selector-wrapper");e("body").off("click",".nm-layer-wrapper",i.wrapperClickHandler),e(".nm-layer-wrapper").off("mousedown",o.handlerAVEWrapperClick),e(".nm-layer-wrapper").on("mousedown",o.handlerAVEWrapperClick),e(".nm-layer-wrapper").off("touchstart",o.handlerAVEWrapperClick),e(".nm-layer-wrapper").on("touchstart",o.handlerAVEWrapperClick),n||r.swipeHandler("Rotate")},o.activateThumbListeners=function(){e(o.oDefaults.sSelectorThumbnail).on("click",o.handlerThumbnailClick),e(o.oDefaults.sSelectorBack).on("click",o.handlerBackClick),e(o.oDefaults.sSelectorNext).on("click",o.handlerNextClick),e("#"+o.oDefaults.sIdCanvas).off("mousedown",o.captureAVEDrag),e("#"+o.oDefaults.sIdCanvas).off("touchstart",o.captureAVEDrag),e("#"+o.oDefaults.sIdCanvas).on("mousedown",o.captureAVEDrag),e("#"+o.oDefaults.sIdCanvas).on("touchstart",o.captureAVEDrag)},o.handlerAVEWrapperClick=function(){e("body").off("mousedown",".nm-layer-wrapper",i.wrapperClickHandler),e("body").on("mousedown",".nm-layer-wrapper",i.wrapperClickHandler),e("body").off("touchstart",".nm-layer-wrapper",i.wrapperClickHandler),e("body").on("touchstart",".nm-layer-wrapper",i.wrapperClickHandler)},o.moveOptionsOutOfCanvas=function(){e(o.oDefaults.sSelectorOptionsWrapper).prependTo(e(o.oDefaults.sSelectorStageWrapper))},o.moveOptionsIntoCanvas=function(){e(o.oDefaults.sSelectorOptionsWrapper).prependTo(e("#"+o.oDefaults.sIdCanvas))},o.retrieveActiveViewPerspective=function(){var t=e(o.oDefaults.sSelectorActiveStageImageWrapper);return t&&t.attr("data-view")?t.attr("data-view"):"exterior_front"},o.prepareDomForAVE=function(){null===document.getElementById(o.oDefaults.sIdCanvas)&&e(o.oDefaults.sSelectorRenderingStageWrapper).prepend('<div id="'+o.oDefaults.sIdCanvas+'" class="nm-md-ave-container"></div>'),o.eventBus.on(t.AVE_STREAM_READY,n.disableFor3D),e(o.oDefaults.sSelectorOuterRenderingLayer).addClass(o.oDefaults.sClassAVE)},o.handlerInjectAVE=function(){var t=e(o.oDefaults.sSelectorAVEContainerActive);a.isAveAvailable()===!0?(o.prepareDomForAVE(),t.length>0?(a.moveAVE(t.attr("id"),o.oDefaults.sIdCanvas,!1),n.disableFor3D()):a.activateAVE(o.oDefaults.sIdCanvas,o.retrieveActiveViewPerspective()),o.handlerFollowupInjection()):console.log("renderinginjector - no matching carline")},o.handlerFollowupInjection=function(){o.activateThumbListeners(),o.moveOptionsOutOfCanvas()},o.handlerLayerOpened=function(){e(o.oDefaults.sSelectorRenderingLayer).length>0?a.isActiveCarline()?a.isAveAvailable()===!0?o.handlerInjectAVE():o.eventBus.on(t.AVE_AVAILABLE,o.handlerInjectAVE):(e(o.oDefaults.sSelectorOuterRenderingLayer).removeClass(o.oDefaults.sClassAVE),e("#"+o.oDefaults.sIdCanvas).remove()):console.log("renderinginjector - no matching dom element")},o.initialize=function(){o.eventBus.on(t.RENDERINGLAYER_LOADED,o.handlerLayerOpened),o.eventBus.on("jslayer.close",o.handlerLayerClosed),o.eventBus.on("jslayer.close",o.disableStreamReadyEvent)},s.initializePromise=function(e){return new Promise(function(t){o.eventBus=e,o.initialize(),t("module/renderinginjector.js")})},s}),define("module/wallet",["events","module/device"],function(e,t){"use strict";var n={},a={__:n};return n.device=t,n.oDefaults={classIsWallet:"nm-agent-is-wallet"},n.eventBus=null,n.addEvents=function(){n.eventBus.on(e.PAGE_LOADED,n.handlePageLoaded)},n.handlePageLoaded=function(){n.isWalletAgent()&&document.querySelector("body").classList.add(n.oDefaults.classIsWallet)},n.isWalletAgent=function(){return n.device.isiPod()||n.device.isiPhone()},a.initializePromise=function(e){return new Promise(function(t){n.eventBus=e,n.addEvents(),n.handlePageLoaded(),t("module/wallet.js")})},a}),define("tracking/configuration-tracker",["jquery","events","configurator/dpu-api","tracking/tracking-dispatcher","tracking/tracking-utils","tracking/omniture-constants"],function(e,t,n,a,i,r){"use strict";var o,s;return o={},s={__:o},o.lastChangedId=null,o.initialUniqueTrackingID=null,o.conflictStart=!1,o.knownItemCategories={upholstery:r.itemCategoriesInteriorItems,seat:r.itemCategoriesInteriorItems,equipment:r.itemCategoriesEquipmentItems,engine:r.itemCategoriesEngines,accessory:r.itemCategoriesAccessoryItems,trimline:r.itemCategoryTrimlineItems,extcolor:r.itemCategoriesExteriorItems},o.addEvents=function(){o.eventBus.on(t.CONFIG_CHANGEREQUEST_START,i.proxyMethod(o.trackConfigurationChanges,o)),o.eventBus.on(t.CONFIG_START,i.proxyMethod(o.trackConfigurationEntries,o)),o.eventBus.on(t.CONFLICT_CLOSE,i.proxyMethod(o.handleConflictClose,o))},o.getConfigurationStartName=function(e){var t="";switch(e){case"audicode-link":case"prstring-link":case"teaser-audicode":case"teaser-prstring":case"prstring.preconfs-teaser":case"audicode.preconfs-teaser":t="derivate-start-page";break;case"carstore":t="carstore";break;case"configuration-change":t="item-selection";break;default:t="adopt_configuration"}return t},o.trackConfigurationEntries=function(e){var t,r,l=o.getConfigurationStartName(e),c=(n.getConfiguration(),[]),u=null,d="",m={},g="NeMo:"+(n.getCarlineName()||""),f=n.getItem(o.lastChangedId);t=parseInt(s.getCurrentConfigurationValue(),10),r=s.getUniqueIdForThisConfiguration(),c.push("event7"),c.push("event66="+t+":"+r),u=i.generateConfigStartItemPropertiesArr(f),d=i.getAppName()+":"+u.join(","),m={eVar15:"started",eVar70:l,events:c,eVar16:g,prop16:g};var p=s.getConfigurationData();m.products=p.products,p.eVar23&&(m.eVar23=p.eVar23),"item-selection"===l?(m.prop62=d,m.events.push("event78"),a.trackNow(m,"configuration")):a.track(m);
},o.trackConfigurationChanges=function(e){var n,a,r;e&&e.id&&(o.lastChangedId=e.id),n=o.lastChangedId,r=e.count,r&&(n+="*"+e.count),a="itemAdd"===e.action?"set":"remove","set"===a&&o.eventBus.one(t.CONFIG_UPDATE,i.proxyMethod(o.handlePostConfigurationChangeRequest,o,{changedId:o.lastChangedId,$triggerElement:e.$element}))},o.handleConflictClose=function(e){var t=n.getConflictTriggers()[0],r=i.getAppName()+":"+i.generateConfigStartItemPropertiesArr(t).join(","),s={eVar72:r,prop73:r,events:["cancel"===e.action?"event74":"event75"]},l=n.getCarlineName();s.prop67=i.getPageName(),l&&"undefined"==typeof s.prop16&&(s.prop16="NeMo:"+l),a.trackNow(s,"configuration"),o.conflictStart=!1},o.eventOriginsFromRecommendationModule=function(e){var t=!1;return e&&e.$triggerElement&&(t=e.$triggerElement.closest("ul").hasClass("nm-list-summary-dyn-recommendation")),t},o.eventOriginsFromAozModule=function(e){var t=!1;return e&&e.$triggerElement&&(t=e.$triggerElement.closest("div").hasClass("nm-aoz-btn")),t},o.handleConflictFreeConfigurationChange=function(e){var t,r,s,l,c;o.conflictStart=!1,t=n.getItem(e.changedId),r=i.getAppName()+":"+i.generateConfigStartItemPropertiesArr(t).join(","),o.eventOriginsFromRecommendationModule(e)?l={events:["event78"],prop62:r,prop39:"recommendation_module",eVar39:"recommendation_module",prop46:"recommendation_module:add_item:"+r,eVar46:"recommendation_module:add_item:"+r}:o.eventOriginsFromAozModule(e)?(s=i.getAppName()+":"+i.generateConfigStartItemPropertiesArr(t).join(":"),c=i.getPageName(),l={events:["event78"],eVar37:c,prop39:"aoz_tire_module:add_item:"+s,eVar39:"aoz_tire_module:add_item:"+s,prop46:c+":aoz_tire_module:add_item:"+s,eVar46:c+":aoz_tire_module:add_item:"+s,prop57:c,prop62:s,eVar71:"configuration_items_selection"}):l={events:["event78"],prop62:r},a.trackNow(l,"configuration")},o.handleConflictConfigurationChangeFirst=function(e){var t,s,l,c,u,d;return u=n.getConflictTriggers(),(t=n.getItem(u[0].id))?(s=i.getAppName()+":"+i.generateConfigStartItemPropertiesArr(t).join(","),o.eventOriginsFromRecommendationModule(e)?c={events:[r.conflictLayerOpened],eVar72:s,prop73:s,prop68:"conflict_layer",prop39:"recommendation_module",eVar39:"recommendation_module",prop46:"recommendation_module:add_item:"+s,eVar46:"recommendation_module:add_item:"+s}:o.eventOriginsFromAozModule(e)?(l=i.getAppName()+":"+i.generateConfigStartItemPropertiesArr(t).join(":"),d=i.getPageName(),c={events:[r.conflictLayerOpened],eVar37:d,prop39:"aoz_tire_module:add_item:"+l,eVar39:"aoz_tire_module:add_item:"+l,prop46:d+":aoz_tire_module:add_item:"+l,eVar46:d+":aoz_tire_module:add_item:"+l,prop57:d,prop62:l,prop68:"conflict_layer",eVar71:"configuration_items_selection",eVar72:l,prop73:l}):c={events:[r.conflictLayerOpened],eVar72:s,prop73:s,prop68:"conflict_layer"},a.track(c,"conflict"),void 0):(console.log("Conflict trigger Item was not found"),!1)},o.handleConflictConfigurationChangeAlternatives=function(e){var t,s,l,c,u;t=n.getItem(e.changedId),s=i.getAppName()+":"+i.generateConfigStartItemPropertiesArr(t).join(","),o.eventOriginsFromRecommendationModule(e)?c={events:[r.conflictSelectAlternative],eVar72:s,prop73:s,prop62:s,prop39:"recommendation_module",eVar39:"recommendation_module",prop46:"recommendation_module:add_item:"+s,eVar46:"recommendation_module:add_item:"+s}:o.eventOriginsFromAozModule(e)?(l=i.getAppName()+":"+i.generateConfigStartItemPropertiesArr(t).join(":"),u=i.getPageName(),c={events:[r.conflictSelectAlternative],eVar37:u,prop39:"aoz_tire_module:add_item:"+l,eVar39:"aoz_tire_module:add_item:"+l,prop46:u+":aoz_tire_module:add_item:"+l,eVar46:u+":aoz_tire_module:add_item:"+l,prop57:u,prop62:l,prop68:"conflict_layer",eVar71:"configuration_items_selection",eVar72:l,prop73:l}):c={events:[r.conflictSelectAlternative],eVar72:s,prop73:s,prop62:s},a.trackNow(c,"configuration")},o.handlePostConfigurationChangeRequest=function(e){i.getConflicts()?(o.conflictStart?o.handleConflictConfigurationChangeAlternatives(e):o.handleConflictConfigurationChangeFirst(e),o.conflictStart=!0):o.handleConflictFreeConfigurationChange(e)},s.getConfigurationData=function(){var e,t={},a=n.getConfiguration();return t.products=o.getProductsArr().join(","),a&&a.prices&&a.prices.totalRaw&&a.prices.modelRaw&&a.prices.optionsRaw&&(t.eVar23="NeMo:"+parseInt(a.prices.totalRaw,10)+":"+parseInt(a.prices.modelRaw,10)+":"+parseInt(a.prices.optionsRaw,10)),e=n.getItem(n.getEngine()),e=i.generateConfigStartItemPropertiesArr(e).join(","),t.eVar21="NeMo:"+e.replace(/,|;/g," "),t},s.getCurrentConfigurationValue=function(){var e=n.getConfiguration();return e&&e.prices&&e.prices.totalRaw?e.prices.totalRaw:null},s.getUniqueIdForThisConfiguration=function(){var e=n.getSubsessionID();return e?e=e.replace("-",""):o.initialUniqueTrackingID?e=o.initialUniqueTrackingID:(o.initialUniqueTrackingID=Math.floor(1e16*Math.random())+"",o.initialUniqueTrackingID.length>8&&(o.initialUniqueTrackingID=o.initialUniqueTrackingID.substring(0,8)),e=o.initialUniqueTrackingID),e},o.getProductsArr=function(){var t=[],a=n.getItemsByStatus(new RegExp("(0|1){3}10"))||{},i="";return e.each(a,function(e,n){i=o.serializeConfigItemProperties(o.generateConfigItemProperties(n,!1)),t.push(i)}),t},o.generateConfigItemProperties=function(e,t){var a,i,r={category:"",family:""};return e&&e.family&&(i=n.getFamilies()[e.family],r.category=i?i.group||"":"",r.family=i?i.name||"":""),r.selectionMethod=e.selectionMethod||"pre",r.prNumber=e.id,r.product=e.name||"",r.mbvId=e.mbvId,r.unit=e.count||1,a=e.price===window.i18n.standard?null:e.price,r.price=parseInt((a||"0.00").replace(/[^\d\,]/g,""),10),r},o.serializeConfigItemProperties=function(e){var t=i.getAppName()+":";return e?(t+=e.category.replace(/,|;/g," ")+";"+e.product.replace(/,|;/g," ")+";"+e.unit+";"+e.price+";;;",t+="eVar35="+(e.family||"").replace(/,|;/g," "),t+="|eVar34="+e.prNumber,t+="|eVar38="+e.mbvId,t+="|eVar29="+e.selectionMethod):""},o.initialize=function(){o.addEvents()},s.initializePromise=function(e){return new Promise(function(t){o.eventBus=e,o.initialize(),t("tracking/configuration-tracker.js")})},s}),define("tracking/link-tracker",["jquery","events","tracking/tracking-dispatcher","core/logging","tracking/tracking-utils","configurator/dpu-api"],function(e,t,n,a,i,r){"use strict";var o={},s={__:o};return o.oDefaults={sSelectorDelegateClick:".nm-toggle",sOptionsListHeadSelector:".nm-options-list-head"},o.LOGGER=a.createLogger("tracking"),o.linkClickedHandler=function(t){var a=e(t.currentTarget),s=a.attr("data-tracking-link"),l=o.getCurrentPageName();s||(s=a.attr("data-linktracking"));try{s=e.parseJSON(s)}catch(c){console.log("LINK-TRACKER JSON Parse ErrorError: ",c.message,a)}if(s){if(s.prop67=l,s.events&&("string"==typeof s.events&&(s.events=s.events.split(",")),s.events.indexOf("event76")>=0||s.events.indexOf("event73")>=0)){var u=r.getConflictTriggers();if(u){var d=r.getConflictTriggers()[0],m=i.getAppName()+":"+i.generateConfigStartItemPropertiesArr(d).join(",");s.eVar72=m,s.prop72=m}}if(s.prop46){var g="";":"!==s.prop46.substr(0,1)&&"|"!==s.prop46.substr(0,1)&&(g=":"),s.prop46=l+g+s.prop46,s.eVar46=s.prop46}s.prop57&&"inlinerendering"===s.prop57&&(s.prop57=l,s.eVar37=s.prop57),s.prop39&&(s.eVar39=s.prop39);var f=r.getCarlineName();if(f&&"undefined"==typeof s.prop16){var p=window.mss||null,v=p?"MSSC":"NeMo";s.prop16=v+":"+f}n.trackNow(s,"link")}else console.log("LINK-TRACKER Error: missing data",a);o.LOGGER.debug("link.linkClickedHandler linkProperties: ",s)},o.updateCurrentPageName=function(){e("body").attr("page-name",i.getPageName())},o.getCurrentPageName=function(){return e("body").attr("page-name")},o.updateTrackingLink=function(t){var n,a=e(this),i=a.find(o.oDefaults.sSelectorDelegateClick);try{n=e.parseJSON(i.attr("data-tracking-link"));var r=i.hasClass("nm-toggle-open")?"_closed":"_open";n.prop39=n.prop39.split("_")[0]+r,n.eVar39=n.prop39;var s=i.hasClass("nm-toggle-open")?"close optionlist":"open optionlist";n.prop46=n.prop46.split(":")[0]+":"+s+":"+n.prop46.split(":")[2],n.eVar46=n.prop46,console.log("linkProperties",n),i.attr("data-tracking-link",JSON.stringify(n))}catch(l){console.log("LINK-TRACKER JSON Parse ErrorError: ",l.message,i)}},o.addEvents=function(){o.eventBus.on(t.LAYER_LOADED,o.updateCurrentPageName),o.eventBus.on(t.PAGE_READY,o.updateCurrentPageName),o.eventBus.on(t.LAYER_CLOSE,o.updateCurrentPageName),o.legacyEventBus.on("click.expertmode.tracking-toggle",o.oDefaults.sOptionsListHeadSelector,o.updateTrackingLink),o.legacyEventBus.on("click.link-tracking","[data-tracking-link], [data-linktracking]",i.proxyMethod(o.linkClickedHandler,o))},o.initialize=function(){o.updateCurrentPageName(),o.addEvents()},s.initializePromise=function(t){return new Promise(function(n){o.eventBus=t,o.legacyEventBus=e("body"),o.initialize(),n("tracking/link-tracker.js")})},s}),define("tracking/teaser-tracker",["jquery","events","tracking/tracking-dispatcher","core/logging","tracking/tracking-utils","utils/polling"],function(e,t,n,a,i,r){"use strict";var o={},s={__:o};return o.oDefaults={selectorContainer:".nm-homepage-md-configurator-teaser-selection",selectorConfigureNowButton:".nm-j-enter-configurator-click"},o.teasersLoaded=!1,o.LOGGER=a.createLogger("tracking"),o.addEvents=function(){o.legacyEventBus.on("change.teaserselection",i.proxyMethod(o.changeTrackingLink)),o.eventBus.on(t.TEASER_ACTIVATED,o.onTeaserActivated),o.eventBus.on(t.TEASER_ALL_ACTIVATED,o.onAllTeasersLoaded)},o.initialize=function(){n.registerTracker(s),o.addEvents(),o.changeTrackingLink()},o.changeTrackingLink=function(t){var n=e(o.oDefaults.selectorContainer).find(o.oDefaults.selectorConfigureNowButton),a=e("#nm-homepage-md-configurator-teaser-selection-color option:selected").text(),i=e("#nm-homepage-md-configurator-teaser-selection-type option:selected").text();if(a||(a=e("#nm-homepage-md-configurator-teaser-selection-color .active-color").attr("data-value")),!i){var r=e("#nm-homepage-md-configurator-teaser-selection-type .active-carline").attr("data-carline"),s=r?e.parseJSON(r):"";i=s?s.id:""}var l=e.parseJSON(n.attr("data-tracking-link")||"{}");l.prop39="homepage_teaser:"+i+"_"+a+"_configure_now",l.prop46=":Click Configurator Teaser:homepage teaser - "+i+" - "+a+" - configure now";var c=JSON.stringify(l);n.attr("data-tracking-link",c)},o.onTeaserActivated=function(t){var n=e(t.teaser),a=t.rotationType,i=n.attr("data-headline"),r=n.parents(".nm-homepage-grid-container").position().top>0?2:1,o="",s="";if(0!==n.parents(".nm-homepage-grid-column").length){n.parents(".nm-homepage-grid-container").index()+1;0!==n.parents(".nm-homepage-grid-column-left").length?o="teaserbox/1/"+r:0!==n.parents(".nm-homepage-grid-column-middle").length?o="teaserbox/2/"+r:0!==n.parents(".nm-homepage-grid-column-right").length&&(o="teaserbox/3/"+r)}var l="general";"interestBased"===a&&(l="personal");var c="small";n.hasClass("nm-homepage-grid-big-teaser")&&(c="big"),s=JSON.stringify({eVar63:"teaserbox/"+i,eVar64:o,eVar65:l,eVar66:c,events:"event33"}),n.attr("data-tracking-link",s)},s.getDataPromise=function(e){return new Promise(function(e,t){r.wait(function(){return o.teasersLoaded},2e3).then(function(){o.teaserData=o.collectTeaserData(),o.LOGGER.debug("teaser-tracker.getDataPromise: resolving with data:",o.teaserData),e(o.teaserData)},function(){o.LOGGER.debug("teaser-tracker.getDataPromise: rejecting due to timeout"),t("Teaser-tracker:no teaserData collected")})})},o.onAllTeasersLoaded=function(){o.teasersLoaded=!0},o.collectTeaserData=function(){var t,n,a={list1:[],events:"event32"};return e(".nm-homepage-grid-teaser[data-tracking-link]").length?(e(".nm-homepage-grid-teaser[data-tracking-link]").each(function(i){n=e(this),t=n.attr("data-headline"),a.list1.push("sub-stage_teaserbox_"+t.replace(",",""))}),a.list1=a.list1.join(","),a):{}},s.initializePromise=function(t){return new Promise(function(n){o.eventBus=t,o.legacyEventBus=e("body"),o.initialize(),n("tracking/teaser-tracker.js")})},s}),define("tracking/component-tracker",["jquery","tracking/tracking-dispatcher","tracking/tracking-utils","events","core/logging"],function(e,t,n,a,i){"use strict";var r={},o={__:r};return r.oDefaults={sComponentTrackingDataSelector:"[data-tracking-component]",sComponentTrackingData:"data-tracking-component"},r.LOGGER=null,r.addEvents=function(){},r.initialize=function(){r.LOGGER=i.createLogger("tracking"),t.registerTracker(o),r.addEvents()},r.collectComponentData=function(){var t,n,a,i=e(r.oDefaults.sComponentTrackingDataSelector);return a={},e.each(i,function(i,o){try{t=JSON.parse(e(this).attr(r.oDefaults.sComponentTrackingData)),t&&!e.isEmptyObject(t)&&"object"==typeof t?(n=t.events,n&&(a.events=a.events||[],n=n.split(","),a.events=a.events.concat(n),delete t.events),a=e.extend(!0,a,t)):r.LOGGER.error("invalid entry: "+t)}catch(s){r.LOGGER.error("Parse Error: "+s.message)}}),a},o.getDataPromise=function(e){return r.LOGGER.debug("component-tracker.getDataPromise called"),new Promise(function(e,t){var n=r.collectComponentData();r.LOGGER.debug("component-tracker.getDataPromise: resolving with data:",n),e(n)})},o.initializePromise=function(e){return new Promise(function(t){r.eventBus=e,r.initialize(),t("tracking/component-tracker.js")})},o}),define("tracking/gsa-tracker",["jquery","events","module/gsa-search","core/logging","tracking/tracking-dispatcher"],function(e,t,n,a,i){"use strict";var r,o;return r={},o={__:r},r.data={},r.maxFetchTime=600,r.LOGGER=a.createLogger("tracking"),r.initialize=function(){i.registerTracker(o)},r.collectDataPromise=function(){var e,t=0,a=200,i=null;return new Promise(function(o,s){n.getSearchQueryString()?n.hasPendingResults()?e=setInterval(function(){t>r.maxFetchTime&&(clearInterval(e),s("AJAX timeout fetching GSA HTML fragments")),n.hasPendingResults()||(clearInterval(e),i=r.readTrackingData(),o(i)),t+=a},a):(i=r.readTrackingData(),o(i)):s("no GSA searchQueryStr found!")})},r.readTrackingData=function(){var t={},a=n.getSearchQueryString(),i=e("a[data-gsa]");return t.prop7=a,t.eVar3=t.prop7,t.eVar5=i.length?"successful":"not successful",t.eVar9="tools/search",t.events=["event28"],t},o.getDataPromise=function(e){return new Promise(function(e,t){r.collectDataPromise().then(function(t){r.LOGGER.debug("gsa-tracker.getDataPromise: resolving with data:",t),e(t)},function(e){r.LOGGER.debug("gsa-tracker.getDataPromise: rejected with error:",e.message),t({})})})},o.initializePromise=function(e){return new Promise(function(t){r.eventBus=e,r.initialize(),t("tracking/gsa-tracker.js")})},o}),define("tracking/microconversions-tracker",["events","tracking/tracking-dispatcher","tracking/configuration-tracker","tracking/omniture-constants","core/logging","utils/polling","configurator/dpu-api"],function(e,t,n,a,i,r,o){"use strict";var s,l;return s={},l={__:s},s.data={},s.pdfClickSelector=".nm-configuration-print",s.audiCodeShow=".nm-j-audicode-show",s.dealerSearchFormIds={sv_drd:!0,tdrdealerreq:!0},s.fdproxyFormId="fdproxy",s.carstoreFormId="carstore",s.configurationStarted=!1,s.configurationEnded=!1,s.microConversionPending=!1,s.addTrackingEvent=function(e){var t,n;if(void 0===e)return void console.log("microconversions-tracker.__.addTrackingEvent: undefined event",e);for(s.data.events||(s.data.events=[]),t=s.data.events.length-1;t>=0;t--)if(s.data.events[t]===e){n=!0;break}n||s.data.events.push(e)},s.cleanDataDecorator=function(e){return function(t){try{e(),s.data={}}catch(n){console.log(n)}}},s.collectConfigurationData=function(){var e,t;e=n.getConfigurationData();for(t in e)e.hasOwnProperty(t)&&(s.data[t]=e[t])},s.checkForm=function(e){return new Promise(function(t,i){var r,o,l,c,u;r=jQuery(e).hasClass("nm-form")?jQuery(e):jQuery(e).find(".nm-form"),r.length>0&&(o=r.attr("id"),l=r.attr("data-form-is-first-view"),c=r.attr("data-form-is-finished"),c?(u=n.getUniqueIdForThisConfiguration(),s.addTrackingEvent(a.microConversionEnded),s.addTrackingEvent(a.microConversionEnded2+":"+u),s.microConversionPending=!1,s.dealerSearchFormIds[o]?s.addTrackingEvent(a.testDriveRequest):o===s.fdproxyFormId&&(s.data.eVar30="financingLayer")):l&&(s.microConversionPending=!0,s.dealerSearchFormIds[o]?s.data.eVar30="dealerRequest":o===s.fdproxyFormId&&(s.data.eVar30="financingLayer"),s.configurationStarted===!0&&(s.collectConfigurationData(),s.endConfiguration()))),t()})},s.checkAudiCode=function(e){var t,i=n.getUniqueIdForThisConfiguration();return t=jQuery(e).hasClass("nm-layer-wrapper"),t||(t=jQuery(e).hasClass("nm-layer")),new Promise(function(o,l){var c,u,d;t&&jQuery(e).find(s.audiCodeShow).length>0?r.wait(function(){var t;return jQuery(e).find(".nm-j-audicode").each(function(){t=jQuery(this).text()}),t},2e4).then(function(t){c=!!e.querySelector(".nm-save-form"),u=!!e.querySelector(".nm-login-form"),s.data.eVar10=t,s.addTrackingEvent(a.audicodeShown),s.addTrackingEvent(a.audicodeShown2+":"+i),c&&u?s.data.eVar30="saveConfiguration":(s.data.eVar30="layerAudiCode",s.addTrackingEvent(a.microConversionEnded),s.addTrackingEvent(a.microConversionEnded2+":"+i)),s.configurationStarted===!0&&(s.collectConfigurationData(),d=parseInt(n.getCurrentConfigurationValue(),10),s.addTrackingEvent(a.configurationCompleted+"="+d+":"+i),s.addTrackingEvent(a.configurationCompleted2+":"+i),s.addTrackingEvent(a.microConversionStarted),s.endConfiguration()),o()},function(){console.log("AudiCode could not be retrieved."),o()}):o()})},s.checkSummaryPage=function(e){var t,i;return new Promise(function(r,o){t=n.getUniqueIdForThisConfiguration(),i=jQuery(e).find("[data-template]").attr("data-template"),"summary"===i&&jQuery(e).find(".nm-md-summary-total").length&&(s.data.eVar30="yourAudiPageOpened",s.addTrackingEvent(a.microConversionEnded),s.addTrackingEvent(a.microConversionEnded2+":"+t),s.addTrackingEvent(a.yourAudiLayer),s.configurationStarted===!0&&(s.collectConfigurationData(),s.endConfiguration())),r()})},s.checkMssSummaryPage=function(e){var t,i;return new Promise(function(r,o){t=n.getUniqueIdForThisConfiguration(),i=jQuery(e).attr("data-template"),"summary"===i&&jQuery(e).find(".nm-md-summary-total").length&&(s.data.eVar30="yourAudiPageOpened",s.addTrackingEvent(a.microConversionEnded),s.addTrackingEvent(a.microConversionEnded2+":"+t),s.addTrackingEvent(a.yourAudiLayer),s.configurationStarted===!0&&(s.collectConfigurationData(),s.endConfiguration())),r()})},s.endConfiguration=function(e){var i,r;i=n.getUniqueIdForThisConfiguration(),r=parseInt(n.getCurrentConfigurationValue(),10),s.addTrackingEvent(a.microConversionStarted),s.addTrackingEvent(a.configurationCompleted+"="+r+":"+i),s.addTrackingEvent(a.configurationCompleted2+":"+i),s.configurationEnded=!0,s.data.eVar15="completed",void 0!==e&&(t.trackNow(s.data,e),s.data={})},s.initialize=function(){s.LOGGER=i.createLogger("tracking"),s.legacyEventBus.on("click",s.pdfClickSelector,l.pdfClickHandler),s.eventBus.on(e.CONFIG_START,l.configurationStartHandler),s.legacyEventBus.on("click",".nm-carstore-save .nm-save-form button",l.carstoreSaveClickHandler),t.registerTracker(l)},l.startMssConversion=function(e){var i,r;i=n.getUniqueIdForThisConfiguration(),r=parseInt(n.getCurrentConfigurationValue(),10),s.addTrackingEvent(a.microConversionStarted),s.addTrackingEvent(a.configurationCompleted+"="+r+":"+i),s.addTrackingEvent(a.configurationCompleted2+":"+i),s.configurationEnded=!0,s.data.eVar15="completed",s.data.eVar30=e,void 0!==e&&(t.trackNow(s.data,e),s.data={})},l.endMssConversion=function(e){var i;i=n.getUniqueIdForThisConfiguration(),s.addTrackingEvent(a.microConversionEnded),s.addTrackingEvent(a.microConversionEnded2+":"+i),s.configurationEnded=!0,s.data.eVar30=e,void 0!==e&&(t.trackNow(s.data,e),s.data={})},l.triggerMssLayerAudiCodeConversion=function(){l.triggerMssConversion("layerAudiCode")},l.triggerMssYourAudiPageOpenedConversion=function(){l.triggerMssConversion("yourAudiPageOpened")},l.triggerMssConversion=function(e){var i,r;i=n.getUniqueIdForThisConfiguration(),r=parseInt(n.getCurrentConfigurationValue(),10),s.addTrackingEvent(a.microConversionStarted),s.addTrackingEvent(a.microConversionEnded),s.addTrackingEvent(a.configurationCompleted+"="+r+":"+i),s.addTrackingEvent(a.configurationCompleted2+":"+i),s.addTrackingEvent(a.microConversionEnded2+":"+i),s.configurationEnded=!0,s.data.eVar15="completed",s.data.eVar30=e,void 0!==e&&(t.trackNow(s.data,e),s.data={})},l.pdfClickHandler=function(e){s.LOGGER.debug("microconversion: pdf click");var i=n.getUniqueIdForThisConfiguration();s.data.eVar30="pdf",s.data.eVar10="n.a.",s.addTrackingEvent(a.audicodeShown),s.addTrackingEvent(a.audicodeShown2+":"+i),s.addTrackingEvent(a.pdfDownloadClick),s.addTrackingEvent(a.microConversionEnded),s.addTrackingEvent(a.microConversionEnded2+":"+i),s.configurationStarted===!0?(s.addTrackingEvent(a.microConversionStarted),s.collectConfigurationData(),s.endConfiguration("pdf")):(t.trackNow(s.data,"pdf"),s.data={})},l.carstoreSaveClickHandler=function(e){var i=n.getUniqueIdForThisConfiguration();s.addTrackingEvent(a.microConversionEnded),s.addTrackingEvent(a.microConversionEnded2+":"+i),s.addTrackingEvent(a.configurationSaved),t.trackNow(s.data,"saveConfiguration"),s.data={}},l.configurationStartHandler=function(){var e,t;s.configurationStarted=!0,s.LOGGER.debug("microconversion: configuration start"),e=n.getUniqueIdForThisConfiguration(),t=parseInt(n.getCurrentConfigurationValue(),10),s.configurationEnded=!1},l.hasConfigurationEnded=function(){return s.configurationEnded},s.resetAndResolve=function(e){var t;t=s.data,s.data={},s.LOGGER.debug("microconversion.getDataPromise: resolving with data:",t),e(t)},l.getDataPromise=function(e){return s.LOGGER.debug("microconversion.getDataPromise called"),new Promise(function(t,n){Promise.all([s.checkForm(e),s.checkAudiCode(e),s.checkSummaryPage(e)]).then(function(){s.resetAndResolve(t)},function(e){console.log(e),s.resetAndResolve(t)})})},l.initializePromise=function(e){return new Promise(function(t){s.eventBus=e,s.legacyEventBus=jQuery("body"),s.initialize(),t("tracking/microconversions-tracker.js")})},l}),define("tracking/page-tracker",["jquery","events","tracking/tracking-dispatcher","core/logging","tracking/tracking-utils","configurator/dpu-api"],function(e,t,n,a,i,r){"use strict";var o={},s={__:o};return o.LOGGER=a.createLogger("tracking"),o.addEvents=function(){o.eventBus.on(t.PAGE_LOADED,i.proxyMethod(o.handlePageLoaded,o)),o.eventBus.on(t.LAYER_LOADED,i.proxyMethod(o.handleLayerLoaded,o))},o.handleLayerLoaded=function(e){var t;r.getConflictTriggers()||(t=o.getTrackingData(e.element),n.trackPage(t,e.element))},o.handlePageLoaded=function(t){var a,i;"undefined"!=typeof t.domElement&&(a=e(t.domElement),a.hasClass("j-prevent-page-tracking"))||(i=o.getTrackingData(a),o.LOGGER.debug("page-tracker.handlePageLoaded: ",t),n.trackPage(i,a))},o.handleInitialPageLoad=function(){var t,a,i=e(".nm-content");t=i.length?i[0]:e("body"),o.LOGGER.debug("page-tracker.handleInitialPageLoad"),a=o.getTrackingData(t),n.trackPage(a,t)},o.getTrackingData=function(t){var n=e("undefined"!=typeof t?t:"body"),a={server:window.location.host},o=i.getGlobalObject();a=e.extend(a,o);var s=i.getUrl().replace(/^\//,"");a.prop1=s,a.pageName=s.replace(/([\w-]*\/){3}/,""),s.indexOf("renderingLayer")>=0&&(a.prop68="configuration_rendering_layer",a.eVar71="configuration_rendering_layer"),a.prop57=a.pageName,a.eVar37=a.pageName,a.hier1=a.pageName;var l=a.pageName.split("/");return s.split("/").length>3?a.channel=a.pageName.split("/")[0]||"":l=[],a.prop8=l.length>1?a.channel+"/"+l[1]:"",a.prop9=l.length>2?a.prop8+"/"+l[2]:"",a.prop10=l.length>3?a.prop9+"/"+l[3]:"",a.prop11=l.length>4?a.prop10+"/"+l[4]:"",a.prop12=l.length>5?a.prop11+"/"+l[5]:"",a.prop13=l.length>6?a.prop12+"/"+l[6]:"",r.isConfigurable()&&(a.prop16=a.prop59+":"+r.getCarlineName(),"configuration_rendering_layer"!==a.prop68&&(a.prop68=""),"nemo"===n.attr("data-type")&&"home"===n.attr("data-template")&&(a.prop68="configuration_overview"),n.find(".nm-j-configurator-item").length&&(a.prop68="configuration_items_selection"),n.find(".nm-summary-list").length&&(a.prop68="configuration_items_overview"),n.find(".nm-mediathek-description").length&&(a.prop68="configuration_items_info_layer"),n.find("#fdproxy").length&&(a.prop68="financing_layer"),a.eVar71=a.prop68,a.eVar24=a.prop59+":"+a.prop2),a},s.getPageData=function(){return o.getTrackingData()},o.initialize=function(){o.addEvents(),setTimeout(function(){i.proxyMethod(o.handleInitialPageLoad,o)()},250)},s.initializePromise=function(e){return new Promise(function(t){o.eventBus=e,o.initialize(),t("tracking/page-tracker.js")})},s}),define("tracking/form-tracker",["events","tracking/tracking-dispatcher","tracking/omniture-constants","core/logging","tracking/tracking-utils","tracking/page-tracker"],function(e,t,n,a,i,r){"use strict";var o,s;return o={},s={__:o},o.LOGGER=a.createLogger("tracking"),o.data={},o.addEvents=function(){o.eventBus.on(e.FORM_LOADED,i.proxyMethod(o.handleFormLoaded,o)),o.eventBus.on(e.FORM_FINISHED,i.proxyMethod(o.handleFormFinished,o))},o.addTrackingEvent=function(e){o.data.events||(o.data.events=[]),o.data.events.push(e)},o.handleFormLoaded=function(e){var n,a;n=document.getElementById(e.id),n&&(a=o.collectFormAndPageData(e.id,n),a.events=a.events||[],"1"===n.getAttribute("data-form-is-first-view")&&a.events.push("event81"),t.trackPage(a,n))},o.collectFormAndPageData=function(e,t){var n={},a=r.getPageData();if(n={eVar2:e},t){var i=t.getAttribute("data-form-process-name");if(i){n.eVar37=e+"/"+i;var o=t.getAttribute("data-form-process-step");o&&(n.eVar37=e+"/"+o+"_"+i)}}return n.pageName=n.eVar37,n=jQuery.extend(!0,a,n)},o.handleFormFinished=function(e){var n,a;n=document.getElementById(e.id),a=o.collectFormAndPageData(e.id,n),a.events=a.events||[],"tdrdealerreq"===e.id&&a.events.push("event31"),a.events.push("event82"),t.trackPage(a,n)},o.initialize=function(){o.addEvents()},s.initializePromise=function(e){return new Promise(function(t){o.eventBus=e,o.initialize(),t("tracking/form-tracker.js")})},s}),define("tracking/search-tracker",["jquery","events","core/logging","tracking/tracking-dispatcher","tracking/tracking-utils"],function(e,t,n,a,i){"use strict";var r={},o={__:r};return r.addEvents=function(){r.eventBus.on(t.SEARCH_OPEN,r.trackSearchLayer),r.eventBus.on(t.SEARCH_CLOSE,r.untrackSearchLayer)},r.initialize=function(){r.addEvents()},r.inputIntervalID=null,r.trackSearchLayer=function(e){var t,n;r.inputIntervalID&&clearInterval(r.inputIntervalID),t=e,"undefined"!=typeof t.search&&"undefined"!=typeof t.footerSearch&&"undefined"!=typeof t.modelSearch&&"undefined"!=typeof t.siteMapSearch&&"undefined"!=typeof t.searchListProposals&&(r.inputIntervalID=setInterval(function(){var e={};e.prop7=t.searchString,e.eVar3=e.prop7,e.prop58=i.getPageName(),e.eVar9="tools/nemo-search",n=t.search.length>0||t.footerSearch.length>0||t.modelSearch.length>0||t.siteMapSearch.length>0||t.searchListProposals.length>0,n?e.eVar5="successful":"not successful",r.untrackSearchLayer(),a.trackNow(e,"nemo-search")},2e3))},r.untrackSearchLayer=function(){clearInterval(r.inputIntervalID),r.inputIntervalID=null},o.initializePromise=function(e){return new Promise(function(t){r.eventBus=e,r.initialize(),t("tracking/search-tracker.js")})},o}),define("module/engine-selection-list",["jquery","events","configurator/dpu-api"],function(e,t,n){"use strict";var a={},i={__:a};return a.instance=!1,a.oDefaults={sSelectorEngineSelectContainer:".nm-engine-list-filter",sSelectorEngineCheckboxContainer:".nm-engine-list-filter-wrap-checkbox .nm-engine-list-filter",sSelectorEngineListContainer:".nm-engine-list-container",sSelectorEngineList:".nm-engine-list",noResultsClass:"nm-engine-list-filter-noresult",sSelectorResetBtn:".nm-j-reset-engine-filters",sSelectorChecklistItem:".nm-check-list-item",sSelectorVisibleCounter:".nm-j-enginesVisible",sDropdownSelectionClass:"nm-engine-list-filter-selected",sUnsetFiltersClass:".nm-j-configurator-unset-filters",sFilterCheckboxSelector:'.nm-engine-list-filter input[type="radio"]'},a.addEvents=function(){a.eventBus.on(t.PAGE_LOADED,a.onPageLoaded),a.legacyEventBus.on("change.filter",[a.oDefaults.sSelectorEngineListContainer," select"].join(""),a.handleSelectChanges),a.legacyEventBus.on("click.check",a.oDefaults.sFilterCheckboxSelector,a.handleCheckboxChanges)},a.resetCheckboxes=function(e,t){var n;[].slice.call(t.querySelectorAll(a.oDefaults.sFilterCheckboxSelector)).forEach(function(t){t.removeAttribute("checked"),t.classList.remove("nm-j-is-checked"),n=t.getAttribute("name"),a.removeFilterState(e,n)})},a.handleCheckboxChanges=function(t){var n,i,r=t.target,o=r.checked,s=e(r).closest(a.oDefaults.sSelectorEngineListContainer);t.preventDefault(),o=r.classList.contains("nm-j-is-checked"),o?(r.removeAttribute("checked"),r.classList.remove("nm-j-is-checked"),n=r.getAttribute("data-filter-type"),a.removeFilterState(s,n)):(a.resetCheckboxes(s,e(r).closest(a.oDefaults.sSelectorEngineSelectContainer)[0]),r.setAttribute("checked",""),r.classList.add("nm-j-is-checked"),n=r.getAttribute("data-filter-type"),i=r.getAttribute("value"),a.addFilterState(s,n,i)),a.filterItems(s)},a.addFilterState=function(e,t,n){e.attr("data-filter-criteria-"+t,n)},a.removeFilterState=function(e,t){e.removeAttr("data-filter-criteria-"+t)},a.onPageLoaded=function(){for(var t,n=e(a.oDefaults.sSelectorEngineListContainer),i=0,r=n.length;r>i;i++)t=n[i],a.resetFilters(t)},a.handleSelectChanges=function(t){var n,i,r,o=e(t.target).closest(a.oDefaults.sSelectorEngineListContainer),s=o.find(a.oDefaults.sSelectorEngineSelectContainer).find("option:selected");o.find(a.oDefaults.sSelectorEngineList).find(".nm-md-engine-selection-group").removeAttr("nm-hidden"),e.each(s,function(){r=e(this),n=r.parent().data("filter-type"),i=r.val(),a.removeFilterState(o,n),r.attr("selected",!0),r.parent().find("[value!='"+i+"']").attr("selected",!1),i&&"*"!==i&&a.addFilterState(o,n,i)}),a.filterItems(o)},a.handleResetClick=function(t){var n=e(this).closest(a.oDefaults.sSelectorEngineListContainer)[0];a.resetFilters(n)},a.resetFilters=function(t){console.log("resetfilters ",t);var i=e(t);a.resetAllItems(i);var r=i.find(a.oDefaults.sSelectorEngineSelectContainer).find("select"),o=i.find(a.oDefaults.sSelectorEngineSelectContainer).find("[data-filter-type*='trimline']");r.val("*");var s=e(a.oDefaults.sUnsetFiltersClass).length?"*":n.getSelectedTrimline();if(o.length){if(o.val()===s&&s)return;o.val(s||"*")}[].slice.call(i[0].querySelectorAll(a.oDefaults.sSelectorEngineCheckboxContainer)).forEach(function(e){a.resetCheckboxes(i,e)}),a.handleSelectChanges({target:t})},a.resetAllItems=function(e){e.removeClass("nm-engine-list-filter-noresult");var t=e.find(".nm-md-engine-selection-group");t.removeClass("nm-hidden")},a.filterItems=function(e){a.resetAllItems(e);var t,n=e.find(a.oDefaults.sSelectorEngineList),i=n.find(a.oDefaults.sSelectorChecklistItem);t=i.filter(":visible"),e.find(a.oDefaults.sSelectorVisibleCounter).text(t.length),t.length?(e.removeClass(a.oDefaults.noResultsClass),e.off("click.enginefilter-reset",a.oDefaults.sSelectorResetBtn,a.handleResetClick)):(e.addClass(a.oDefaults.noResultsClass),e.one("click.enginefilter-reset",a.oDefaults.sSelectorResetBtn,a.handleResetClick)),a.filterGroupedItems(n)},a.filterGroupedItems=function(t){var n,i,r=t.find(".nm-md-engine-selection-group");e.each(r,function(){i=e(this),i.removeClass("nm-hidden"),n=i.find(a.oDefaults.sSelectorChecklistItem),n.filter(":visible").length||i.addClass("nm-hidden")})},a.initialize=function(){a.addEvents(),a.handleSelectChanges({target:document.querySelector(a.oDefaults.sSelectorEngineListContainer)})},i.initializePromise=function(t){return new Promise(function(n){a.eventBus=t,a.legacyEventBus=e("body"),a.initialize(),n("module/engine-selection-list.js")})},i}),define("module/tdrdealer",["jquery","events","configurator/dpu-api"],function(e,t,n){"use strict";var a,i;return i={},a={__:i},i.buildInfoEl=function(e){var t,a,i,r,o,s,l,c,u,d,m;t=n.getConfiguration()||{},a=n.getRenderUrl(),i=n.getConfigurationAssets()||{},u=i.exterior_front||{},
r=u["thumbnail.new"],s=n.getPrices()||{},o=s.total,l=n.getCarlineName(),c=t.description,console.log(a,r,l,c,o),a&&r&&(d=document.createElement("img"),d.src=a+r,e.appendChild(d)),l&&(m=document.createElement("div"),m.className="nm-form-configuration-info",m.innerHTML='<span class="nm-h3">'+l+"</span><p>"+c+"</p><p><strong>"+o+"</strong></p>",e.appendChild(m))},i.initialize=function(){i.eventBus.on(t.FORM_LOADED,a.handleFormLoaded)},a.handleFormLoaded=function(){var e=document.querySelector("#nm-id-custom-tdrdealerreq-configuration-info");e&&i.buildInfoEl(e)},a.initializePromise=function(e){return new Promise(function(t){i.eventBus=e,i.initialize(),t("module/trdealer.js")})},a}),define("module/teasergrid",["jquery","events"],function(e,t){"use strict";var n={},a={__:n};return n.getSortedCarlinesArr=function(){return window.bt.getAllCarlinesOrdereByLevel()},n.initialize=function(){setTimeout(function(){e(".nm-homepage-grid-container").each(function(a){var i=e(this),r=i.find(".nm-homepage-grid-container-list").attr("data-rotation"),o=i.find(".nm-homepage-grid-container-default .nm-homepage-grid-teaser"),s=i.find(".nm-homepage-grid-container-list .nm-homepage-grid-teaser"),l=s.filter(function(t){var n=e(this),a=Math.round(n.attr("data-startdate")),i=Math.round(n.attr("data-enddate")),r=(new Date).getTime();if(0===a&&0===i)return!0;if(a>0&&i>0){if(r>=a&&i>r)return!0}else if(a>0){if(r>=a)return!0}else if(i>0&&i>r)return!0;return!1});if("showFirst"===r&&l.length>0){o.hide();var c=l.first();c.show(),n.eventBus.emit(t.TEASER_ACTIVATED,{teaser:c,rotationType:r})}else if("showRandom"===r&&l.length>0){o.hide();var u=Math.round(Math.random()*(l.length-1)),d=l.eq(u);d.show(),n.eventBus.emit(t.TEASER_ACTIVATED,{teaser:d,rotationType:r})}else if("interestBased"===r){for(var m,g,f,p=l.first(),v=0,h=n.getSortedCarlinesArr(),y=0,C=h.length;C>y;y++)if(m=h[y].carline,f=["[data-carline='",m,"']"].join(""),console.log("$possibleNonDefaultTeasers.length1"+l.length),g=l.filter(f),g.length){var S=0;try{S=window.bt.getValueForCarline(m)}catch(E){}e.each(g,function(){var t=e(this),n=parseFloat(t.attr("data-interest"));S>=n&&S>v&&(v=n,p=t)});break}o.hide(),p.show(),n.eventBus.emit(t.TEASER_ACTIVATED,{teaser:p,rotationType:r})}}),n.eventBus.emit(t.TEASER_ALL_ACTIVATED)},100)},n.checkUnicLayers=function(){var e=window.location.hash;e&&"#overlay/load/"===e.substr(0,14)&&(e="#layer=/de/brand/de/tools/nemo/cms4i-over-nemo.html/"+e.substr(14),window.location.hash=e)},a.initializePromise=function(e){return new Promise(function(t){n.eventBus=e,n.initialize(),t("module/teasergrid.js")})},a}),define("text!templates/bicolor-options.tpl",[],function(){return'<option class="nm-j-configurator-item nm-j-configurator-status_{{=it.status}}" data-configurator-id="{{=it.domId}}"\n{{?it.status=="11010" }}selected="selected" {{?}} value="{{=it.domId}}">\n	{{=it.description}}\n</option>\n'}),define("module/bicolor",["jquery","events","configurator/dpu-api","core/template","text!templates/bicolor-options.tpl"],function(e,t,n,a,i){"use strict";var r={},o={__:r};return r.oDefaults={sSelectoBiColorTiles:".nm-md-bicolor-chooser-el-content-bicolor-tiles",sSelectoBiColorBaseColor:".nm-md-bicolor-chooser-el-label-base-color",sSelectoBiColorSecondaryColor:".nm-md-bicolor-chooser-el-label-secondary-color",sSelectorDropDown:".nm-j-configurator-dropdown",sConfigIdsDataAttribute:"configurator-id-included",sSelectorBicolorModule:".nm-md-bicolor-chooser",sSelectorOptionList:".nm-md-options-list .nm-configurator-container",sClassShowOptions:"nm-md-bicolor-chooser-show-options"},r.addEvents=function(){r.eventBus.on(t.CONFIG_UPDATE,r.handleConfigurationUpdates),r.eventBus.on(t.LAYER_LOADED,r.handleLayerLoaded)},r.handleLayerLoaded=function(){r.updateBicolorOptions()},r.handleConfigurationUpdates=function(){var t=e(r.oDefaults.sSelectorDropDown);r.updateDropDownStatus(t),r.updateBicolorOptions()},r.updateBicolorOptions=function(){var t,a,i,o=e(r.oDefaults.sSelectorBicolorModule).parent(".nm-2col, .nm-3col").find(r.oDefaults.sSelectorOptionList).first(),s=r.parseArrayFromString(o.data(r.oDefaults.sConfigIdsDataAttribute)),l=n.getItems();for(e(r.oDefaults.sSelectorBicolorModule).removeClass(r.oDefaults.sClassShowOptions),a=0,i=s.length;i>a;a++)if(t=l[s[a]]||{},t.status&&("11010"===t.status||"10011"===t.status))return e(r.oDefaults.sSelectorBicolorModule).addClass(r.oDefaults.sClassShowOptions),!1},r.updateDropDownStatus=function(t){var n,a,i,o;for(i=0,o=t.length;o>i;i++)a=e(t[i]),n=r.parseArrayFromString(a.data(r.oDefaults.sConfigIdsDataAttribute)),r.redrawDropDown(a,n)},r.redrawDropDown=function(e,t){var o,s,l,c,u,d;for(e.empty(),o=n.getItems(),u=0,d=t.length;d>u;u++)s=o[t[u]]||{},s.status&&!r.isHidden(s.status)&&(c={domId:s.id,status:s.status,description:s.name||s.description||"carinfo[id] missingâ¦",selected:r.isSelected(s.status)},l=a.render(i,c),e.append(l))},r.isSelected=function(e){var t,n=new RegExp("(0|1){5}");return e.length&&5===e.length&&"string"==typeof e&&n.test(e)?(t=new RegExp("1(1|0)01(0|1)"),t.test(e)):!1},r.isHidden=function(e){var t,n=new RegExp("(0|1){5}");return e.length&&5===e.length&&"string"==typeof e&&n.test(e)?(t=new RegExp("110(0|1)0"),!t.test(e)):!0},r.parseArrayFromString=function(e){var t=e||"",n=t.replace(/[\[\]'"]+/g,"");return n=n.length?n.split(","):[]},r.initialize=function(){r.addEvents()},o.initializePromise=function(e){return new Promise(function(t){r.eventBus=e,r.initialize(),t("module/bicolor.js")})},o}),define("mediagallery/mg-model",["events","core/signal"],function(e,t){"use strict";var n={},a={__:n};return n.categories=[],n.items=[],n.selectedItem=null,n.selectedCategory="",n.eventBus=t.getEmitter(),n.getCurrentItems=function(){if("all"===n.selectedCategory)return n.items;for(var e=[],t=0,a=n.items.length;a>t;t++)n.items[t].category===n.selectedCategory&&e.push(n.items[t]);return e},a.setAllCategories=function(e){n.selectedCategory="",n.categories=e},a.getCategories=function(){return n.categories},a.setAllItems=function(e){n.selectedItem=null,n.items=e},a.getAllItems=function(){return n.items},a.getSelectedCategory=function(){return n.selectedCategory},a.setSelectedCategory=function(t){var a=!1,i=n.selectedCategory;t===n.selectedCategory?a=!1:(n.selectedCategory=t,a=!0),i||(a=!1),console.log("category_",t,"changed"+a,n.eventBus),n.eventBus.emit(e.MEDIAGALLERY_CATEGORY_CHANGED,{category:t,changed:a})},a.getSelectedItem=function(){return n.selectedItem},a.setSelectedItem=function(t){var i=!1,r=n.selectedItem;t===n.selectedItem?i=!1:(n.selectedItem=t,i=!0),r||(i=!1);var o=a.getItemIndex(),s=r?a.getItemIndex(r):o,l=a.getMaxIndex(),c=o>s?"next":"back";i&&o!==s||(c="none"),n.eventBus.emit(e.MEDIAGALLERY_ITEM_CHANGED,{item:t,index:o,maxIndex:l,direction:c,changed:i})},a.getMaxIndex=function(){return n.getCurrentItems().length-1},a.getItemById=function(e){return n.getItemByAttributeValue("id",e)},a.getItemByImageurl=function(e){return n.getItemByAttributeValue("imageurl",e)},n.getItemByAttributeValue=function(e,t){for(var a=0,i=n.items.length;i>a;a++)if(n.items[a][e]===t)return n.items[a];return null},a.getNextItem=function(e){var t=a.getMaxIndex();return t>e?e++:e=0,a.getItemByIndex(e)},a.getPreviousItem=function(e){var t=a.getMaxIndex();return e>0?e--:e=t,a.getItemByIndex(e)},a.getItemByIndex=function(e){var t=n.getCurrentItems();return!t||t.length<1||t.length<e?null:t[e]||null},a.getItemIndex=function(e){for(var t=e||n.selectedItem,a=-1,i=n.getCurrentItems(),r=0,o=i.length;o>r;r++)if(i[r].id===t.id)return a=r;return a},a}),define("mediagallery/mg-controller",["jquery","events","mediagallery/mg-model","core/signal","utils/utils"],function(e,t,n,a,i){"use strict";var r={},o={__:r};return r.oDefaults={sSelectorNextBtn:".nm-mediagallery-browse .nm-nextarrow",sSelectorPrevBtn:".nm-mediagallery-browse .nm-backarrow",sSelectorSliderItemLink:".nm-mediagallery-item a",sSelectorSliderItem:".nm-mediagallery-item",sSelectorDataCatAttr:"data-category",sSelectorCategoryItem:".nm-mediagallery-categories li",sSelectorModule:".nm-md-mediagallery-media-list",sClassShowOverview:"nm-md-mediagallery-media-list-overview",sSelectorOverviewSwitch:".nm-mediagallery-categories-overview",sSelectorOverview:".nm-mediagallery-categories-overview",sSelectorDownloadbox:".nm-mediagallery-download-infobox",sSelectorDownloadIcon:".nm-mediagallery-download",sIdDropdownList:"#nm-mediagallery-category-list-select",sSelectorSlideContainer:".nm-mediagallery-detail-slide",sSelectorMediagalleryModule:".nm-md-mediagallery-media-list",sIDprefix:"mg_item_"},r.addEvents=function(){r.removeEvents(),e("body").one(t.LAYER_CLOSE,r.onLayerClosing),e("body").on("click.mg_prevnext",r.oDefaults.sSelectorPrevBtn,{direction:"back"},r.handlePagePrevNextClick),e("body").on("click.mg_prevnext",r.oDefaults.sSelectorNextBtn,{direction:"next"},r.handlePagePrevNextClick),e("body").on("mousedown.mg_stage",r.oDefaults.sSelectorSlideContainer,r.onMouseDown),e("body").on("click.mg_slider_item",r.oDefaults.sSelectorSliderItemLink,r.handleSliderItemClick),e("body").on("click.mg_category",r.oDefaults.sSelectorCategoryItem,r.handleCategoryChangeClick),e("body").on("keydown.mg_browse_arrows",r.handleKeyDown),e("body").on("change.mg_dropdown_select",r.oDefaults.sIdDropdownList,r.handleCategoryDropdownChanges),e("body").on("keyup.mediagallery",r.handleEscKey),e("body").on("click.mediagallery",".nm-layer-wrapper",r.handleShaderClick)},r.removeEvents=function(){e("body").off("click.mg_prevnext",r.oDefaults.sSelectorPrevBtn,r.handlePagePrevNextClick),e("body").off("click.mg_prevnext",r.oDefaults.sSelectorNextBtn,r.handlePagePrevNextClick),e("body").off("mousedown.mg_stage",r.oDefaults.sSelectorSlideContainer,r.onMouseDown),e("body").off("click.mg_slider_item",r.oDefaults.sSelectorSliderItemLink,r.handleSliderItemClick),e("body").off("click.mg_category",r.oDefaults.sSelectorCategoryItem,r.handleCategoryChangeClick),e("body").off("keydown.mg_browse_arrows",r.handleKeyDown),e("body").off("change.mg_dropdown_select",r.oDefaults.sIdDropdownList,r.handleCategoryDropdownChanges),e("body").off("keyup.mediagallery",r.handleEscKey),e("body").on("click.mediagallery",".nm-layer-wrapper",r.handleShaderClick)},r.onLayerClosing=function(){var e,t;r.removeEvents(),window.location.hash.indexOf("mediagallery=")>-1&&(e=document.body.scrollTop,t=document.documentElement.scrollTop,window.location.hash=window.location.hash.replace(/(mediagallery=){1}\w*(\|){1}\d*(&)?/,""),document.body.scrollTop=e,document.documentElement.scrollTop=t)},r.onMouseDown=function(t){r.mousePosX=t.pageX,e("body").on("mousemove.mg_stage",r.oDefaults.sSelectorSlideContainer,r.onMouseMove),e("body").one("mouseup.mg_stage",r.oDefaults.sSelectorSlideContainer,r.onMouseUp)},r.onMouseUp=function(e){Math.abs(r.mousePosX-e.pageX)>25&&(r.mousePosX-e.pageX>0?r.triggerNextClick():r.triggerPrevClick())},r.handleEscKey=function(e){27===e.keyCode&&r.closeLayer()},r.galleryIsOpened=function(){return e(r.oDefaults.sSelectorMediagalleryModule).length>0},r.closeLayer=function(){e([r.oDefaults.sSelectorMediagalleryModule,".nm-button-close"].join(" ")).trigger("click")},r.handleShaderClick=function(t){if(r.galleryIsOpened()){var n=i().isElementOutsideOfElementWithSelector(e(t.target),r.oDefaults.sSelectorMediagalleryModule);n&&!e(t.target).hasClass("nm-mediagallery-image")&&(r.cancelEvent(t),r.closeLayer())}},r.onMouseMove=function(e){},r.isInOverviewMode=function(){var t=e(r.oDefaults.sSelectorModule);return t.hasClass(r.oDefaults.sClassShowOverview)},r.handleKeyDown=function(e){37===e.keyCode&&r.triggerPrevClick(),39===e.keyCode&&r.triggerNextClick()},r.triggerNextClick=function(){var t=e(r.oDefaults.sSelectorNextBtn);t.hasClass("nm.hidden")||t.trigger("click")},r.triggerPrevClick=function(){var t=e(r.oDefaults.sSelectorPrevBtn);t.hasClass("nm.hidden")||t.trigger("click")},r.handlePagePrevNextClick=function(e){if(r.isInOverviewMode())return!1;r.cancelEvent(e);var t=e.data.direction,a=n.getItemIndex(),i="next"===t?n.getNextItem(a):n.getPreviousItem(a);r.triggerItemSelectionUpdate(i)},r.handleSliderItemClick=function(t){r.cancelEvent(t);var a=e(this).parent().attr("id");if(!a)return console.warn("item could not be found!"),!1;var i=n.getItemById(a);r.triggerItemSelectionUpdate(i)},r.showOverview=function(){var t=e(r.oDefaults.sSelectorModule),n=e(".nm-mediagallery-categories");n.find(".nm-active").removeClass("nm-active"),e(r.oDefaults.sSelectorOverviewSwitch).addClass("nm-active"),t.addClass(r.oDefaults.sClassShowOverview)},r.hideOverview=function(){var t=e(r.oDefaults.sSelectorModule),a=e(".nm-mediagallery-categories");a.find(".nm-active").removeClass("nm-active"),t.removeClass(r.oDefaults.sClassShowOverview);var i=n.getSelectedCategory();a.find("[data-category='"+i+"']").addClass("nm-active")},r.handleCategoryChangeClick=function(t){r.cancelEvent(t);var n=e(this),a=n.attr(r.oDefaults.sSelectorDataCatAttr);"overview"===a?r.isInOverviewMode()?r.hideOverview():r.showOverview():(r.isInOverviewMode()&&r.hideOverview(),r.triggerCategoryUpdate(a))},r.handleCategoryDropdownChanges=function(e){r.cancelEvent(e);var t=this.value;"overview"===t?r.isInOverviewMode()?r.hideOverview():r.showOverview():(r.isInOverviewMode()&&r.hideOverview(),r.triggerCategoryUpdate(t))},r.triggerCategoryUpdate=function(e){n.setSelectedCategory(e);var t=n.getSelectedItem();return t?void(n.getItemIndex()>-1?r.triggerItemSelectionUpdate(n.getSelectedItem()):r.triggerItemSelectionUpdate(n.getItemByIndex(0))):!1},r.triggerItemSelectionUpdate=function(e){r.isInOverviewMode()&&(n.getItemIndex(e)<0&&n.setSelectedCategory("all"),r.hideOverview()),n.setSelectedItem(e),r.updateBrowseArrows()},r.updateBrowseArrows=function(){var t=n.getMaxIndex(),a=e(r.oDefaults.sSelectorPrevBtn),i=e(r.oDefaults.sSelectorNextBtn);1>t?(a.addClass("nm-hidden"),i.addClass("nm-hidden")):(a.removeClass("nm-hidden"),i.removeClass("nm-hidden"))},r.parseHash=function(e){var t={category:null,index:-1};if(e.indexOf("mediagallery=")>-1){var n=e.split("mediagallery=")[1];n=decodeURI(n),n=n.split("&")[0];var a=n.split("|");2===a.length&&(t.category=a[0],t.index=parseInt(a[1],10)),1!==a.length||isNaN(parseInt(a[0],10))||(t.category="all",t.index=parseInt(a[0],10)),parseInt(t.index,10)>0&&(t.index=t.index-1)}return t},r.cancelEvent=function(e){e&&"function"==typeof e.preventDefault&&e.preventDefault()},r.initializeDataAndViews=function(){if(r.galleryIsOpened()){r.addEvents(),r.initializeModel();var e=r.parseHash(window.location.hash),t=n.getAllItems();if(!e.category||!t||!t.length||e.index>=t.length)return console.log("could not enter with preselection!"),!1;var a=t[e.index];r.triggerCategoryUpdate(e.category),r.triggerItemSelectionUpdate(a)}},r.initializeModel=function(){var t,a,i,o=e(r.oDefaults.sSelectorModule),s=o.find(r.oDefaults.sSelectorSliderItem),l=[];e.each(s,function(n,r){t=e(r),a={},a.category=t.attr("data-category")?t.attr("data-category").toLowerCase():"all",a.description=t.attr("data-description")||"",a.contenttype=t.attr("data-content-type")?t.attr("data-content-type"):"image",a.imageurl=t.attr("data-image-url")||null,a.thumburl=t.attr("data-thumb-url"),a.posterurl=t.attr("data-poster-url")||null,a.videosrc=t.attr("data-video-src")||null,a.downloadlink=t.attr("data-download-link")||null,a.id=t.attr("id"),l.push(a),t.hasClass("nm-active")&&(i=a)}),i=i||l[0],n.setAllItems(l),s=e(r.oDefaults.sSelectorCategoryItem),l=[];var c;e.each(s,function(){t=e(this),a=t.attr(r.oDefaults.sSelectorDataCatAttr),l.push(a),t.hasClass("nm-active")&&(c=a)}),n.setAllCategories(l),c=c||"all",n.setSelectedCategory(c),n.setSelectedItem(i)},r.initialize=function(){console.log("mg-controllerâ¦initialized"),r.eventBus.on(t.LAYER_LOADED,r.initializeDataAndViews)},r.eventBus=a.getEmitter(),r.eventBus.on(t.APP_READY,r.initialize),o}),define("mediagallery/mg-counter",["events","core/signal"],function(e,t){"use strict";var n={},a={__:n};return n.oDefaults={sSelectorCounterContainer:".nm-md-mediagallery-media-list .nm-counter",sSelectorActiveTxt:".nm-active",sSelectorTotalTxt:".nm-total"},n.addEvents=function(){n.eventBus.on(e.MEDIAGALLERY_ITEM_CHANGED,n.handleUpdates)},n.handleUpdates=function(e){n.updateCounter(e.index,e.maxIndex)},n.updateCounter=function(e,t){var a=t+1,i=e+1,r=document.querySelector(n.oDefaults.sSelectorCounterContainer+" "+n.oDefaults.sSelectorActiveTxt),o=document.querySelector(n.oDefaults.sSelectorCounterContainer+" "+n.oDefaults.sSelectorTotalTxt);r&&(r.innerHTML=i),o&&(o.innerHTML=a)},a.initialize=function(){n.addEvents()},n.eventBus=t.getEmitter(),n.eventBus.once(e.APP_READY,a.initialize),a}),define("module/video-new",["events","module/device","module/swipe-stage","utils/utils","utils/dom"],function(e,t,n,a,i){"use strict";var r,o;return r={},r.delayIntervallId="",r.aAllAutoplayVideos=[],r.aPlayedVideos=[],o={__:r},r.getCurrentVideoContainer=function(e){var t,n,a=document.querySelectorAll(".nm-video");if(a)for(n=a.length,t=0;n>t;t++)if(a[t].contains(e))return a[t];return null},r.getVideo=function(e){return e?e.querySelector("video"):null},r.getLayerHead=function(e){return r.findClosest(e,".nm-layer-head")},r.setDataVideoState=function(e,t){t&&t.setAttribute("data-video-state",e)},r.handlerPlayButton=function(){var e=this,t=r.getCurrentVideoContainer(e),n=r.getVideo(t),a=r.getLayerHead(t);n&&(n.addEventListener("playing",r.handlerVideoPlaying),n.play()),a&&r.setDataVideoState("playing",a)},r.handlerPauseButton=function(){var e,t,n=this,a=r.getCurrentVideoContainer(n);a&&(e=r.getVideo(a),t=r.getLayerHead(a)),e&&(e.addEventListener("pause",r.handlerVideoPause),e.pause(),t&&r.setDataVideoState("paused",t))},r.handlerVideoPause=function(){var e=this,t=r.getCurrentVideoContainer(e);e&&(e.removeEventListener("pause",r.handlerVideoPause),e.removeEventListener("timeupdate",r.updateTimeInfo)),r.removeClassName(t,"nm-video-playing")},r.handlerVideoPlaying=function(){var e=this,t=r.getCurrentVideoContainer(e);e.removeEventListener("playing",r.handlerVideoPlaying),e.addEventListener("timeupdate",r.updateTimeInfo),e.addEventListener("ended",r.handlerVideoEnded),e.addEventListener("progress",r.handleVideoProgress),r.addClassName(t,"nm-video-playing")},r.handleVideoProgress=function(){var e,t,n,a=this,i=r.getCurrentVideoContainer(a);i&&a&&(e=i.querySelector(".nm-loader-loaded"),t=a.buffered.end(0),n=100*parseFloat(t/a.duration),e&&(e.style.width=n+"%"))},r.handlerVideoEnded=function(){var e,t=this,n=r.getCurrentVideoContainer(t),a=!!document.querySelector(".active-fs"),i=r.getLayerHead(n);if(r.handleVideoEndEvents(t),r.removeClassName(n,"nm-video-playing"),r.displayTimeInfos(n,0,t.duration),e=t.currentSrc,t.src=e,a&&r.leaveFullScreen(n.querySelector(".nm-minimize")),t){var o=t.getAttribute("data-nativectrls");"false"===o&&n.classList.remove("nm-hide-controls")}r.setDataVideoState("ended",i)},r.handleVideoEndEvents=function(e){e&&(e.removeEventListener("ended",r.handlerVideoEnded),e.removeEventListener("timeupdate",r.updateTimeInfo),e.removeEventListener("progress",r.handleVideoProgress))},r.updateTimeInfo=function(){var e=this,t=r.getCurrentVideoContainer(e);t&&r.displayTimeInfos(t,e.currentTime,e.duration)},r.displayTimeInfos=function(e,t,n){var a,i,o,s;e&&(e.querySelector("video[data-autoplay-in-viewport]")||(a=e.querySelector(".nm-time-played"),i=e.querySelector(".nm-time-duration"),a.innerHTML=r.getTime(t),i.innerHTML=r.getTime(n)),o=e.querySelector(".nm-loader-played"),s=100*parseFloat(t/n),o&&(o.style.width=s+"%"))},r.handlerMuteButton=function(){var e=this,t=r.getCurrentVideoContainer(e),n=r.getVideo(t);n&&(n.muted===!1?(n.muted=!0,r.removeClassName(this,"nm-mute"),r.addClassName(this,"nm-unmute")):(n.muted=!1,r.removeClassName(this,"nm-unmute"),r.addClassName(this,"nm-mute")))},r.handlerSeekBar=function(e){var t=this,n=r.getCurrentVideoContainer(t),a=r.getVideo(n),i=t.clientWidth,o=e.offsetX,s=o/i*100;a&&n&&(a.currentTime=a.duration*(s/100),r.displayTimeInfos(n,a.currentTime,a.duration))},r.showHideControls=function(){var e,t=document.querySelector(".active-fs");t&&(e=t.querySelector(".nm-controls-wrap-video"),r.addClassName(e,"nm-controls-wrap-video-full"),clearTimeout(r.delayIntervallId),r.delayIntervallId=setTimeout(function(){r.removeClassName(e,"nm-controls-wrap-video-full")},3e3))},r.isFullScreen=function(){return!!(document.fullScreen||document.webkitIsFullScreen||document.mozFullScreen||document.msFullscreenElement||document.fullscreenElement)},r.enterFullScreen=function(e){e.requestFullScreen||(e.requestFullScreen=e.mozRequestFullScreen||e.webkitRequestFullScreen||e.msRequestFullscreen),e.requestFullScreen()},r.isfullScreenClosed=function(){var e=r.isFullScreen();e||r.leaveFullScreen()},r.exitFullScreen=function(){document.exitFullScreen||(document.exitFullScreen=document.mozCancelFullScreen||document.webkitCancelFullScreen||document.msExitFullscreen),document.exitFullScreen(),document.removeEventListener("mousemove",r.showHideControls),r.handleFullscreenEvents(!1)},r.switchToFullScreen=function(e){var t=r.getCurrentVideoContainer(e);t&&(r.addClassName(t,"active-fs"),r.addClassName(e,"nm-minimize"),r.handleFullscreenEvents(!0),document.addEventListener("mousemove",r.showHideControls),r.enterFullScreen(t))},r.leaveFullScreen=function(e){var t,n=r.getCurrentVideoContainer(e);e?(n=r.getCurrentVideoContainer(e),n.className.indexOf("active-fs")>-1&&r.removeClassName(n,"active-fs"),r.removeClassName(e,"nm-minimize")):(t=document.querySelector(".active-fs"),r.removeClassName(t,"active-fs"),r.removeClassName(t.querySelector(".nm-minimize"),"nm-minimize")),r.exitFullScreen()},r.handleFullscreenEvents=function(e){e?(document.addEventListener("webkitfullscreenchange",r.isfullScreenClosed,!1),document.addEventListener("mozfullscreenchange",r.isfullScreenClosed,!1),document.addEventListener("fullscreenchange",r.isfullScreenClosed,!1),document.addEventListener("MSFullscreenChange",r.isfullScreenClosed,!1)):(document.removeEventListener("webkitfullscreenchange",r.isfullScreenClosed,!1),document.removeEventListener("mozfullscreenchange",r.isfullScreenClosed,!1),document.removeEventListener("fullscreenchange",r.isfullScreenClosed,!1),document.removeEventListener("MSFullscreenChange",r.isfullScreenClosed,!1))},r.handlerFullScreenButton=function(){var e=this;r.isFullScreen()?r.leaveFullScreen(e):r.switchToFullScreen(e)},r.addClassName=function(e,t){e&&e.classList&&e.classList.add(t)},r.removeClassName=function(e,t){e&&e.classList&&e.classList.remove(t)},r.getTime=function(e){var t=Math.floor(e/60)<10?"0"+Math.floor(e/60):Math.floor(e/60),n=Math.floor(e-60*t)<10?"0"+Math.floor(e-60*t):Math.floor(e-60*t);return t+":"+n},r.findClosest=function(e,t){var n,a="",i=e;for(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(e){return"function"==typeof document.body[e]?(a=e,!0):!1});i;){if(n=i.parentElement,n&&n[a](t))return n;i=n}return null},r.handlerNativeControls=function(e){var t,n,a;for(t=e&&e.domElement&&e.domElement[0]?e.domElement[0].querySelectorAll(".nm-video"):document.querySelectorAll(".nm-video"),a=0;a<t.length;a++)if(r.addClassName(t[a],"nm-hide-controls"),n=r.getVideo(t[a])){var i=n.getAttribute("data-nativectrls");"false"!==i&&n.setAttribute("controls","")}},r.enableVideoFullStageMode=function(){document.querySelector("body").classList.add("nm-stage-full")},r.disableVideoFullStageMode=function(){document.querySelector("body").classList.remove("nm-stage-full")},r.handlerStagePlayButton=function(){var e,t=this,a=r.getCurrentVideoContainer(t),i=r.getVideo(a);i&&(i.classList.remove("nm-hidden"),i.play(),i.addEventListener("ended",r.handlerStageSkipButton)),t&&t.classList.add("nm-hidden"),r.enableVideoFullStageMode(),a&&(e=a.querySelector(".nm-introvideo"),e&&e.classList.remove("nm-hidden")),n.disableSwipe()},r.handlerStageSkipButton=function(){var e=this,t=r.getCurrentVideoContainer(e),a=r.getVideo(t),i=t?t.querySelector(".nm-introvideo"):null,o=t?t.querySelector(".nm-j-play-btn-stage"):null;a&&(a.classList.add("nm-hidden"),a.pause()),r.disableVideoFullStageMode(),i&&i.classList.add("nm-hidden"),o&&o.classList.remove("nm-hidden"),n.enableSwipe()},r.handlerVideoClick=function(){var e=this,t=r.getCurrentVideoContainer(e),n=r.getVideo(t);n&&(n.paused?(n.addEventListener("playing",r.handlerVideoPlaying),n.play()):(n.addEventListener("pause",r.handlerVideoPause),n.pause()))},r.addStageAutoPlayEvent=function(){var e,t,n,a=document.querySelector(".nm-stage-container .nm-stage-media.nm-video");if(a&&("true"===a.getAttribute("data-autoplay")||a.getAttribute("data-autoplay")===!0)){if(e=r.getVideo(a),t=e.querySelectorAll("source"),!(navigator.userAgent.search("Safari")>=0&&navigator.userAgent.search("Chrome")<0))for(n=0;n<t.length;n++)t[n].media=t[n].getAttribute("data-media");e.classList.remove("nm-hidden"),e.addEventListener("canplay",r.handleStageAutoPlay),e.load()}},r.handleStageAutoPlay=function(){var e=document.querySelector(".nm-stage-container .nm-stage-media .nm-j-play-btn-stage"),a=r.getCurrentVideoContainer(e),i=r.getVideo(a);i.removeEventListener("canplay",r.handleStageAutoPlay),e&&e.classList.add("nm-hidden"),t.isMobile()&&(i.controls=!1),r.enableVideoFullStageMode(),n.disableSwipe(),i&&(i.classList.remove("nm-hidden"),i.muted=!0,i.play(),i.addEventListener("ended",function(){i.play()}))},r.addAutoplayOnceEvent=function(){r.aAllAutoplayVideos=[].slice.call(document.querySelectorAll("video[data-autoplay-in-viewport]")),r.aAllAutoplayVideos.length>0&&document.addEventListener("scroll",r.handleVideoInViewport)},r.handleVideoInViewport=function(){r.aAllAutoplayVideos.forEach(function(e,t){a().isInViewport(e)&&(e.addEventListener("playing",r.handlerVideoPlaying),e.muted=!0,e.play(),r.aAllAutoplayVideos.splice(t,1))})},r.handlePageLoaded=function(){r.disableVideoFullStageMode(),t.isMobile()&&r.initializeNativeControls()},r.init=function(){r.addEvents()},r.addEvents=function(){r.eventBus.on(e.PAGE_READY,r.handlePageLoaded),r.domEventDelegate.on("click",".nm-video .nm-j-play-btn .nm-video-button-play",r.handlerPlayButton),r.domEventDelegate.on("click",".nm-video .nm-j-play-btn .nm-video-button-pause",r.handlerPauseButton),r.domEventDelegate.on("click",".nm-video .nm-j-mute-btn",r.handlerMuteButton),r.domEventDelegate.on("click",".nm-video .nm-video-loader",r.handlerSeekBar),r.domEventDelegate.on("click",".nm-video .nm-j-fullscreen-btn",r.handlerFullScreenButton),r.domEventDelegate.on("click",".nm-video .nm-j-play-btn-stage",r.handlerStagePlayButton),r.domEventDelegate.on("click",".nm-video .nm-j-skip-btn-stage",r.handlerStageSkipButton),r.domEventDelegate.on("click",".nm-prevent-video-click-visualizer",r.handlerVideoClick),r.addStageAutoPlayEvent(),r.addAutoplayOnceEvent()},r.initializeNativeControls=function(){r.eventBus.on(e.PAGE_LOADED,r.handlerNativeControls),r.eventBus.on(e.LAYER_LOADED,r.handlerNativeControls),r.handlerNativeControls()},o.handlerLayer=function(e){t.isMobile()&&r.handlerNativeControls(e)},o.initializePromise=function(e){return new Promise(function(t){r.eventBus=e,r.domEventDelegate=i.getEventDelegate("body"),r.init(),r.handlePageLoaded(),t("module/video-new.js")})},o}),define("text!templates/video-controls.tpl",[],function(){return'<div class="nm-prevent-video-click"></div>\n<div class="nm-controls-wrap-video">\n\n    <div class="nm-video-loader">\n        <div class="nm-loader-played"></div>\n        <div class="nm-loader-loaded"></div>\n    </div>\n    <div class="nm-controls-video clearfix">\n        <div class="nm-button-play-pause nm-play nm-j-play-btn">\n            <button class="nm-video-button-play" type="button" title="Play/Pause"></button>\n            <button class="nm-video-button-pause" type="button" title="Play/Pause"></button>\n        </div>\n        <div class="nm-title-wrap">\n            <div class="nm-title"><span class="nm-el-lbl nm-el-lbl-01 nm-at-lbl-inv"></span></div>\n            <div class="nm-time"><span class="nm-time-played ">00:00</span><span\n                    class="nm-time-break"> | </span><span\n                    class="nm-time-duration">00:00</span></div>\n        </div>\n\n        <div class="nm-button-fullscreen nm-j-fullscreen-btn">\n            <button class="" type="button" title="Fullscreen"></button>\n        </div>\n\n        <div class="nm-button-mute nm-mute nm-j-mute-btn">\n            <button class="" type="button" title="Mute"></button>\n        </div>\n    </div>\n</div>\n<div class="nm-button-play nm-button-overlay nm-j-play-btn">\n    <button class="nm-video-button-play" type="button" title="Play"><span class="nm-image-replace">Play</span></button>\n</div>\n'}),define("mediagallery/mg-stage",["jquery","events","mediagallery/mg-model","core/signal","module/video-new","core/template","text!templates/video-controls.tpl"],function(e,t,n,a,i,r,o){"use strict";var s={},l={__:s};return s.oDefaults={sSelectorStage:".nm-mediagallery-stage",sSelectorThumbsContainer:".nm-mediagallery-thumbs",animationDuration:250,sSelectorModule:".nm-md-mediagallery-media-list",sClassShowThumbs:"nm-md-mediagallery-media-list-detail",sSelectorSlideContainer:".nm-mediagallery-detail-slide",sSelectorVideoSlide:".nm-mediagallery-detail-video",sSelectorImageSlide:".nm-mediagallery-detail-img",imageTemplateString:'<div class="nm-mediagallery-detail-img"><!--[if IE 8 ]><img src="" /><![endif]--></div>',videoTemplateString:'<div class="nm-mediagallery-detail-video"><div class="nm-mediaplayer nm-video"><video src="" title="" poster=""></video><!--[if IE 8 ]><img src="" /><![endif]-->'+r.render(o,null)+"</div></div>"},s.defaultVideoWidth=1920,s.defaultVideoHeight=1080,s.nativeDimensions={width:0,height:0},s.mousePosX=0,s.resizeStage=function(){var t=e(s.oDefaults.sSelectorThumbsContainer).height(),n=e("body").innerHeight()-t;e(s.oDefaults.sSelectorModule).hasClass(s.oDefaults.sClassShowThumbs)?e(s.oDefaults.sSelectorSlideContainer).height(e("body").innerHeight()):e(s.oDefaults.sSelectorSlideContainer).height(n)},s.contentIsResized=function(){var t=e(s.oDefaults.sSelectorStage),n=t.find(s.oDefaults.sSelectorSlideContainer),a=n.width(),i=s.getNewContentHeight();return s.nativeDimensions.width<a&&s.nativeDimensions.height<i?!1:!0},s.addEvents=function(){s.eventBus.on(t.MEDIAGALLERY_ITEM_CHANGED,s.handleItemSelectionChange),s.eventBus.on(t.LAYER_LOADED,s.checkNativeContentSize),s.eventBus.on(t.MEDIAGALLERY_RESIZED,s.checkNativeContentSize),e(window).resize(s.checkNativeContentSize)},l.initialize=function(){s.addEvents()},s.getImageInfoPromise=function(e){return new Promise(function(t,n){var a=new Image;a.onload=function(){var e=this.width,n=this.height;s.nativeDimensions.width=e,s.nativeDimensions.height=n,t({width:e,height:n})},a.onerror=function(){n("could not load image")},a.src=e})},s.handleItemSelectionChange=function(e){return console.log("data",e),e.changed?void s.eventBus.once(t.MEDIAGALLERY_SLIDED,function(){s.waitForDescriptionTextboxResizing(e)}):(console.log("nothing changed"),!1)},s.waitForDescriptionTextboxResizing=function(e){e.item&&e.item?s.removeOldSlide().then(function(t){return s.getNewSlide(e.item)}).then(function(e){return s.appendNewSlide(e)}).then(function(){s.isVideoSlide()&&s.startVideoSlide()}).then(void 0,function(e){console.log("Error appending new slide:",e)}):console.warn("data missing!!!!",e)},s.getNewSlide=function(e){return"video"===e.contenttype?s.createVideoSlide(e):s.createImageSlide(e)},s.isVideoSlide=function(){return 1===e(s.oDefaults.sSelectorStage).find(s.oDefaults.sSelectorVideoSlide).length},s.stopVideoSlide=function(){e(".nm-video video").each(function(){this.pause()})},s.startVideoSlide=function(){i.handlerLayer({domElement:e(s.oDefaults.sSelectorStage)})},s.removeOldSlide=function(){return new Promise(function(t,n){var a=e(s.oDefaults.sSelectorStage),i=a.find(s.oDefaults.sSelectorSlideContainer);i.addClass("nm-animating"),s.isVideoSlide()&&s.stopVideoSlide(),i.animate({opacity:0},s.oDefaults.animationDuration,"easeOutSine"),setTimeout(function(){i.empty(),i.css("height",s.getNewContentHeight()),t(i);
},s.oDefaults.animationDuration)})},s.appendNewSlide=function(t){return new Promise(function(n,a){var i=e(s.oDefaults.sSelectorStage),r=i.find(s.oDefaults.sSelectorSlideContainer);r.css("opacity",0),t.appendTo(r),s.checkNativeContentSize(),r.removeClass("nm-animating"),r.animate({opacity:1},s.oDefaults.animationDuration,"easeOutSine"),setTimeout(function(){n(r)},s.oDefaults.animationDuration)})},s.createImageSlide=function(t){if(!t||!t.imageurl)return Promise.reject("image url missing!!!");var n=t.imageurl,a=s.getImageInfoPromise(n);return a.then(function(t){var a=e(s.oDefaults.sSelectorStage),i=a.find(s.oDefaults.sSelectorSlideContainer),r=e(s.oDefaults.imageTemplateString);i.width();return r.css("background-image","url("+n+")"),Promise.resolve(r)})},s.getBackgroundImageURL=function(e){var t=e.css("background-image");return t=t?t.replace(/^url\(["']?/,"").replace(/["']?\)$/,""):e.find("image").attr("src")},s.checkNativeContentSize=function(){if(0===e(s.oDefaults.sSelectorStage).length)return!0;if(this&&"resize"===this.type)return s.resizeIntervalID&&clearInterval(s.resizeIntervalID),s.resizeIntervalID=setInterval(function(){clearInterval(s.resizeIntervalID),s.resizeIntervalID=null,s.checkNativeContentSize()},250),!1;s.resizeStage();var t;if(0===s.nativeDimensions.width)if(s.isVideoSlide())s.nativeDimensions.width=s.defaultVideoWidth,s.nativeDimensions.height=s.defaultVideoHeight;else{var n=e(s.oDefaults.sSelectorImageSlide),a=s.getBackgroundImageURL(n);t=s.getImageInfoPromise(a)}t||(t=Promise.resolve()),t.then(function(){console.log("checkNativeContentSize");var t=e(s.oDefaults.sSelectorStage),n=t.find(s.oDefaults.sSelectorSlideContainer),a=n.find([s.oDefaults.sSelectorVideoSlide,s.oDefaults.sSelectorImageSlide].join(","));s.contentIsResized()?a.removeClass("nm-mediagallery-detail-img-native-size"):a.addClass("nm-mediagallery-detail-img-native-size"),s.isVideoSlide()&&s.resizeVideoSlideContainer()})},s.createVideoSlide=function(t){return t&&t.videosrc?new Promise(function(n,a){var i=e(s.oDefaults.sSelectorStage),r=i.find(s.oDefaults.sSelectorSlideContainer),o=e(s.oDefaults.videoTemplateString),l=r.width();s.nativeDimensions.width=s.defaultVideoWidth,s.nativeDimensions.height=s.defaultVideoHeight,s.nativeDimensions.width<l&&o.addClass("nm-mediagallery-detail-img-native-size"),o.find("video").attr({src:t.videosrc,poster:t.posterurl}),s.resizeVideoSlideContainer(o),n(o)}):Promise.reject("invalid video slide")},s.resizeVideoSlideContainer=function(t){var n=e(s.oDefaults.sSelectorStage),a=n.find(s.oDefaults.sSelectorSlideContainer),i=s.getNewContentHeight(),r=a.width(),o=s.nativeDimensions.width/s.nativeDimensions.height,l=0,c=0;t=t||a.find(s.oDefaults.sSelectorVideoSlide),t.length&&(l=r/s.nativeDimensions.width*s.nativeDimensions.height,c=i>l?r/s.nativeDimensions.width:i*o/s.nativeDimensions.width,c=c*s.nativeDimensions.width/r*100,t.css("width",c+"%"))},s.getNewContentHeight=function(){var t=e(s.oDefaults.sSelectorThumbsContainer).height(),n=e("body").innerHeight()-t;return console.log("THUMBS: "+t+" - BROWSER: "+e("body").innerHeight()+" - "+n),n},l.initialize=function(){console.log("mg-stageâ¦initialized"),s.addEvents()},s.eventBus=a.getEmitter(),s.eventBus.once(t.APP_READY,l.initialize),l}),define("mediagallery/mg-thumbnailslider",["jquery","events","mediagallery/mg-model","core/signal"],function(e,t,n,a){"use strict";var i={},r={__:i};return i.oDefaults={sSelectorModule:".nm-md-mediagallery-media-list",sSelectorCategoryItem:".nm-mediagallery-categories li",sSelectorDescription:".nm-mediagallery-thumbs-description p",sSelectorThumbs:".nm-mediagallery-show-thumbs",sClassShowThumbs:"nm-md-mediagallery-media-list-detail",sSelectorMediaItem:".nm-mediagallery-item",sSelectorThumbslider:".nm-mediagallery-thumbs-slider",sSelectorThumbList:".nm-mediagallery-thumbs-slider ul",animationDuration:800},i.addEvents=function(){i.eventBus.on(t.MEDIAGALLERY_ITEM_CHANGED,i.handleItemUpdates),i.eventBus.on(t.MEDIAGALLERY_CATEGORY_CHANGED,i.handleCategoryUpdates),e("body").on("click",i.oDefaults.sSelectorThumbs,i.handleShowThumbs)},i.handleItemUpdates=function(t){if(i.centerSelectedItem(t),!t.changed)return!1;var n=e(i.oDefaults.sSelectorMediaItem),a=t.item,r=a.id;n.removeClass("nm-active"),e("#"+r).addClass("nm-active"),i.updateDescriptionText(t.item.description)},i.centerSelectedItem=function(t){if(t&&t.item&&t.item.id){var n=e(i.oDefaults.sSelectorThumbslider),a=e(i.oDefaults.sSelectorThumbList);if(n.width()<a.width()){var r=e("#"+t.item.id),o=r.width(),s=r.offset().left+.5*o,l=.5*n.width(),c=l-s,u=parseInt(a.css("margin-left"),10),d=u+c+.5*o,m=n.width()-a.width();0>d?(d=m>d?m:d,a.css({"margin-left":Math.round(d)+"px"})):a.removeAttr("style")}else a.removeAttr("style")}},i.handleShowThumbs=function(n){i.cancelEvent(n),e(i.oDefaults.sSelectorModule).toggleClass(i.oDefaults.sClassShowThumbs);var a=i.oDefaults.animationDuration;e(i.oDefaults.sSelectorModule).hasClass(i.oDefaults.sClassShowThumbs)&&(a=0),setTimeout(function(){i.eventBus.emit(t.MEDIAGALLERY_RESIZED)},a)},i.handleCategoryUpdates=function(t){var n=e(i.oDefaults.sSelectorCategoryItem);n.removeClass("nm-active"),n.filter("[data-category='"+t.category+"']").addClass("nm-active");var a=e(i.oDefaults.sSelectorMediaItem);"all"===t.category?a.addClass("nm-selected"):(a.removeClass("nm-selected"),a.filter("[data-category='"+t.category+"']").addClass("nm-selected"))},i.updateDescriptionText=function(n){var a=300;e(i.oDefaults.sSelectorDescription).css("opacity","0"),setTimeout(function(){document.querySelectorAll(i.oDefaults.sSelectorDescription)[0].innerHTML=n,i.eventBus.emit(t.MEDIAGALLERY_SLIDED)},a),setTimeout(function(){e(i.oDefaults.sSelectorDescription).css("opacity","1")},i.oDefaults.animationDuration+a)},i.cancelEvent=function(e){e&&"function"==typeof e.preventDefault&&e.preventDefault()},r.initialize=function(){console.log("mg-thumbnailsliderâ¦initialized"),i.addEvents()},i.eventBus=a.getEmitter(),i.eventBus.once(t.APP_READY,r.initialize),r}),define("mediagallery/mg-download",["jquery","events","core/signal"],function(e,t,n){"use strict";var a={},i={__:a};return a.oDefaults={sSelectorCurrentDownloadBtn:".nm-mediagallery-download-current",sSelectorDownloadAllBtn:".nm-mediagallery-download-all",sIdCheckBox:"#nm-mediagallery-download-checkbox",sSelectorLinks:".nm-mediagallery-download a",sSelectorDownloadBox:".mediagallery-download-infobox"},a.addEvents=function(){a.eventBus.on(t.MEDIAGALLERY_ITEM_CHANGED,a.handleUpdates),e("body").on("click.mg_download_link",a.oDefaults.sSelectorLinks,a.closeDownloadBox)},a.handleUpdates=function(t){var n=e([a.oDefaults.sSelectorCurrentDownloadBtn," a"].join("")),i=e(".nm-mediagallery-download");t&&t.item?(t.item.downloadlink?n.attr("href",t.item.downloadlink).removeClass("nm-hidden"):(n.addClass("nm-hidden"),e(a.oDefaults.sSelectorDownloadAllBtn).length<1?i.addClass("nm-hidden"):i.removeClass("nm-hidden")),"video"===t.item.contenttype?n.addClass("nm-hidden"):n.removeClass("nm-hidden")):console.warn("no link url to update!!")},a.closeDownloadBox=function(){e(a.oDefaults.sIdCheckBox).prop("checked",!1),e(a.oDefaults.sSelectorDownloadBox).removeClass("nm-checked")},i.initialize=function(){console.log("mg-downloadâ¦initialized"),a.addEvents()},a.eventBus=n.getEmitter(),a.eventBus.once(t.APP_READY,i.initialize),i}),define("core/legacy-eventemitter",["jquery","events","core/signal"],function(e,t,n){"use strict";var a={},i={__:a};return a.redispatchEvent=function(){var e,t=[].slice.call(arguments),n=t.shift(),i=t;e=n.type+"."+n.namespace,i=i.length&&1===i.length?i[0]:i,a.eventBus.emit(e,i)},a.addEvents=function(e){e.on(t.FORM_LOADED,a.redispatchEvent),e.on(t.FORM_FINISHED,a.redispatchEvent),e.on(t.LAYER_LOADED,a.redispatchEvent),e.on(t.LAYER_CLOSED,a.redispatchEvent),e.on(t.APP_READY,a.redispatchEvent),e.on(t.PAGE_READY,a.redispatchEvent),e.on(t.PAGE_OPEN,a.redispatchEvent),e.on(t.PAGE_LEAVE,a.redispatchEvent),e.on(t.PAGE_LOADED,a.redispatchEvent),e.on(t.CONFIG_UPDATE,a.redispatchEvent),e.on(t.CONFIG_START,a.redispatchEvent),e.on(t.ERROR,a.redispatchEvent),e.on(t.CONFIG_CHANGEREQUEST_START,a.redispatchEvent)},i.initializePromise=function(t){return new Promise(function(n){a.eventBus=t,a.addEvents(e("body")),n("core/legacy-eventemitter.js")})},i}),define("text!templates/social-reader.tpl",[],function(){return'<li class="nm-md-asoc-item" id="asoc_{{=it.id}}">\n    <a data-href="asoc.{{=it.id}}" class="nm-jslayerLink">\n    {{? !!it.gridImage }}\n    <div class="nm-md-asoc-media">\n        <img class="nm-md-asoc-img" src="{{=it.gridImage}}" />\n        {{? it.contentType == "video" }}\n        <div class="nm-button-play nm-button-overlay">\n            <button><span class="nm-image-replace">Play</span></button>\n        </div>\n        {{??}}\n        <div class="nm-asoc-preview"><span class="nm-el-lbl nm-el-lbl-01 nm-at-lbl-b nm-at-lbl-inv">{{=window.i18n[\'preview\']||\'\'}}</span></div>\n        {{?}}\n    </div>\n    {{?}}\n    <div class="nm-md-asoc-desc">\n        {{? it.title }}<strong class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">{{=it.title}}</strong>{{?}}\n        <p class="nm-el-pg nm-el-pg-02">{{=it.description}}</p>\n        <div class="nm-md-asoc-via nm-el-lbl nm-el-lbl-01"><i class="nm-icon-{{=it.icon}} nm-el-lk nm-el-lk-01 nm-at-lk-b nm-at-lk-inv nm-el-lk-icn">{{=it.source}}</i><span class="nm-el-lbl nm-el-lbl-01">via {{=it.author}}</span></div>\n    </div>\n    </a>\n</li>\n'}),define("text!templates/social-reader-detail.tpl",[],function(){return'<div class="nm-layer nm-j-jslayer">\n	<div class="nm-button-close nm-b-icon nm-icon-close">\n		<span>{{=window.i18n[\'close-icon\']}}</span>\n	</div>\n	<div class="nm-layer-inner">\n		<article class="nm-module nm-md-asoc nm-md-asoc-detail">\n		<div class="nm-md-asoc-item">\n		{{?it.videoEmbed}}\n		<div class="videoWrapper" style=\'position:relative; width:100%; height:0;padding-bottom:{{=it.videoRatio}}%\'>\n			<iframe src="{{=it.videoEmbed}}" style="height:100%; position:absolute; width:100%; top:0;left:0; border: none"></iframe>\n			</div>\n			{{?? !!it.detailImage }}\n			<div class="nm-md-asoc-media">\n				<!--[if IE 8 ]> <div class="nm-md-asoc-img" style="-ms-filter: &quot;progid:DXImageTransform.Microsoft.AlphaImageLoader(src=\'{{=it.detailImage}})\',sizingMethod=\'scale\')&quot;"></div> <![endif]-->\n				<!--[if (gte IE 9)|!(IE)]><!--> <div class="nm-md-asoc-img" style="background-image:url({{=it.detailImage}});" /></div> <!--<![endif]-->\n\n			</div>\n			{{?}}\n			<div class="nm-md-asoc-desc">\n				{{? it.title }}<h2 class="nm-el-hdl nm-el-hdl-02 nm-at-hdl-b">{{=it.title}}</h2>{{?}}\n				<p class="nm-el-pg nm-el-pg-01">{{=it.description}}</p>\n			</div>\n			<div class="nm-md-asoc-btns">\n				<div class="nm-md-asoc-via nm-el-lbl nm-el-lbl-01"><i class="nm-icon-{{=it.icon}} nm-el-lk nm-el-lk-01 nm-at-lk-b nm-at-lk-inv nm-el-lk-icn">{{=it.source}}</i><span class="nm-el-lbl nm-el-lbl-01">{{=it.date}}<br/>via {{=it.author}}</span></div>\n				<a href="{{=it.postUrl}}" target="_blank" data-tracking-link="{&quot;prop61&quot;:&quot;$m.TextLink.LinkText&quot;, &quot;prop66&quot;:&quot;quick_navigation&quot;}" class="nm-j-asoc-link-ext nm-el-btn nm-el-btn-01 nm-el-btn-ast">{{=window.i18n[\'view-post\']}}</a>\n			</div>\n		</div>\n		</article>\n	</div>\n</div>\n'}),define("module/socialreader",["events","configurator/ajax","core/template","text!templates/social-reader.tpl","text!templates/social-reader-detail.tpl","core/layer/api","utils/polling","core/layer/jslayer"],function(e,t,n,a,i,r,o,s){"use strict";var l={},c={__:l};return l.oDefaults={sSelectorReaderModule:".nm-md-asoc",sClassHidden:"nm-hidden",sDataJsonApi:"data-api-url",sSelectorItem:".nm-md-asoc-item",sSelectorContainer:"ul.nm-md-asoc-items",sSelectorMoreButtons:".nm-md-asoc-btns a",sItemPrefix:"asoc_",gridRange:[600,800],detailRange:[1e3,1600]},l.detailDataMap={},l.modulesLoaded=!1,l.addEvents=function(){l.eventBus.on(e.LAYER_LOADED,l.handleLayerLoaded),l.eventBus.on(e.PAGE_LOADED,l.handlePageLoaded)},l.handlePageLoaded=function(){var e=jQuery(l.oDefaults.sSelectorReaderModule);return 0!==e.length&&e.attr(l.oDefaults.sDataJsonApi)?void l.findModules(e).then(function(e){s.register("asoc",l.getDetailDataById),l.modulesLoaded=!0},function(e){console.error(e)}):!1},l.handleLayerLoaded=function(e){var t=jQuery(e).closest(l.oDefaults.sSelectorReaderModule);return 0!==t.length&&t.attr(l.oDefaults.sDataJsonApi)?void l.findModules(t).then(function(e){console.log("all processedâ¦",e),s.register("asoc",l.getDetailDataById),l.modulesLoaded=!0},function(e){console.error(e)}):!1},l.getDetailDataById=function(e){var t,a="";return t=l.detailDataMap[e]||{},a=n.render(i,t)},l.findModules=function(e){var t,n,a,i,r=e;i=[],r.each(function(){a=jQuery(this),n=a.attr(l.oDefaults.sDataJsonApi),t=l.fetchContent(n).then(function(e){return l.updateFragments(a,e)}).then(void 0,function(e){throw console.error(e),new TypeError(e)}),i.push(t)});var o=Promise.all(i);return o},l.isIE9OrBelow=function(){return/MSIE\s/.test(navigator.userAgent)&&parseFloat(navigator.appVersion.split("MSIE")[1])<10},l.fetchContent=function(e){return t.getJSON(e)},l.updateFragments=function(e,t){var i,r,o,s,c,u=e.find(l.oDefaults.sSelectorContainer);if(c=l.processTemplateData(t),u.empty(),u.addClass(l.oDefaults.sClassHidden),t&&c.length&&c.length>3){for(r=c.length,i=0;r>i;i++)l.detailDataMap[c[i].id]=c[i],8>i&&(s=n.render(a,c[i]),o=jQuery(s),u.append(o));u.removeClass(l.oDefaults.sClassHidden),e.removeClass(l.oDefaults.sClassHidden)}return Promise.resolve({container:u})},l.processTemplateData=function(e){for(var t,n,a,i=[],r=e.length||0,o=0;r>o;o++)n=e[o],t={},a=l.findMatchingImageSizes(n.images?n.images[0]:[]),t.id=n.id,t.gridImage=a.gridView&&a.gridView.src?a.gridView.src:null,t.detailImage=a.detailView&&a.detailView.src?a.detailView.src:null,t.description=n.description||"",t.title=n.title||"",t.author=n.author&&n.author.name?n.author.name:"",t.source=n.source&&n.source.network?n.source.network:"",t.contentType=n.source&&n.source.type?n.source.type:"photo",t.videoEmbed="video"===t.contentType&&n.attachment[0]&&n.attachment[0].content&&n.attachment[0].content.embed?n.attachment[0].content.embed:null,t.videoRatio=t.videoEmbed?n.attachment[0].thumbnail.height/n.attachment[0].thumbnail.width*100:"56.25",t.icon=n.source&&n.source.icon?n.source.icon:"default",t.date=n.channels&&n.channels.date?n.channels.date:"",t.postUrl=n.url||"",i.push(t);return i},l.findMatchingImageSizes=function(e){for(var t,n,a,i=[],r=[],o=0,s=e.length;s>o;o++)a=e[o],t=a.width,n=a.height,t>=l.oDefaults.gridRange[0]&&t<=l.oDefaults.gridRange[1]&&i.push(e[o]),t>=l.oDefaults.detailRange[0]&&t<=l.oDefaults.detailRange[1]&&r.push(e[o]);return i=l.sortHashedArray(i,"width"),r=l.sortHashedArray(r,"width"),{gridView:i[0]||e[0]||null,detailView:r[0]||e[0]||null}},l.sortHashedArray=function(e,t){return e.sort(function(e,n){return e[t]>n[t]?-1:e[t]<n[t]?1:0}),e},l.cancelEvent=function(e){e&&"function"==typeof e.preventDefault&&e.preventDefault()},l.initialize=function(){l.addEvents(),l.handlePageLoaded()},c.initializePromise=function(e){return new Promise(function(t){l.eventBus=e,l.initialize(),t("module/socialreader.js")})},c}),define("module/layer-multi-stage",["jquery","events"],function(e,t){"use strict";var n,a;return n={},a={__:n},n.oDefaults={sClassActive:"nm-active",sClassDuringAnimation:"nm-animating",sClassNoAnimation:"no-animation",sClassForwardAnimation:"nm-animation-forward",sClassBackwardAnimation:"nm-animation-backward",sSelectorStage:".nm-layer-multi-stage",sSelectorNext:".nm-nextarrow",sSelectorPrevious:".nm-backarrow",sSelectorLayerStageImageActive:".nm-layer-image.nm-active",sSelectorLayerStageImage:".nm-layer-image"},n.initialize=function(){n.addEvents()},n.addEvents=function(){n.eventBus.on(t.PAGE_LOADED,n.handleLayerLoaded),n.eventBus.on(t.LAYER_LOADED,n.handleLayerLoaded)},n.handleLayerLoaded=function(e){var t;e.domElement?t=e.domElement:e.element&&(t=e.element),t?n.addStageEvents(t):console.log("no dom element available")},n.addStageEvents=function(t){e(t).on("click",n.oDefaults.sSelectorNext,n.handleNextClick),e(t).on("click",n.oDefaults.sSelectorPrevious,n.handlePrevClick),e(n.oDefaults.sSelectorStage).on("mousedown",n.activateSwipe),e(n.oDefaults.sSelectorStage).on("touchstart",n.activateSwipe),e(document).on("mouseup",n.deactivateSwipe),e(document).on("touchend",n.deactivateSwipe)},n.handleNextClick=function(t){var a;t.preventDefault(),e(n.oDefaults.sSelectorStage).hasClass(n.oDefaults.sClassDuringAnimation)||(e(n.oDefaults.sSelectorStage).addClass(n.oDefaults.sClassDuringAnimation),a=e(n.oDefaults.sSelectorLayerStageImageActive),e(n.oDefaults.sSelectorStage).addClass(n.oDefaults.sClassNoAnimation),e(n.oDefaults.sSelectorStage).addClass(n.oDefaults.sClassForwardAnimation),setTimeout(function(){e(n.oDefaults.sSelectorStage).removeClass(n.oDefaults.sClassNoAnimation),setTimeout(function(){e(n.oDefaults.sSelectorStage).addClass(n.oDefaults.sClassNoAnimation),e(n.oDefaults.sSelectorLayerStageImage).each(function(){$(this).is(a)?$(this).removeClass(n.oDefaults.sClassActive):$(this).addClass(n.oDefaults.sClassActive)}),e(n.oDefaults.sSelectorStage).removeClass(n.oDefaults.sClassForwardAnimation),setTimeout(function(){e(n.oDefaults.sSelectorStage).removeClass(n.oDefaults.sClassNoAnimation),e(n.oDefaults.sSelectorStage).removeClass(n.oDefaults.sClassDuringAnimation)},10)},600)},10))},n.handlePrevClick=function(t){var a;t.preventDefault(),e(n.oDefaults.sSelectorStage).hasClass(n.oDefaults.sClassDuringAnimation)||(e(n.oDefaults.sSelectorStage).addClass(n.oDefaults.sClassDuringAnimation),a=e(n.oDefaults.sSelectorLayerStageImageActive),e(n.oDefaults.sSelectorStage).addClass(n.oDefaults.sClassNoAnimation),e(n.oDefaults.sSelectorStage).addClass(n.oDefaults.sClassBackwardAnimation),setTimeout(function(){e(n.oDefaults.sSelectorStage).removeClass(n.oDefaults.sClassNoAnimation),setTimeout(function(){e(n.oDefaults.sSelectorStage).addClass(n.oDefaults.sClassNoAnimation),e(n.oDefaults.sSelectorLayerStageImage).each(function(){$(this).is(a)?$(this).removeClass(n.oDefaults.sClassActive):$(this).addClass(n.oDefaults.sClassActive)}),e(n.oDefaults.sSelectorStage).removeClass(n.oDefaults.sClassBackwardAnimation),setTimeout(function(){e(n.oDefaults.sSelectorStage).removeClass(n.oDefaults.sClassNoAnimation),e(n.oDefaults.sSelectorStage).removeClass(n.oDefaults.sClassDuringAnimation)},10)},600)},10))},n.activateSwipe=function(t){"touchstart"===t.type?n.swipeX=t.originalEvent.pageX:n.swipeX=t.pageX,e(document).on("mousemove",n.swipe),e(document).on("touchmove",n.swipe)},n.deactivateSwipe=function(){e(document).off("mousemove",n.swipe),e(document).off("touchmove",n.swipe)},n.swipe=function(e){var t;t="touchmove"===e.type?e.originalEvent.pageX:e.pageX,t>=n.swipeX+5?(n.deactivateSwipe(e),n.handlePrevClick(e)):t<=n.swipeX-5&&(n.deactivateSwipe(e),n.handleNextClick(e))},a.initializePromise=function(e){return new Promise(function(t){n.eventBus=e,n.initialize(),t("module/layer-multi-stage.js")})},a}),define("text!templates/vtp-teaser.tpl",[],function(){return'	<ul class="nm-vtp-teaser-list">\n	{{~ it.cars :car }}\n		<li class="nm-vtp-teaser-item">\n			<img src="{{=car.image}}"/>\n			<span class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">{{=car.model}}</span>\n			<div class="nm-el-pg nm-el-pg-03">\n				<span>{{=car.engine}}</span>\n				<span> {{=car.price}} {{=window.i18n[\'price.currency.extended\']}}</span>\n			</div>\n			<a href="{{=car.link}}" target="_blank" class="nm-el-btn nm-el-btn-01 nm-el-btn-ast">{{=window.i18n[\'vtp.detail.linktext\']}}</a>\n		</li>\n		{{~}}\n	</ul>\n'}),define("module/vtp-teaser",["jquery","events","configurator/ajax","core/template","text!templates/vtp-teaser.tpl","configurator/dpu-api"],function(e,t,n,a,i,r){"use strict";var o={},s={__:o};return o.oDefaults={selectorModuleContainer:".nm-md-vtp-teaser",selectorTplContainer:".nm-j-vtp-container"},o.addEvents=function(){o.eventBus.on(t.PAGE_LOADED,o.handlePageLoaded)},o.initialize=function(){o.addEvents(),o.handlePageLoaded()},o.handlePageLoaded=function(){var t=e(o.oDefaults.selectorModuleContainer);t.length&&o.getVtpData().then(function(e){o.handleVtpResponse(e)},function(e){console.log("Error loading VTP-JSON",e)})},o.handleVtpResponse=function(e){var t=o.parseResonse(e);o.renderSlots(t)},o.parseResonse=function(e){var t={};t.cars=[];var n,a;if(e.header&&e.header.result_url&&e.car_list&&e.car_list.length){var i=e.car_list.length;i=5>i?i:4;for(var s=0,l=i;l>s;s++)n={},a=e.car_list[s].items.reduce(function(e,t){return e[t.id]=t.value,e},{}),n.image=o.patchRenderImageSizeUrl(e.car_list[s].images&&e.car_list[s].images.length?e.car_list[s].images[0]:""),n.price=a.price,n.model=r.getCarlineName(),n.engine=o.patchModelDescription(a.model,n.model),n.carid=e.car_list[s].carid,n.result_url=e.header.result_url,n.link=o.patchVtpEntryUrl(n.result_url,n.carid),t.cars.push(n)}return t},o.getVTPbaseUrl=function(){var t=e(o.oDefaults.selectorModuleContainer).data("vtp-url");return t},o.renderSlots=function(t){var n=e(o.oDefaults.selectorModuleContainer);if(t.cars.length>3){var r=a.render(i,t),s=n.find(o.oDefaults.selectorTplContainer);s.empty(),s.append(r),n.removeClass("nm-hidden")}},o.getRequestUrl=function(){var e,t,n=r.getVtpRequestUrl(),a=r.getExtColor(),i=r.getModelYear(),o=r.getEngine();return t=a+"-A-"+i+"-"+o,e=n+"s|9010,"+o+"|9091,"+t+"?v=5"},o.patchRenderImageSizeUrl=function(e){return e=e||"",e.replace("/xm/",/axsn1o/)},o.patchVtpEntryUrl=function(e,t){return e=e||"",e.replace("/controller.do","/d|"+t+"/controller.do")},o.patchModelDescription=function(e,t){var n,a=window.i18n["vtp.prefix-replace"];return e=e||"",a&&(n=new RegExp("("+a+" )*"+t+" ")),e.replace(n,"")},o.getVtpData=function(){var e=o.getRequestUrl();return n.getJSON(e,{},{withCredentials:!1})},s.initializePromise=function(e){return new Promise(function(t){o.eventBus=e,o.initialize(),t("module/vtp-teaser.js")})},s}),define("module/your-payment",["jquery","configurator/dpu-api","events"],function(e,t,n){"use strict";var a={},i={__:a};return a.oDefaults={sSelectorModule:".nm-md-yourpayment",sSelectorRateSwitchCart:"#nm-price-rate-switch",sSelectorRateSwitchYP:"#nm-price-rate-switch-yp",sSelectorRateSwitchCheckbox:".nm-yourpayment-rateswitch-cb",sSelectorTable:".nm-yourpayment-costs-list",sSelectorSnippetText:".nm-j-configurator-text-",sShowErrorClass:"nm-j-yourpayment-show-error"},a.eventBus=null,a.addEvents=function(){a.eventBus.on(n.PAGE_LOADED,a.handlePageLoaded),a.eventBus.on(n.CONFIG_UPDATE,a.handleConfigUpdate)},a.handleConfigUpdate=function(){var e;if(document.querySelector(a.oDefaults.sSelectorModule)&&t.isConfigurable()){if(e=t.getConfiguration(),!e)return;""===e.rate?document.querySelector(a.oDefaults.sSelectorModule).classList.add(a.oDefaults.sShowErrorClass):(document.querySelector(a.oDefaults.sSelectorModule).classList.remove(a.oDefaults.sShowErrorClass),a.updatePriceMode(e))}},a.getCurrentMode=function(){var e=document.querySelector(a.oDefaults.sSelectorRateSwitchCart);return e&&e.getAttribute("checked")===!0?"rate":"price"},a.updatePriceMode=function(e){var t,n=document.querySelector(a.oDefaults.sSelectorRateSwitchYP),i=document.querySelector(a.oDefaults.sSelectorRateSwitchCart);n&&i&&(i.getAttribute("checked")!==n.getAttribute("checked")&&n.setAttribute("checked",i.getAttribute("checked")),t=e.financeParameterList?e.financeParameterList:null,a.popuplatePricesByRate(t))},a.popuplatePricesByRate=function(t){var n,i,r,o,s=0,l=e(a.oDefaults.sSelectorTable);if(l&&t)for(n=t.length;n>s;)r=t[s].id,o=t[s].textAndUnit,r&&o&&(i=l.find(a.oDefaults.sSelectorSnippetText+r),i.text(o)),s++},a.handleRateModeChange=function(){var t=e(a.oDefaults.sSelectorRateSwitchCart);t&&(t.prop("checked",!t.prop("checked")),t.trigger("change"))},a.getContext=function(e){var t;return t=e?e.domElement?e.domElement[0]:e.element:document},a.handlePageLoaded=function(e){var t=a.getContext(e);t&&t.querySelector(a.oDefaults.sSelectorRateSwitchCheckbox)&&(a.legacyEventBus.on("click",a.oDefaults.sSelectorRateSwitchCheckbox,a.handleRateModeChange),a.handleConfigUpdate())},i.initializePromise=function(t){return new Promise(function(n){a.eventBus=t,a.legacyEventBus=e("body"),a.addEvents(),a.handlePageLoaded(),n("module/your-payment.js")})},i}),define("module/inlinerendering",["jquery","events","module/ave/ave-api","tracking/renderinglayer-tracker"],function(e,t,n,a){"use strict";var i={},r={__:i};return i.oDefaults={sIdCanvas:"nm-ave-canvas",sClassActive:"nm-active",sClassLoading:"nm-3d-loading",sClassUnLoading:"nm-3d-unloading",sClassAVECandidate:"nm-ave-candidate",sClassModeAuto:"nm-md-in-mode-automatic",sClassLandscapeWrapper:"nm-md-in-landscape-wrapper",sClassPortraitWrapper:"nm-md-in-portrait-wrapper",sSelectorInlineRenderingModule:".nm-md-inline-rendering",sSelectorAVEContainer:".nm-md-ave-container",sSelectorAVEContainerActive:".nm-md-ave-container.nm-active",sSelectorInlineRendering:".nm-j-configurator-renderimage",sSelectorInlineRenderingButton360:".nm-md-inline-rendering .nm-icon-360-view",sSelectorInlineRenderingButton2d:".nm-md-inline-rendering .nm-icon-2d-view",sSelectorButton360:".nm-icon-360-view",sSelectorButton2d:".nm-icon-2d-view",sSelectorAVECandidate:".nm-ave-candidate",sSelectorLandscapeWrapper:".nm-md-in-landscape-wrapper",sSelectorPortraitWrapper:".nm-md-in-portrait-wrapper",sSelectorLoading:".nm-3d-loading"},i.addEvents=function(){i.eventBus.on(t.AVE_AVAILABLE,i.handlerEnable360),i.eventBus.on(t.PAGE_LOADED,i.handlerPageLoaded),i.eventBus.on(t.AVE_STREAM_READY,i.aveStreamReadyHandler),i.eventBus.on(t.PAGE_OPEN,i.handlerPageOpen)},i.handlerPageLoaded=function(e){n.isAveAvailable()===!0&&(e.domElement.find(i.oDefaults.sSelectorInlineRenderingButton360).is(":visible")||(e.domElement.find(i.oDefaults.sSelectorInlineRenderingButton360).show(),e.domElement.find(i.oDefaults.sSelectorInlineRenderingButton360).off("click",i.handlerActivate3d),e.domElement.find(i.oDefaults.sSelectorInlineRenderingButton2d).off("click",i.handlerActivate2d),e.domElement.find(i.oDefaults.sSelectorInlineRenderingButton360).on("click",i.handlerActivate3d),e.domElement.find(i.oDefaults.sSelectorInlineRenderingButton2d).on("click",i.handlerActivate2d)))},i.handlerEnable360=function(){n.isAveAvailable()===!0&&(e(i.oDefaults.sSelectorInlineRenderingButton360).is(":visible")||(e(i.oDefaults.sSelectorInlineRenderingButton360).show(),e(i.oDefaults.sSelectorInlineRenderingButton360).off("click",i.handlerActivate3d),e(i.oDefaults.sSelectorInlineRenderingButton2d).off("click",i.handlerActivate2d),e(i.oDefaults.sSelectorInlineRenderingButton360).on("click",i.handlerActivate3d),e(i.oDefaults.sSelectorInlineRenderingButton2d).on("click",i.handlerActivate2d)))},i.handlerPageOpen=function(){var t=e(i.oDefaults.sSelectorAVEContainerActive);t.length>0&&(i.setContainerTo2d(t),n.deactivate(t.attr("id")))},i.handlerActivate3d=function(t){var n=e(t.currentTarget),a=e(i.oDefaults.sSelectorAVEContainerActive),r=n.parent().parent();t.preventDefault(),i.activate3dForContainer(r,a),i.enableResizeHandler()},i.activate3dForContainer=function(t,a){var r=t.find(i.oDefaults.sSelectorInlineRendering),o=t.children(i.oDefaults.sSelectorAVEContainer),s=o.attr("id"),l=r.attr("data-renderimage-view");i.setContainerTo2d(a),i.setContainerTo3d(t,a),a.length>0?(n.moveAVE(a.attr("id"),s,l),i.removeLoadingImg(e(i.oDefaults.sSelectorAVECandidate))):n.activateAVE(s,l)},i.setContainerTo3d=function(e){var t=e.find(i.oDefaults.sSelectorInlineRendering),n=e.children(i.oDefaults.sSelectorAVEContainer);e.find(i.oDefaults.sSelectorButton360).hide(),e.find(i.oDefaults.sSelectorButton2d).show(),t.addClass(i.oDefaults.sClassLoading),t.addClass(i.oDefaults.sClassAVECandidate),n.addClass(i.oDefaults.sClassActive)},i.handlerActivate2d=function(t){var a=e(i.oDefaults.sSelectorAVEContainerActive);t.preventDefault(),i.setContainerTo2d(a),n.deactivate(a.attr("id"))},i.setContainerTo2d=function(e){e.length>0&&(e.parent().find(i.oDefaults.sSelectorButton2d).hide(),e.parent().find(i.oDefaults.sSelectorButton360).show(),setTimeout(function(){e.next().removeClass(i.oDefaults.sClassUnLoading)},1e3),e.parent().find(i.oDefaults.sSelectorInlineRendering).removeClass(i.oDefaults.sClassLoading),e.parent().find(i.oDefaults.sSelectorInlineRendering).removeClass(i.oDefaults.sClassAVECandidate),e.removeClass(i.oDefaults.sClassActive))},i.removeLoadingImg=function(e){console.log("removeLoadingImg"),e.addClass(i.oDefaults.sClassUnLoading),e.removeClass(i.oDefaults.sClassLoading)},i.triggerSwipeTracker=function(e){var t=e.target.closest(".nm-ave-animation-selector-wrapper");t||a.swipeInlineHandler("Rotate")},i.aveStreamReadyHandler=function(){var t=e(i.oDefaults.sSelectorAVEContainerActive);i.removeLoadingImg(e(i.oDefaults.sSelectorLoading)),t.length>0&&(t.off("mousedown",i.triggerSwipeTracker),t.off("touchstart",i.triggerSwipeTracker),t.on("mousedown",i.triggerSwipeTracker),t.on("touchstart",i.triggerSwipeTracker))},i.enableResizeHandler=function(){e(window).off("resize",i.handlerResize),e(window).on("resize",i.handlerResize)},i.handlerResize=function(){var t,n=e(i.oDefaults.sSelectorAVEContainerActive),a=n.parent().hasClass(i.oDefaults.sClassLandscapeWrapper),r=n.parent().hasClass(i.oDefaults.sClassPortraitWrapper);e(window).width()<e(window).height()&&a?t=n.closest(i.oDefaults.sSelectorInlineRenderingModule).find(i.oDefaults.sSelectorPortraitWrapper):e(window).width()>=e(window).height()&&r&&(t=n.closest(i.oDefaults.sSelectorInlineRenderingModule).find(i.oDefaults.sSelectorLandscapeWrapper)),t&&i.activate3dForContainer(t,n)},r.initializePromise=function(e){return new Promise(function(t){i.eventBus=e,i.addEvents(),t("module/inlinerendering.js")})},r}),define("text!templates/dynamic-recommendation.tpl",[],function(){return'<div class="nm-el-summary-dyn-recommendation-head">\n	<h2 class="nm-el-hdl nm-el-hdl-02 nm-at-hdl-b">{{=window.i18n[\'dynamic-recommendations.others-choose-headline\']}}</h2>\n	<p class="nm-el-pg nm-el-pg-03">{{=window.i18n[\'dynamic-recommendations.others-choose\']}}</p>\n</div>\n\n<ul class="nm-options-list nm-list-summary-dyn-recommendation">\n	{{~it :value :index}}\n	<li id="nm-sdr-item-{{=index}}" class="nm-j-configurator-item nm-j-configurator-status_{{=value.status}}" {{?value.id}}data-configurator-id="{{=value.id}}"{{?}} {{?value.RadioGroup}} data-configurator-group="{{value.RadioGroup}}"{{?}}>\n\n		<div class="nm-options-list-cell-cb">\n		{{?value.RadioGroup}}\n			<a class="nm-checkbox-3 nm-j-configurator-delegate-click" x-cq-linkchecker="skip" href="#"></a>\n		{{?}}\n		{{?!value.RadioGroup}}\n			<a class="nm-checkbox-1 nm-j-configurator-delegate-click" x-cq-linkchecker="skip" href="#"></a>\n		{{?}}\n		</div>\n		<div class="nm-options-cell-additional">\n			{{?value.image}}\n				<div class="nm-list-item-additional">\n					{{?value.url}}\n					<a class="nm-layerLink" x-cq-linkchecker="skip" href="$equipment.InfoLayer.LinkUrl">\n					{{?}}\n						<div class="nm-list-item-image{{?value.video}} nm-list-item-video{{?}}"><img src="{{=value.image}}" alt="{{=value.name}}" /></div>\n					{{?value.url}}</a>{{?}}\n				</div>\n			{{?}}\n			<div class="nm-list-item-text nm-el-pg nm-el-pg-04">{{=value.name}}\n			{{?value.nonrenderable}}\n				<span class="nm-non-renderable nm-el-pg nm-el-pg-04 nm-at-pg-variant"><span class="nm-at-pg-b">#I18N(\'nemo.ui.common.note\' \'Hinweis\'): </span>{{=window.i18n[\'nemo.ui.configuration.not-rendable-message\']}}</span>\n			{{?}}\n			{{?!value.RadioGroup}}\n				<div class="nm-j-configurator-text-packageDescription nm-package-description nm-el-pg nm-el-pg-04"></div>\n			{{?}}\n			</div>\n\n		</div>\n\n		{{?value.url}}\n			<div class="nm-info-wrap">\n				<a class="nm-info nm-layerLink" data-tracking-link="{&quot;prop39&quot;:&quot;derivate more info:{{=value.name}}&quot; , &quot;prop46&quot;:&quot;:derivate more info:{{=value.name}}&quot;}" x-cq-linkchecker="skip" href="{{=value.url}}" title="{{=window.i18n[\'more-information\']}}"></a>\n                <span class="nm-conflict-icon" title="{{=window.i18n[\'nemo.ui.common.conflict\']}}"></span>\n                <span class="nm-conflict-tooltip nm-el-lbl nm-el-lbl-01">{{=window.i18n[\'nemo.ui.conflict.force-deselection\']}}</span>\n			</div>\n		{{?}}\n		<div class="nm-el-summary-dyn-recommendation-circle" data-percentage="{{=value.einbaurate}}">\n		  <div class="circle">\n		  	{{var degree = parseInt(parseFloat(value.einbaurate) * 180);}}\n\n		  	<style>\n		  		#nm-sdr-item-{{=index}} .nm-el-summary-dyn-recommendation-circle .circle .mask.full,\n				#nm-sdr-item-{{=index}} .nm-el-summary-dyn-recommendation-circle .circle .fill {\n					animation: fill-{{=index}}  ease-in-out 3s;\n					transform: rotate({{=degree}}deg);\n				}\n\n				@keyframes fill-{{=index}}  {\n					0% {\n						transform: rotate(0deg);\n					}\n\n					100% {\n						transform: rotate({{=degree}}deg);\n					}\n				}\n		  	</style>\n		    <div class="mask full">\n		      <div class="fill"></div>\n		    </div>\n		    <div class="mask half">\n		      <div class="fill"></div>\n		    </div>\n		    <div class="inside-circle">{{=value.einbauratePercent}}</div>\n		  </div>\n		</div>\n\n		{{?value.Series || value.price}}\n			<div class="nm-price nm-el-pg nm-el-pg-04 clearfix">\n				<span class="nm-j-configurator-text-price nm-price">\n				{{?value.Series}}\n					{{=window.i18n[\'nemo.common.serie\']}}\n				{{?}}\n				{{?value.price}}\n					{{=value.price}}\n				{{?}}\n				</span>\n			</div>\n		{{?}}\n	</li>\n	{{~}}\n</ul>\n\n<div class="nm-el-summary-dyn-recommendation-footer">\n	<h2 class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">{{=window.i18n[\'dynamic-recommendations.legend-headline\']}}</h2>\n	<div class="nm-el-summary-legend-content">\n		<div class="nm-el-summary-dyn-recommendation-circle">\n			<div class="circle">\n			    <div class="mask full">\n			      <div class="fill"></div>\n			    </div>\n			    <div class="mask half">\n			      <div class="fill"></div>\n			    </div>\n			    <div class="inside-circle"></div>\n			</div>\n		</div>\n		<p class="nm-el-pg nm-el-pg-03">{{=window.i18n[\'dynamic-recommendations.legend-info\']}}</p>\n	</div>\n</div>\n';
}),define("module/dynamic-recommendation",["jquery","doT","configurator/dpu-api","events","core/template","text!templates/dynamic-recommendation.tpl"],function(e,t,n,a,i,r){"use strict";var o={},s={__:o};return o.oDefaults={sSelectorTemplateClass:".nm-md-summary-dyn-recommendation",hideModuleClass:"nm-hidden"},o.tplFunc=null,o.tplFuncNoRecs=function(){return""},o.getTplString=function(e){var t=$(e);return t.length>0?t.html():""},o.containerAvailable=function(){return e(o.oDefaults.sSelectorTemplateClass).length>0},o.addEvents=function(){o.eventBus.on(a.CONFIG_UPDATE,o.handleUpdate),o.eventBus.on(a.PAGE_LOADED,o.handleUpdate)},o.updateView=function(){o.containerAvailable()||o.recommendationsAvailable()&&o.render()},o.handleUpdate=function(){var e,t=n.getDynamicRecommendations();if(o.containerAvailable()){if(!(t.length&&t.length>0))return o.hideModule(!0),!1;e=o.parseRecommendationItems(t),o.render(e),o.hideModule(!1)}},o.parseRecommendationItems=function(e){var t,a,i=[],r=e&&e.length?e.length:0;for(r=Math.min(r,5),t=0;r>t;t++)a=n.getItem(e[t].id),a&&i.push(o.mergeItem(e[t],a));return i},o.mergeItem=function(e,t){return t.name=e.name,t.einbaurate=e.einbaurate,t.einbauratePercent=e.einbauratePercent,t},o.hideModule=function(t){e(o.oDefaults.sSelectorTemplateClass).toggleClass(o.oDefaults.hideModuleClass,t)},o.render=function(e){var t=i.render(r,e);o.appendToDom(t)},o.appendToDom=function(t){e(o.oDefaults.sSelectorTemplateClass).html(t)},o.initialize=function(){o.addEvents(),o.handleUpdate()},s.initializePromise=function(e){return new Promise(function(t){o.eventBus=e,o.initialize(),t("module/dynamic-recommendation.js")})},s}),define("module/scs-matching",["events","configurator/ajax","configurator/dpu-api","core/signal","utils/polling"],function(e,t,n,a,i){"use strict";var r={},o={__:r};return r.oDefaults={classBasketMatchingContainer:".nm-basket-matching"},r.eventBus=null,r.stckEventBus=a.getEmitter("stockcar"),r.currentMatching=null,r.matchingSize=6,r.currentSvdVersion=null,r.addEvents=function(){r.eventBus.on(e.CONFIG_UPDATE,r.triggerStckRequest),r.eventBus.on(e.PAGE_READY,r.triggerStckRequest)},r.initialize=function(){SETUPS.get("stockcar.scs.market")&&(r.stckEventBus.on(e.SC_VERSION_LOADED,function(e){r.currentSvdVersion=e}),i.wait(function(){return!!r.currentSvdVersion},2e3).then(function(){r.triggerStckRequest(),r.addEvents()})["catch"](function(e){console.log(e)}))},r.getMatchingUrl=function(){var e,t,n,a;return a=SETUPS.get("stockcar.scs.base.url"),n=SETUPS.get("stockcar.scs.market.path"),t=SETUPS.get("stockcar.scs.version"),a&&t&&n&&(e=a+"search/"+t+"/match/"+n),e},r.triggerStckRequest=function(){return r.startStckRequests().then(function(e){return r.parseStckMatches(e)}).then(function(e){return r.broadcastStckMatching(e)})["catch"](function(e){console.log(e)})},r.startStckRequests=function(){var e,n=r.getMatchingUrl();return n?(e=r.getRequestParams(r.currentSvdVersion),e?t.getJSON(n,e,{withCredentials:!1}):Promise.reject("missing SCS Attributesâ¦")):Promise.reject("no version and matchUrlâ¦")},r.getBasketContainer=function(){return document.querySelector(r.oDefaults.classBasketMatchingContainer)},r.getMatchingAttributes=function(){var e,t,a=r.getBasketContainer();return t=n.getSCSmatchingAttributes(),t&&t.length>0?e=t.join(","):a?(e=a.getAttribute("data-attributes"),e=e.replace(/[\[\s\]']+/g,""),e?e:null):null},r.getRequestParams=function(e){var t=[],n=r.getMatchingAttributes();return n&&n.length&&e?(t.push("svd="+e),t.push("size="+r.matchingSize),t.push("attributes="+n),t=t.join("&")):null},r.parseStckMatches=function(e){var t=e||{},n=t.vehicleBasic||[];return n=n.map(r.addSvdVersion),t},r.broadcastStckMatching=function(t){return r.currentMatching=t,r.stckEventBus.emit(e.STOCKCAR_UPDATE,t),t},r.addSvdVersion=function(e){return e.svdVersion=r.currentSvdVersion,e},o.initializePromise=function(t){return new Promise(function(n){r.eventBus=t,r.eventBus.once(e.APP_INITIALIZED,r.initialize),n("module/scs-matching.js")})},o}),define("text!templates/scs-matching-basket.tpl",[],function(){return'{{~ it.cars :car :index }}\n<input type="radio" id="nm-basket-matching-list-car{{=index+1}}" name="nm-basket-matching-list-slider" class="nm-basket-matching-list-slider" data-index="{{=index}}" {{? index === 0}}checked="checked" {{?}} />\n{{~}}\n<label class="nm-basket-toggle-widgets-label-fullarea" for="nm-basket-toggle-widgets"></label>\n<label class="nm-basket-toggle-widgets-label" for="nm-basket-toggle-widgets">\n	<span class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">{{=window.i18n[\'basket.matching.headline\'] || "VerfÃ¼gbare Neuwagen"}}</span>\n</label>\n<div class="nm-basket-matching-wrap">\n	<div class="nm-basket-matching-car-slider">\n\n		<div class="nm-basket-matching-next"></div>\n		<div class="nm-basket-matching-prev"></div>\n		<div class="nm-basket-matching-counter nm-el-lbl nm-el-lbl-01">\n			<span class="nm-basket-matching-counter-current">1</span>/<span class="nm-basket-matching-counter-total">{{=it.totalCount}}</span>\n		</div>\n		<ul>\n			{{~ it.cars :car :index }}\n				<li data-index="{{=index}}">\n					<div class="nm-basket-matching-car-container">\n						<a class="nm-layerLink" href="{{=car.link}}">\n							<div {{? car.image !== \'undefined\' && car.image !== \'\' }} style="background-image: url({{=car.image}});" class="nm-basket-matching-car-image" {{??}} class="nm-basket-matching-car-image nm-basket-matching-car-fallback" {{?}} ></div>\n						</a>\n					</div>\n					<a class="nm-layerLink" href="{{=car.link}}">\n						<div class="nm-basket-matching-car-info">\n							<span class="nm-basket-matching-car-model nm-el-lbl nm-el-lbl-01 nm-at-lbl-b">{{=car.model}}</span>\n							<span class="nm-basket-matching-car-description nm-el-lbl nm-el-lbl-01">{{=car.engine}}</span>\n							<span class="nm-basket-matching-car-price nm-el-lbl nm-el-lbl-01">{{=car.price}}</span>\n							<div class="nm-basket-matching-circle nm-basket-matching-circle-{{=index}}">\n								{{var degree = parseInt(car.percentage * 1.8);}}\n								<style>\n									.nm-basket-matching-circle-{{=index}} .nm-basket-matching-circle-mask-full,\n									.nm-basket-matching-circle-{{=index}} .nm-basket-matching-circle-fill {\n										animation: fill-{{=index}}  ease-in-out 3s;\n										transform: rotate({{=degree}}deg);\n									}\n									@keyframes fill-{{=index}}  {\n										0% {\n											transform: rotate(0deg);\n										}\n										100% {\n											transform: rotate({{=degree}}deg);\n										}\n									}\n								</style>\n\n								<div class="nm-basket-matching-circle-mask-full">\n									<div class="nm-basket-matching-circle-fill"></div>\n								</div>\n								<div class="nm-basket-matching-circle-mask-half">\n									<div class="nm-basket-matching-circle-fill"></div>\n								</div>\n								<div class="nm-basket-matching-inside-circle">{{=car.percentage}}%</div>\n							</div>\n						</div>\n					</a>\n				</li>\n			{{~}}\n		</ul>\n	</div>\n	<div class="nm-basket-matching-list-small-wrap">\n		<div class="nm-basket-matching-list-small">\n			<ul>\n				{{~ it.cars :car :index }}\n					<li>\n						<label for="nm-basket-matching-list-car{{=index+1}}" {{? !!car.image }} style="background-image: url({{=car.image}});" {{??}} class="nm-basket-matching-car-fallback" {{?}} data-index="{{=index}}"></label>\n					</li>\n				{{~}}\n			</ul>\n		</div>\n	</div>\n	<div class="nm-basket-matching-more-btn">\n		<a href="{{=it.result_link}}" class="nm-el-btn nm-el-btn-01 nm-el-btn-ast nm-at-btn-inv"><span>{{=window.i18n[\'basket.matching.button.label\'] || "Weitere Neuwagen"}}</span></a>\n	</div>\n</div>\n'}),define("module/scs-matching-basket",["events","core/template","text!templates/scs-matching-basket.tpl","core/signal","utils/dom"],function(e,t,n,a,i){"use strict";var r={},o={__:r};return r.oDefaults={classBasketMatchingContainer:".nm-basket-matching",classBasketMatchingCarousel:".nm-basket-matching-car-slider",classBasketArrowLeft:".nm-basket-matching-prev",classBasketArrowRight:".nm-basket-matching-next",classBasketThumb:".nm-basket-matching-list-small ul li label"},r.currentMatchingVehicles=null,r.eventBus=null,r.stckEventBus=a.getEmitter("stockcar"),r.scDetailLinkPattern=null,r.carouselItemCount=null,r.carouselItemWidth=null,r.carouselItemHeight=null,r.carouselWidth=null,r.carouselIndex=0,r.carouselLabelStep=!1,r.carouselItemWidthTransform=null,r.addEvents=function(){i.getEventDelegate("body");r.stckEventBus.on(e.STOCKCAR_UPDATE,r.handleStockcarResults),r.addClickEvents()},r.addClickEvents=function(){var e=i.getEventDelegate("body");e.on("click",r.oDefaults.classBasketArrowLeft,r.prevArrowClickHandler),e.on("click",r.oDefaults.classBasketArrowRight,r.nextArrowClickHandler),e.on("click",r.oDefaults.classBasketThumb,r.thumbClickHandler)},r.removeClickEvents=function(){var e=i.getEventDelegate("body");e.off("click",r.oDefaults.classBasketArrowLeft,r.prevArrowClickHandler),e.off("click",r.oDefaults.classBasketArrowRight,r.nextArrowClickHandler),e.off("click",r.oDefaults.classBasketThumb,r.thumbClickHandler)},r.handlePageLoaded=function(){r.currentMatching&&document.querySelector(r.oDefaults.selectorModuleContainer)&&r.handleStockcarResults(r.currentMatching)},r.handleStockcarResults=function(e){var t;e&&(r.currentMatchingVehicles=e.vehicleBasic?e.vehicleBasic:[],t=r.parseResonse(e),r.renderTemplate(t))},r.parseResonse=function(e){var t,n,a,i,o={cars:[]},s=e.vehicleBasic.length;for(t=0,n=s;n>t;t++)a=e.vehicleBasic[t],a&&(i={id:a.id,model:a.mbvHandbook.description,engine:a.modelCode.description,image:r.setImageSrc(a.pictures),price:r.getFormattedPrice(a.typedPrices,"retail"),link:r.setDetailsURL(a.id),svdVersion:a.svdVersion,percentage:Math.round(a.percentage||a.displayPercentage)},o.cars.push(i));return o.result_link=r.setResultsURL(e.filterExpression),o.totalCount=s,o},r.setImageSrc=function(e){var t,n;return n=e||[],n.forEach(function(e){"n5c01"===e.key&&(t=e.url)}),t},r.setResultsURL=function(e){var t=r.getResultsLinkUrl();return t=t.replace(/SC_ATTR_FILTERS/i,e)},r.getResultsLinkUrl=function(){var e=document.querySelector(r.oDefaults.classBasketMatchingContainer);return e?e.getAttribute("data-result-url"):null},r.setDetailsURL=function(e){var t=r.getDetailsLinkUrl();return t=t.replace(/SC_VEHICLE_ID/i,e)},r.getDetailsLinkUrl=function(){var e=document.querySelector(r.oDefaults.classBasketMatchingContainer);return e?e.getAttribute("data-detail-url"):null},r.getFormattedPrice=function(e,t){for(var n=e.length;n--;)if(e[n].type===t)return e[n].formatted;return null},r.renderTemplate=function(e){var a,i=document.querySelector(r.oDefaults.classBasketMatchingContainer);i&&(i.innerHTML="",e.cars.length>1&&(a=t.render(n,e),i.innerHTML=a,r.initCarousel()))},r.initCarousel=function(){var e=document.querySelector(r.oDefaults.classBasketMatchingCarousel+" ul"),t=document.querySelector(r.oDefaults.classBasketMatchingCarousel+" ul li:last-child");r.carouselItemCount=parseInt(e.childNodes.length,10),r.carouselItemWidthTransform=100/r.carouselItemCount,r.carouselItemWidth="100",r.carouselWidth=100*r.carouselItemCount+"%",e.setAttribute("style","width:"+r.carouselWidth+";margin-left: -"+r.carouselItemWidth+"%;"),e.insertBefore(t,e.firstChild)},r.getCurrentIndex=function(){var e=i.getElementsArray(".nm-basket-matching-list-slider"),t=0;return e.forEach(function(e,n){e.checked&&(t=n)}),t},r.setCurrentIndex=function(e){var t=r.getCurrentIndex();e!==t&&(r.updateThumbPosition(e),r.updateCounter(e+1),r.animation(t,e))},r.nextArrowClickHandler=function(){var e=r.getCurrentIndex();e=++e%r.carouselItemCount,r.setCurrentIndex(e)},r.prevArrowClickHandler=function(){var e=r.getCurrentIndex();e=--e,0>e&&(e=r.carouselItemCount-1),r.setCurrentIndex(e)},r.animation=function(e,t){r.removeClickEvents();var n;t>e?(n="next",0===e&&t===r.carouselItemCount-1&&(n="prev")):(n="prev",e===r.carouselItemCount-1&&0===t&&(n="next")),console.log("Direction: ",n),"prev"===n?r.animatePrev(e,t):r.animateNext(e,t)},r.animatePrev=function(e,t){var n=document.querySelector(r.oDefaults.classBasketMatchingCarousel+" ul"),a=document.querySelector(r.oDefaults.classBasketMatchingCarousel+" ul li:last-child");i.handleTransition(n).then(function(i){i.classList.remove("slide-transition"),e-t>1&&(a=document.querySelector(r.oDefaults.classBasketMatchingCarousel+" ul li:last-child")),n.insertBefore(a,n.firstChild),n.setAttribute("style","width:"+r.carouselWidth+";margin-left: -"+r.carouselItemWidth+"%;"),r.addClickEvents()}),e-t>1?(n.insertBefore(a,n.firstChild),n.setAttribute("style","width:"+r.carouselWidth+";margin-left: -"+2*r.carouselItemWidth+"%;"),n.classList.add("slide-transition"),n.setAttribute("style","width:"+r.carouselWidth+";margin-left: -0px")):(n.classList.add("slide-transition"),n.setAttribute("style","width:"+r.carouselWidth+";transform: translateX(0px);"))},r.animateNext=function(e,t){var n=document.querySelector(r.oDefaults.classBasketMatchingCarousel+" ul"),a=document.querySelector(r.oDefaults.classBasketMatchingCarousel+" ul li:first-child");i.handleTransition(n).then(function(n){n.classList.remove("slide-transition"),n.appendChild(a,n.firstChild),t-e>1&&(a=document.querySelector(r.oDefaults.classBasketMatchingCarousel+" ul li:first-child"),n.appendChild(a,n.firstChild)),n.setAttribute("style","width:"+r.carouselWidth+";margin-left: -"+r.carouselItemWidth+"%;"),r.addClickEvents()})["catch"](function(){console.log("Promise not completed ",err)}),n.classList.add("slide-transition"),n.setAttribute("style","width:"+r.carouselWidth+";transform: translateX(-"+r.carouselItemWidthTransform*(0>t-e?2:t-e+1)+"%);")},r.thumbClickHandler=function(e){var t=parseInt(e.toElement.getAttribute("data-index"),10);r.setCurrentIndex(t)},r.updateThumbPosition=function(e){var t=i.getElementsArray(".nm-basket-matching-list-slider");t.map(function(e){e.checked=!1}),t[e].checked=!0},r.updateCounter=function(e){document.querySelector(".nm-basket-matching-counter-current").innerHTML=e},o.initializePromise=function(e){return new Promise(function(t){r.eventBus=e,r.addEvents(),t("scs-matching-basket.js")})},o}),define("error-logging",["jquery","module/error"],function(e,t){"use strict";var n={},a={__:n};return n.oDefaults={disableTrackJSLinkSelector:".j-trackjs-optout"},n.addEvents=function(){var t=n.getStorage();t&&"false"===t.getItem("trackJsLogging")&&n.disableTrackJSLogging(!0),e("body").on("click",n.oDefaults.disableTrackJSLinkSelector,n.disableTrackJSLogging),window.addEventListener("unhandledrejection",n.handleUnhandledRejectionErrors)},n.handleUnhandledRejectionErrors=function(e){console.error(e),window._trackJs&&window._trackJs.track&&window._trackJs.track(e.reason)},n.getStorage=function(){return window.localStorage},n.disableTrackJSLogging=function(e){var a=n.getStorage(),i=a.getItem("trackJsLogging")||"true",r=window.i18n["nemo.ui.optout.message"],o=window.i18n["nemo.ui.optout.headline"];e!==!0&&(i="true"===i?"false":"true","true"===i&&(r=window.i18n["nemo.ui.optin.message"],o=window.i18n["nemo.ui.optin.headline"]),t.handleError({errorMessage:r,errorSubheadline:"",errorHeadline:o})),window._trackJs&&window._trackJs.onError&&(window._trackJs.onError=function(e,t){return"false"!==i}),a&&a.setItem("trackJsLogging",i)},a.initializePromise=function(e){return new Promise(function(t){n.globalEventBus=e,n.addEvents(),t("error-logging.js")})},a}),define("module/inlinerendering-aoz",["jquery","events","configurator/dpu-api","configurator/dpu-controller"],function(e,t,n,a){"use strict";var i={},r={__:i};return i.oDefaults={sAttributeInitialCaption:"data-initialcaption",sAttributePrNumber:"data-partprnumber",sClassAozActive:"nm-aoz-active",sClassAozButton:"nm-aoz-btn",sClassAozDescription:"nm-aoz-description",sClassAozHintText:"nm-aoz-hinttext",sClassAozInvisible:"nm-aoz-invisible",sClassAozItem:"nm-aoz-item",sClassAozModule:"nm-md-aoz",sClassAozPrice:"nm-aoz-price",sSelectorAozButton:".nm-aoz-btn a",sSelectorAozItem:".nm-aoz-item"},i.addEvents=function(){i.eventBus.on(t.PAGE_LOADED,i.handleSelectionUpdated),i.eventBus.on(t.APP_INITIALIZED,i.handleSelectionUpdated),i.eventBus.on(t.CONFIG_UPDATE,i.handleSelectionUpdated),i.legacyEventBus.on("click",i.oDefaults.sSelectorAozItem,i.toggleItem),i.legacyEventBus.on("click",i.oDefaults.sSelectorAozButton,i.toggleConfigItem)},i.toggleItem=function(e){var t=i.getClosestElementWithClass(e.target,i.oDefaults.sClassAozModule),n=i.getClosestElementWithClass(e.target,i.oDefaults.sClassAozItem);e.preventDefault(),e.stopPropagation(),t&&n&&(n.classList.contains(i.oDefaults.sClassAozActive)?i.unsetSelection(t):i.setNewSelection(t,n)),i.handleSelectionUpdated()},i.toggleConfigItem=function(e){var t=i.getClosestElementWithClass(e.target,i.oDefaults.sClassAozModule),a=t.getElementsByClassName(i.oDefaults.sClassAozActive)[0],r=a.getAttribute(i.oDefaults.sAttributePrNumber),o=r.split(" ").join("_");e.preventDefault(),n.isInCurrentConfiguration(o)?i.updateButtonWrapperClass(t,a):i.updateButtonWrapperClass(t,a)},i.retrievePrNumbersToFilter=function(e){var t,n,a=e.getElementsByClassName(i.oDefaults.sClassAozItem),r=[];for(t=0,n=a.length;n>t;t++)r.push(a[t].getAttribute("data-configurator-id"));return r},i.updateRenderImage=function(e,t){var a,r,o,s,l,c=[],u=[],d=e.getElementsByClassName("nm-j-configurator-renderimage"),m=i.retrievePrNumbersToFilter(e);for(a=0,r=d.length;r>a;a++)u.push(d[a].getAttribute("data-renderimage-type")),o=d[a].getAttribute("data-renderimage-view"),c.indexOf(o)<=-1&&c.push(o);n.sendRenderServiceRequest(m,t,c.join(","),u.join(",")).then(function(e){for(a=0,r=d.length;r>a;a++)s=d[a].getAttribute("data-renderimage-type"),o=d[a].getAttribute("data-renderimage-view"),l=e["render-results"][t][o][s],d[a].setAttribute("style","background-image: url("+l+")")})},i.resetRenderImage=function(e){var t,n,a,i=e.getElementsByClassName("nm-j-configurator-renderimage");for(t=0,n=i.length;n>t;t++)a=i[t].getAttribute("data-url"),i[t].setAttribute("style","background-image: url("+a+")")},i.getClassBySubstring=function(e,t){var n,a,i=!1;for(n=0,a=e.classList.length;a>n;n++)if(e.classList[n].indexOf(t)>-1){i=e.classList[n];break}return i},i.updateButtonWrapperClass=function(e,t){var n=e.getElementsByClassName(i.oDefaults.sClassAozButton)[0],a=i.getClassBySubstring(t,"nm-j-configurator-status_"),r=i.getClassBySubstring(n,"nm-j-configurator-status_");r&&n.classList.remove(r),a&&n.classList.add(a),i.updateButtonTrackingAttributes(e,t)},i.updateButtonTrackingAttributes=function(e,t){var n=e.getElementsByClassName("nm-el-btn")[0],a=t.getAttribute("data-name"),i=t.getAttribute("data-familygroup"),r=t.getAttribute("data-family");a=""!==r?r+":"+a:a,a=""!==i?i+":"+a:a,a=a.replace(/"/g,'\\"'),n.parentNode.setAttribute("data-configurator-id",t.getAttribute("data-configurator-id"))},i.updateDescription=function(e,t){var n=e.getElementsByClassName(i.oDefaults.sClassAozDescription)[0];t===!1?n.innerHTML=n.getAttribute(i.oDefaults.sAttributeInitialCaption):n.innerHTML=t},i.updatePrice=function(e,t){var n=e.getElementsByClassName(i.oDefaults.sClassAozPrice)[0];n.innerHTML=t},i.updateHintText=function(e,t){var n=e.getElementsByClassName(i.oDefaults.sClassAozHintText)[0];n.innerHTML=t},i.unsetSelection=function(e){i.removeClassFromElementsWithClassWithinDomFragment(e,i.oDefaults.sClassAozItem,i.oDefaults.sClassAozActive),i.updateDescription(e,!1),i.updatePrice(e,"&nbsp;"),i.updateHintText(e,"&nbsp;"),i.addClassToElementsWithClassWithinDomFragment(e,i.oDefaults.sClassAozButton,i.oDefaults.sClassAozInvisible),i.resetRenderImage(e)},i.setNewSelection=function(e,t){i.updateDescription(e,t.getAttribute("data-name")),i.updatePrice(e,t.getAttribute("data-price")),i.updateHintText(e,t.getAttribute("data-hinttext")),i.removeClassFromElementsWithClassWithinDomFragment(e,i.oDefaults.sClassAozItem,i.oDefaults.sClassAozActive),t.classList.add(i.oDefaults.sClassAozActive),i.removeClassFromElementsWithClassWithinDomFragment(e,i.oDefaults.sClassAozButton,i.oDefaults.sClassAozInvisible),i.updateButtonWrapperClass(e,t)},i.getClosestElementWithClass=function(e,t){for(var n=e;n.classList&&!n.classList.contains(t);){if(!n.parentNode)return!1;n=n.parentNode}return n.parentNode?n:!1},i.removeClassFromElementsWithClassWithinDomFragment=function(e,t,n){var a,i,r=e.getElementsByClassName(t);for(a=0,i=r.length;i>a;a++)r[a].classList.remove(n)},i.addClassToElementsWithClassWithinDomFragment=function(e,t,n){var a,i,r=e.getElementsByClassName(t);for(a=0,i=r.length;i>a;a++)r[a].classList.add(n)},i.updateStatusClass=function(e,t){var n=i.getClassBySubstring(e,"nm-j-configurator-status_");e.classList.remove(n),e.classList.add("nm-j-configurator-status_"+t)},i.handleSelectionUpdated=function(){var e,t,a,r,o,s=document.body.getElementsByClassName(i.oDefaults.sClassAozItem);for(e=0,t=s.length;t>e;e++)r=s[e].getAttribute(i.oDefaults.sAttributePrNumber).split(" ").join("_"),a=n.getItem(r),a.status&&i.updateStatusClass(s[e],a.status),s[e].classList.contains(i.oDefaults.sClassAozActive)&&(o=i.getClosestElementWithClass(s[e],i.oDefaults.sClassAozModule),i.updateRenderImage(o,r))},r.initializePromise=function(t){return new Promise(function(n){i.eventBus=t,i.legacyEventBus=e("body"),i.addEvents(),n("module/inlinerendering-aoz.js")})},r}),define("module/notification-bar",["jquery","events"],function(e,t){"use strict";var n={},a={__:n};return n.oDefaults={sClassNotificationBar:"nm-md-notification-bar",sSelectorNotificationBarCancel:".nm-md-nb-cancel",sSelectorNotificationBarLink:".nm-md-nb-link",sValueNotificationCanceled:"nb-canceled"},n.addEvents=function(){n.eventBus.on(t.PAGE_LOADED,n.checkForNotificationBar),n.eventBus.on(t.APP_INITIALIZED,n.checkForNotificationBar),n.legacyEventBus.on("click",n.oDefaults.sSelectorNotificationBarCancel,n.cancelNotificationbar),n.legacyEventBus.on("click",n.oDefaults.sSelectorNotificationBarLink,n.cancelNotificationbar)},n.readLocalStorageFlag=function(e){return localStorage.getItem(e)},n.writeLocalStorageFlag=function(e){localStorage.setItem(e,!0)},n.checkForNotificationBar=function(){n.readLocalStorageFlag(n.oDefaults.sValueNotificationCanceled)||n.showNotificationBar()},n.showNotificationBar=function(){document.getElementsByClassName(n.oDefaults.sClassNotificationBar)&&document.getElementsByClassName(n.oDefaults.sClassNotificationBar).length>0&&(document.getElementsByClassName(n.oDefaults.sClassNotificationBar)[0].style["max-height"]="999px")},n.hideNotificationBar=function(){document.getElementsByClassName(n.oDefaults.sClassNotificationBar)&&document.getElementsByClassName(n.oDefaults.sClassNotificationBar).length>0&&(document.getElementsByClassName(n.oDefaults.sClassNotificationBar)[0].style["max-height"]="0")},n.cancelNotificationbar=function(){n.writeLocalStorageFlag(n.oDefaults.sValueNotificationCanceled),n.hideNotificationBar()},a.initializePromise=function(t){return new Promise(function(a){n.eventBus=t,n.legacyEventBus=e("body"),n.addEvents(),a("module/notification-bar.js")})},a}),define("module/usabilla",["events","jquery"],function(e,t){"use strict";var n={},a={__:n};return n.oDefaults={sSelectorModule:"j-action-usabilla"},n.eventBus=null,n.addEvents=function(){n.legacyEventBus.on("click",".j-action-usabilla",n.callExternalUsabillaModul)},n.callExternalUsabillaModul=function(t){t&&t.preventDefault&&t.preventDefault();try{"function"==typeof window.usabilla_live?(console.log("USABILLA: window.usabilla_live EXISTS"),window.usabilla_live("click")):(console.warn("NO USABILLA: window.usabilla_live NOT EXISTING"),n.legacyEventBus.trigger(e.ERROR))}catch(t){console.warn("USABILLA ERROR: something went wrong in window.usabilla_live: ",t),n.legacyEventBus.trigger(e.ERROR)}},a.initializePromise=function(e){return new Promise(function(a){n.eventBus=e,n.legacyEventBus=t("body"),n.addEvents(),a("module/usabilla.js")})},a}),define("tracking/apis/dtm-api",[],function(){"use strict";var e={},t={__:e};return e.oDefaults={registeredDataLayerObjects:["page","product","cart"]},e.getWebAnalyticsContainer=function(){return"undefined"==typeof window.webAnalytics&&(window.webAnalytics=[]),window.webAnalytics},t.initDataObject=function(){window.digitalData={},e.initialTrackingDone=!0},e.getDataObject=function(){return window.digitalData},t.isInitialTrackingDone=function(){return e.initialTrackingDone?e.initialTrackingDone:!1},e.storeRegisteredInDataObject=function(t){var n,a,i;for(n=0,a=e.oDefaults.registeredDataLayerObjects.length;a>n;n++)i=e.oDefaults.registeredDataLayerObjects[n],t.hasOwnProperty(i)&&(e.getDataObject()[i]=t[i])},t.sendData=function(t){var n=e.getWebAnalyticsContainer();e.storeRegisteredInDataObject(t),n.push(t)},t}),define("tracking/objects/event-object",[],function(){"use strict";var e={};return e.getData=function(e,t,n,a,i){return new Promise(function(r){var o=e;o.event=e.event?e.event:[],o.event.push({eventInfo:{eventAction:t,eventName:n,type:a},attributes:i}),r(o)})},e.getTrackingConfigurationStartType=function(e){var t="new configuration";return e&&(-1!==e.indexOf("audicode")?t="audicode":-1!==e.indexOf("carstore")?t="audicode":-1!==e.indexOf("prstring")&&(t="prstring")),t},e.getTrackingSource=function(e){var t="";return e&&(-1!==e.indexOf("carstore")?t="carstore":-1!==e.indexOf("input")?t="input form":-1!==e.indexOf("link")?t="link":-1!==e.indexOf("user-configuration")?t="local storage":-1!==e.indexOf("configuration-change")?t="change":-1!==e.indexOf("configuration-reset")?t="reset":-1!==e.indexOf("teaser")&&(t="teaser")),t},e}),define("tracking/events/click-tracking",["jquery","utils/dom","tracking/apis/dtm-api","tracking/objects/event-object","module/audicode"],function(e,t,n,a,i){"use strict";var r={},o={__:r};return r.addEvents=function(){r.legacyEventBus.off("click.link-tracking","a",r.handlerTrackLink),r.legacyEventBus.on("click.link-tracking","a",r.handlerTrackLink)},r.getEventName=function(e){var t="";return null!==e&&(t=e.innerText,""===t&&e.getAttribute("title")&&(t=e.getAttribute("title"))),t},r.getEventType=function(e){var t="",n=e;if(null!==n)for(;n.parentNode&&(n=n.parentNode,n&&1===n.nodeType&&n.hasAttribute("data-module")===!0&&(t=n.getAttribute("data-module")),!t||""===t););return t},r.getEventAttributes=function(e){var t={},n="";return null!==e&&(n=e.getAttribute("href"),n&&(t.href=n)),t},r.isPDFLink=function(e){var t=!1;return null!==e&&(t=e.classList.contains("j-pdf-configuration")||e.classList.contains("nm-j-audicode-link")),t},r.getDownloadLink=function(e){var t=!1;return null!==e&&(null!==e.getAttribute("download")?t=e.getAttribute("download"):r.isDownloadURL(r.getLinkHref(e))&&(t=r.getLinkHref(e))),t},r.isAVEDownloadLink=function(e){var t=!1;return null!==e&&(t=e.classList.contains("download-button")),t},r.getLinkTitle=function(e){var t="";return null!==e&&(t=e.getAttribute("title")),t},r.getLinkHref=function(e){var t="";return null!==e&&(t=e.getAttribute("href")),t},r.isDownloadURL=function(e){var t,n=!1,a=(e||"").split(".");return a&&a[a.length-1]&&(t=a[a.length-1].toUpperCase(),("ZIP"===t||"PDF"===t)&&(n=!0)),n},r.extractFileType=function(e){var t=e.split("."),n=t[t.length-1];return n.toUpperCase()},r.handlerTrackLink=function(e){var o=t.closest(e.target,"a"),s=r.getEventName(o),l=r.getEventType(o),c=r.getEventAttributes(o),u=r.getDownloadLink(o);return new Promise(function(e){r.isPDFLink(o)?i.loadAudiCode().then(function(t){a.getData({},"click",s,l,c).then(function(e){return a.getData(e,"PDF download",r.getLinkTitle(o),"download",{url:r.getLinkHref(o)})}).then(function(e){return a.getData(e,"config_save","","car",{audicode:t,target:"PDF"})}).then(n.sendData).then(e)["catch"](function(e){console.log("click tracking error (pdf): "+e)})}):u?a.getData({},"click",s,l,c).then(function(e){return a.getData(e,r.extractFileType(u)+" download",u,"download",{url:r.getLinkHref(o)})}).then(n.sendData).then(e)["catch"](function(e){console.log("click tracking error (download): "+e)}):r.isAVEDownloadLink(o)?a.getData({},"click",s,l,c).then(function(e){return a.getData(e,"PNG download","3D","download",{url:r.getLinkHref(o)})}).then(n.sendData).then(e)["catch"](function(e){console.log("click tracking error (ave): "+e)}):a.getData({},"click",s,l,c).then(n.sendData).then(e)["catch"](function(e){console.log("click tracking error: "+e)})})},o.initializePromise=function(){return new Promise(function(t){r.legacyEventBus=e("body"),r.addEvents(),t("tracking/events/click-tracking.js")})},o}),define("tracking/objects/page-object",["configurator/dpu-api"],function(e){"use strict";var t={},n={__:t};return t.oDefaults={sStringProduction:"production",sStringStaging:"staging",sStringDevelopment:"development",sStringApplicationNameNeMo:"NeMo",sStringApplicationNameSTCK:"STCK"},t.removeTrailingHtmlString=function(e){return e.indexOf(".html")>0?e.substr(0,e.indexOf(".html")):e},t.getPageID=function(e,n){var a=n,i=!1;return e&&e.indexOf("jslayer=")>-1?(i=e.substr(e.indexOf("jslayer=")+8),e&&e.indexOf("page=")>-1&&(a=e.substr(e.indexOf("page=")+5))):e&&e.indexOf("layer=")>-1?a=e.substr(e.indexOf("layer=")+6):e&&e.indexOf("page=")>-1&&(a=e.substr(e.indexOf("page=")+5)),a=t.removeTrailingHtmlString(a),i?a+"/"+i:a},t.getPageName=function(e){var t="";return t=e&&e.querySelectorAll("#nm-page-title")&&e.querySelectorAll("#nm-page-title").length>0?e.querySelectorAll("#nm-page-title")[0].innerText:document.getElementsByTagName("title")[0].innerText},t.getDestinationURL=function(){return window.location.href},t.getReferringURL=function(){return document.referrer},t.getSysEnv=function(e){return-1!==e.indexOf("local")||-1!==e.indexOf("nemo")||-1!==e.indexOf("127.0.0.1")?t.oDefaults.sStringDevelopment:-1!==e.indexOf("pre-")||-1!==e.indexOf("test-")?t.oDefaults.sStringStaging:t.oDefaults.sStringProduction},t.getBreadCrumbs=function(e,n){var a,i=t.getPageID(e,n).split("/"),r=[],o=0;for(a=0;a<i.length;a++)i[a]&&""!==i[a]&&(o>1&&r.push(i[a]),o++);return r},t.getLanguage=function(e){var n;return n=t.LocaleLanguage?t.LocaleLanguage:"content"===e.split("/")[1]?e.split("/")[4]:e.split("/")[3],t.removeTrailingHtmlString(n)},t.getCountry=function(e){return t.LocaleCountry?t.LocaleCountry:"content"===e.split("/")[1]?e.split("/")[2].toUpperCase():e.split("/")[1].toUpperCase()},t.getLangCountryISO=function(e){return t.getLanguage(e)+"-"+t.getCountry(e)},t.getApplicationName=function(){return t.oDefaults.sStringApplicationNameNeMo},t.getApplicationVersion=function(){var e=document.getElementsByClassName("application-version");return e.length>0?e[0].getAttribute("data-version"):document.querySelectorAll(".nm-version-info dd")&&document.querySelectorAll(".nm-version-info dd").length>0?document.querySelectorAll(".nm-version-info dd")[1].innerHTML:void 0},n.getPageType=function(e){var t="standardPage",n="",a="";return document.querySelectorAll(".nm-homepage")&&document.querySelectorAll(".nm-homepage").length>0?t="homepage":document.querySelectorAll("#nm_mofi")&&document.querySelectorAll("#nm_mofi").length>0?t="modelFinder":e&&e.querySelectorAll&&e.querySelectorAll(".nm-content")&&e.querySelectorAll(".nm-content").length>0&&(n=e.querySelectorAll(".nm-content")[0].getAttribute("data-type"),n&&"nemo"===n&&(a=e.querySelectorAll(".nm-content")[0].getAttribute("data-template"),t=a&&"home"===a?"configurableModelHome":a&&"summary"===a?"configurationSummary":"configurableModel")),t},t.getModelYear=function(){return e.getModelYear()},n.getData=function(e){return new Promise(function(a){var i;t.LocaleLanguage=SETUPS.get("LocaleLanguage")?SETUPS.get("LocaleLanguage"):null,t.LocaleCountry=SETUPS.get("LocaleCountry")?SETUPS.get("LocaleCountry"):null,i={pageInfo:{pageID:t.getPageID(window.location.href,window.location.pathname),pageName:t.getPageName(document),destinationURL:t.getDestinationURL(),referringURL:t.getReferringURL(),sysEnv:t.getSysEnv(window.location.host),breadCrumbs:t.getBreadCrumbs(window.location.href,window.location.pathname),language:t.getLangCountryISO(window.location.pathname)},category:{pageType:n.getPageType(document)},attributes:{applicationName:t.getApplicationName(),applicationVersion:t.getApplicationVersion(),
implementer:"BaD",site:"product portal"}},t.getModelYear()&&(i.attributes.modelYear=t.getModelYear()),e.page=i,a(e)})},n}),define("tracking/objects/product-object",["configurator/dpu-api","utils/polling"],function(e,t){"use strict";var n={},a={__:n};return n.oDefaults={pollTime:2e3,sClassSelectable:"nm-j-configurator-status_11000",sClassSelectableConflict:"nm-j-configurator-status_11100",sClassSelected:"nm-j-configurator-status_11010"},n.collectProductItems=function(){var e=[].slice.call(document.getElementsByClassName(n.oDefaults.sClassSelectable)),t=[].slice.call(document.getElementsByClassName(n.oDefaults.sClassSelectableConflict)),a=[].slice.call(document.getElementsByClassName(n.oDefaults.sClassSelected));return e.concat(t,a)},n.collectProductData=function(t){var a,i,r=[],o=t.length;for(a=0;o>a;a++)i=e.getItem(t[a].getAttribute("data-configurator-id")),i&&r.push(n.getProductItem(i));return r},a.getProductInfo=function(e){return{productID:e.id,productMbvId:e.mbvId,productName:e.name?e.name:"",productURL:e.url?e.url:"",productImage:e.image?e.image:"",productThumbnail:e.image?e.image:""}},a.getProductCategory=function(e,t){var n,a="",i="",r="";return t&&t[e.family]&&(n=e.family.split("."),"undefined"!=typeof n&&n.length>0&&(a=n[0],n.length>1&&(i=n[1])),t[e.family].type&&"undefined"!=typeof t[e.family].type&&(r=t[e.family].type)),{primaryCategory:a,subCategory1:i,productType:r}},n.getProductItem=function(t){var n=e.getFamilies();return{productInfo:a.getProductInfo(t),category:a.getProductCategory(t,n),attributes:{cartAction:""}}},n.getProductItemsArray=function(){var e=n.collectProductItems();return n.collectProductData(e)},a.patchCartActionForProductId=function(e,t,n){return new Promise(function(a){var i,r,o,s;for(i=0,o=n.length;o>i;i++)for(r=0,s=e.product.length;s>r;r++)n[i]===e.product[r].productInfo.productID&&(e.product[r].attributes.cartAction=t);a(e)})},a.getData=function(a){return new Promise(function(i){var r=!1;document.querySelectorAll(".nm-content")&&document.querySelectorAll(".nm-content").length>0&&document.querySelectorAll(".nm-content")[0].getAttribute("data-type")&&"nemo"===document.querySelectorAll(".nm-content")[0].getAttribute("data-type")&&(r=!0),r?t.wait(e.isInitialized,n.oDefaults.pollTime).then(function(){a.product=n.getProductItemsArray(),i(a)})["catch"](function(){i(a)}):i(a)})},a}),define("tracking/objects/cart-object",["configurator/dpu-api","utils/polling","tracking/objects/product-object"],function(e,t,n){"use strict";var a={},i={__:a};return a.oDefaults={pollTime:2e3},a.getCartItem=function(e,t){return{productInfo:n.getProductInfo(e),category:n.getProductCategory(e,t),price:{basePrice:e.price,priceWithTax:e.price},attributes:{}}},a.getCartItems=function(){var t,n=e.getSelectedItems(),i=[],r=e.getFamilies();for(t in n)n.hasOwnProperty(t)&&i.push(a.getCartItem(n[t],r));return i},a.getCarlineBasePrice=function(){return SETUPS.get("nemo.CarlineBasePriceRaw")?parseInt(SETUPS.get("nemo.CarlineBasePriceRaw"),10):""},a.getCartData=function(){var t,n,i,r=e.getPrices();return i=r.nettoBaseRaw&&0!==r.nettoBaseRaw?parseInt(r.nettoBaseRaw,10)+parseInt(r.nettoOptionsRaw,10):r.modelRaw&&r.optionsRaw?parseInt(r.modelRaw,10)+parseInt(r.optionsRaw,10):"",t=r.modelRaw&&r.optionsRaw?parseInt(r.modelRaw,10)+parseInt(r.optionsRaw,10):"",n=r.rotrRaw&&0!==r.rotrRaw?r.rotrRaw:r.totalRaw?r.totalRaw:"",{cartID:e.getConfigurationId(),price:{basePrice:i,currency:r.total?r.total.split(" ").pop():"",priceWithTax:t,cartTotal:n,carlineBasePrice:a.getCarlineBasePrice(),engineBasePrice:r.modelRaw?r.modelRaw:""},item:a.getCartItems()}},i.getData=function(n){return new Promise(function(i){var r=n;document.getElementsByTagName("body")[0].classList.contains("nm-has-basket")?t.wait(e.isInitialized,a.oDefaults.pollTime).then(function(){r.cart=a.getCartData(),i(r)})["catch"](function(){i(r)}):i(r)})},i.getConflictAttributes=function(e){var t,n,a,i,r={};if(e&&e.triggers&&e.solutions){for(r.existingItems=[],t=0,a=e.triggers.length;a>t;t++)r.existingItems.push(e.triggers[t].id);for(r.changedItems=[],n=0,i=e.solutions.length;i>n;n++)r.changedItems.push(e.solutions[n].id)}return r},i.isConfigurationAborted=function(e){var t,n=e&&e.configHistory?e.configHistory.trim():!1;return n&&(t=n.split(" "),t.length>0&&"abort"===t[t.length-1])?!0:!1},i.isConfigurationAccepted=function(e){var t,n,a=e&&e.configHistory?e.configHistory.trim():!1;return a&&(t=a.split(" "),t.length>1&&"accept"===t[t.length-1])?(n=t[t.length-2].substr(1,t[t.length-2].length-2),n.split(";")):!1},i.getSolutionItems=function(e){return i.getSolutionAddedItems(e).concat(i.getSolutionRemovedItems(e))},i.getSolutionAddedItems=function(e){var t,n,a=[];for(t=0,n=e.length;n>t;t++)"+"===e[t].substr(1,1)&&a.push(e[t].substr(2));return a},i.getSolutionRemovedItems=function(e){var t,n,a=[];for(t=0,n=e.length;n>t;t++)"-"===e[t].substr(1,1)&&a.push(e[t].substr(2));return a},i.getLastActionType=function(e){var t,n=e&&e.configHistory?e.configHistory.trim():!1;return n&&(t=n.split(" "),t.length>0)?t[t.length-1].substr(0,1):!1},i.getLastItemForAtomarAction=function(e){var t,n=e&&e.configHistory?e.configHistory.trim():!1;return n&&(t=n.split(" "),t.length>0)?t[t.length-1].substr(1):!1},i}),define("tracking/events/page-tracking",["events","tracking/apis/dtm-api","tracking/objects/event-object","tracking/objects/page-object","tracking/objects/product-object","tracking/objects/cart-object"],function(e,t,n,a,i,r){"use strict";var o={},s={__:o};return o.addEvents=function(){o.eventBus.on(e.APP_INITIALIZED,o.handlerAppInitialized),o.eventBus.on(e.PAGE_READY,o.handlerPageReady)},o.handlerAppInitialized=function(){t.initDataObject(),-1===location.hash.indexOf("page=")&&-1===location.hash.indexOf("layer=")&&("configurationSummary"===a.getPageType(document)?o.performPageTrackingWithCartViewEvent():o.performDefaultPageTracking())},o.handlerPageReady=function(){"configurationSummary"===a.getPageType(document)?o.performPageTrackingWithCartViewEvent():o.performDefaultPageTracking()},o.performPageTrackingWithCartViewEvent=function(){n.getData({},"cart_view","","cart",{}).then(function(e){return n.getData(e,"page_load","","view",{})}).then(a.getData).then(i.getData).then(r.getData).then(t.sendData)["catch"](function(e){console.log("page-tracking error (summary): "+e)})},o.performDefaultPageTracking=function(){n.getData({},"page_load","","view",{}).then(a.getData).then(i.getData).then(r.getData).then(t.sendData)["catch"](function(e){console.log("page-tracking error: "+e)})},s.initializePromise=function(e){return new Promise(function(t){o.eventBus=e,o.addEvents(),t("tracking/events/page-tracking.js")})},s}),define("tracking/events/layer-tracking",["events","utils/dom","utils/polling","tracking/apis/dtm-api","tracking/objects/event-object","tracking/objects/page-object","tracking/objects/product-object","tracking/objects/cart-object","configurator/dpu-api","module/audicode"],function(e,t,n,a,i,r,o,s,l,c){"use strict";var u={},d={__:u};return u.oDefaults={pollTime:1700},u.addEvents=function(){u.eventBus.on(e.LAYER_LOADED,u.handlerLayerLoaded),u.eventBus.on(e.LAYER_CLOSED,u.handlerLayerClosed)},u.handlerLayerLoaded=function(e){var t,n,d=l.getConflicts(),m=e&&e.element?u.isAudicodeFieldOnPage(e.element):!1;a.isInitialTrackingDone?d?i.getData({},"layer_show","","view",{}).then(function(e){return i.getData(e,"cart_conflict","","cart",s.getConflictAttributes(d))}).then(r.getData).then(o.getData).then(s.getData).then(a.sendData)["catch"](function(e){console.log("layer-tracking error (conflict): "+e)}):u.isConfigStartLayer(e)?(n=l.getConfigurationStartType(),t={configurationID:l.getConfigurationId(),configurationStartType:i.getTrackingConfigurationStartType(n),source:i.getTrackingSource(n)},n&&-1!==n.indexOf("audicode")?c.loadAudiCode().then(function(e){t.audicode=e}).then(function(){return i.getData({},"layer_show","","view",{})}).then(function(e){return i.getData(e,"config_start","","car",t)}).then(r.getData).then(o.getData).then(s.getData).then(a.sendData)["catch"](function(e){console.log("layer-tracking error (config start audicode): "+e)}):i.getData({},"layer_show","","view",{}).then(function(e){return i.getData(e,"config_start","","car",t)}).then(r.getData).then(o.getData).then(s.getData).then(a.sendData)["catch"](function(e){console.log("layer-tracking error (config start): "+e)})):m?c.loadAudiCode().then(function(e){t={audicode:e,target:"layer"},i.getData({},"layer_show","","view",{}).then(function(e){return i.getData(e,"config_save","","car",t)}).then(r.getData).then(o.getData).then(s.getData).then(a.sendData)["catch"](function(e){console.log("layer-tracking error (audicode layer): "+e)})})["catch"](function(e){console.log("layer-tracking error (audicode field): "+e)}):i.getData({},"layer_show","","view",{}).then(r.getData).then(o.getData).then(s.getData).then(a.sendData)["catch"](function(e){console.log("layer-tracking error: "+e)}):-1!==location.hash.indexOf("layer=")&&-1===location.hash.indexOf("page=")&&i.getData({},"page_load","","view",{}).then(r.getData).then(o.getData).then(s.getData).then(a.sendData)["catch"](function(e){console.log("layer-tracking error (direct entry): "+e)})},u.isAudicodeFieldOnPage=function(e){var n=t.getElement(".nm-j-audicode",e);return t.isElement(n)?n:!1},u.isConfigStartLayer=function(e){var t=!1,n=!1;return e&&e.element&&e.element.querySelectorAll&&(t=e.element.querySelectorAll(".nm-md-configurationstart-implicit-layer")&&e.element.querySelectorAll(".nm-md-configurationstart-implicit-layer").length>0,n=e.element.querySelectorAll(".nm-configurationstart-loaded-layer")&&e.element.querySelectorAll(".nm-configurationstart-loaded-layer").length>0),t||n},u.isConflictLayer=function(e){return e&&e.querySelectorAll&&e.querySelectorAll(".nm-layer-conflict")&&e.querySelectorAll(".nm-layer-conflict").length>0?!0:!1},u.handlerLayerClosed=function(e){var t=l.getConfiguration();u.eventObject=[],s.isConfigurationAborted(t)?i.getData({},"cart_conflict_aborted","","cart",{}).then(function(e){return i.getData(e,"layer_hide","","view",{})}).then(r.getData).then(o.getData).then(s.getData).then(a.sendData)["catch"](function(e){console.log("layer-tracking error (layer close conflict abort): "+e)}):u.isConflictLayer(e)||i.getData({},"layer_hide","","view",{}).then(r.getData).then(o.getData).then(s.getData).then(a.sendData)["catch"](function(e){console.log("layer-tracking error (layer close): "+e)})},d.initializePromise=function(e){return new Promise(function(t){u.eventBus=e,u.addEvents(),t("tracking/events/layer-tracking.js")})},d}),define("tracking/events/configuration-tracking",["events","tracking/apis/dtm-api","tracking/objects/event-object","tracking/objects/page-object","tracking/objects/product-object","tracking/objects/cart-object","configurator/dpu-api"],function(e,t,n,a,i,r,o){"use strict";var s={},l={__:s};return s.addEvents=function(){s.eventBus.on(e.CONFIG_UPDATE,s.handleConfigUpdate)},s.handleConfigUpdate=function(){var e=o.getConflicts(),s=o.getConfiguration(),l=r.getLastItemForAtomarAction(s),c=r.isConfigurationAccepted(s);c?n.getData({},"layer_hide","","view",{}).then(function(e){return n.getData(e,"cart_conflict_solved","","cart",{changedItems:r.getSolutionItems(c)})}).then(a.getData).then(i.getData).then(function(e){return i.patchCartActionForProductId(e,"add",r.getSolutionAddedItems(c))}).then(function(e){return i.patchCartActionForProductId(e,"remove",r.getSolutionRemovedItems(c))}).then(r.getData).then(t.sendData)["catch"](function(e){console.log("configuration tracking error (conflict accept): "+e)}):e||r.isConfigurationAborted(s)||("+"===r.getLastActionType(s)?n.getData({},"cart_add","","cart",{}).then(i.getData).then(function(e){return i.patchCartActionForProductId(e,"add",[l])}).then(r.getData).then(t.sendData)["catch"](function(e){console.log("configuration tracking error (cart add): "+e)}):"-"===r.getLastActionType(s)?n.getData({},"cart_remove","","cart",{}).then(i.getData).then(function(e){return i.patchCartActionForProductId(e,"remove",[l])}).then(r.getData).then(t.sendData)["catch"](function(e){console.log("configuration tracking error (cart remove): "+e)}):console.log("UNKNOWN ACTION for config history "+s.configHistory))},l.initializePromise=function(e){return new Promise(function(t){s.eventBus=e,s.addEvents(),t("tracking/events/configuration-tracking.js")})},l}),define("tracking/events/conversion-tracking",["events","tracking/apis/dtm-api","tracking/objects/event-object","configurator/dpu-api"],function(e,t,n,a){"use strict";var i={},r={__:i};return i.addEvents=function(){i.eventBus.on(e.CONFIG_SAVED,i.handleConfigSaved),i.eventBus.on(e.CONFIG_START,i.handleConfigStart)},i.handleConfigStart=function(e){var i;("configuration-change"===e||"user-configuration"===e)&&(i=a.getConfigurationId(),n.getData({},"config_start","","car",{configurationID:i,configurationStartType:n.getTrackingConfigurationStartType(e),source:n.getTrackingSource(e)}).then(t.sendData)["catch"](function(e){console.log("conversion tracking error (config start): "+e)}))},i.handleConfigSaved=function(e){n.getData({},"config_save","","car",{audicode:e,target:"carstore"}).then(t.sendData)["catch"](function(e){console.log("conversion tracking error (config save): "+e)})},r.initializePromise=function(e){return new Promise(function(t){i.eventBus=e,i.addEvents(),t("tracking/events/conversion-tracking.js")})},r}),define("text!templates/equipment-search.tpl",[],function(){return'<div class="nm-layer-toolbar">\n	<div class="nm-button-close nm-b-icon nm-icon-close">\n		<span>{{=window.i18n[\'close-icon\']}}</span>\n	</div>\n</div>\n<div class="nm-layer-inner nm-equipment-search-layer-wrapper">\n	<div class="nm-md-equipment-search">\n		<header class="nm-equipment-search-header">\n			<h2 class="nm-el-hdl nm-el-hdl-02">{{=window.i18n[\'nemo.ui.equipment-search.headline\']}}</h2>\n\n			<div class="nm-equipment-search-form">\n				<form action="#search=" method="GET">\n					<fieldset>\n						<input name="q" class="nm-equipment-search-input" type="text" placeholder=\'{{=window.i18n["search-layer.equipment-search-input-placeholder"]}}\'/>\n						<input type="reset" class="nm-equipment-search-reset" value="X" />\n					</fieldset>\n				</form>\n				<div class="nm-equipment-search-result-container">\n				</div>\n			</div>\n		</header>\n		<footer class="nm-equipment-search-footer">\n			<span class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b"><span class="nm-j-configurator-text-carlineName"></span> <span class="nm-j-configurator-text-description nm-el-lbl nm-el-lbl-01"></span></span>\n			<span class=""><span class="nm-j-configurator-text-price nm-el-hdl nm-el-hdl-04 nm-at-hdl-b"></span> <span class="nm-el-lbl nm-el-lbl-01 nm-equipment-search-rate">({{=window.i18n["nemo.ui.equipment-search.rate"]}} <span class="nm-j-configurator-text-rate"></span>)</span></span>\n		</footer>\n		<main class="nm-equipment-search-main">\n		</main>\n	</div>\n</div>\n'}),define("text!templates/equipment-search-results.tpl",[],function(){return'{{?it.length}}\n	{{~ it :group }}\n		{{? !!group.family}}\n			{{? !!group.items}}\n\n\n			/*hide groups where all elements have hidden status*/\n			{{var $hideGroup = false;}}\n			{{~ group.items :itemcheck }}\n				{{? !!itemcheck.status && itemcheck.status == "00000"}}\n					{{$hideGroup = true;}}\n				{{?}}\n			{{~}}\n\n			{{? !$hideGroup}}\n			<ul class="nm-equipment-search-result-group">\n				<li>\n					<div class="nm-el-hdl nm-el-hdl-04 nm-at-hdl-b">{{=group.family.name}}</div>\n					<ul class="nm-equipment-search-result-list">\n					{{~ group.items :item }}\n						<li class="nm-j-configurator-item nm-j-configurator-status_{{=item.status}} clearfix"\n						data-configurator-id="{{=item.id}}">\n							<div class="nm-equipment-search-result-item-wrap">\n								<div class="nm-equipment-search-result-image">\n									{{? !!item.image}}\n									<img src="{{=item.image}}" alt="{{=item.name}}" class="nm-image" />\n									{{?}}\n								</div>\n\n								<div class="nm-equipment-search-result-content-wrap">\n									<div class="nm-equipment-search-result-desc">\n										<p class="nm-j-configurator-name nm-el-lbl nm-el-lbl-01 nm-at-lbl-b">\n											{{=item.name}}\n											{{? !!item.nonrenderable && item.nonrenderable == true }}\n												<span class="nm-el-pg nm-el-pg-04"><br />{{=window.i18n[\'configuration.not-rendable-message\']}}</span>\n											{{?}}\n										</p>\n										{{? !!item.description}}\n										<p class="nm-equipment-search-result-description nm-el-pg nm-el-pg-04">\n											{{= item.description || \'\'}}\n										</p>\n										{{?}}\n									</div>\n									<div class="nm-equipment-search-result-icons">\n										{{?!!item.url}}\n										<a class="nm-info nm-layerLink" href="{{=item.url}}" title="{{=window.i18n[\'more-information\']}}" data-tracking-link="{&quot;prop5&quot;:&quot;{{=window.i18n[\'more-information\']}}&quot;,&quot;prop7&quot;:&quot;{{=it.audicode}}&quot;,&quot;eVar3&quot;:&quot;{{=it.audicode}}&quot;,&quot;eVar9&quot;:&quot;tools/nemo-search&quot;,&quot;events&quot;:&quot;event28&quot;}"></a>\n										{{?}}\n										<span class="nm-conflict-icon" title="#I18N("nemo.ui.common.conflict" "Konflikt")"></span>\n									</div>\n									<div class="nm-equipment-search-result-price nm-el-lbl nm-el-lbl-01">\n										{{? !!item.price}}\n										<span class="nm-j-configurator-text-price">{{=item.price}}</span>\n										{{?}}\n									</div>\n									<div class="nm-equipment-search-result-add-btn">\n										<a class="nm-el-btn nm-el-btn-02 nm-j-configurator-delegate-click" href="#">\n										    <span class="nm-at-btn-state01">{{=window.i18n[\'search-layer.add-item\']}}</span>\n										    <span class="nm-at-btn-state02">{{=window.i18n[\'search-layer.item-included\']}}</span>\n										    <span class="nm-at-btn-state03">{{=window.i18n[\'search-layer.remove-item\']}}</span>\n										</a>\n									</div>\n								</div>\n							</div>\n						</li>\n					{{~}}\n					</ul>\n				</li>\n			</ul>\n			{{?}}\n			{{?}}\n		{{?}}\n	{{~}}\n{{?}}\n'}),define("module/equipment-search",["events","core/template","text!templates/equipment-search.tpl","text!templates/equipment-search-results.tpl","configurator/dpu-api","core/layer/jslayer"],function(e,t,n,a,i,r){"use strict";var o={},s={__:o};return s.initialized=!1,o.oDefaults={sSelectorLayerOuter:".nm-layer-equipment-search-layer",sSelectorSnippetText:".nm-j-configurator-text-",sSelectorFooter:".nm-equipment-search-footer",sSelectorResultsWrap:".nm-equipment-search-result-container",sSelectorSearchInput:".nm-equipment-search-input",sSelectorSearchForm:".nm-equipment-search-form form"},o.searchListArr=[],o.getAllItems=function(){var e,t,n,a,r,s=i.getFamilies();if(o.searchListArr=[],s)for(e in s)if(e&&"equipment"===s[e].type&&(a={family:s[e]},t=i.getItemsByFamily(e))){a.items=[];for(n in t)n&&(r=i.getItem(n),a.items.push(r));o.searchListArr.push(a)}return o.searchListArr},o.handleConfigUpdate=function(){var e,t,n,a,i=o.getLayer();i&&(o.updateFooterText(i),e=o.getAllItems(),e&&(t=o.getSearchString(),t.length>1?(n=o.validateSearchString(t),a=o.parseResults(n.search),o.populateResultList(a)):o.populateResultList(e)))},o.parseResults=function(e){var t,n=[];if(e)for(t in e)t&&e[t].value&&n.push(e[t].value);return n},o.populateResultList=function(e){var n,i=o.getResultsWrapContainer();e&&i&&(n=t.render(a,e),i.innerHTML=n)},o.getLayer=function(){return document.querySelector(o.oDefaults.sSelectorLayerOuter)?document.querySelector(o.oDefaults.sSelectorLayerOuter):!1},o.getResultsWrapContainer=function(){var e=document.querySelector(o.oDefaults.sSelectorResultsWrap);if(e){for(;e.firstChild;)e.removeChild(e.firstChild);return e}return!1},o.updateFooterText=function(e){var t,n,a,r=!1;if(e)if(i.isConfigurable()&&i.getConfiguration()){a=i.getConfiguration();for(t in a)a[t]&&("rate"===t&&(r=!0),n=e.querySelector(o.oDefaults.sSelectorFooter+" "+o.oDefaults.sSelectorSnippetText+t),n&&(n.textContent=a[t]));e.querySelector(o.oDefaults.sSelectorFooter+" > span").classList.remove("nm-hidden"),r?e.querySelector(".nm-equipment-search-rate").classList.remove("nm-hidden"):e.querySelector(".nm-equipment-search-rate").classList.add("nm-hidden")}else e.querySelector(o.oDefaults.sSelectorFooter+" > span").classList.add("nm-hidden")},o.getSearchString=function(){var e,t=document.querySelector(o.oDefaults.sSelectorSearchInput);return e=t?t.value:"",e=e.replace(/^\s+/g,"").replace(/</g,"").replace(/>/g,"")},o.handleSearch=function(e){var t,n,a,i=o.getSearchString(),r={},s=document.querySelector(o.oDefaults.sSelectorSearchForm);if(s){if(n=s.getAttribute("data-current")||"",a=n!==i||"click"===e.type,e.preventDefault(),e.stopImmediatePropagation(),16===e.keyCode||13===e.keyCode)return;s.setAttribute("data-current",i),i.length>1&&a?(r=o.validateSearchString(i),t=o.parseResults(r.search),o.populateResultList(t)):0===i.length&&a&&o.resetSearch()}},o.validateSearchString=function(e){var t,n=e,a={};return n&&0!==n.length?(-1!==n.indexOf("|")&&(a.prstring=n),i.getSearchStopWords()&&(t=new RegExp("\\b(?:i|"+i.getSearchStopWords()+")\\b\\s*","gi"),n=n.replace(t,"")),a.search=(!!n&&n.length)>1?i.search(n,!0):[],a.searchString=n?n:o.getSearchString(),a):[]},o.resetSearch=function(){o.searchListArr&&o.searchListArr.length&&o.populateResultList(o.searchListArr)},o.generateLayerHtml=function(){return'<div class="nm-layer-wrapper nm-layer-wrapper-equipment-search-layer"><div class="nm-layer-equipment-search-layer nm-j-jslayer nm-layer"></div></div>'},o.positionFooter=function(){var e,t=document.querySelector(o.oDefaults.sSelectorFooter),n=document.querySelector(".nm-layer-wrapper-equipment-search-layer");t&&(e=n?n.scrollTop:0,t.style.top=document.documentElement.clientHeight+e-t.offsetHeight-15+"px")},o.handleLayerLoaded=function(){var e=t.render(n,null),a=document.querySelector(".nm-layer-wrapper-equipment-search-layer"),i=document.querySelector(o.oDefaults.sSelectorLayerOuter);i&&(i.innerHTML=e,o.legacyEventBus.on("keyup",".nm-equipment-search-input",o.handleSearch),o.legacyEventBus.on("paste",".nm-equipment-search-input",o.handleSearch),o.legacyEventBus.on("click",".nm-equipment-search-input",o.handleSearch),o.legacyEventBus.on("click",".nm-equipment-search-submit",o.handleSearch),o.legacyEventBus.on("click",".nm-equipment-search-reset",o.resetSearch),o.legacyEventBus.on("submit",".nm-equipment-search-form form",o.handleSearch),a&&a.addEventListener("scroll",o.positionFooter)),o.handleConfigUpdate()},o.addEvents=function(){r.register("equipmentSearchlayer",o.generateLayerHtml),o.eventBus.on(e.LAYER_LOADED,o.handleLayerLoaded),o.eventBus.on(e.CONFIG_UPDATE,o.handleConfigUpdate),s.initialized=!0},s.dispose=function(){var t=document.querySelector(".nm-layer-wrapper-equipment-search-layer");console.log("dispose esmd"),o.legacyEventBus.off("keyup",".nm-equipment-search-input",o.handleSearch),o.legacyEventBus.off("paste",".nm-equipment-search-input",o.handleSearch),o.legacyEventBus.off("click",".nm-equipment-search-input",o.handleSearch),o.legacyEventBus.off("click",".nm-equipment-search-submit",o.handleSearch),o.legacyEventBus.off("click",".nm-equipment-search-reset",o.resetSearch),o.legacyEventBus.off("submit",".nm-equipment-search-form form",o.handleSearch),o.eventBus.off(e.LAYER_LOADED,o.handleLayerLoaded),o.eventBus.off(e.CONFIG_UPDATE,o.handleConfigUpdate),t&&t.removeEventListener("scroll")},s.initializePromise=function(e){return new Promise(function(t){o.eventBus=e,o.legacyEventBus=jQuery("body"),o.addEvents(),t("module/equipment-search.js")})},s}),define("module/pdf-service-link",["events","utils/dom","module/pattern-matching/pattern-matching"],function(e,t,n){"use strict";var a={},i={__:a};return a.oDefaults={sSelectorModule:".j-pdf-configuration"},a.eventBus=null,a.addEvents=function(){t.getEventDelegate("body").on("click",a.oDefaults.sSelectorModule,a.callPDFServiceWithAudicode)},a.callPDFServiceWithAudicode=function(e){var t;t=SETUPS.get("nemo.pdf.url"),console.log("PDFURl: ",t),t&&n.getReplacedUrl(t+"/audicode/{{audicode}}","audi.de").then(function(e){window.location=e})["catch"](function(e){console.warn("PDF SERVICE LINK ERROR: something went wrong in pattern matching: ",e)})},i.initializePromise=function(e){return new Promise(function(t){a.eventBus=e,a.addEvents(),t("module/pdf-service-link.js")})},i}),!function(e,t){"function"==typeof define&&define.amd?define("svg4everybody",[],function(){return e.svg4everybody=t()}):"object"==typeof exports?module.exports=t():e.svg4everybody=t()}(this,function(){function e(e,t){if(t){var n=document.createDocumentFragment(),a=!e.getAttribute("viewBox")&&t.getAttribute("viewBox");a&&e.setAttribute("viewBox",a);for(var i=t.cloneNode(!0);i.childNodes.length;)n.appendChild(i.firstChild);e.appendChild(n)}}function t(t){t.onreadystatechange=function(){if(4===t.readyState){var n=t._cachedDocument;n||(n=t._cachedDocument=document.implementation.createHTMLDocument(""),n.body.innerHTML=t.responseText,t._cachedTarget={}),t._embeds.splice(0).map(function(a){var i=t._cachedTarget[a.id];i||(i=t._cachedTarget[a.id]=n.getElementById(a.id)),e(a.svg,i)})}},t.onreadystatechange()}function n(n){function a(){for(var n=0;n<d.length;){var o=d[n],s=o.parentNode;if(s&&/svg/i.test(s.nodeName)){var l=o.getAttribute("xlink:href");if(i&&(!r.validate||r.validate(l,s,o))){s.removeChild(o);var m=l.split("#"),g=m.shift(),f=m.join("#");if(g.length){var p=c[g];p||(p=c[g]=new XMLHttpRequest,p.open("GET",g),p.send(),p._embeds=[]),p._embeds.push({svg:s,id:f}),t(p)}else e(s,document.getElementById(f))}}else++n}u(a,67)}var i,r=Object(n),o=/\bTrident\/[567]\b|\bMSIE (?:9|10)\.0\b/,s=/\bAppleWebKit\/(\d+)\b/,l=/\bEdge\/12\.(\d+)\b/;i="polyfill"in r?r.polyfill:o.test(navigator.userAgent)||(navigator.userAgent.match(l)||[])[1]<10547||(navigator.userAgent.match(s)||[])[1]<537;var c={},u=window.requestAnimationFrame||setTimeout,d=document.getElementsByTagName("use");i&&a()}return n}),define("module/svg-polyfill",["svg4everybody","events"],function(e,t){"use strict";var n={},a={__:n};return n.callSvg4Everybody=function(){svg4everybody()},n.initialize=function(){n.addEvents()},n.addEvents=function(){n.eventBus.on(t.LAYER_LOADED,n.callSvg4Everybody),n.eventBus.on(t.PAGE_LOADED,n.callSvg4Everybody)},a.initializePromise=function(e){return new Promise(function(t){n.eventBus=e,n.initialize(),n.callSvg4Everybody(),t("module/svg-polyfill.js")})},a}),define("init",["jquery","es6-promise","core/signal","events","configurator/ajax","router","configurator/dpu-model","configurator/dpu-api","configurator/dpu-controller","module/dsh/api","utils/dom","core/content","configurator/loading-indicator","configurator/dom-state","ui/cookie-policy","core/layer/api","core/layer/animation","core/layer/cms","core/layer/element","core/layer/static","core/page/pg-main","core/page/pg-dom","core/page/pg-title","core/page/pg-preload","core/layer/jslayer","core/template","module/device","core/scroll","module/maw","module/menuflyout","module/model-navigation-wrap","module/cart","core/storage","module/dns","module/container","module/stage","configurator/conflict","configurator/transfer","module/startlayer","module/pattern","module/scroll-sticky-elements","module/compare","module/fullscreen","module/state","module/audicode","module/scroll-sticky-progressbar","module/error","module/notification","module/scroll","module/infobox","module/placeholder","module/carline-mapping","form/core.form","form/simple","form/select","configurator/user-configurations","configurator/last-configuration","module/search","module/gsa-search","module/carstore","module/swipe-stage","module/zip-download","module/vtp","module/dealermap","module/dsh/data","module/expertmode","module/summary-techdata","module/supportbar","module/homepage","module/poa","module/iframe","module/iframe-height","module/pattern-matching/pattern-matching","module/pattern-matching/pattern-audicode","module/pattern-matching/pattern-carlineId","module/pattern-matching/pattern-partnerId","module/pattern-matching/pattern-configuration","module/audicode-iframe","module/recommendations","module/preconfs-teaser","module/preconfiguration-teaser","module/interactive-image-rotation","module/interactive-image-slider","module/configuratorteaser","module/visualizer","module/navigation","module/renderinglayer","module/renderinginjector","module/wallet","tracking/configuration-tracker","tracking/link-tracker","tracking/teaser-tracker","tracking/component-tracker","tracking/gsa-tracker","tracking/microconversions-tracker","tracking/omniture-api","tracking/omniture-constants","tracking/page-tracker","tracking/renderinglayer-tracker","tracking/form-tracker","tracking/search-tracker","tracking/tracking-config","tracking/tracking-dispatcher","tracking/tracking-utils","module/engine-selection-list","module/tdrdealer","iecors","module/teasergrid","module/bicolor","mediagallery/mg-model","mediagallery/mg-controller","mediagallery/mg-counter","mediagallery/mg-stage","mediagallery/mg-thumbnailslider","mediagallery/mg-download","core/legacy-eventemitter","module/socialreader","module/layer-multi-stage","module/vtp-teaser","module/video-new","module/your-payment","module/ave/ave-dom","module/ave/ave-api","module/inlinerendering","module/dynamic-recommendation","module/scs-matching","module/scs-matching-basket","module/iph","error-logging","module/inlinerendering-aoz","module/notification-bar","module/usabilla","tracking/events/click-tracking","tracking/events/page-tracking","tracking/events/layer-tracking","tracking/events/configuration-tracking","tracking/events/conversion-tracking","module/equipment-search","module/pdf-service-link","module/svg-polyfill"],function(e,t,n,a,i,r,o,s,l,c){"use strict";var u={},d={__:u};return u.dependenciesArr=arguments,u.globalEventEmitter=n.getEmitter(),u.onSetupsError=function(e){throw e},u.setFormAPISetups=function(){SETUPS.set("nemo.url.formapi",SETUPS.get("nemo.url.dpu")+"forms"),SETUPS.set("nemo.url.form.carstore",SETUPS.get("nemo.url.dpu")+"carstore?action=store"),SETUPS.set("nemo.url.form.login",SETUPS.get("nemo.url.dpu")+"login"),SETUPS.set("nemo.url.form.audicode",SETUPS.get("nemo.url.dpu")+"audicode"),SETUPS.set("nemo.form.templatemap",{"enquiry-QualificationDataCurrentVehicleModel":"nm-id-form-select-tpl","sv_drd-vvega-probe-dealer-page":"nm-id-form-tdrdeal-vvega-enquiry-dealer-page-form-tpl","enquiry-vvega-enquiry-dealer-page":"nm-id-form-tdrdeal-vvega-enquiry-dealer-page-form-tpl","tdrdealerreq-vvega-probe-dealer-page":"nm-id-form-tdrdeal-vvega-enquiry-dealer-page-form-tpl"})},u.onSetupsLoaded=function(){u.setFormAPISetups(),SETUPS.set("nemo.core.configurator.dpu.oAjaxRESTConfigurationURIConfiguration",SETUPS.get("nemo.url.dpu")+"configuration"),SETUPS.set("nemo.core.configurator.dpu.oAjaxRESTConfigurationURIPrint",SETUPS.get("nemo.url.dpu")+"pdf"),SETUPS.set("nemo.core.configurator.dpu.oAjaxRESTConfiguration",{versionRequest:{type:"GET",url:SETUPS.get("nemo.url.dpu")+"version",params:{header:{context:"context"},configuration:{carline:"carline"}}},itemAdd:{type:"GET",url:SETUPS.get("nemo.core.configurator.dpu.oAjaxRESTConfigurationURIConfiguration"),action:{itemChanged:"set"},params:{header:{context:"context",subsession:"subsession",version:"version"},configuration:{prstring:"ids",itemChanged:"PARAM-id"},items:{count:"*"}}},itemRemove:{type:"GET",url:SETUPS.get("nemo.core.configurator.dpu.oAjaxRESTConfigurationURIConfiguration"),action:{itemChanged:"remove"},params:{header:{context:"context",subsession:"subsession",version:"version"},configuration:{prstring:"ids",itemChanged:"PARAM-id"},items:{count:"*"}}},loadByIds:{type:"GET",url:SETUPS.get("nemo.core.configurator.dpu.oAjaxRESTConfigurationURIConfiguration"),params:{header:{context:"context",version:"version"},configuration:{items:"ids"}}},queue:{type:"GET",url:SETUPS.get("nemo.core.configurator.dpu.oAjaxRESTConfigurationURIConfiguration"),params:{header:{context:"context",subsession:"subsession",version:"version"}}}}),nemo.namespace("configurator.api"),
nemo.configurator.api=s,nemo.namespace("configurator.setups"),nemo.configurator.setups=SETUPS,console.log("Init.js - trigger: "+a.APP_READY),u.globalEventEmitter.emit(a.APP_READY);var e=document.querySelector("#dsh");return e&&c.initialize(e),u.globalEventEmitter.on(a.PAGE_LOADED,function(){var e=document.querySelector("#dsh");e&&c.initialize(e)}),!0},u.setSetupParams=function(){SETUPS.set("nemo.nav.navSelector",".nm-navigation-derivative-main-list"),SETUPS.set("nemo.nav.subNavSelector",".nm-navigation-derivative-sub-list"),SETUPS.set("nemo.localize.currencySeparatorComma",!0),i.__.oDefaults.xhrTimeout=3e4,console.info("XHRtimeout increased to "+i.__.oDefaults.xhrTimeout+" ms")},u.checkSetupReady=function(){var e=new Promise(function(e,t){var n=0,a=20,i=window.setInterval(function(){n+=1,SETUPS.get("nemo.url.static")&&(window.clearInterval(i),e("ready")),n>=a&&(window.clearInterval(i),t(new Error("SETUPS unavailable!!!"))),console.log("loading setup tries: "+n)},10)});return e.then(u.onSetupsLoaded,u.onSetupsError)},u.doPromiseInitialization=function(){var e,t,n=[];for(e=0,t=u.dependenciesArr.length;t>e;e++)"object"==typeof u.dependenciesArr[e]&&u.dependenciesArr[e].initializePromise&&n.push(u.dependenciesArr[e].initializePromise(u.globalEventEmitter));n.length&&Promise.all(n).then(function(e){console.log("NEMO promise INITIALIZATION completed ("+e.length+"|"+u.dependenciesArr.length+")",e),console.log("require defined modules:",require.s.contexts._.defined),SETUPS.get("stockcar.scs.market")?console.info("waiting for SC Modules to be initializedâ¦"):u.globalEventEmitter.emit(a.APP_INITIALIZED,{context:"nemo"}),console.log("##############################################")},function(e){console.error("NEMO INITIALIZATION FAILED!",e)})},u.globalEventEmitter.on(a.APP_INITIALIZED,function(e){console.warn("APP initialized by '"+e.context+"'")}),e(document).ready(function(){console.log("Init.js -- dom ready"),s.supportsLocalStorage()||console.warn("No Support for Local Storage!!!"),u.setSetupParams(),u.checkSetupReady().then(u.doPromiseInitialization)["catch"](console.error)}),d}),requirejs.onError=function(e){throw console.log(e.requireType),"timeout"===e.requireType&&console.log("modules: "+e.requireModules),e},window.i18n=window.i18n||{};var nemo=nemo||{};if(nemo.namespace=function(e){var t,n=e.split("."),a=nemo;for(t=0;t<n.length;t++)"undefined"==typeof a[n[t]]&&(a[n[t]]={}),a=a[n[t]];return a},"function"!=typeof String.prototype.trim&&(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Array.prototype.indexOf||(Array.prototype.indexOf=function(e,t){for(var n=t||0,a=this.length;a>n;n++)if(this[n]===e)return n;return-1}),"function"==typeof window.XDomainRequest){var isIpAdress=/(\d{3}\.?){1,}/.test(window.location.hostname),domain;domain=isIpAdress?window.location.hostname:window.location.hostname.split(".").slice(-2).join("."),document.domain=domain}window.XMLHttpRequest||(window.XMLHttpRequest=function(){try{return new window.ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(e){return null}}),window.addEventListener("unhandledrejection",function(e){console.error("Unhandled rejection (promise: ",e.promise,", reason: ",e.reason,").")}),require(["init"]),define("app",function(){});
//# sourceMappingURL=nemo.app.min.js.map